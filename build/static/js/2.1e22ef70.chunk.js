/*! For license information please see 2.1e22ef70.chunk.js.LICENSE.txt */
(this.webpackJsonpfiregram=this.webpackJsonpfiregram||[]).push([[2],[function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return a})),n.d(e,"d",(function(){return s}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function o(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function s(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create},function(t,e,n){"use strict";t.exports=n(22)},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return u})),n.d(e,"b",(function(){return w})),n.d(e,"c",(function(){return b})),n.d(e,"d",(function(){return E})),n.d(e,"e",(function(){return c})),n.d(e,"f",(function(){return I})),n.d(e,"g",(function(){return a})),n.d(e,"h",(function(){return s})),n.d(e,"i",(function(){return C})),n.d(e,"j",(function(){return l})),n.d(e,"k",(function(){return p})),n.d(e,"l",(function(){return d})),n.d(e,"m",(function(){return y})),n.d(e,"n",(function(){return g})),n.d(e,"o",(function(){return h})),n.d(e,"p",(function(){return f})),n.d(e,"q",(function(){return v})),n.d(e,"r",(function(){return m}));var r=n(13),i=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296===(64512&i)&&r+1<t.length&&56320===(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(i(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function a(t){return s(void 0,t)}function s(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=s(t[n],e[n]));return t}var u=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"===typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function c(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=Object(r.a)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[o.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),o.encodeString(JSON.stringify(s),!1),""].join(".")}function l(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function h(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(l())}function f(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(e){return!1}}function p(){return"object"===typeof self&&self.self===self}function d(){var t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}function v(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function y(){return l().indexOf("Electron/")>=0}function g(){var t=l();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function m(){return l().indexOf("MSAppHost/")>=0}var b=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,w.prototype.create),o}return Object(r.b)(e,t),e}(Error),w=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?_(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new b(i,s,r);return u},t}();function _(t,e){return t.replace(T,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var T=/\{\$([^}]+)}/g;function E(t,e){return Object.prototype.hasOwnProperty.call(t,e)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"===typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"===typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();function I(t,e){var n=new S(t,e);return n.subscribe.bind(n)}var S=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!==typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"===typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=k),void 0===r.error&&(r.error=k),void 0===r.complete&&(r.complete=k);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function k(){}function C(t){return t&&t._delegate?t._delegate:t}}).call(this,n(12))},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return I})),n.d(e,"b",(function(){return Ju})),n.d(e,"c",(function(){return uc})),n.d(e,"d",(function(){return nc})),n.d(e,"e",(function(){return $u})),n.d(e,"f",(function(){return ec})),n.d(e,"g",(function(){return zs})),n.d(e,"h",(function(){return tc})),n.d(e,"i",(function(){return ic})),n.d(e,"j",(function(){return lc})),n.d(e,"k",(function(){return cc})),n.d(e,"l",(function(){return Xu})),n.d(e,"m",(function(){return pc})),n.d(e,"n",(function(){return Ds})),n.d(e,"o",(function(){return yc})),n.d(e,"p",(function(){return Ls})),n.d(e,"q",(function(){return vc})),n.d(e,"r",(function(){return fc}));var r=n(2),i=n(6),o=n(4),a=n(0),s=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();s.o=-1;var u={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},c=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(a.b)(e,t),e}(Error),l=new i.b("@firebase/firestore");function h(){return l.logLevel}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=i.a.DEBUG){var r=e.map(v);l.debug.apply(l,Object(a.d)(["Firestore (8.6.3): "+t],r))}}function p(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=i.a.ERROR){var r=e.map(v);l.error.apply(l,Object(a.d)(["Firestore (8.6.3): "+t],r))}}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(l.logLevel<=i.a.WARN){var r=e.map(v);l.warn.apply(l,Object(a.d)(["Firestore (8.6.3): "+t],r))}}function v(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function y(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.6.3) INTERNAL ASSERTION FAILED: "+t;throw p(e),new Error(e)}function g(t,e){t||y()}function m(t,e){return t}function b(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var w=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=b(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function _(t,e){return t<e?-1:t>e?1:0}function T(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function E(t){return t+"\0"}var I=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new c(u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new c(u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new c(u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new c(u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?_(this.nanoseconds,t.nanoseconds):_(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),S=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new I(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function k(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function C(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function x(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var A=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&y(),void 0===n?n=t.length-e:n>t.length-e&&y(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.b)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new c(u.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(A),N=/^[_a-zA-Z][_a-zA-Z0-9]*$/,P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.b)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return N.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new c(u.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new c(u.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var l=t[i+1];if("\\"!==l&&"."!==l&&"`"!==l)throw new c(u.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=l,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new c(u.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(A),R=function(){function t(t){this.fields=t,t.sort(P.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return T(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),D=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return _(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();D.EMPTY_BYTE_STRING=new D("");var L=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function M(t){if(g(!!t),"string"==typeof t){var e=0,n=L.exec(t);if(g(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:j(t.seconds),nanos:j(t.nanos)}}function j(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function F(t){return"string"==typeof t?D.fromBase64String(t):D.fromUint8Array(t)}function U(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function V(t){var e=M(t.mapValue.fields.__local_write_time__.timestampValue);return new I(e.seconds,e.nanos)}function q(t){return null==t}function B(t){return 0===t&&1/t==-1/0}function z(t){return"number"==typeof t&&Number.isInteger(t)&&!B(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var K=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(O.fromString(e))},t.fromName=function(e){return new t(O.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===O.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return O.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new O(e.slice()))},t}();function H(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?U(t)?4:10:y()}function W(t,e){var n=H(t);if(n!==H(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return V(t).isEqual(V(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=M(t.timestampValue),r=M(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return F(t.bytesValue).isEqual(F(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return j(t.geoPointValue.latitude)===j(e.geoPointValue.latitude)&&j(t.geoPointValue.longitude)===j(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return j(t.integerValue)===j(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=j(t.doubleValue),r=j(e.doubleValue);return n===r?B(n)===B(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return T(t.arrayValue.values||[],e.arrayValue.values||[],W);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(k(n)!==k(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!W(n[i],r[i])))return!1;return!0}(t,e);default:return y()}}function G(t,e){return void 0!==(t.values||[]).find((function(t){return W(t,e)}))}function Q(t,e){var n=H(t),r=H(e);if(n!==r)return _(n,r);switch(n){case 0:return 0;case 1:return _(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=j(t.integerValue||t.doubleValue),r=j(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Y(t.timestampValue,e.timestampValue);case 4:return Y(V(t),V(e));case 5:return _(t.stringValue,e.stringValue);case 6:return function(t,e){var n=F(t),r=F(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=_(n[i],r[i]);if(0!==o)return o}return _(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=_(j(t.latitude),j(e.latitude));return 0!==n?n:_(j(t.longitude),j(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Q(n[i],r[i]);if(o)return o}return _(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=_(r[a],o[a]);if(0!==s)return s;var u=Q(n[r[a]],i[o[a]]);if(0!==u)return u}return _(r.length,o.length)}(t.mapValue,e.mapValue);default:throw y()}}function Y(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return _(t,e);var n=M(t),r=M(e),i=_(n.seconds,r.seconds);return 0!==i?i:_(n.nanos,r.nanos)}function X(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=M(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?F(e.bytesValue).toBase64():"referenceValue"in e?(r=e.referenceValue,K.fromName(r).toString()):"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var a=o[i];r?r=!1:n+=",",n+=a+":"+t(e.fields[a])}return n+"}"}(e.mapValue):y();var n,r}(t)}function $(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function J(t){return!!t&&"integerValue"in t}function Z(t){return!!t&&"arrayValue"in t}function tt(t){return!!t&&"nullValue"in t}function et(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function nt(t){return!!t&&"mapValue"in t}function rt(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},M(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return C(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=rt(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=rt(t.arrayValue.values[r]);return n}return Object.assign({},t)}var it=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!nt(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=rt(e)},t.prototype.setAll=function(t){var e=this,n=P.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var a=e.getFieldsMap(n);e.applyChanges(a,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=rt(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());nt(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return W(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];nt(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){C(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(rt(this.value))},t}();function ot(t){var e=[];return C(t.fields,(function(t,n){var r=new P([t]);if(nt(n)){var i=ot(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new R(e)}var at=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,S.min(),it.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,it.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,it.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=it.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=it.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),st=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function ut(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new st(t,e,n,r,i,o,a)}function ct(t){var e=m(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+X(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),q(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Tt(e.startAt)),e.endAt&&(n+="|ub:",n+=Tt(e.endAt)),e.h=n}return e.h}function lt(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!It(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!W(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!kt(t.startAt,e.startAt)&&kt(t.endAt,e.endAt)}function ht(t){return K.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var ft=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(a.b)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new pt(t,n,r):"array-contains"===n?new gt(t,r):"in"===n?new mt(t,r):"not-in"===n?new bt(t,r):"array-contains-any"===n?new wt(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new dt(t,n):new vt(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Q(e,this.value)):null!==e&&H(this.value)===H(e)&&this.m(Q(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return y()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),pt=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=K.fromName(r.referenceValue),i}return Object(a.b)(e,t),e.prototype.matches=function(t){var e=K.comparator(t.key,this.key);return this.m(e)},e}(ft),dt=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=yt("in",n),r}return Object(a.b)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(ft),vt=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=yt("not-in",n),r}return Object(a.b)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(ft);function yt(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return K.fromName(t.referenceValue)}))}var gt=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(a.b)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Z(e)&&G(e.arrayValue,this.value)},e}(ft),mt=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(a.b)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&G(this.value.arrayValue,e)},e}(ft),bt=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(a.b)(e,t),e.prototype.matches=function(t){if(G(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!G(this.value.arrayValue,e)},e}(ft),wt=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(a.b)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Z(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return G(e.value.arrayValue,t)}))},e}(ft),_t=function(t,e){this.position=t,this.before=e};function Tt(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return X(t)})).join(",")}var Et=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function It(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function St(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?K.comparator(K.fromName(a.referenceValue),n.key):Q(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function kt(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!W(t.position[n],e.position[n]))return!1;return!0}var Ct=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function xt(t,e,n,r,i,o,a,s){return new Ct(t,e,n,r,i,o,a,s)}function At(t){return new Ct(t)}function Ot(t){return!q(t.limit)&&"F"===t.limitType}function Nt(t){return!q(t.limit)&&"L"===t.limitType}function Pt(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Rt(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Dt(t){return null!==t.collectionGroup}function Lt(t){var e=m(t);if(null===e.p){e.p=[];var n=Rt(e),r=Pt(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Et(n)),e.p.push(new Et(P.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Et(P.keyField(),u))}}}return e.p}function Mt(t){var e=m(t);if(!e.T)if("F"===e.limitType)e.T=ut(e.path,e.collectionGroup,Lt(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Lt(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new Et(o.field,a))}var s=e.endAt?new _t(e.endAt.position,!e.endAt.before):null,u=e.startAt?new _t(e.startAt.position,!e.startAt.before):null;e.T=ut(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.T}function jt(t,e,n){return new Ct(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ft(t,e){return lt(Mt(t),Mt(e))&&t.limitType===e.limitType}function Ut(t){return ct(Mt(t))+"|lt:"+t.limitType}function Vt(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+X(e.value);var e})).join(", ")+"]"),q(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Tt(t.startAt)),t.endAt&&(e+=", endAt: "+Tt(t.endAt)),"Target("+e+")"}(Mt(t))+"; limitType="+t.limitType+")"}function qt(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):K.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!St(t.startAt,Lt(t),e))&&(!t.endAt||!St(t.endAt,Lt(t),e))}(t,e)}function Bt(t){return function(e,n){for(var r=!1,i=0,o=Lt(t);i<o.length;i++){var a=o[i],s=zt(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function zt(t,e,n){var r=t.field.isKeyField()?K.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Q(r,i):y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return y()}}function Kt(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:B(e)?"-0":e}}function Ht(t){return{integerValue:""+t}}function Wt(t,e){return z(e)?Ht(e):Kt(t,e)}var Gt=function(){this._=void 0};function Qt(t,e,n){return t instanceof $t?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Jt?Zt(t,e):t instanceof te?ee(t,e):function(t,e){var n=Xt(t,e),r=re(n)+re(t.A);return J(n)&&J(t.A)?Ht(r):Kt(t.R,r)}(t,e)}function Yt(t,e,n){return t instanceof Jt?Zt(t,e):t instanceof te?ee(t,e):n}function Xt(t,e){return t instanceof ne?J(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var $t=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.b)(e,t),e}(Gt),Jt=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(a.b)(e,t),e}(Gt);function Zt(t,e){for(var n=ie(e),r=function(t){n.some((function(e){return W(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var te=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(a.b)(e,t),e}(Gt);function ee(t,e){for(var n=ie(e),r=function(t){n=n.filter((function(e){return!W(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ne=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(a.b)(e,t),e}(Gt);function re(t){return j(t.integerValue||t.doubleValue)}function ie(t){return Z(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var oe=function(t,e){this.field=t,this.transform=e},ae=function(t,e){this.version=t,this.transformResults=e},se=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function ue(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var ce=function(){};function le(t,e,n){t instanceof ve?function(t,e,n){var r=t.value.clone(),i=me(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof ye?function(t,e,n){if(ue(t.precondition,e)){var r=me(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(ge(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function he(t,e,n){t instanceof ve?function(t,e,n){if(ue(t.precondition,e)){var r=t.value.clone(),i=be(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(de(e),r).setHasLocalMutations()}}(t,e,n):t instanceof ye?function(t,e,n){if(ue(t.precondition,e)){var r=be(t.fieldTransforms,n,e),i=e.data;i.setAll(ge(t)),i.setAll(r),e.convertToFoundDocument(de(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){ue(t.precondition,e)&&e.convertToNoDocument(S.min())}(t,e)}function fe(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=Xt(o.transform,a||null);null!=s&&(null==n&&(n=it.empty()),n.set(o.field,s))}return n||null}function pe(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&T(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Jt&&e instanceof Jt||t instanceof te&&e instanceof te?T(t.elements,e.elements,W):t instanceof ne&&e instanceof ne?W(t.A,e.A):t instanceof $t&&e instanceof $t}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function de(t){return t.isFoundDocument()?t.version:S.min()}var ve=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(a.b)(e,t),e}(ce),ye=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return Object(a.b)(e,t),e}(ce);function ge(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function me(t,e,n){var r=new Map;g(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,Yt(a,s,n[i]))}return r}function be(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,Qt(s,u,e))}return r}var we,_e,Te=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(a.b)(e,t),e}(ce),Ee=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(a.b)(e,t),e}(ce),Ie=function(t){this.count=t};function Se(t){switch(t){case u.OK:return y();case u.CANCELLED:case u.UNKNOWN:case u.DEADLINE_EXCEEDED:case u.RESOURCE_EXHAUSTED:case u.INTERNAL:case u.UNAVAILABLE:case u.UNAUTHENTICATED:return!1;case u.INVALID_ARGUMENT:case u.NOT_FOUND:case u.ALREADY_EXISTS:case u.PERMISSION_DENIED:case u.FAILED_PRECONDITION:case u.ABORTED:case u.OUT_OF_RANGE:case u.UNIMPLEMENTED:case u.DATA_LOSS:return!0;default:return y()}}function ke(t){if(void 0===t)return p("GRPC error has no .code"),u.UNKNOWN;switch(t){case we.OK:return u.OK;case we.CANCELLED:return u.CANCELLED;case we.UNKNOWN:return u.UNKNOWN;case we.DEADLINE_EXCEEDED:return u.DEADLINE_EXCEEDED;case we.RESOURCE_EXHAUSTED:return u.RESOURCE_EXHAUSTED;case we.INTERNAL:return u.INTERNAL;case we.UNAVAILABLE:return u.UNAVAILABLE;case we.UNAUTHENTICATED:return u.UNAUTHENTICATED;case we.INVALID_ARGUMENT:return u.INVALID_ARGUMENT;case we.NOT_FOUND:return u.NOT_FOUND;case we.ALREADY_EXISTS:return u.ALREADY_EXISTS;case we.PERMISSION_DENIED:return u.PERMISSION_DENIED;case we.FAILED_PRECONDITION:return u.FAILED_PRECONDITION;case we.ABORTED:return u.ABORTED;case we.OUT_OF_RANGE:return u.OUT_OF_RANGE;case we.UNIMPLEMENTED:return u.UNIMPLEMENTED;case we.DATA_LOSS:return u.DATA_LOSS;default:return y()}}(_e=we||(we={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";var Ce=function(){function t(t,e){this.comparator=t,this.root=e||Ae.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ae.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ae.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new xe(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new xe(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new xe(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new xe(this.root,t,this.comparator,!0)},t}(),xe=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Ae=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw y();if(this.right.isRed())throw y();var t=this.left.check();if(t!==this.right.check())throw y();return t+(this.isRed()?0:1)},t}();Ae.EMPTY=null,Ae.RED=!0,Ae.BLACK=!1,Ae.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw y()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ae(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var Oe=function(){function t(t){this.comparator=t,this.data=new Ce(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Ne(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Ne(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Ne=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Pe=new Ce(K.comparator);function Re(){return Pe}var De=new Ce(K.comparator);function Le(){return De}var Me=new Ce(K.comparator);function je(){return Me}var Fe=new Oe(K.comparator);function Ue(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Fe,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ve=new Oe(_);function qe(){return Ve}var Be=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,ze.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(S.min(),r,qe(),Re(),Ue())},t}(),ze=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(D.EMPTY_BYTE_STRING,n,Ue(),Ue(),Ue())},t}(),Ke=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},He=function(t,e){this.targetId=t,this.V=e},We=function(t,e,n,r){void 0===n&&(n=D.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ge=function(){function t(){this.S=0,this.D=Xe(),this.C=D.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Ue(),e=Ue(),n=Ue();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:y()}})),new ze(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Xe()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Qe=function(){function t(t){this.W=t,this.G=new Map,this.H=Re(),this.J=Ye(),this.Y=new Oe(_)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:y()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(ht(i))if(0===n){var o=new K(i.path);this.tt(e,o,at.newNoDocument(o,S.min()))}else g(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&ht(o.target)){var a=new K(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,at.newNoDocument(a,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=Ue();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Be(t,n,this.Y,this.H,r);return this.H=Re(),this.J=Ye(),this.Y=new Oe(_),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Ge,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new Oe(_),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||f("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Ge),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Ye(){return new Ce(K.comparator)}function Xe(){return new Ce(K.comparator)}var $e={asc:"ASCENDING",desc:"DESCENDING"},Je={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ze=function(t,e){this.databaseId=t,this.I=e};function tn(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function en(t,e){return t.I?e.toBase64():e.toUint8Array()}function nn(t,e){return tn(t,e.toTimestamp())}function rn(t){return g(!!t),S.fromTimestamp(function(t){var e=M(t);return new I(e.seconds,e.nanos)}(t))}function on(t,e){return function(t){return new O(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function an(t){var e=O.fromString(t);return g(An(e)),e}function sn(t,e){return on(t.databaseId,e.path)}function un(t,e){var n=an(e);if(n.get(1)!==t.databaseId.projectId)throw new c(u.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new c(u.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(fn(n))}function cn(t,e){return on(t.databaseId,e)}function ln(t){var e=an(t);return 4===e.length?O.emptyPath():fn(e)}function hn(t){return new O(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function fn(t){return g(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function pn(t,e,n){return{name:sn(t,e),fields:n.value.mapValue.fields}}function dn(t,e,n){var r=un(t,e.name),i=rn(e.updateTime),o=new it({mapValue:{fields:e.fields}}),a=at.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function vn(t,e){var n;if(e instanceof ve)n={update:pn(t,e.key,e.value)};else if(e instanceof Te)n={delete:sn(t,e.key)};else if(e instanceof ye)n={update:pn(t,e.key,e.data),updateMask:xn(e.fieldMask)};else{if(!(e instanceof Ee))return y();n={verify:sn(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof $t)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Jt)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof te)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof ne)return{fieldPath:e.field.canonicalString(),increment:n.A};throw y()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:nn(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:y()}(t,e.precondition)),n}function yn(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?se.updateTime(rn(t.updateTime)):void 0!==t.exists?se.exists(t.exists):se.none()}(e.currentDocument):se.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)g("REQUEST_TIME"===e.setToServerValue),n=new $t;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Jt(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new te(i)}else"increment"in e?n=new ne(t,e.increment):y();var o=P.fromServerFormat(e.fieldPath);return new oe(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=un(t,e.update.name),o=new it({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new R(e.map((function(t){return P.fromServerFormat(t)})))}(e.updateMask);return new ye(i,o,a,n,r)}return new ve(i,o,n,r)}if(e.delete){var s=un(t,e.delete);return new Te(s,n)}if(e.verify){var u=un(t,e.verify);return new Ee(u,n)}return y()}function gn(t,e){return{documents:[cn(t,e.path)]}}function mn(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=cn(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=cn(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(et(t.value))return{unaryFilter:{field:In(t.field),op:"IS_NAN"}};if(tt(t.value))return{unaryFilter:{field:In(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(et(t.value))return{unaryFilter:{field:In(t.field),op:"IS_NOT_NAN"}};if(tt(t.value))return{unaryFilter:{field:In(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:In(t.field),op:En(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:In(t.field),direction:Tn(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||q(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=wn(e.startAt)),e.endAt&&(n.structuredQuery.endAt=wn(e.endAt)),n}function bn(t){var e=ln(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){g(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=function t(e){return e?void 0!==e.unaryFilter?[Cn(e)]:void 0!==e.fieldFilter?[kn(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):y():[]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new Et(Sn(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return q(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=_n(n.startAt));var l=null;return n.endAt&&(l=_n(n.endAt)),xt(e,i,s,a,u,"F",c,l)}function wn(t){return{before:t.before,values:t.position}}function _n(t){var e=!!t.before,n=t.values||[];return new _t(n,e)}function Tn(t){return $e[t]}function En(t){return Je[t]}function In(t){return{fieldPath:t.canonicalString()}}function Sn(t){return P.fromServerFormat(t.fieldPath)}function kn(t){return ft.create(Sn(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return y()}}(t.fieldFilter.op),t.fieldFilter.value)}function Cn(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Sn(t.unaryFilter.field);return ft.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Sn(t.unaryFilter.field);return ft.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Sn(t.unaryFilter.field);return ft.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Sn(t.unaryFilter.field);return ft.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return y()}}function xn(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function An(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function On(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Pn(e)),e=Nn(t.get(n),e);return Pn(e)}function Nn(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Pn(t){return t+"\x01\x01"}function Rn(t){var e=t.length;if(g(e>=2),2===e)return g("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),O.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("\x01",o);switch((a<0||a>n)&&y(),t.charAt(a+1)){case"\x01":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=t.substring(o,a),i+="\0";break;case"\x11":i+=t.substring(o,a+1);break;default:y()}o=a+2}return new O(r)}var Dn=function(t,e){this.seconds=t,this.nanoseconds=e},Ln=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Ln.store="owner",Ln.key="owner";var Mn=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Mn.store="mutationQueues",Mn.keyPath="userId";var jn=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};jn.store="mutations",jn.keyPath="batchId",jn.userMutationsIndex="userMutationsIndex",jn.userMutationsKeyPath=["userId","batchId"];var Fn=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,On(e)]},t.key=function(t,e,n){return[t,On(e),n]},t}();Fn.store="documentMutations",Fn.PLACEHOLDER=new Fn;var Un=function(t,e){this.path=t,this.readTime=e},Vn=function(t,e){this.path=t,this.version=e},qn=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};qn.store="remoteDocuments",qn.readTimeIndex="readTimeIndex",qn.readTimeIndexPath="readTime",qn.collectionReadTimeIndex="collectionReadTimeIndex",qn.collectionReadTimeIndexPath=["parentPath","readTime"];var Bn=function(t){this.byteSize=t};Bn.store="remoteDocumentGlobal",Bn.key="remoteDocumentGlobalKey";var zn=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};zn.store="targets",zn.keyPath="targetId",zn.queryTargetsIndexName="queryTargetsIndex",zn.queryTargetsKeyPath=["canonicalId","targetId"];var Kn=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Kn.store="targetDocuments",Kn.keyPath=["targetId","path"],Kn.documentTargetsIndex="documentTargetsIndex",Kn.documentTargetsKeyPath=["path","targetId"];var Hn=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Hn.key="targetGlobalKey",Hn.store="targetGlobal";var Wn=function(t,e){this.collectionId=t,this.parent=e};Wn.store="collectionParents",Wn.keyPath=["collectionId","parent"];var Gn=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Gn.store="clientMetadata",Gn.keyPath="clientId";var Qn=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Qn.store="bundles",Qn.keyPath="bundleId";var Yn=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Yn.store="namedQueries",Yn.keyPath="name";var Xn=Object(a.d)(Object(a.d)([],Object(a.d)(Object(a.d)([],Object(a.d)(Object(a.d)([],Object(a.d)(Object(a.d)([],[Mn.store,jn.store,Fn.store,qn.store,zn.store,Ln.store,Hn.store,Kn.store]),[Gn.store])),[Bn.store])),[Wn.store])),[Qn.store,Yn.store]),$n="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Jn=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),Zn=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},tr=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),er=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Zn,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new ir(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=cr(e.target.error);n.ft.reject(new ir(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new ir(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(f("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new ar(e)},t}(),nr=function(){function e(t,n,i){this.name=t,this.version=n,this.wt=i,12.2===e._t(Object(r.j)())&&p("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.delete=function(t){return f("SimpleDb","Removing database:",t),sr(window.indexedDB.deleteDatabase(t)).toPromise()},e.yt=function(){if("undefined"==typeof indexedDB)return!1;if(e.gt())return!0;var t=Object(r.j)(),n=e._t(t),i=0<n&&n<10,o=e.Et(t),a=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||i||a)},e.gt=function(){var e;return"undefined"!=typeof t&&"YES"===(null===(e=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}))||void 0===e?void 0:e.Tt)},e.It=function(t,e){return t.store(e)},e._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.At=function(t){return Object(a.a)(this,void 0,void 0,(function(){var e,n=this;return Object(a.c)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(f("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new ir(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new c(u.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new ir(t,n))},i.onupgradeneeded=function(t){f("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){f("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},e.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},e.prototype.runTransaction=function(t,e,n,r){return Object(a.a)(this,void 0,void 0,(function(){var i,o,s,u,c;return Object(a.c)(this,(function(l){switch(l.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,c,l,h;return Object(a.c)(this,(function(a){switch(a.label){case 0:++o,a.label=1;case 1:return a.trys.push([1,4,,5]),[4,u.At(t)];case 2:return u.db=a.sent(),e=er.open(u.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),tr.reject(t)})).toPromise(),c={},s.catch((function(){})),[4,e.dt];case 3:return[2,(c.value=(a.sent(),s),c)];case 4:return l=a.sent(),h="FirebaseError"!==l.name&&o<3,f("SimpleDb","Transaction failed with error:",l.message,"Retrying:",h),u.close(),h?[3,5]:[2,{value:Promise.reject(l)}];case 5:return[2]}}))},u=this,l.label=1;case 1:return[5,s()];case 2:if("object"==typeof(c=l.sent()))return[2,c.value];l.label=3;case 3:return[3,1];case 4:return[2]}}))}))},e.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},e}(),rr=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return sr(this.Pt.delete())},t}(),ir=function(t){function e(e,n){var r=this;return(r=t.call(this,u.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(a.b)(e,t),e}(c);function or(t){return"IndexedDbTransactionError"===t.name}var ar=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(f("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(f("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),sr(n)},t.prototype.add=function(t){return f("SimpleDb","ADD",this.store.name,t,t),sr(this.store.add(t))},t.prototype.get=function(t){var e=this;return sr(this.store.get(t)).next((function(n){return void 0===n&&(n=null),f("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return f("SimpleDb","DELETE",this.store.name,t),sr(this.store.delete(t))},t.prototype.count=function(){return f("SimpleDb","COUNT",this.store.name),sr(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){f("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new tr((function(n,r){e.onerror=function(t){var e=cr(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new tr((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new rr(i),a=e(i.primaryKey,i.value,o);if(a instanceof tr){var s=a.catch((function(t){return o.done(),tr.reject(t)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return tr.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function sr(t){return new tr((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=cr(t.target.error);n(e)}}))}var ur=!1;function cr(t){var e=nr._t(Object(r.j)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var i=new c("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ur||(ur=!0,setTimeout((function(){throw i}),0)),i}}return t}var lr=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(a.b)(e,t),e}(Jn);function hr(t,e){var n=m(t);return nr.It(n.Mt,e)}var fr=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&le(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&he(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&he(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(S.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Ue())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&T(this.mutations,t.mutations,(function(t,e){return pe(t,e)}))&&T(this.baseMutations,t.baseMutations,(function(t,e){return pe(t,e)}))},t}(),pr=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){g(e.mutations.length===r.length);for(var i=je(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),dr=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=S.min()),void 0===o&&(o=S.min()),void 0===a&&(a=D.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),vr=function(t){this.Lt=t};function yr(t,e){if(e.document)return dn(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=K.fromSegments(e.noDocument.path),r=_r(e.noDocument.readTime),i=at.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=K.fromSegments(e.unknownDocument.path);return r=_r(e.unknownDocument.version),at.newUnknownDocument(o,r)}return y()}function gr(t,e,n){var r=mr(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:sn(t,e.key),fields:e.data.value.mapValue.fields,updateTime:tn(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new qn(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=wr(e.version);return a=e.hasCommittedMutations,new qn(null,new Un(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=wr(e.version);return new qn(new Vn(c,l),null,null,!0,r,i)}return y()}function mr(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function br(t){var e=new I(t[0],t[1]);return S.fromTimestamp(e)}function wr(t){var e=t.toTimestamp();return new Dn(e.seconds,e.nanoseconds)}function _r(t){var e=new I(t.seconds,t.nanoseconds);return S.fromTimestamp(e)}function Tr(t,e){for(var n=(e.baseMutations||[]).map((function(e){return yn(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var a=e.mutations.map((function(e){return yn(t.Lt,e)})),s=I.fromMillis(e.localWriteTimeMs);return new fr(e.batchId,s,n,a)}function Er(t){var e,n,r=_r(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?_r(t.lastLimboFreeSnapshotVersion):S.min();return void 0!==t.query.documents?(g(1===(n=t.query).documents.length),e=Mt(At(ln(n.documents[0])))):e=function(t){return Mt(bn(t))}(t.query),new dr(e,t.targetId,0,t.lastListenSequenceNumber,r,i,D.fromBase64String(t.resumeToken))}function Ir(t,e){var n,r=wr(e.snapshotVersion),i=wr(e.lastLimboFreeSnapshotVersion);n=ht(e.target)?gn(t.Lt,e.target):mn(t.Lt,e.target);var o=e.resumeToken.toBase64();return new zn(e.targetId,ct(e.target),r,o,e.sequenceNumber,i,n)}function Sr(t){var e=bn({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?jt(e,e.limit,"L"):e}var kr=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Cr(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:_r(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return Cr(t).put({bundleId:(n=e).id,createTime:wr(rn(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return xr(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Sr(e.bundledQuery),readTime:_r(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return xr(t).put(function(t){return{name:t.name,readTime:wr(rn(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Cr(t){return hr(t,Qn.store)}function xr(t){return hr(t,Yn.store)}var Ar=function(){function t(){this.Bt=new Or}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),tr.resolve()},t.prototype.getCollectionParents=function(t,e){return tr.resolve(this.Bt.getEntries(e))},t}(),Or=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Oe(O.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Oe(O.comparator)).toArray()},t}(),Nr=function(){function t(){this.qt=new Or}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:On(i)};return Pr(t).put(o)}return tr.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[E(e),""],!1,!0);return Pr(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Rn(o.parent))}return n}))},t}();function Pr(t){return hr(t,Wn.store)}var Rr={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Dr=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Lr(t,e,n){var r=t.store(jn.store),i=t.store(Fn.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){g(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=Fn.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return tr.waitFor(o).next((function(){return c}))}function Mr(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw y();e=t.noDocument}return JSON.stringify(e).length}Dr.DEFAULT_COLLECTION_PERCENTILE=10,Dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dr.DEFAULT=new Dr(41943040,Dr.DEFAULT_COLLECTION_PERCENTILE,Dr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dr.DISABLED=new Dr(-1,0,0);var jr=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return g(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ur(t).$t({index:jn.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Vr(t),a=Ur(t);return a.add({}).next((function(s){g("number"==typeof s);for(var u=new fr(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return vn(t.Lt,e)})),i=n.mutations.map((function(e){return vn(t.Lt,e)}));return new jn(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new Oe((function(t,e){return _(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],v=Fn.key(i.userId,d.key.path,s);h=h.add(d.key.path.popLast()),l.push(a.put(c)),l.push(o.put(v,Fn.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Qt[s]=u.keys()})),tr.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Ur(t).get(e).next((function(t){return t?(g(t.userId===n.userId),Tr(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?tr.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Ur(t).$t({index:jn.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(g(e.batchId>=r),o=Tr(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Ur(t).$t({index:jn.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ur(t).Nt(jn.userMutationsIndex,n).next((function(t){return t.map((function(t){return Tr(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Fn.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Vr(t).$t({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=Rn(u);if(s===n.userId&&e.path.isEqual(l))return Ur(t).get(c).next((function(t){if(!t)throw y();g(t.userId===n.userId),o.push(Tr(n.R,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Oe(_),i=[];return e.forEach((function(e){var o=Fn.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=Vr(t).$t({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=Rn(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),tr.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Fn.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Oe(_);return Vr(t).$t({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],l=Rn(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(t,s)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Ur(t).get(e).next((function(t){if(null===t)throw y();g(t.userId===n.userId),r.push(Tr(n.R,t))})))})),tr.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Lr(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),tr.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return tr.resolve();var r=IDBKeyRange.lowerBound(Fn.prefixForUser(e.userId)),i=[];return Vr(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Rn(t[1]);i.push(o)}else r.done()})).next((function(){g(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return Fr(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return qr(t).get(this.userId).next((function(t){return t||new Mn(e.userId,-1,"")}))},t}();function Fr(t,e,n){var r=Fn.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Vr(t).$t({range:o,kt:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Ur(t){return hr(t,jn.store)}function Vr(t){return hr(t,Fn.store)}function qr(t){return hr(t,Mn.store)}var Br=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),zr=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new Br(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return S.fromTimestamp(new I(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return Kr(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return g(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Kr(t).$t((function(a,s){var u=Er(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return tr.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return Kr(t).$t((function(t,n){var r=Er(n);e(r)}))},t.prototype.Xt=function(t){return Hr(t).get(Hn.key).next((function(t){return g(null!==t),t}))},t.prototype.Zt=function(t,e){return Hr(t).put(Hn.key,e)},t.prototype.te=function(t,e){return Kr(t).put(Ir(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=ct(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Kr(t).$t({range:r,index:zn.queryTargetsIndexName},(function(t,n,r){var o=Er(n);lt(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Wr(t);return e.forEach((function(e){var a=On(e.path);i.push(o.put(new Kn(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),tr.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Wr(t);return tr.forEach(e,(function(e){var o=On(e.path);return tr.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Wr(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Wr(t),i=Ue();return r.$t({range:n,kt:!0},(function(t,e,n){var r=Rn(t[1]),o=new K(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=On(e.path),r=IDBKeyRange.bound([n],[E(n)],!1,!0),i=0;return Wr(t).$t({index:Kn.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return Kr(t).get(e).next((function(t){return t?Er(t):null}))},t}();function Kr(t){return hr(t,zn.store)}function Hr(t){return hr(t,Hn.store)}function Wr(t){return hr(t,Kn.store)}function Gr(t){return Object(a.a)(this,void 0,void 0,(function(){return Object(a.c)(this,(function(e){if(t.code!==u.FAILED_PRECONDITION||t.message!==$n)throw t;return f("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function Qr(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=_(n,i);return 0===a?_(r,o):a}var Yr=function(){function t(t){this.ne=t,this.buffer=new Oe(Qr),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Qr(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Xr=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;f("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return Object(a.a)(e,void 0,void 0,(function(){var e;return Object(a.c)(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return or(e=n.sent())?(f("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Gr(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),$r=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return tr.resolve(s.o);var r=new Yr(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; disabled"),tr.resolve(Rr)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(f("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),Rr):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,o,a,s,u,c,l=this,p=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>l.params.maximumSequenceNumbersToCollect?(f("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+e),r=l.params.maximumSequenceNumbersToCollect):r=e,a=Date.now(),l.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),l.removeTargets(t,n,e)})).next((function(e){return o=e,u=Date.now(),l.removeOrphanedDocuments(t,n)})).next((function(t){return c=Date.now(),h()<=i.a.DEBUG&&f("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-p)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+o+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-p)+"ms"),tr.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:t})}))},t}(),Jr=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new $r(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return Zr(t,n)},t.prototype.removeReference=function(t,e,n){return Zr(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Zr(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return qr(t).Ot((function(r){return Fr(t,r,e).next((function(t){return t&&(n=!0),tr.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){if(s<=e){var u=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),Wr(t).delete([0,On(a.path)])}))}));i.push(u)}})).next((function(){return tr.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Zr(t,e)},t.prototype.we=function(t,e){var n,r=Wr(t),i=s.o;return r.$t({index:Kn.documentTargetsIndex},(function(t,r){var o=t[0],a=(t[1],r.path),u=r.sequenceNumber;0===o?(i!==s.o&&e(new K(Rn(n)),i),i=u,n=a):i=s.o})).next((function(){i!==s.o&&e(new K(Rn(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Zr(t,e){return Wr(t).put(function(t,e){return new Kn(0,On(t.path),e)}(e,t.currentSequenceNumber))}var ti=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){C(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return x(this.inner)},t}(),ei=function(){function t(){this.changes=new ti((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:S.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:at.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?tr.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),ni=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return oi(t).put(ai(e),n)},t.prototype.removeEntry=function(t,e){var n=oi(t),r=ai(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return oi(t).get(ai(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return oi(t).get(ai(e)).next((function(t){return{document:n.ye(e,t),size:Mr(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=Re();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=Re(),i=new Ce(K.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Mr(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return tr.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return oi(t).$t({range:r},(function(t,e,r){for(var a=K.fromSegments(t);o&&K.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Re(),o=e.path.length+1,a={};if(n.isEqual(S.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=mr(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=qn.collectionReadTimeIndex}return oi(t).$t(a,(function(t,n,a){if(t.length===o){var s=yr(r.R,n);e.path.isPrefixOf(s.key.path)?qt(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new ri(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return ii(t).get(Bn.key).next((function(t){return g(!!t),t}))},t.prototype.me=function(t,e){return ii(t).put(Bn.key,e)},t.prototype.ye=function(t,e){if(e){var n=yr(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(S.min()))return n}return at.newInvalidDocument(t)},t}(),ri=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new ti((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(a.b)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Oe((function(t,e){return _(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=gr(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Mr(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var l=gr(e.Ie.R,at.newNoDocument(o,S.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),tr.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(ei);function ii(t){return hr(t,Bn.store)}function oi(t){return hr(t,qn.store)}function ai(t){return t.path.toArray()}var si=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;g(n<r&&n>=0&&r<=11);var o=new er("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Ln.store)}(t),function(t){t.createObjectStore(Mn.store,{keyPath:Mn.keyPath}),t.createObjectStore(jn.store,{keyPath:jn.keyPath,autoIncrement:!0}).createIndex(jn.userMutationsIndex,jn.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Fn.store)}(t),ui(t),function(t){t.createObjectStore(qn.store)}(t));var a=tr.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Kn.store),t.deleteObjectStore(zn.store),t.deleteObjectStore(Hn.store)}(t),ui(t)),a=a.next((function(){return function(t){var e=t.store(Hn.store),n=new Hn(0,0,S.min().toTimestamp(),0);return e.put(Hn.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(jn.store).Nt().next((function(n){t.deleteObjectStore(jn.store),t.createObjectStore(jn.store,{keyPath:jn.keyPath,autoIncrement:!0}).createIndex(jn.userMutationsIndex,jn.userMutationsKeyPath,{unique:!0});var r=e.store(jn.store),i=n.map((function(t){return r.put(t)}));return tr.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(Gn.store,{keyPath:Gn.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(Bn.store)}(t),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(qn.store);e.createIndex(qn.readTimeIndex,qn.readTimeIndexPath,{unique:!1}),e.createIndex(qn.collectionReadTimeIndex,qn.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(Qn.store,{keyPath:Qn.keyPath})}(t),function(t){t.createObjectStore(Yn.store,{keyPath:Yn.keyPath})}(t)}))),a},t.prototype.be=function(t){var e=0;return t.store(qn.store).$t((function(t,n){e+=Mr(n)})).next((function(){var n=new Bn(e);return t.store(Bn.store).put(Bn.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Mn.store),r=t.store(jn.store);return n.Nt().next((function(n){return tr.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(jn.userMutationsIndex,i).next((function(r){return tr.forEach(r,(function(r){g(r.userId===n.userId);var i=Tr(e.R,r);return Lr(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(Kn.store),n=t.store(qn.store);return t.store(Hn.store).get(Hn.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new O(n),a=function(t){return[0,On(t)]}(o);r.push(e.get(a).next((function(n){return n?tr.resolve():function(n){return e.put(new Kn(0,On(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return tr.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(Wn.store,{keyPath:Wn.keyPath});var n=e.store(Wn.store),r=new Or,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:On(i)})}};return e.store(qn.store).$t({kt:!0},(function(t,e){var n=new O(t);return i(n.popLast())})).next((function(){return e.store(Fn.store).$t({kt:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Rn(n));return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(zn.store);return n.$t((function(t,r){var i=Er(r),o=Ir(e.R,i);return n.put(o)}))},t}();function ui(t){t.createObjectStore(Kn.store,{keyPath:Kn.keyPath}).createIndex(Kn.documentTargetsIndex,Kn.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(zn.store,{keyPath:zn.keyPath}).createIndex(zn.queryTargetsIndexName,zn.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Hn.store)}var ci="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",li=function(){function t(e,n,r,i,o,a,s,l,h,f){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=h,this.Ce=f,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new c(u.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Jr(this,i),this.Le=n+"main",this.R=new vr(l),this.Be=new nr(this.Le,11,new si(this.R)),this.qe=new zr(this.referenceDelegate,this.R),this.Ut=new Nr,this.Ue=function(t,e){return new ni(t,e)}(this.R,this.Ut),this.Qe=new kr,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===f&&p("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new c(u.FAILED_PRECONDITION,ci);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new s(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(a.a)(e,void 0,void 0,(function(){return Object(a.c)(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return Object(a.a)(e,void 0,void 0,(function(){return Object(a.c)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return Object(a.a)(e,void 0,void 0,(function(){return Object(a.c)(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return fi(e).put(new Gn(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(or(e))return f("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return f("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return hi(t).get(Ln.key).next((function(t){return tr.resolve(e.tn(t))}))},t.prototype.en=function(t){return fi(t).delete(this.clientId)},t.prototype.nn=function(){return Object(a.a)(this,void 0,void 0,(function(){var t,e,n,r,i=this;return Object(a.c)(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=hr(t,Gn.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return tr.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)r=n[e],this.Ke.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?tr.resolve(!0):hi(t).get(Ln.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new c(u.FAILED_PRECONDITION,ci);return!1}}return!(!e.networkEnabled||!e.inForeground)||fi(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&f("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return Object(a.a)(this,void 0,void 0,(function(){var t=this;return Object(a.c)(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Ln.store,Gn.store],(function(e){var n=new lr(e,s.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return fi(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return jr.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;f("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,Xn,(function(o){return i=new lr(o,r.Ne?r.Ne.next():s.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw p("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new c(u.FAILED_PRECONDITION,$n);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return hi(t).get(Ln.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new c(u.FAILED_PRECONDITION,ci)}))},t.prototype.Ze=function(t){var e=new Ln(this.clientId,this.allowTabSynchronization,Date.now());return hi(t).put(Ln.key,e)},t.yt=function(){return nr.yt()},t.prototype.Xe=function(t){var e=this,n=hi(t);return n.get(Ln.key).next((function(t){return e.tn(t)?(f("IndexedDbPersistence","Releasing primary lease."),n.delete(Ln.key)):tr.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(p("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return f("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return p("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){p("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function hi(t){return hr(t,Ln.store)}function fi(t){return hr(t,Gn.store)}function pi(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var di=function(t,e){this.progress=t,this.wn=e},vi=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return K.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):Dt(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new K(e)).next((function(t){var e=Le();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Le();return this.Ut.getCollectionParents(t,i).next((function(a){return tr.forEach(a,(function(a){var s=function(t,e){return new Ct(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=at.newInvalidDocument(c),r=r.insert(c,l)),he(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){qt(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=Ue(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof ye&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),yi=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Ue(),i=Ue(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),gi=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var o=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(S.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(a){var s=o.Cn(e,a);return(Ot(e)||Nt(e))&&o.Nn(e.limitType,s,r,n)?o.Dn(t,e):(h()<=i.a.DEBUG&&f("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Vt(e)),o.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new Oe(Bt(t));return e.forEach((function(e,r){qt(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return h()<=i.a.DEBUG&&f("QueryEngine","Using full collection scan to execute query:",Vt(e)),this.Sn.getDocumentsMatchingQuery(t,e,S.min())},t}(),mi=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Ce(_),this.kn=new ti((function(t){return ct(t)}),lt),this.$n=S.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new vi(this.On,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();function bi(t,e,n,r){return new mi(t,e,n,r)}function wi(t,e){return Object(a.a)(this,void 0,void 0,(function(){var n,r,i,o;return Object(a.c)(this,(function(a){switch(a.label){case 0:return n=m(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new vi(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=Ue(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];a=a.add(m.key)}}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function _i(t,e){var n=m(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=tr.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);g(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),a.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Ti(t){var e=m(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Ei(t,e){var n=m(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return g(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}}));var s=Re();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(Ii(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(S.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return tr.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,s)})).next((function(){return s}))})).then((function(t){return n.Fn=i,t}))}function Ii(t,e,n,r,i){var o=Ue();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Re();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(S.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):f("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function Si(t,e){var n=m(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function ki(t,e){var n=m(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,tr.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new dr(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function Ci(t,e,n){return Object(a.a)(this,void 0,void 0,(function(){var r,i,o,s;return Object(a.c)(this,(function(a){switch(a.label){case 0:r=m(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!or(s=a.sent()))throw s;return f("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function xi(t,e,n){var r=m(t),i=S.min(),o=Ue();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=m(t),i=r.kn.get(n);return void 0!==i?tr.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,Mt(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:S.min(),n?o:Ue())})).next((function(t){return{documents:t,Bn:o}}))}))}function Ai(t,e){var n=m(t),r=m(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Oi(t){var e=m(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=m(t),i=Re(),o=mr(n),a=oi(e),s=IDBKeyRange.lowerBound(o,!0);return a.$t({index:qn.readTimeIndex,range:s},(function(t,e){var n=yr(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:br(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function Ni(t){return Object(a.a)(this,void 0,void 0,(function(){var e;return Object(a.c)(this,(function(n){return[2,(e=m(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=oi(t),n=S.min();return e.$t({index:qn.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=br(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}function Pi(t,e,n,r){return Object(a.a)(this,void 0,void 0,(function(){var i,o,s,u,c,l,h,f,p,d;return Object(a.c)(this,(function(a){switch(a.label){case 0:for(i=m(t),o=Ue(),s=Re(),u=je(),c=0,l=n;c<l.length;c++)h=l[c],f=e.qn(h.metadata.name),h.document&&(o=o.add(f)),s=s.insert(f,e.Un(h)),u=u.insert(f,e.Qn(h.metadata.readTime));return p=i.On.newChangeBuffer({trackRemovals:!0}),[4,ki(i,function(t){return Mt(At(O.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=a.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return Ii(t,p,s,S.min(),u).next((function(e){return p.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next((function(){return i.qe.addMatchingKeys(t,o,d.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function Ri(t,e,n){return void 0===n&&(n=Ue()),Object(a.a)(this,void 0,void 0,(function(){var r,i;return Object(a.c)(this,(function(o){switch(o.label){case 0:return[4,ki(t,Mt(Sr(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=m(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=rn(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var a=r.withResumeToken(D.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(a.targetId,a),i.qe.updateTargetData(t,a).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Qe.saveNamedQuery(t,e)}))}))]}}))}))}var Di=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return tr.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:rn(n.createTime)}),tr.resolve()},t.prototype.getNamedQuery=function(t,e){return tr.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Sr(t.bundledQuery),readTime:rn(t.readTime)}}(e)),tr.resolve()},t}(),Li=function(){function t(){this.Wn=new Oe(Mi.Gn),this.zn=new Oe(Mi.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Mi(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new Mi(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new K(new O([])),r=new Mi(n,t),i=new Mi(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new K(new O([])),n=new Mi(e,t),r=new Mi(e,t+1),i=Ue();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Mi(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Mi=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return K.comparator(t.key,e.key)||_(t.ns,e.ns)},t.Hn=function(t,e){return _(t.ns,e.ns)||K.comparator(t.key,e.key)},t}(),ji=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new Oe(Mi.Gn)}return t.prototype.checkEmpty=function(t){return tr.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new fr(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new Mi(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return tr.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return tr.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return tr.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return tr.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return tr.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Mi(e,0),i=new Mi(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),tr.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Oe(_);return e.forEach((function(t){var e=new Mi(t,0),i=new Mi(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),tr.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;K.isDocumentKey(i)||(i=i.child(""));var o=new Mi(new K(i),0),a=new Oe(_);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)}),o),tr.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;g(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return tr.forEach(e.mutations,(function(i){var o=new Mi(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Mi(e,0),r=this.rs.firstAfterOrEqual(n);return tr.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,tr.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Fi=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Ce(K.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return tr.resolve(n?n.document.clone():at.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Re();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():at.newInvalidDocument(t))})),tr.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Re(),i=new K(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,l=u.readTime;if(!e.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||qt(e,c)&&(r=r.insert(c.key,c.clone()))}return tr.resolve(r)},t.prototype.fs=function(t,e){return tr.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new Ui(this)},t.prototype.getSize=function(t){return tr.resolve(this.size)},t}(),Ui=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(a.b)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),tr.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(ei),Vi=function(){function t(t){this.persistence=t,this.ds=new ti((function(t){return ct(t)}),lt),this.lastRemoteSnapshotVersion=S.min(),this.highestTargetId=0,this.ws=0,this._s=new Li,this.targetCount=0,this.ys=Br.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),tr.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return tr.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return tr.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),tr.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),tr.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Br(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,tr.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),tr.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,tr.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),tr.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return tr.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return tr.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),tr.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),tr.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),tr.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return tr.resolve(n)},t.prototype.containsKey=function(t,e){return tr.resolve(this._s.containsKey(e))},t}(),qi=function(){function t(t,e){var n=this;this.gs={},this.Ne=new s(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Vi(this),this.Ut=new Ar,this.Ue=function(t,e){return new Fi(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new vr(e),this.Qe=new Di(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new ji(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;f("MemoryPersistence","Starting transaction:",t);var i=new Bi(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return tr.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),Bi=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(a.b)(e,t),e}(Jn),zi=function(){function t(t){this.persistence=t,this.As=new Li,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw y()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),tr.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),tr.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),tr.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return tr.forEach(this.vs,(function(r){var i=K.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return tr.or([function(){return tr.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Ki=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Hi(t,e){return"firestore_clients_"+t+"_"+e}function Wi(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Gi(t,e){return"firestore_targets_"+t+"_"+e}Ki.UNAUTHENTICATED=new Ki(null),Ki.GOOGLE_CREDENTIALS=new Ki("google-credentials-uid"),Ki.FIRST_PARTY=new Ki("first-party-uid");var Qi=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new c(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(p("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Yi=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new c(i.error.code,i.error.message)),o?new t(e,i.state,r):(p("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Xi=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=qe(),a=0;i&&a<r.activeTargetIds.length;++a)i=z(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(p("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),$i=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(p("SharedClientState","Failed to parse online state: "+e),null)},t}(),Ji=function(){function t(){this.activeTargetIds=qe()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Zi=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Ce(_),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=Hi(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Ji),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(a.a)(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,u,c,l,h,f=this;return Object(a.c)(this,(function(a){switch(a.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=a.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Hi(this.persistenceKey,r)))&&(o=Xi.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(u=this.js(s))&&this.Ws(u),c=0,l=this.$s;c<l.length;c++)h=l[c],this.Fs(h);return this.$s=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Gi(this.persistenceKey,t));if(n){var r=Yi.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Gi(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return f("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){f("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){f("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(f("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void p("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return Object(a.a)(e,void 0,void 0,(function(){var t,e,r,i,o,u;return Object(a.c)(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(u=function(t){var e=s.o;if(null!=t)try{var n=JSON.parse(t);g("number"==typeof n),e=n}catch(t){p("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==s.o&&this.sequenceNumberHandler(u);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Qi(this.currentUser,t,e,n),i=Wi(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Wi(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=Gi(this.persistenceKey,t),i=new Yi(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Xi.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Qi.Vs(new Ki(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Yi.Vs(r,e)},t.prototype.js=function(t){return $i.Vs(t)},t.prototype.ii=function(t){return Object(a.a)(this,void 0,void 0,(function(){return Object(a.c)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(f("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=qe();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),to=function(){function t(){this.li=new Ji,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Ji,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),eo=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),no=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){f("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){f("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),ro={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},io=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),oo=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(a.b)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,a){var s=new o.f;s.listenOnce(o.c.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case o.a.NO_ERROR:var e=s.getResponseJson();f("Connection","XHR received:",JSON.stringify(e)),i(e);break;case o.a.TIMEOUT:f("Connection",'RPC "'+t+'" timed out'),a(new c(u.DEADLINE_EXCEEDED,"Request time out"));break;case o.a.HTTP_ERROR:var n=s.getStatus();if(f("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var l=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(u).indexOf(e)>=0?e:u.UNKNOWN}(r.status);a(new c(l,r.message))}else a(new c(u.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new c(u.UNAVAILABLE,"Connection failed."));break;default:y()}}finally{f("Connection",'RPC "'+t+'" completed.')}}));var l=JSON.stringify(r);s.send(e,"POST",l,n,15)}))},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=Object(o.g)(),a=Object(o.h)(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(s.initMessageHeaders,e),Object(r.o)()||Object(r.q)()||Object(r.m)()||Object(r.n)()||Object(r.r)()||Object(r.l)()||(s.httpHeadersOverwriteParam="$httpHeaders");var l=n.join("");f("Connection","Creating WebChannel: "+l,s);var h=i.createWebChannel(l,s),p=!1,v=!1,y=new io({Ei:function(t){v?f("Connection","Not sending because WebChannel is closed:",t):(p||(f("Connection","Opening WebChannel transport."),h.open(),p=!0),f("Connection","WebChannel sending:",t),h.send(t))},Ti:function(){return h.close()}}),m=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return m(h,o.e.EventType.OPEN,(function(){v||f("Connection","WebChannel transport opened.")})),m(h,o.e.EventType.CLOSE,(function(){v||(v=!0,f("Connection","WebChannel transport closed"),y.Vi())})),m(h,o.e.EventType.ERROR,(function(t){v||(v=!0,d("Connection","WebChannel transport errored:",t),y.Vi(new c(u.UNAVAILABLE,"The operation could not be completed")))})),m(h,o.e.EventType.MESSAGE,(function(t){var e;if(!v){var n=t.data[0];g(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){f("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=we[t];if(void 0!==e)return ke(e)}(o),s=i.message;void 0===a&&(a=u.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),v=!0,y.Vi(new c(a,s)),h.close()}else f("Connection","WebChannel received:",n),y.Si(n)}})),m(a,o.b.STAT_EVENT,(function(t){t.stat===o.d.PROXY?f("Connection","Detected buffering proxy"):t.stat===o.d.NOPROXY&&f("Connection","Detected no buffering proxy")})),setTimeout((function(){y.Pi()}),0),y},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);f("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return f("RestConnection","Received: ",t),t}),(function(e){throw d("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.6.3",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=ro[t];return this.Di+"/v1/"+e+":"+n},t}());function ao(){return"undefined"!=typeof window?window:null}function so(){return"undefined"!=typeof document?document:null}function uo(t){return new Ze(t,!0)}var co=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&f("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Qi=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),lo=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new co(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(a.a)(this,void 0,void 0,(function(){return Object(a.c)(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(a.a)(this,void 0,void 0,(function(){return Object(a.c)(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(a.a)(this,void 0,void 0,(function(){return Object(a.c)(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===u.RESOURCE_EXHAUSTED?(p(e.toString()),p("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===u.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new c(u.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return Object(a.a)(t,void 0,void 0,(function(){return Object(a.c)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return f("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(f("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),ho=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return Object(a.b)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:y()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(g(void 0===e||"string"==typeof e),D.fromBase64String(e||"")):(g(void 0===e||e instanceof Uint8Array),D.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?u.UNKNOWN:ke(t.code);return new c(e,t.message||"")}(s);n=new We(r,i,o,a||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=un(t,r.document.name),o=rn(r.document.updateTime);var s=new it({mapValue:{fields:r.document.fields}}),l=(a=at.newFoundDocument(i,o,s),r.targetIds||[]),h=r.removedTargetIds||[];n=new Ke(l,h,a.key,a)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=un(t,r.document),o=r.readTime?rn(r.readTime):S.min(),s=at.newNoDocument(i,o),a=r.removedTargetIds||[],n=new Ke([],a,s.key,s);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=un(t,r.document),o=r.removedTargetIds||[],n=new Ke([],o,i,null);else{if(!("filter"in e))return y();e.filter;var f=e.filter;f.targetId,r=f.count||0,i=new Ie(r),o=f.targetId,n=new He(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return S.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?S.min():e.readTime?rn(e.readTime):S.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=hn(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=ht(r)?{documents:gn(t,r)}:{query:mn(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=en(t,e.resumeToken):e.snapshotVersion.compareTo(S.min())>0&&(n.readTime=tn(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return y()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=hn(this.R),e.removeTarget=t,this.cr(e)},e}(lo),fo=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return Object(a.b)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(g(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(g(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?rn(t.updateTime):rn(e);return n.isEqual(S.min())&&(n=rn(e)),new ae(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=rn(t.commitTime);return this.listener.Tr(n,e)}return g(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=hn(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return vn(e.R,t)}))};this.cr(n)},e}(lo),po=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(a.b)(e,t),e.prototype.br=function(){if(this.Rr)throw new c(u.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===u.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new c(u.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===u.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new c(u.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),vo=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(p(e),this.Vr=!1):f("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),yo=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return Object(a.a)(o,void 0,void 0,(function(){return Object(a.c)(this,(function(t){switch(t.label){case 0:return So(this)?(f("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(a.a)(this,void 0,void 0,(function(){var e;return Object(a.c)(this,(function(n){switch(n.label){case 0:return(e=m(t)).Or.add(4),[4,mo(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,go(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new vo(n,r)};function go(t){return Object(a.a)(this,void 0,void 0,(function(){var e,n;return Object(a.c)(this,(function(r){switch(r.label){case 0:if(!So(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function mo(t){return Object(a.a)(this,void 0,void 0,(function(){var e,n;return Object(a.c)(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function bo(t,e){var n=m(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Io(n)?Eo(n):Vo(n).er()&&_o(n,e))}function wo(t,e){var n=m(t),r=Vo(n);n.$r.delete(e),r.er()&&To(n,e),0===n.$r.size&&(r.er()?r.ir():So(n)&&n.Br.set("Unknown"))}function _o(t,e){t.qr.U(e.targetId),Vo(t).mr(e)}function To(t,e){t.qr.U(e),Vo(t).yr(e)}function Eo(t){t.qr=new Qe({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Vo(t).start(),t.Br.Sr()}function Io(t){return So(t)&&!Vo(t).tr()&&t.$r.size>0}function So(t){return 0===m(t).Or.size}function ko(t){t.qr=void 0}function Co(t){return Object(a.a)(this,void 0,void 0,(function(){return Object(a.c)(this,(function(e){return t.$r.forEach((function(e,n){_o(t,e)})),[2]}))}))}function xo(t,e){return Object(a.a)(this,void 0,void 0,(function(){return Object(a.c)(this,(function(n){return ko(t),Io(t)?(t.Br.Nr(e),Eo(t)):t.Br.set("Unknown"),[2]}))}))}function Ao(t,e,n){return Object(a.a)(this,void 0,void 0,(function(){var r,i,o;return Object(a.c)(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof We&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(a.a)(this,void 0,void 0,(function(){var n,r,i,o;return Object(a.c)(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.$r.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),f("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Oo(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Ke?t.qr.X(e):e instanceof He?t.qr.rt(e):t.qr.et(e),n.isEqual(S.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Ti(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(D.EMPTY_BYTE_STRING,n.snapshotVersion)),To(t,e);var r=new dr(n.target,e,1,n.sequenceNumber);_o(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return f("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Oo(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function Oo(t,e,n){return Object(a.a)(this,void 0,void 0,(function(){var r=this;return Object(a.c)(this,(function(i){switch(i.label){case 0:if(!or(e))throw e;return t.Or.add(1),[4,mo(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return Ti(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return Object(a.a)(r,void 0,void 0,(function(){return Object(a.c)(this,(function(e){switch(e.label){case 0:return f("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,go(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function No(t,e){return e().catch((function(n){return Oo(t,n,e)}))}function Po(t){return Object(a.a)(this,void 0,void 0,(function(){var e,n,r,i,o;return Object(a.c)(this,(function(a){switch(a.label){case 0:e=m(t),n=qo(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return So(t)&&t.kr.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,Si(e.localStore,r)];case 3:return null===(i=a.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=qo(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,Oo(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return Ro(e)&&Do(e),[2]}}))}))}function Ro(t){return So(t)&&!qo(t).tr()&&t.kr.length>0}function Do(t){qo(t).start()}function Lo(t){return Object(a.a)(this,void 0,void 0,(function(){return Object(a.c)(this,(function(e){return qo(t).Ar(),[2]}))}))}function Mo(t){return Object(a.a)(this,void 0,void 0,(function(){var e,n,r,i;return Object(a.c)(this,(function(o){for(e=qo(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function jo(t,e,n){return Object(a.a)(this,void 0,void 0,(function(){var r,i;return Object(a.c)(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=pr.from(r,e,n),[4,No(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Po(t)];case 2:return o.sent(),[2]}}))}))}function Fo(t,e){return Object(a.a)(this,void 0,void 0,(function(){return Object(a.c)(this,(function(n){switch(n.label){case 0:return e&&qo(t).pr?[4,function(t,e){return Object(a.a)(this,void 0,void 0,(function(){var n,r;return Object(a.c)(this,(function(i){switch(i.label){case 0:return Se(r=e.code)&&r!==u.ABORTED?(n=t.kr.shift(),qo(t).sr(),[4,No(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Po(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Ro(t)&&Do(t),[2]}}))}))}function Uo(t,e){return Object(a.a)(this,void 0,void 0,(function(){var n;return Object(a.c)(this,(function(r){switch(r.label){case 0:return n=m(t),e?(n.Or.delete(2),[4,go(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,mo(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Vo(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=m(t);return r.br(),new ho(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Co.bind(null,t),Ri:xo.bind(null,t),_r:Ao.bind(null,t)}),t.Mr.push((function(n){return Object(a.a)(e,void 0,void 0,(function(){return Object(a.c)(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Io(t)?Eo(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),ko(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function qo(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=m(t);return r.br(),new fo(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Lo.bind(null,t),Ri:Fo.bind(null,t),Ir:Mo.bind(null,t),Tr:jo.bind(null,t)}),t.Mr.push((function(n){return Object(a.a)(e,void 0,void 0,(function(){return Object(a.c)(this,(function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,Po(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&(f("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Qr}var Bo=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Zn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new c(u.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function zo(t,e){if(p("AsyncQueue",e+": "+t),or(t))return new c(u.UNAVAILABLE,e+": "+t);throw t}var Ko=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||K.comparator(e.key,n.key)}:function(t,e){return K.comparator(t.key,e.key)},this.keyedMap=Le(),this.sortedSet=new Ce(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Ho=function(){function t(){this.Kr=new Ce(K.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):y():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),Wo=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Ko.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ft(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Go=function(){this.Wr=void 0,this.listeners=[]},Qo=function(){this.queries=new ti((function(t){return Ut(t)}),Ft),this.onlineState="Unknown",this.Gr=new Set};function Yo(t,e){return Object(a.a)(this,void 0,void 0,(function(){var n,r,i,o,s,u,c;return Object(a.c)(this,(function(a){switch(a.label){case 0:if(n=m(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new Go),!i)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=a.sent(),[3,4];case 3:return u=a.sent(),c=zo(u,"Initialization of query '"+Vt(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Zo(n),[2]}}))}))}function Xo(t,e){return Object(a.a)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(a.c)(this,(function(a){return n=m(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function $o(t,e){for(var n=m(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(a)&&(r=!0);u.Wr=a}}r&&Zo(n)}function Jo(t,e,n){var r=m(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function Zo(t){t.Gr.forEach((function(t){t.next()}))}var ta=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Wo(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Wo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),ea=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),na=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return un(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?dn(this.R,t.document,!1):at.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return rn(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=ra(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new na(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(e.get(c)||Ue()).add(a);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(a.a)(this,void 0,void 0,(function(){var t,e,n,r,i;return Object(a.c)(this,(function(o){switch(o.label){case 0:return[4,Pi(this.localStore,new na(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,Ri(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new di(Object.assign({},this.progress),t))]}}))}))}}();function ra(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var ia=function(t){this.key=t},oa=function(t){this.key=t},aa=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Ue(),this.mutatedKeys=Ue(),this.lo=Bt(t),this.fo=new Ko(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Ho,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=Ot(this.query)&&i.size===this.query.limit?i.last():null,c=Nt(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=qt(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),p=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data.isEqual(h.data)?f!==p&&(r.track({type:3,doc:h}),d=!0):n.yo(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(s=!0)),d&&(h?(a=a.add(h),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),Ot(this.query)||Nt(this.query))for(;a.size>this.query.limit;){var l=Ot(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return y()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new Wo(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Ho,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Ue(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new oa(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new ia(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Ue();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Wo.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),sa=function(t,e,n){this.query=t,this.targetId=e,this.view=n},ua=function(t){this.key=t,this.bo=!1},ca=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new ti((function(t){return Ut(t)}),Ft),this.Vo=new Map,this.So=new Set,this.Do=new Ce(K.comparator),this.Co=new Map,this.No=new Li,this.xo={},this.Fo=new Map,this.ko=Br.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function la(t,e){return Object(a.a)(this,void 0,void 0,(function(){var n,r,i,o,s,u;return Object(a.c)(this,(function(a){switch(a.label){case 0:return n=Ua(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,ki(n.localStore,Mt(e))];case 2:return s=a.sent(),u=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,ha(n,e,r,"current"===u)];case 3:i=a.sent(),n.isPrimaryClient&&bo(n.remoteStore,s),a.label=4;case 4:return[2,i]}}))}))}function ha(t,e,n,r){return Object(a.a)(this,void 0,void 0,(function(){var i,o,s,u,c,l;return Object(a.c)(this,(function(h){switch(h.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return Object(a.a)(this,void 0,void 0,(function(){var i,o,s;return Object(a.c)(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,xi(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Ia(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,xi(t.localStore,e,!0)];case 1:return i=h.sent(),o=new aa(e,i.Bn),s=o._o(i.documents),u=ze.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),c=o.applyChanges(s,t.isPrimaryClient,u),Ia(t,n,c.To),l=new sa(e,n,o),[2,(t.Po.set(e,l),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),c.snapshot)]}}))}))}function fa(t,e){return Object(a.a)(this,void 0,void 0,(function(){var n,r,i;return Object(a.c)(this,(function(o){switch(o.label){case 0:return n=m(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!Ft(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Ci(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),wo(n.remoteStore,r.targetId),Ta(n,r.targetId)})).catch(Gr)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Ta(n,r.targetId),[4,Ci(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function pa(t,e,n){return Object(a.a)(this,void 0,void 0,(function(){var r,i,o,s;return Object(a.c)(this,(function(a){switch(a.label){case 0:r=Va(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=m(t),i=I.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Ue());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=fe(c,n.get(c.key));null!=l&&a.push(new ye(c.key,l,ot(l.value.mapValue),se.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Ce(_)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Ca(r,i.changes)];case 3:return a.sent(),[4,Po(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=zo(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}function da(t,e){return Object(a.a)(this,void 0,void 0,(function(){var n,r;return Object(a.c)(this,(function(i){switch(i.label){case 0:n=m(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Ei(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(g(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?g(r.bo):t.removedDocuments.size>0&&(g(r.bo),r.bo=!1))})),[4,Ca(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Gr(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function va(t,e,n){var r=m(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=m(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&Zo(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function ya(t,e,n){return Object(a.a)(this,void 0,void 0,(function(){var r,i,o,s,u,c;return Object(a.c)(this,(function(a){switch(a.label){case 0:return(r=m(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Ce(K.comparator)).insert(o,at.newNoDocument(o,S.min())),u=Ue().add(o),c=new Be(S.min(),new Map,new Oe(_),s,u),[4,da(r,c)]):[3,2];case 1:return a.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),ka(r),[3,4];case 2:return[4,Ci(r.localStore,e,!1).then((function(){return Ta(r,e,n)})).catch(Gr)];case 3:a.sent(),a.label=4;case 4:return[2]}}))}))}function ga(t,e){return Object(a.a)(this,void 0,void 0,(function(){var n,r,i;return Object(a.c)(this,(function(o){switch(o.label){case 0:n=m(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,_i(n.localStore,e)];case 2:return i=o.sent(),_a(n,r,null),wa(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Ca(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Gr(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function ma(t,e,n){return Object(a.a)(this,void 0,void 0,(function(){var r,i;return Object(a.c)(this,(function(o){switch(o.label){case 0:r=m(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=m(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return g(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),_a(r,e,n),wa(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Ca(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Gr(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function ba(t,e){return Object(a.a)(this,void 0,void 0,(function(){var n,r,i,o,s;return Object(a.c)(this,(function(a){switch(a.label){case 0:So((n=m(t)).remoteStore)||f("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=m(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=zo(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}function wa(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function _a(t,e,n){var r=m(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Ta(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||Ea(t,e)}))}function Ea(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(wo(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),ka(t))}function Ia(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof ia?(t.No.addReference(o.key,e),Sa(t,o)):o instanceof oa?(f("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||Ea(t,o.key)):y()}}function Sa(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(f("SyncEngine","New document in limbo: "+n),t.So.add(r),ka(t))}function ka(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new K(O.fromString(e)),r=t.ko.next();t.Co.set(r,new ua(n)),t.Do=t.Do.insert(n,r),bo(t.remoteStore,new dr(Mt(At(n.path)),r,2,s.o))}}function Ca(t,e,n){return Object(a.a)(this,void 0,void 0,(function(){var r,i,o,s;return Object(a.c)(this,(function(u){switch(u.label){case 0:return r=m(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){s.push(r.Oo(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=yi.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),r.vo._r(i),[4,function(t,e){return Object(a.a)(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,l,h;return Object(a.c)(this,(function(a){switch(a.label){case 0:n=m(t),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return tr.forEach(e,(function(e){return tr.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return tr.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return a.sent(),[3,4];case 3:if(!or(r=a.sent()))throw r;return f("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],u=s.targetId,s.fromCache||(c=n.Fn.get(u),l=c.snapshotVersion,h=c.withLastLimboFreeSnapshotVersion(l),n.Fn=n.Fn.insert(u,h));return[2]}}))}))}(r.localStore,o)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function xa(t,e){return Object(a.a)(this,void 0,void 0,(function(){var n,r;return Object(a.c)(this,(function(i){switch(i.label){case 0:return(n=m(t)).currentUser.isEqual(e)?[3,3]:(f("SyncEngine","User change. New user:",e.toKey()),[4,wi(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach((function(t){t.forEach((function(t){t.reject(new c(u.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Ca(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Aa(t,e){var n=m(t),r=n.Co.get(e);if(r&&r.bo)return Ue().add(r.key);var i=Ue(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Oa(t,e){return Object(a.a)(this,void 0,void 0,(function(){var n,r,i;return Object(a.c)(this,(function(o){switch(o.label){case 0:return[4,xi((n=m(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&Ia(n,e.targetId,i.To),i)]}}))}))}function Na(t){return Object(a.a)(this,void 0,void 0,(function(){var e;return Object(a.c)(this,(function(n){return[2,Oi((e=m(t)).localStore).then((function(t){return Ca(e,t)}))]}))}))}function Pa(t,e,n,r){return Object(a.a)(this,void 0,void 0,(function(){var i,o;return Object(a.c)(this,(function(a){switch(a.label){case 0:return[4,function(t,e){var n=m(t),r=m(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):tr.resolve(null)}))}))}((i=m(t)).localStore,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,Po(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(_a(i,e,r||null),wa(i,e),function(t,e){m(m(t)._n).Gt(e)}(i.localStore,e)):y(),a.label=4;case 4:return[4,Ca(i,o)];case 5:return a.sent(),[3,7];case 6:f("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}}))}))}function Ra(t,e){return Object(a.a)(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,l;return Object(a.c)(this,(function(a){switch(a.label){case 0:return Ua(n=m(t)),Va(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Da(n,r.toArray())]);case 1:return i=a.sent(),n.$o=!0,[4,Uo(n.remoteStore,!0)];case 2:for(a.sent(),o=0,s=i;o<s.length;o++)u=s[o],bo(n.remoteStore,u);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(c=[],l=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?c.push(e):l=l.then((function(){return Ta(n,e),Ci(n.localStore,e,!0)})),wo(n.remoteStore,e)})),[4,l]);case 4:return a.sent(),[4,Da(n,c)];case 5:return a.sent(),function(t){var e=m(t);e.Co.forEach((function(t,n){wo(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new Ce(K.comparator)}(n),n.$o=!1,[4,Uo(n.remoteStore,!1)];case 6:a.sent(),a.label=7;case 7:return[2]}}))}))}function Da(t,e,n){return Object(a.a)(this,void 0,void 0,(function(){var n,r,i,o,s,u,c,l,h,f,p,d,v,y;return Object(a.c)(this,(function(a){switch(a.label){case 0:n=m(t),r=[],i=[],o=0,s=e,a.label=1;case 1:return o<s.length?(u=s[o],c=void 0,(l=n.Vo.get(u))&&0!==l.length?[4,ki(n.localStore,Mt(l[0]))]:[3,7]):[3,13];case 2:c=a.sent(),h=0,f=l,a.label=3;case 3:return h<f.length?(p=f[h],d=n.Po.get(p),[4,Oa(n,d)]):[3,6];case 4:(v=a.sent()).snapshot&&i.push(v.snapshot),a.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Ai(n.localStore,u)];case 8:return y=a.sent(),[4,ki(n.localStore,y)];case 9:return c=a.sent(),[4,ha(n,La(y),u,!1)];case 10:a.sent(),a.label=11;case 11:r.push(c),a.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function La(t){return xt(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Ma(t){var e=m(t);return m(m(e.localStore).persistence).fn()}function ja(t,e,n,r){return Object(a.a)(this,void 0,void 0,(function(){var i,o,s;return Object(a.c)(this,(function(a){switch(a.label){case 0:return(i=m(t)).$o?(f("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Oi(i.localStore)];case 3:return o=a.sent(),s=Be.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Ca(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Ci(i.localStore,e,!0)];case 6:return a.sent(),Ta(i,e,r),[3,8];case 7:y(),a.label=8;case 8:return[2]}}))}))}function Fa(t,e,n){return Object(a.a)(this,void 0,void 0,(function(){var r,i,o,s,u,c,l,h,p,d;return Object(a.c)(this,(function(v){switch(v.label){case 0:if(!(r=Ua(t)).$o)return[3,10];i=0,o=e,v.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(f("SyncEngine","Adding an already active target "+s),[3,5]):[4,Ai(r.localStore,s)]):[3,6];case 2:return u=v.sent(),[4,ki(r.localStore,u)];case 3:return c=v.sent(),[4,ha(r,La(u),c.targetId,!1)];case 4:v.sent(),bo(r.remoteStore,c),v.label=5;case 5:return i++,[3,1];case 6:l=function(t){return Object(a.c)(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Ci(r.localStore,t,!1).then((function(){wo(r.remoteStore,t),Ta(r,t)})).catch(Gr)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,p=n,v.label=7;case 7:return h<p.length?(d=p[h],[5,l(d)]):[3,10];case 8:v.sent(),v.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Ua(t){var e=m(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=da.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Aa.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ya.bind(null,e),e.vo._r=$o.bind(null,e.eventManager),e.vo.Mo=Jo.bind(null,e.eventManager),e}function Va(t){var e=m(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ga.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ma.bind(null,e),e}var qa=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(a.a)(this,void 0,void 0,(function(){return Object(a.c)(this,(function(e){switch(e.label){case 0:return this.R=uo(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return bi(this.persistence,new gi,t.initialUser,this.R)},t.prototype.qo=function(t){return new qi(zi.bs,this.R)},t.prototype.Bo=function(t){return new to},t.prototype.terminate=function(){return Object(a.a)(this,void 0,void 0,(function(){return Object(a.c)(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),Ba=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(a.b)(e,t),e.prototype.initialize=function(e){return Object(a.a)(this,void 0,void 0,(function(){return Object(a.c)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Ni(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,Va(this.Ko.syncEngine)];case 4:return n.sent(),[4,Po(this.Ko.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Qo=function(t){return bi(this.persistence,new gi,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new Xr(e,t.asyncQueue)},e.prototype.qo=function(t){var e=pi(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Dr.withCacheSize(this.cacheSizeBytes):Dr.DEFAULT;return new li(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,ao(),so(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new to},e}(qa),za=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(a.b)(e,t),e.prototype.initialize=function(e){return Object(a.a)(this,void 0,void 0,(function(){var n,r=this;return Object(a.c)(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof Zi?(this.sharedClientState.syncEngine={ui:Pa.bind(null,n),ai:ja.bind(null,n),hi:Fa.bind(null,n),fn:Ma.bind(null,n),ci:Na.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return Object(a.a)(r,void 0,void 0,(function(){return Object(a.c)(this,(function(e){switch(e.label){case 0:return[4,Ra(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=ao();if(!Zi.yt(e))throw new c(u.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=pi(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Zi(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Ba),Ka=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(a.a)(this,void 0,void 0,(function(){var n=this;return Object(a.c)(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return va(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=xa.bind(null,this.syncEngine),[4,Uo(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new Qo},t.prototype.createDatastore=function(t){var e,n=uo(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new oo(e));return function(t,e,n){return new po(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return va(a.syncEngine,t,0)},o=no.yt()?new no:new eo,new yo(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new ca(t,e,n,r,i,o);return a&&(s.$o=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(a.a)(this,void 0,void 0,(function(){var e;return Object(a.c)(this,(function(n){switch(n.label){case 0:return e=m(t),f("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,mo(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}();var Ha=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Wa=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Zn,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(a.a)(this,void 0,void 0,(function(){return Object(a.c)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return Object(a.a)(this,void 0,void 0,(function(){return Object(a.c)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return Object(a.a)(this,void 0,void 0,(function(){var t,e,n,r;return Object(a.c)(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new ea(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return Object(a.a)(this,void 0,void 0,(function(){var t,e;return Object(a.c)(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return Object(a.a)(this,void 0,void 0,(function(){var e;return Object(a.c)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(a.a)(this,void 0,void 0,(function(){var t,e;return Object(a.c)(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(a.a)(this,void 0,void 0,(function(){var e,n=this;return Object(a.c)(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new c(u.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(a.a)(this,void 0,void 0,(function(){var n,r,i,o,s,u;return Object(a.c)(this,(function(a){switch(a.label){case 0:return n=m(t),r=hn(n.R)+"/documents",i={documents:e.map((function(t){return sn(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=a.sent(),s=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){g(!!e.found),e.found.name,e.found.updateTime;var n=un(t,e.found.name),r=rn(e.found.updateTime),i=new it({mapValue:{fields:e.found.fields}});return at.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){g(!!e.missing),g(!!e.readTime);var n=un(t,e.missing),r=rn(e.readTime);return at.newNoDocument(n,r)}(t,e):y()}(n.R,t);s.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=s.get(t.toString());g(!!e),u.push(e)})),u)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Te(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(a.a)(this,void 0,void 0,(function(){var t,e=this;return Object(a.c)(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=K.fromPath(n);e.mutations.push(new Ee(r,e.precondition(r)))})),[4,function(t,e){return Object(a.a)(this,void 0,void 0,(function(){var n,r,i;return Object(a.c)(this,(function(o){switch(o.label){case 0:return n=m(t),r=hn(n.R)+"/documents",i={writes:e.map((function(t){return vn(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw y();e=S.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new c(u.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?se.updateTime(e):se.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(S.min()))throw new c(u.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return se.updateTime(e)}return se.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),Ga=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new co(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return Object(a.a)(t,void 0,void 0,(function(){var t,e,n=this;return Object(a.c)(this,(function(r){return t=new Wa(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!q(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Se(e)}return!1},t}(),Qa=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Ki.UNAUTHENTICATED,this.clientId=w.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return Object(a.a)(r,void 0,void 0,(function(){return Object(a.c)(this,(function(e){switch(e.label){case 0:return f("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return Object(a.a)(this,void 0,void 0,(function(){return Object(a.c)(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new c(u.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Zn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return Object(a.a)(t,void 0,void 0,(function(){var t,n;return Object(a.c)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=zo(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function Ya(t,e){return Object(a.a)(this,void 0,void 0,(function(){var n,r,i=this;return Object(a.c)(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),f("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return Object(a.a)(i,void 0,void 0,(function(){return Object(a.c)(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,wi(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function Xa(t,e){return Object(a.a)(this,void 0,void 0,(function(){var n,r;return Object(a.c)(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,$a(t)];case 1:return n=i.sent(),f("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return Object(a.a)(this,void 0,void 0,(function(){var n,r;return Object(a.c)(this,(function(i){switch(i.label){case 0:return(n=m(t)).asyncQueue.verifyOperationInProgress(),f("RemoteStore","RemoteStore received new credentials"),r=So(n),n.Or.add(3),[4,mo(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,go(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function $a(t){return Object(a.a)(this,void 0,void 0,(function(){return Object(a.c)(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(f("FirestoreClient","Using default OfflineComponentProvider"),[4,Ya(t,new qa)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function Ja(t){return Object(a.a)(this,void 0,void 0,(function(){return Object(a.c)(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(f("FirestoreClient","Using default OnlineComponentProvider"),[4,Xa(t,new Ka)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function Za(t){return $a(t).then((function(t){return t.persistence}))}function ts(t){return $a(t).then((function(t){return t.localStore}))}function es(t){return Ja(t).then((function(t){return t.remoteStore}))}function ns(t){return Ja(t).then((function(t){return t.syncEngine}))}function rs(t){return Object(a.a)(this,void 0,void 0,(function(){var e,n;return Object(a.c)(this,(function(r){switch(r.label){case 0:return[4,Ja(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=la.bind(null,e.syncEngine),n.onUnlisten=fa.bind(null,e.syncEngine),n)]}}))}))}function is(t,e,n){var r=this;void 0===n&&(n={});var i=new Zn;return t.asyncQueue.enqueueAndForget((function(){return Object(a.a)(r,void 0,void 0,(function(){var r;return Object(a.c)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Ha({next:function(o){e.enqueueAndForget((function(){return Xo(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new c(u.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new c(u.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new ta(At(n.path),o,{includeMetadataChanges:!0,so:!0});return Yo(t,a)},[4,rs(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function os(t,e,n){var r=this;void 0===n&&(n={});var i=new Zn;return t.asyncQueue.enqueueAndForget((function(){return Object(a.a)(r,void 0,void 0,(function(){var r;return Object(a.c)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Ha({next:function(n){e.enqueueAndForget((function(){return Xo(t,a)})),n.fromCache&&"server"===r.source?i.reject(new c(u.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new ta(n,o,{includeMetadataChanges:!0,so:!0});return Yo(t,a)},[4,rs(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var as=function(t,e,n,r,i,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a},ss=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),us=new Map,cs=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},ls=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(Ki.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),hs=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),fs=function(){function t(t){var e=this;this.currentUser=Ki.UNAUTHENTICATED,this.oc=new Zn,this.cc=0,this.changeListener=function(){return Promise.resolve()},this.uc=!1,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.ac=function(){e.cc++,e.currentUser=e.hc(),e.oc.resolve(),e.uc&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){f("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.lc(),e.auth.addAuthTokenListener(e.ac)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):e.uc&&(f("FirebaseCredentialsProvider","Auth not yet detected"),e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)})))}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(f("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(g("string"==typeof n.accessToken),new cs(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){this.uc=!0,this.asyncQueue=t,this.changeListener=e},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.ac),this.changeListener=function(){return Promise.resolve()}},t.prototype.hc=function(){var t=this.auth&&this.auth.getUid();return g(null===t||"string"==typeof t),new Ki(t)},t.prototype.lc=function(){var t=this;this.uc&&(this.uc=!1,this.asyncQueue.enqueueRetryable((function(){return Object(a.a)(t,void 0,void 0,(function(){return Object(a.c)(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,this.changeListener(this.currentUser)];case 2:return t.sent(),this.uc=!0,[2]}}))}))})))},t}(),ps=function(){function t(t,e,n){this.fc=t,this.dc=e,this.wc=n,this.type="FirstParty",this.user=Ki.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.dc},e=this.fc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.wc&&(t["X-Goog-Iam-Authorization-Token"]=this.wc),t},enumerable:!1,configurable:!0}),t}(),ds=function(){function t(t,e,n){this.fc=t,this.dc=e,this.wc=n}return t.prototype.getToken=function(){return Promise.resolve(new ps(this.fc,this.dc,this.wc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(Ki.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function vs(t,e,n){if(!n)throw new c(u.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function ys(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new c(u.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function gs(t,e,n,r){if(!0===e&&!0===r)throw new c(u.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function ms(t){if(!K.isDocumentKey(t))throw new c(u.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function bs(t){if(K.isDocumentKey(t))throw new c(u.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function ws(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":y()}function _s(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new c(u.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ws(t);throw new c(u.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Ts(t,e){if(e<=0)throw new c(u.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Es=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new c(u.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new c(u.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,gs("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Is=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Es({}),this._settingsFrozen=!1,t instanceof ss?(this._databaseId=t,this._credentials=new ls):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new c(u.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ss(t.options.projectId)}(t),this._credentials=new fs(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new c(u.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new c(u.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Es(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new ls;switch(t.type){case"gapi":var e=t.client;return g(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new ds(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new c(u.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=us.get(this))&&(f("ComponentProvider","Removing Datastore"),us.delete(this),t.terminate()),Promise.resolve();var t},t}(),Ss=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Cs(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),ks=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Cs=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,At(r))||this)._path=r,i.type="collection",i}return Object(a.b)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Ss(this.firestore,null,new K(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(ks);function xs(t,e){for(var n,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(t=Object(r.i)(t),vs("collection","path",e),t instanceof Is)return bs(n=O.fromString.apply(O,Object(a.d)([e],i))),new Cs(t,null,n);if(!(t instanceof Ss||t instanceof Cs))throw new c(u.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return bs(n=O.fromString.apply(O,Object(a.d)([t.path],i)).child(O.fromString(e))),new Cs(t.firestore,null,n)}function As(t,e){for(var n,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];if(t=Object(r.i)(t),1===arguments.length&&(e=w.u()),vs("doc","path",e),t instanceof Is)return ms(n=O.fromString.apply(O,Object(a.d)([e],i))),new Ss(t,null,new K(n));if(!(t instanceof Ss||t instanceof Cs))throw new c(u.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return ms(n=t._path.child(O.fromString.apply(O,Object(a.d)([e],i)))),new Ss(t.firestore,t instanceof Cs?t.converter:null,new K(n))}function Os(t,e){return t=Object(r.i)(t),e=Object(r.i)(e),(t instanceof Ss||t instanceof Cs)&&(e instanceof Ss||e instanceof Cs)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Ns(t,e){return t=Object(r.i)(t),e=Object(r.i)(e),t instanceof ks&&e instanceof ks&&t.firestore===e.firestore&&Ft(t._query,e._query)&&t.converter===e.converter}var Ps=function(){function t(){var t=this;this._c=Promise.resolve(),this.mc=[],this.yc=!1,this.gc=[],this.Ec=null,this.Tc=!1,this.Ic=[],this.Zi=new co(this,"async_queue_retry"),this.Ac=function(){var e=so();e&&f("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=so();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ac)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.yc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Rc(),this.bc(t)},t.prototype.enterRestrictedMode=function(){if(!this.yc){this.yc=!0;var t=so();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ac)}},t.prototype.enqueue=function(t){return this.Rc(),this.yc?new Promise((function(t){})):this.bc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.mc.push(t),e.vc()}))},t.prototype.vc=function(){return Object(a.a)(this,void 0,void 0,(function(){var t,e=this;return Object(a.c)(this,(function(n){switch(n.label){case 0:if(0===this.mc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.mc[0]()];case 2:return n.sent(),this.mc.shift(),this.Zi.reset(),[3,4];case 3:if(!or(t=n.sent()))throw t;return f("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.mc.length>0&&this.Zi.ji((function(){return e.vc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.bc=function(t){var e=this,n=this._c.then((function(){return e.Tc=!0,t().catch((function(t){throw e.Ec=t,e.Tc=!1,p("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.Tc=!1,t}))}));return this._c=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Rc(),this.Ic.indexOf(t)>-1&&(e=0);var i=Bo.createAndSchedule(this,t,e,n,(function(t){return r.Pc(t)}));return this.gc.push(i),i},t.prototype.Rc=function(){this.Ec&&y()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Vc=function(){return Object(a.a)(this,void 0,void 0,(function(){var t;return Object(a.c)(this,(function(e){switch(e.label){case 0:return[4,t=this._c];case 1:e.sent(),e.label=2;case 2:if(t!==this._c)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Sc=function(t){for(var e=0,n=this.gc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Dc=function(t){var e=this;return this.Vc().then((function(){e.gc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.gc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Vc()}))},t.prototype.Cc=function(t){this.Ic.push(t)},t.prototype.Pc=function(t){var e=this.gc.indexOf(t);this.gc.splice(e,1)},t}();function Rs(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Zn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Ds=-1,Ls=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Ps,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(a.b)(e,t),e.prototype._terminate=function(){return this._firestoreClient||js(this),this._firestoreClient.terminate()},e}(Is);function Ms(t){return t._firestoreClient||js(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function js(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new as(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Qa(t._credentials,t._queue,r)}function Fs(t,e,n){var r=this,i=new Zn;return t.asyncQueue.enqueue((function(){return Object(a.a)(r,void 0,void 0,(function(){var r;return Object(a.c)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,Ya(t,n)];case 1:return o.sent(),[4,Xa(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===u.FAILED_PRECONDITION||t.code===u.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Us(t){if(t._initialized||t._terminated)throw new c(u.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Vs=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new c(u.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new P(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),qs=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(D.fromBase64String(e))}catch(e){throw new c(u.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(D.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Bs=function(t){this._methodName=t},zs=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new c(u.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new c(u.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return _(this._lat,t._lat)||_(this._long,t._long)},t}(),Ks=/^__.*__$/,Hs=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new ye(t,this.data,this.fieldMask,e,this.fieldTransforms):new ve(t,this.data,e,this.fieldTransforms)},t}(),Ws=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new ye(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Gs(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw y()}}var Qs=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Nc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"xc",{get:function(){return this.settings.xc},enumerable:!1,configurable:!0}),t.prototype.Fc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Fc({path:n,$c:!1});return r.Oc(t),r},t.prototype.Mc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Fc({path:n,$c:!1});return r.Nc(),r},t.prototype.Lc=function(t){return this.Fc({path:void 0,$c:!0})},t.prototype.Bc=function(t){return du(t,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Uc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Nc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Oc(this.path.get(t))},t.prototype.Oc=function(t){if(0===t.length)throw this.Bc("Document fields must not be empty");if(Gs(this.xc)&&Ks.test(t))throw this.Bc('Document fields cannot begin and end with "__"')},t}(),Ys=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||uo(t)}return t.prototype.Qc=function(t,e,n,r){return void 0===r&&(r=!1),new Qs({xc:t,methodName:e,Uc:n,path:P.emptyPath(),$c:!1,qc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Xs(t){var e=t._freezeSettings(),n=uo(t._databaseId);return new Ys(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $s(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Qc(o.merge||o.mergeFields?2:0,e,n,i);lu("Data must be an object, but it was:",a,r);var s,l,h=uu(r,a);if(o.merge)s=new R(a.fieldMask),l=a.fieldTransforms;else if(o.mergeFields){for(var f=[],p=0,d=o.mergeFields;p<d.length;p++){var v=hu(e,d[p],n);if(!a.contains(v))throw new c(u.INVALID_ARGUMENT,"Field '"+v+"' is specified in your field mask but missing from your input data.");vu(f,v)||f.push(v)}s=new R(f),l=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,l=a.fieldTransforms;return new Hs(new it(h),s,l)}var Js=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.b)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.xc)throw 1===t.xc?t.Bc(this._methodName+"() can only appear at the top level of your update data"):t.Bc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Bs);function Zs(t,e,n){return new Qs({xc:3,Uc:e.settings.Uc,methodName:t._methodName,$c:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var tu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.b)(e,t),e.prototype._toFieldTransform=function(t){return new oe(t.path,new $t)},e.prototype.isEqual=function(t){return t instanceof e},e}(Bs),eu=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(a.b)(e,t),e.prototype._toFieldTransform=function(t){var e=Zs(this,t,!0),n=this.Kc.map((function(t){return su(t,e)})),r=new Jt(n);return new oe(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Bs),nu=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(a.b)(e,t),e.prototype._toFieldTransform=function(t){var e=Zs(this,t,!0),n=this.Kc.map((function(t){return su(t,e)})),r=new te(n);return new oe(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Bs),ru=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(a.b)(e,t),e.prototype._toFieldTransform=function(t){var e=new ne(t.R,Wt(t.R,this.jc));return new oe(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Bs);function iu(t,e,n,i){var o=t.Qc(1,e,n);lu("Data must be an object, but it was:",o,i);var a=[],s=it.empty();C(i,(function(t,i){var u=pu(e,t,n);i=Object(r.i)(i);var c=o.Mc(u);if(i instanceof Js)a.push(u);else{var l=su(i,c);null!=l&&(a.push(u),s.set(u,l))}}));var u=new R(a);return new Ws(s,u,o.fieldTransforms)}function ou(t,e,n,i,o,a){var s=t.Qc(1,e,n),l=[hu(e,i,n)],h=[o];if(a.length%2!=0)throw new c(u.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var f=0;f<a.length;f+=2)l.push(hu(e,a[f])),h.push(a[f+1]);for(var p=[],d=it.empty(),v=l.length-1;v>=0;--v)if(!vu(p,l[v])){var y=l[v],g=h[v];g=Object(r.i)(g);var m=s.Mc(y);if(g instanceof Js)p.push(y);else{var b=su(g,m);null!=b&&(p.push(y),d.set(y,b))}}var w=new R(p);return new Ws(d,w,s.fieldTransforms)}function au(t,e,n,r){return void 0===r&&(r=!1),su(n,t.Qc(r?4:3,e))}function su(t,e){if(cu(t=Object(r.i)(t)))return lu("Unsupported field value:",e,t),uu(t,e);if(t instanceof Bs)return function(t,e){if(!Gs(e.xc))throw e.Bc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Bc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.$c&&4!==e.xc)throw e.Bc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=su(o[i],e.Lc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(r.i)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Wt(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=I.fromDate(t);return{timestampValue:tn(e.R,n)}}if(t instanceof I)return n=new I(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:tn(e.R,n)};if(t instanceof zs)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof qs)return{bytesValue:en(e.R,t._byteString)};if(t instanceof Ss){n=e.databaseId;var i=t.firestore._databaseId;if(!i.isEqual(n))throw e.Bc("Document reference is for database "+i.projectId+"/"+i.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:on(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Bc("Unsupported field value: "+ws(t))}(t,e)}function uu(t,e){var n={};return x(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):C(t,(function(t,r){var i=su(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function cu(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof I||t instanceof zs||t instanceof qs||t instanceof Ss||t instanceof Bs)}function lu(t,e,n){if(!cu(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=ws(n);throw"an object"===r?e.Bc(t+" a custom object"):e.Bc(t+" "+r)}}function hu(t,e,n){if((e=Object(r.i)(e))instanceof Vs)return e._internalPath;if("string"==typeof e)return pu(t,e);throw du("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var fu=new RegExp("[~\\*/\\[\\]]");function pu(t,e,n){if(e.search(fu)>=0)throw du("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Vs.bind.apply(Vs,Object(a.d)([void 0],e.split(".")))))._internalPath}catch(r){throw du("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function du(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var l="";return(o||a)&&(l+=" (found",o&&(l+=" in field "+r),a&&(l+=" in document "+i),l+=")"),new c(u.INVALID_ARGUMENT,(s+=". ")+t+l)}function vu(t,e){return t.some((function(t){return t.isEqual(e)}))}var yu=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ss(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new gu(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(mu("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),gu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.b)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(yu);function mu(t,e){return"string"==typeof e?pu(t,e):e instanceof Vs?e._internalPath:e._delegate._internalPath}var bu=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),wu=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Object(a.b)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new _u(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(mu("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(yu),_u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.b)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(wu),Tu=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new bu(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new _u(n._firestore,n._userDataWriter,r.key,r,new bu(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new c(u.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){var r=new _u(t._firestore,t._userDataWriter,e.doc.key,e.doc,new bu(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new _u(t._firestore,t._userDataWriter,e.doc.key,e.doc,new bu(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Eu(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Eu(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return y()}}function Iu(t,e){return t instanceof wu&&e instanceof wu?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Tu&&e instanceof Tu&&t._firestore===e._firestore&&Ns(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Su(t){if(Nt(t)&&0===t.explicitOrderBy.length)throw new c(u.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ku=function(){};function Cu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var xu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Wc=e,i.Gc=n,i.zc=r,i.type="where",i}return Object(a.b)(e,t),e.prototype._apply=function(t){var e=Xs(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new c(u.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Lu(a,o);for(var l=[],h=0,f=a;h<f.length;h++){var p=f[h];l.push(Du(r,t,p))}s={arrayValue:{values:l}}}else s=Du(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Lu(a,o),s=au(n,"where",a,"in"===o||"not-in"===o);var d=ft.create(i,o,s);return function(t,e){if(e.g()){var n=Rt(t);if(null!==n&&!n.isEqual(e.field))throw new c(u.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Pt(t);null!==r&&Mu(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new c(u.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new c(u.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,d),d}(t._query,0,e,t.firestore._databaseId,this.Wc,this.Gc,this.zc);return new ks(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Ct(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(ku),Au=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Wc=e,r.Hc=n,r.type="orderBy",r}return Object(a.b)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new c(u.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new c(u.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Et(e,n);return function(t,e){if(null===Pt(t)){var n=Rt(t);null!==n&&Mu(t,n,e.field)}}(t,r),r}(t._query,this.Wc,this.Hc);return new ks(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Ct(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(ku),Ou=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return Object(a.b)(e,t),e.prototype._apply=function(t){return new ks(t.firestore,t.converter,jt(t._query,this.Jc,this.Yc))},e}(ku),Nu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return Object(a.b)(e,t),e.prototype._apply=function(t){var e=Ru(t,this.type,this.Xc,this.Zc);return new ks(t.firestore,t.converter,function(t,e){return new Ct(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(ku),Pu=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return Object(a.b)(e,t),e.prototype._apply=function(t){var e=Ru(t,this.type,this.Xc,this.Zc);return new ks(t.firestore,t.converter,function(t,e){return new Ct(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(ku);function Ru(t,e,n,i){if(n[0]=Object(r.i)(n[0]),n[0]instanceof yu)return function(t,e,n,r,i){if(!r)throw new c(u.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=Lt(t);a<s.length;a++){var l=s[a];if(l.field.isKeyField())o.push($(e,r.key));else{var h=r.data.field(l.field);if(U(h))throw new c(u.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+l.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===h){var f=l.field.canonicalString();throw new c(u.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+f+"' (used as the orderBy) does not exist.")}o.push(h)}}return new _t(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,i);var o=Xs(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new c(u.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],l=0;l<i.length;l++){var h=i[l];if(a[l].field.isKeyField()){if("string"!=typeof h)throw new c(u.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof h);if(!Dt(t)&&-1!==h.indexOf("/"))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+h+"' contains a slash.");var f=t.path.child(O.fromString(h));if(!K.isDocumentKey(f))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+f+"' is not because it contains an odd number of segments.");var p=new K(f);s.push($(e,p))}else{var d=au(n,r,h);s.push(d)}}return new _t(s,o)}(t._query,t.firestore._databaseId,o,e,n,i)}function Du(t,e,n){if("string"==typeof(n=Object(r.i)(n))){if(""===n)throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Dt(e)&&-1!==n.indexOf("/"))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var i=e.path.child(O.fromString(n));if(!K.isDocumentKey(i))throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+i+"' is not because it has an odd number of segments ("+i.length+").");return $(t,new K(i))}if(n instanceof Ss)return $(t,n._key);throw new c(u.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+ws(n)+".")}function Lu(t,e){if(!Array.isArray(t)||0===t.length)throw new c(u.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new c(u.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Mu(t,e,n){if(!n.isEqual(e))throw new c(u.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var ju=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),H(t)){case 0:return null;case 1:return t.booleanValue;case 2:return j(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(F(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw y()}},t.prototype.convertObject=function(t,e){var n=this,r={};return C(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new zs(j(t.latitude),j(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=function t(e){var n=e.mapValue.fields.__previous_value__;return U(n)?t(n):n}(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(V(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=M(t);return new I(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=O.fromString(t);g(An(n));var r=new ss(n.get(1),n.get(3)),i=new K(n.popFirst(5));return r.isEqual(e)||p("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Fu(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Uu=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(a.b)(e,t),e.prototype.convertBytes=function(t){return new qs(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ss(this.firestore,null,e)},e}(ju),Vu=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Xs(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=qu(t,this._firestore),i=Fu(r.converter,e,n),o=$s(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,se.none())),this},t.prototype.update=function(t,e,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];this._verifyNotCommitted();var a,s=qu(t,this._firestore);return a="string"==typeof(e=Object(r.i)(e))||e instanceof Vs?ou(this._dataReader,"WriteBatch.update",s._key,e,n,i):iu(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(a.toMutation(s._key,se.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=qu(t,this._firestore);return this._mutations=this._mutations.concat(new Te(e._key,se.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new c(u.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function qu(t,e){if((t=Object(r.i)(t)).firestore!==e)throw new c(u.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Bu=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(a.b)(e,t),e.prototype.convertBytes=function(t){return new qs(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ss(this.firestore,null,e)},e}(ju);function zu(t,e,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];t=_s(t,Ss);var a=_s(t.firestore,Ls),s=Xs(a);return Hu(a,[("string"==typeof(e=Object(r.i)(e))||e instanceof Vs?ou(s,"updateDoc",t._key,e,n,i):iu(s,"updateDoc",t._key,e)).toMutation(t._key,se.exists(!0))])}function Ku(t){for(var e,n,i,o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];t=Object(r.i)(t);var u={includeMetadataChanges:!1},c=0;"object"!=typeof o[c]||Rs(o[c])||(u=o[c],c++);var l,h,f,p={includeMetadataChanges:u.includeMetadataChanges};if(Rs(o[c])){var d=o[c];o[c]=null===(e=d.next)||void 0===e?void 0:e.bind(d),o[c+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),o[c+2]=null===(i=d.complete)||void 0===i?void 0:i.bind(d)}if(t instanceof Ss)h=_s(t.firestore,Ls),f=At(t._key.path),l={next:function(e){o[c]&&o[c](Wu(h,t,e))},error:o[c+1],complete:o[c+2]};else{var v=_s(t,ks);h=_s(v.firestore,Ls),f=v._query;var y=new Bu(h);l={next:function(t){o[c]&&o[c](new Tu(h,y,v,t))},error:o[c+1],complete:o[c+2]},Su(t._query)}return function(t,e,n,r){var i=this,o=new Ha(r),s=new ta(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return Object(a.a)(i,void 0,void 0,(function(){var e;return Object(a.c)(this,(function(n){switch(n.label){case 0:return e=Yo,[4,rs(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return Object(a.a)(i,void 0,void 0,(function(){var e;return Object(a.c)(this,(function(n){switch(n.label){case 0:return e=Xo,[4,rs(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(Ms(h),f,p,l)}function Hu(t,e){return function(t,e){var n=this,r=new Zn;return t.asyncQueue.enqueueAndForget((function(){return Object(a.a)(n,void 0,void 0,(function(){var n;return Object(a.c)(this,(function(i){switch(i.label){case 0:return n=pa,[4,ns(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Ms(t),e)}function Wu(t,e,n){var r=n.docs.get(e._key),i=new Bu(t);return new wu(t,i,e._key,r,new bu(n.hasPendingWrites,n.fromCache),e.converter)}var Gu=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(a.b)(e,t),e.prototype.get=function(e){var n=this,r=qu(e,this._firestore),i=new Bu(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new wu(n._firestore,i,r._key,t._document,new bu(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Xs(t)}return t.prototype.get=function(t){var e=this,n=qu(t,this._firestore),r=new Uu(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return y();var i=t[0];if(i.isFoundDocument())return new yu(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new yu(e._firestore,r,n._key,null,n.converter);throw y()}))},t.prototype.set=function(t,e,n){var r=qu(t,this._firestore),i=Fu(r.converter,e,n),o=$s(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a,s=qu(t,this._firestore);return a="string"==typeof(e=Object(r.i)(e))||e instanceof Vs?ou(this._dataReader,"Transaction.update",s._key,e,n,i):iu(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,a),this},t.prototype.delete=function(t){var e=qu(t,this._firestore);return this._transaction.delete(e._key),this},t}());function Qu(){if("undefined"==typeof Uint8Array)throw new c(u.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Yu(){if("undefined"==typeof atob)throw new c(u.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Xu=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return Yu(),new t(qs.fromBase64String(e))},t.fromUint8Array=function(e){return Qu(),new t(qs.fromUint8Array(e))},t.prototype.toBase64=function(){return Yu(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Qu(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),$u=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Us(t=_s(t,Ls));var n=Ms(t),r=t._freezeSettings(),i=new Ka;return Fs(n,i,new Ba(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Us(t=_s(t,Ls));var e=Ms(t),n=t._freezeSettings(),r=new Ka;return Fs(e,r,new za(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new c(u.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Zn;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return Object(a.a)(e,void 0,void 0,(function(){var e;return Object(a.c)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(a.a)(this,void 0,void 0,(function(){var e;return Object(a.c)(this,(function(n){switch(n.label){case 0:return nr.yt()?(e=t+"main",[4,nr.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(pi(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),Ju=function(){function t(t,e,n){var r=this;this._delegate=e,this.tu=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof ss||(this.eu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||d("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,i){void 0===i&&(i={});var o=(t=_s(t,Is))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==e&&d("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},o),{host:e+":"+n,ssl:!1})),i.mockUserToken){var a=Object(r.e)(i.mockUserToken),s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new c(u.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new hs(new cs(a,new Ki(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Object(a.a)(e,void 0,void 0,(function(){var e,n;return Object(a.c)(this,(function(r){switch(r.label){case 0:return[4,Za(t)];case 1:return e=r.sent(),[4,es(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=m(t);return e.Or.delete(0),go(e)}(n))]}}))}))}))}(Ms(_s(this._delegate,Ls)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Object(a.a)(e,void 0,void 0,(function(){var e,n;return Object(a.c)(this,(function(r){switch(r.label){case 0:return[4,Za(t)];case 1:return e=r.sent(),[4,es(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(a.a)(this,void 0,void 0,(function(){var e;return Object(a.c)(this,(function(n){switch(n.label){case 0:return(e=m(t)).Or.add(0),[4,mo(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Ms(_s(this._delegate,Ls)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&gs("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.tu.enableMultiTabIndexedDbPersistence(this):this.tu.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.tu.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.eu&&(this.eu._removeServiceInstance("firestore"),this.eu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Zn;return t.asyncQueue.enqueueAndForget((function(){return Object(a.a)(e,void 0,void 0,(function(){var e;return Object(a.c)(this,(function(r){switch(r.label){case 0:return e=ba,[4,ns(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Ms(_s(this._delegate,Ls)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Ha(e);return t.asyncQueue.enqueueAndForget((function(){return Object(a.a)(n,void 0,void 0,(function(){var e;return Object(a.c)(this,(function(n){switch(n.label){case 0:return e=function(t,e){m(t).Gr.add(e),e.next()},[4,rs(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return Object(a.a)(n,void 0,void 0,(function(){var e;return Object(a.c)(this,(function(n){switch(n.label){case 0:return e=function(t,e){m(t).Gr.delete(e)},[4,rs(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Ms(t=_s(t,Ls)),Rs(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.eu)throw new c(u.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.eu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new pc(this,xs(this._delegate,t))}catch(t){throw oc(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new ic(this,As(this._delegate,t))}catch(t){throw oc(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new lc(this,function(t,e){if(t=_s(t,Is),vs("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new c(u.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new ks(t,null,function(t){return new Ct(O.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw oc(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Zn;return t.asyncQueue.enqueueAndForget((function(){return Object(a.a)(n,void 0,void 0,(function(){var n;return Object(a.c)(this,(function(i){switch(i.label){case 0:return[4,function(t){return Ja(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new Ga(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(Ms(t),(function(n){return e(new Gu(t,n))}))}(this._delegate,(function(n){return t(new ec(e,n))}))},t.prototype.batch=function(){var t=this;return Ms(this._delegate),new nc(new Vu(this._delegate,(function(e){return Hu(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new c(u.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new c(u.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Zu=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(a.b)(e,t),e.prototype.convertBytes=function(t){return new Xu(new qs(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return ic.nu(e,this.firestore,null)},e}(ju);function tc(t){var e;e=t,l.setLogLevel(e)}var ec=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Zu(t)}return t.prototype.get=function(t){var e=this,n=dc(t);return this._delegate.get(n).then((function(t){return new uc(e._firestore,new wu(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=dc(t);return n?(ys("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=dc(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(a.d)([s,e,n],i)),this},t.prototype.delete=function(t){var e=dc(t);return this._delegate.delete(e),this},t}(),nc=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=dc(t);return n?(ys("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=dc(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(a.d)([s,e,n],i)),this},t.prototype.delete=function(t){var e=dc(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),rc=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new _u(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new cc(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.su=function(e,n){var r=t.iu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Zu(e),n),i.set(n,o)),o},t}();rc.iu=new WeakMap;var ic=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Zu(t)}return t.ru=function(e,n,r){if(e.length%2!=0)throw new c(u.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Ss(n._delegate,r,new K(e)))},t.nu=function(e,n,r){return new t(n,new Ss(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new pc(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new pc(this.firestore,xs(this._delegate,t))}catch(t){throw oc(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(r.i)(t))instanceof Ss&&Os(this._delegate,t)},t.prototype.set=function(t,e){e=ys("DocumentReference.set",e);try{return function(t,e,n){t=_s(t,Ss);var r=_s(t.firestore,Ls),i=Fu(t.converter,e,n);return Hu(r,[$s(Xs(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,se.none())])}(this._delegate,t,e)}catch(t){throw oc(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?zu(this._delegate,t):zu.apply(void 0,Object(a.d)([this._delegate,t,e],n))}catch(t){throw oc(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Hu(_s((t=this._delegate).firestore,Ls),[new Te(t._key,se.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ac(e),i=sc(e,(function(e){return new uc(t.firestore,new wu(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return Ku(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=_s(t,Ss);var e=_s(t.firestore,Ls),n=Ms(e),r=new Bu(e);return function(t,e){var n=this,r=new Zn;return t.asyncQueue.enqueueAndForget((function(){return Object(a.a)(n,void 0,void 0,(function(){var n;return Object(a.c)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(a.a)(this,void 0,void 0,(function(){var r,i;return Object(a.c)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=m(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new c(u.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=zo(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,ts(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new wu(e,r,t._key,n,new bu(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=_s(t,Ss);var e=_s(t.firestore,Ls);return is(Ms(e),t._key,{source:"server"}).then((function(n){return Wu(e,t,n)}))}(this._delegate):function(t){t=_s(t,Ss);var e=_s(t.firestore,Ls);return is(Ms(e),t._key).then((function(n){return Wu(e,t,n)}))}(this._delegate)).then((function(t){return new uc(e.firestore,new wu(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(rc.su(this.firestore,e)):this._delegate.withConverter(null))},t}();function oc(t,e,n){return t.message=t.message.replace(e,n),t}function ac(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Rs(r))return r}return{}}function sc(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Rs(t[0])?t[0]:Rs(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var uc=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new ic(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Iu(this._delegate,t._delegate)},t}(),cc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(a.b)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(uc),lc=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Zu(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Cu(this._delegate,function(t,e,n){var r=e,i=mu("where",t);return new xu(i,r,n)}(e,n,r)))}catch(e){throw oc(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Cu(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=mu("orderBy",t);return new Au(r,n)}(e,n)))}catch(e){throw oc(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Cu(this._delegate,function(t){return Ts("limit",t),new Ou("limit",t,"F")}(e)))}catch(e){throw oc(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Cu(this._delegate,function(t){return Ts("limitToLast",t),new Ou("limitToLast",t,"L")}(e)))}catch(e){throw oc(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Cu(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Nu("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw oc(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Cu(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Nu("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw oc(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Cu(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Pu("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw oc(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Cu(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Pu("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw oc(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Ns(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=_s(t,ks);var e=_s(t.firestore,Ls),n=Ms(e),r=new Bu(e);return function(t,e){var n=this,r=new Zn;return t.asyncQueue.enqueueAndForget((function(){return Object(a.a)(n,void 0,void 0,(function(){var n;return Object(a.c)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(a.a)(this,void 0,void 0,(function(){var r,i,o,s,u;return Object(a.c)(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,xi(t,e,!0)];case 1:return u=a.sent(),r=new aa(e,u.Bn),i=r._o(u.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=a.sent(),u=zo(s,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,ts(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Tu(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=_s(t,ks);var e=_s(t.firestore,Ls),n=Ms(e),r=new Bu(e);return os(n,t._query,{source:"server"}).then((function(n){return new Tu(e,r,t,n)}))}(this._delegate):function(t){t=_s(t,ks);var e=_s(t.firestore,Ls),n=Ms(e),r=new Bu(e);return Su(t._query),os(n,t._query).then((function(n){return new Tu(e,r,t,n)}))}(this._delegate)).then((function(t){return new fc(e.firestore,new Tu(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=ac(e),i=sc(e,(function(e){return new fc(t.firestore,new Tu(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return Ku(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(rc.su(this.firestore,e)):this._delegate.withConverter(null))},t}(),hc=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new cc(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),fc=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new lc(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new cc(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new hc(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new cc(n._firestore,r))}))},t.prototype.isEqual=function(t){return Iu(this._delegate,t._delegate)},t}(),pc=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(a.b)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new ic(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new ic(this.firestore,void 0===t?As(this._delegate):As(this._delegate,t))}catch(t){throw oc(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=_s(t.firestore,Ls),r=As(t),i=Fu(t.converter,e);return Hu(n,[$s(Xs(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,se.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new ic(e.firestore,t)}))},e.prototype.isEqual=function(t){return Os(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(rc.su(this.firestore,t)):this._delegate.withConverter(null))},e}(lc);function dc(t){return _s(t,Ss)}var vc=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Vs.bind.apply(Vs,Object(a.d)([void 0],t)))}return t.documentId=function(){return new t(P.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(r.i)(t))instanceof Vs&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),yc=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new tu("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Js("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new eu("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new nu("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new ru("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}()}).call(this,n(18))},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return nr})),n.d(e,"b",(function(){return ir})),n.d(e,"c",(function(){return rr})),n.d(e,"d",(function(){return or})),n.d(e,"e",(function(){return ar})),n.d(e,"f",(function(){return sr})),n.d(e,"g",(function(){return tr})),n.d(e,"h",(function(){return er}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var o,a="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},s=s||{},u=a||self;function c(){}function l(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function h(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var f="closure_uid_"+(1e9*Math.random()>>>0),p=0;function d(t,e,n){return t.call.apply(t.bind,arguments)}function v(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function y(t,e,n){return(y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?d:v).apply(null,arguments)}function g(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function m(){return Date.now()}function b(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function w(){this.j=this.j,this.i=this.i}w.prototype.j=!1,w.prototype.ja=function(){if(!this.j&&(this.j=!0,this.G(),0))(function(t){Object.prototype.hasOwnProperty.call(t,f)&&t[f]||(t[f]=++p)})(this)},w.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var _=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},T=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"===typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function E(t){return Array.prototype.concat.apply([],arguments)}function I(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function S(t){return/^[\s\xa0]*$/.test(t)}var k,C=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function x(t,e){return-1!=t.indexOf(e)}function A(t,e){return t<e?-1:t>e?1:0}t:{var O=u.navigator;if(O){var N=O.userAgent;if(N){k=N;break t}}k=""}function P(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function R(t){var e={};for(var n in t)e[n]=t[n];return e}var D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<D.length;o++)n=D[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function M(t){return M[" "](t),t}M[" "]=c;var j,F=x(k,"Opera"),U=x(k,"Trident")||x(k,"MSIE"),V=x(k,"Edge"),q=V||U,B=x(k,"Gecko")&&!(x(k.toLowerCase(),"webkit")&&!x(k,"Edge"))&&!(x(k,"Trident")||x(k,"MSIE"))&&!x(k,"Edge"),z=x(k.toLowerCase(),"webkit")&&!x(k,"Edge");function K(){var t=u.document;return t?t.documentMode:void 0}t:{var H="",W=function(){var t=k;return B?/rv:([^\);]+)(\)|;)/.exec(t):V?/Edge\/([\d\.]+)/.exec(t):U?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):z?/WebKit\/(\S+)/.exec(t):F?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(W&&(H=W?W[1]:""),U){var G=K();if(null!=G&&G>parseFloat(H)){j=String(G);break t}}j=H}var Q,Y={};function X(t){return function(t,e){var n=Y;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=C(String(j)).split("."),r=C(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=A(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||A(0==a[2].length,0==s[2].length)||A(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(u.document&&U){var $=K();Q=$||(parseInt(j,10)||void 0)}else Q=void 0;var J=Q,Z=!U||9<=Number(J),tt=U&&!X("9"),et=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",c,e),u.removeEventListener("test",c,e)}catch(n){}return t}();function nt(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function rt(t,e){if(nt.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(B){t:{try{M(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:it[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}nt.prototype.b=function(){this.defaultPrevented=!0},b(rt,nt);var it={2:"touch",3:"pen",4:"mouse"};rt.prototype.b=function(){rt.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,tt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var ot="closure_listenable_"+(1e6*Math.random()|0),at=0;function st(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++at,this.Y=this.Z=!1}function ut(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ct(t){this.src=t,this.a={},this.b=0}function lt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=_(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ut(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ht(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}ct.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=ht(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new st(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var ft="closure_lm_"+(1e6*Math.random()|0),pt={};function dt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}return r=Tt(r),e&&e[ot]?e.wa(n,r,h(i)?!!i.capture:!!i,o):vt(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)dt(t,e[o],n,r,i);return null}return n=Tt(n),t&&t[ot]?t.va(e,n,h(r)?!!r.capture:!!r,i):vt(t,e,n,!1,r,i)}function vt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=h(i)?!!i.capture:!!i;if(a&&!Z)return null;var s=wt(t);if(s||(t[ft]=s=new ct(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=bt,e=Z?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)et||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(gt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function yt(t){if("number"!==typeof t&&t&&!t.Y){var e=t.src;if(e&&e[ot])lt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(gt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=wt(e))?(lt(n,t),0==n.b&&(n.src=null,e[ft]=null)):ut(t)}}}function gt(t){return t in pt?pt[t]:pt[t]="on"+t}function mt(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&yt(t),n.call(r,e)}function bt(t,e){if(t.Y)return!0;if(!Z){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return mt(t,e=new rt(e,this))}return mt(t,new rt(e,this))}function wt(t){return(t=t[ft])instanceof ct?t:null}var _t="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tt(t){return"function"===typeof t?t:(t[_t]||(t[_t]=function(e){return t.handleEvent(e)}),t[_t])}function Et(){w.call(this),this.c=new ct(this),this.J=this,this.C=null}function It(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"===typeof e)e=new nt(e,t);else if(e instanceof nt)e.target=e.target||t;else{var i=e;L(e=new nt(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.a=n[o];i=St(a,r,!0,e)&&i}if(i=St(a=e.a=t,r,!0,e)&&i,i=St(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=St(a=e.a=n[o],r,!1,e)&&i}function St(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&lt(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}b(Et,w),Et.prototype[ot]=!0,(o=Et.prototype).addEventListener=function(t,e,n,r){dt(this,t,e,n,r)},o.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=h(i)?!!i.capture:!!i,r=Tt(r),e&&e[ot]?(e=e.c,(n=String(n).toString())in e.a&&(-1<(r=ht(a=e.a[n],r,i,o))&&(ut(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete e.a[n],e.b--)))):e&&(e=wt(e))&&(n=e.a[n.toString()],e=-1,n&&(e=ht(n,r,i,o)),(r=-1<e?n[e]:null)&&yt(r))}(this,t,e,n,r)},o.G=function(){if(Et.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ut(n[r]);delete e.a[t],e.b--}}this.C=null},o.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},o.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var kt=u.JSON.stringify;function Ct(){this.b=this.a=null}var xt,At=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Nt}),(function(t){t.reset()}));function Ot(){var t=Lt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Nt(){this.next=this.b=this.a=null}function Pt(t){u.setTimeout((function(){throw t}),0)}function Rt(t,e){xt||function(){var t=u.Promise.resolve(void 0);xt=function(){t.then(Mt)}}(),Dt||(xt(),Dt=!0),Lt.add(t,e)}Ct.prototype.add=function(t,e){var n=At.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Nt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Nt.prototype.reset=function(){this.next=this.b=this.a=null};var Dt=!1,Lt=new Ct;function Mt(){for(var t;t=Ot();){try{t.a.call(t.b)}catch(n){Pt(n)}var e=At;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Dt=!1}function jt(t,e){Et.call(this),this.b=t||1,this.a=e||u,this.f=y(this.Za,this),this.g=m()}function Ft(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Ut(t,e,n){if("function"===typeof t)n&&(t=y(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=y(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function Vt(t){t.a=Ut((function(){t.a=null,t.c&&(t.c=!1,Vt(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}b(jt,Et),(o=jt.prototype).aa=!1,o.M=null,o.Za=function(){if(this.aa){var t=m()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),It(this,"tick"),this.aa&&(Ft(this),this.start()))}},o.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=m())},o.G=function(){jt.X.G.call(this),Ft(this),delete this.a};var qt=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Vt(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(u.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(w);function Bt(t){w.call(this),this.b=t,this.a={}}b(Bt,w);var zt=[];function Kt(t,e,n,r){Array.isArray(n)||(n&&(zt[0]=n.toString()),n=zt);for(var i=0;i<n.length;i++){var o=dt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Ht(t){P(t.a,(function(t,e){this.a.hasOwnProperty(e)&&yt(t)}),t),t.a={}}function Wt(){this.a=!0}function Gt(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return kt(n)}catch(s){return e}}(t,n)+(r?" "+r:"")}))}Bt.prototype.G=function(){Bt.X.G.call(this),Ht(this)},Bt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wt.prototype.info=function(){};var Qt={},Yt=null;function Xt(){return Yt=Yt||new Et}function $t(t){nt.call(this,Qt.Fa,t)}function Jt(t){var e=Xt();It(e,new $t(e,t))}function Zt(t,e){nt.call(this,Qt.STAT_EVENT,t),this.stat=e}function te(t){var e=Xt();It(e,new Zt(e,t))}function ee(t){nt.call(this,Qt.Ga,t)}function ne(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return u.setTimeout((function(){t()}),e)}Qt.Fa="serverreachability",b($t,nt),Qt.STAT_EVENT="statevent",b(Zt,nt),Qt.Ga="timingevent",b(ee,nt);var re={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},ie={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function oe(){}function ae(t){var e;return(e=t.a)||(e=t.a={}),e}function se(){}oe.prototype.a=null;var ue,ce={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function le(){nt.call(this,"d")}function he(){nt.call(this,"c")}function fe(){}function pe(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Bt(this),this.P=de,t=q?125:void 0,this.R=new jt(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}b(le,nt),b(he,nt),b(fe,oe),ue=new fe;var de=45e3,ve={},ye={};function ge(t,e,n){t.H=1,t.i=Ue(Re(e)),t.j=n,t.I=!0,me(t,null)}function me(t,e){t.u=m(),_e(t),t.l=Re(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Je(n.b,"t",r),t.D=0,t.a=Gn(t.g,t.g.C?e:null),0<t.O&&(t.F=new qt(y(t.Ca,t,t.a),t.O)),Kt(t.J,t.a,"readystatechange",t.Xa),e=t.B?R(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Jt(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.c,t.m,t.l,t.f,t.S,t.j)}function be(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=we(t,n);if(i==ye){4==e&&(t.h=4,te(14),r=!1),Gt(t.c,t.f,null,"[Incomplete Response]");break}if(i==ve){t.h=4,te(15),Gt(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Gt(t.c,t.f,i,null),ke(t,i)}4==e&&0==n.length&&(t.h=1,te(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Un(e),e.F=!0,te(11))):(Gt(t.c,t.f,n,"[Invalid Chunked Response]"),Se(t),Ie(t))}function we(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?ye:(n=Number(e.substring(n,r)),isNaN(n)?ve:(r+=1)+n>e.length?ye:(e=e.substr(r,n),t.D=r+n,e))}function _e(t){t.T=m()+t.P,Te(t,t.P)}function Te(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=ne(y(t.Va,t),e)}function Ee(t){t.o&&(u.clearTimeout(t.o),t.o=null)}function Ie(t){0==t.g.v||t.A||Bn(t.g,t)}function Se(t){Ee(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ft(t.R),Ht(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function ke(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||an(n.b,t)))if(n.I=t.N,!t.C&&an(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(g){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;qn(n),On(n)}Fn(n),te(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=ne(y(n.Sa,n),6e3));if(1>=on(n.b)&&n.ea){try{n.ea()}catch(g){}n.ea=void 0}}else Kn(n,11)}else if((t.C||n.a==t)&&qn(n),!S(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"===typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(x(l,"spdy")||x(l,"quic")||x(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(sn(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Fe(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=m()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=Wn(u,u.C?u.ga:null,u.fa),p.C){un(u.b,p);var d=p,v=u.D;v&&d.setTimeout(v),d.o&&(Ee(d),_e(d)),u.a=p}else jn(u);0<n.g.length&&Rn(n)}else"stop"!=i[0]&&"close"!=i[0]||Kn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Kn(n,7):An(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Jt(4)}catch(g){}}function Ce(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(l(t)||"string"===typeof t)T(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(l(t)||"string"===typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"===typeof t)return t.split("");if(l(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function xe(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof xe)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ae(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Oe(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Oe(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Oe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(o=pe.prototype).setTimeout=function(t){this.P=t},o.Xa=function(t){t=t.target;var e=this.F;e&&3==Sn(t)?e.f():this.Ca(t)},o.Ca=function(t){try{if(t==this.a)t:{var e=Sn(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!q&&!this.a.$())){this.A||4!=e||7==n||Jt(8==n||0>=r?3:2),Ee(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(a)){var u=a;break e}}u=null}if(!u){this.b=!1,this.h=3,te(12),Se(this),Ie(this);break t}Gt(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,ke(this,u)}this.I?(be(this,e,o),q&&this.b&&3==e&&(Kt(this.J,this.R,"tick",this.Wa),this.R.start())):(Gt(this.c,this.f,o,null),ke(this,o)),4==e&&Se(this),this.b&&!this.A&&(4==e?Bn(this.g,this):(this.b=!1,_e(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,te(12)):(this.h=0,te(13)),Se(this),Ie(this)}}}catch(c){}},o.Wa=function(){if(this.a){var t=Sn(this.a),e=this.a.$();this.D<e.length&&(Ee(this),be(this,t,e),this.b&&4!=t&&_e(this))}},o.cancel=function(){this.A=!0,Se(this)},o.Va=function(){this.o=null;var t=m();0<=t-this.T?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Jt(3),te(17)),Se(this),this.h=2,Ie(this)):Te(this,this.T-t)},(o=xe.prototype).K=function(){Ae(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},o.L=function(){return Ae(this),this.a.concat()},o.get=function(t,e){return Oe(this.b,t)?this.b[t]:e},o.set=function(t,e){Oe(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},o.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ne=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pe(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Pe){this.a=void 0!==e?e:t.a,De(this,t.f),this.j=t.j,Le(this,t.c),Me(this,t.h),this.g=t.g,e=t.b;var n=new Qe;n.c=e.c,e.a&&(n.a=new xe(e.a),n.b=e.b),je(this,n),this.i=t.i}else t&&(n=String(t).match(Ne))?(this.a=!!e,De(this,n[1]||"",!0),this.j=Ve(n[2]||""),Le(this,n[3]||"",!0),Me(this,n[4]),this.g=Ve(n[5]||"",!0),je(this,n[6]||"",!0),this.i=Ve(n[7]||"")):(this.a=!!e,this.b=new Qe(null,this.a))}function Re(t){return new Pe(t)}function De(t,e,n){t.f=n?Ve(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Le(t,e,n){t.c=n?Ve(e,!0):e}function Me(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function je(t,e,n){e instanceof Qe?(t.b=e,function(t,e){e&&!t.f&&(Ye(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Xe(this,e),Je(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=qe(e,We)),t.b=new Qe(e,t.a))}function Fe(t,e,n){t.b.set(e,n)}function Ue(t){return Fe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^m()).toString(36)),t}function Ve(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function qe(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,Be),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Be(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Pe.prototype.toString=function(){var t=[],e=this.f;e&&t.push(qe(e,ze,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(qe(e,ze,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(qe(n,"/"==n.charAt(0)?He:Ke,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",qe(n,Ge)),t.join("")};var ze=/[#\/\?@]/g,Ke=/[#\?:]/g,He=/[#\?]/g,We=/[#\?@]/g,Ge=/#/g;function Qe(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ye(t){t.a||(t.a=new xe,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Xe(t,e){Ye(t),e=Ze(t,e),Oe(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Oe((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ae(t)))}function $e(t,e){return Ye(t),e=Ze(t,e),Oe(t.a.b,e)}function Je(t,e,n){Xe(t,e),0<n.length&&(t.c=null,t.a.set(Ze(t,e),I(n)),t.b+=n.length)}function Ze(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(o=Qe.prototype).add=function(t,e){Ye(this),this.c=null,t=Ze(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},o.forEach=function(t,e){Ye(this),this.a.forEach((function(n,r){T(n,(function(n){t.call(e,n,r,this)}),this)}),this)},o.L=function(){Ye(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},o.K=function(t){Ye(this);var e=[];if("string"===typeof t)$e(this,t)&&(e=E(e,this.a.get(Ze(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=E(e,t[n])}return e},o.set=function(t,e){return Ye(this),this.c=null,$e(this,t=Ze(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},o.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},o.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var tn=function(t,e){this.b=t,this.a=e};function en(t){this.g=t||nn,u.PerformanceNavigationTiming?t=0<(t=u.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(u.ia&&u.ia.ya&&u.ia.ya()&&u.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var nn=10;function rn(t){return!!t.b||!!t.a&&t.a.size>=t.f}function on(t){return t.b?1:t.a?t.a.size:0}function an(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function sn(t,e){t.a?t.a.add(e):t.b=e}function un(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function cn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var o=i(t.a.values()),a=o.next();!a.done;a=o.next()){var s=a.value;r=r.concat(s.s)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}return I(t.c)}function ln(){}function hn(){this.a=new ln}function fn(t,e,n){var r=n||"";try{Ce(t,(function(t,n){var i=t;h(t)&&(i=kt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function pn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}en.prototype.cancel=function(){var t,e;if(this.c=cn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=i(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(o){t={error:o}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},ln.prototype.stringify=function(t){return u.JSON.stringify(t,void 0)},ln.prototype.parse=function(t){return u.JSON.parse(t,void 0)};var dn=u.JSON.parse;function vn(t){Et.call(this),this.headers=new xe,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=yn,this.D=this.F=!1}b(vn,Et);var yn="",gn=/^https?$/i,mn=["POST","PUT"];function bn(t){return"content-type"==t.toLowerCase()}function wn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,_n(t),En(t)}function _n(t){t.u||(t.u=!0,It(t,"complete"),It(t,"error"))}function Tn(t){if(t.b&&"undefined"!=typeof s&&(!t.s[1]||4!=Sn(t)||2!=t.W()))if(t.l&&4==Sn(t))Ut(t.za,0,t);else if(It(t,"readystatechange"),4==Sn(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Ne)[1]||null;if(!o&&u.self&&u.self.location){var a=u.self.location.protocol;o=a.substr(0,a.length-1)}i=!gn.test(o?o.toLowerCase():"")}e=i}if(e)It(t,"complete"),It(t,"success");else{t.h=6;try{var c=2<Sn(t)?t.a.statusText:""}catch(n){c=""}t.f=c+" ["+t.W()+"]",_n(t)}}finally{En(t)}}}function En(t,e){if(t.a){In(t);var n=t.a,r=t.s[0]?c:null;t.a=null,t.s=null,e||It(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function In(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(u.clearTimeout(t.m),t.m=null)}function Sn(t){return t.a?t.a.readyState:0}function kn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return P(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Fe(t,e,n))}function Cn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function xn(t){this.pa=0,this.g=[],this.c=new Wt,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Cn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Cn("baseRetryDelayMs",5e3,t),this.Ra=Cn("retryDelaySeedMs",1e4,t),this.Ma=Cn("forwardChannelMaxRetries",2,t),this.ma=Cn("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new en(t&&t.concurrentRequestLimit),this.ka=new hn,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function An(t){if(Nn(t),3==t.v){var e=t.R++,n=Re(t.B);Fe(n,"SID",t.J),Fe(n,"RID",e),Fe(n,"TYPE","terminate"),Ln(t,n),(e=new pe(t,t.c,e,void 0)).H=2,e.i=Ue(Re(n)),n=!1,u.navigator&&u.navigator.sendBeacon&&(n=u.navigator.sendBeacon(e.i.toString(),"")),!n&&u.Image&&((new Image).src=e.i,n=!0),n||(e.a=Gn(e.g,null),e.a.ba(e.i)),e.u=m(),_e(e)}Hn(t)}function On(t){t.a&&(Un(t),t.a.cancel(),t.a=null)}function Nn(t){On(t),t.j&&(u.clearTimeout(t.j),t.j=null),qn(t),t.b.cancel(),t.h&&("number"===typeof t.h&&u.clearTimeout(t.h),t.h=null)}function Pn(t,e){t.g.push(new tn(t.Oa++,e)),3==t.v&&Rn(t)}function Rn(t){rn(t.b)||t.h||(t.h=!0,Rt(t.Ba,t),t.u=0)}function Dn(t,e){var n;n=e?e.f:t.R++;var r=Re(t.B);Fe(r,"SID",t.J),Fe(r,"RID",n),Fe(r,"AID",t.P),Ln(t,r),t.i&&t.l&&kn(r,t.i,t.l),n=new pe(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Mn(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),sn(t.b,n),ge(n,r,e)}function Ln(t,e){t.f&&Ce({},(function(t,n){Fe(e,n,t)}))}function Mn(t,e,n){n=Math.min(t.g.length,n);var r=t.f?y(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),s=!1;else try{fn(l,a,"req"+c+"_")}catch(h){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function jn(t){t.a||t.j||(t.T=1,Rt(t.Aa,t),t.o=0)}function Fn(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=ne(y(t.Aa,t),zn(t,t.o)),t.o++,!0)}function Un(t){null!=t.s&&(u.clearTimeout(t.s),t.s=null)}function Vn(t){t.a=new pe(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Re(t.la);Fe(e,"RID","rpc"),Fe(e,"SID",t.J),Fe(e,"CI",t.H?"0":"1"),Fe(e,"AID",t.P),Ln(t,e),Fe(e,"TYPE","xmlhttp"),t.i&&t.l&&kn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Ue(Re(e)),n.j=null,n.I=!0,me(n,t)}function qn(t){null!=t.m&&(u.clearTimeout(t.m),t.m=null)}function Bn(t,e){var n=null;if(t.a==e){qn(t),Un(t),t.a=null;var r=2}else{if(!an(t.b,e))return;n=e.s,un(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=m()-e.u;var i=t.u;It(r=Xt(),new ee(r,n,e,i)),Rn(t)}else jn(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(on(t.b)>=t.b.f-(t.h?1:0))&&(t.h?(t.g=e.s.concat(t.g),!0):!(1==t.v||2==t.v||t.u>=(t.La?0:t.Ma))&&(t.h=ne(y(t.Ba,t,e),zn(t,t.u)),t.u++,!0))}(t,e)||2==r&&Fn(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Kn(t,5);break;case 4:Kn(t,10);break;case 3:Kn(t,6);break;default:Kn(t,2)}}function zn(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Kn(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=y(t.Ya,t);n||(n=new Pe("//www.google.com/images/cleardot.gif"),u.location&&"http"==u.location.protocol||De(n,"https"),Ue(n)),function(t,e){var n=new Wt;if(u.Image){var r=new Image;r.onload=g(pn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=g(pn,n,r,"TestLoadImage: error",!1,e),r.onabort=g(pn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=g(pn,n,r,"TestLoadImage: timeout",!1,e),u.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else te(2);t.v=0,t.f&&t.f.ra(e),Hn(t),Nn(t)}function Hn(t){t.v=0,t.I=-1,t.f&&(0==cn(t.b).length&&0==t.g.length||(t.b.c.length=0,I(t.g),t.g.length=0),t.f.qa())}function Wn(t,e,n){var r=function(t){return t instanceof Pe?Re(t):new Pe(t,void 0)}(n);if(""!=r.c)e&&Le(r,e+"."+r.c),Me(r,r.h);else{var i=u.location;r=function(t,e,n,r){var i=new Pe(null,void 0);return t&&De(i,t),e&&Le(i,e),n&&Me(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&P(t.V,(function(t,e){Fe(r,e,t)})),e=t.A,n=t.na,e&&n&&Fe(r,e,n),Fe(r,"VER",t.ha),Ln(t,r),r}function Gn(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new vn(t.Na)).F=t.C,e}function Qn(){}function Yn(){if(U&&!(10<=Number(J)))throw Error("Environmental error: no available transport.")}function Xn(t,e){Et.call(this),this.a=new xn(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!S(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!S(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Zn(this)}function $n(t){le.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Jn(){he.call(this),this.status=1}function Zn(t){this.a=t}(o=vn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?ae(this.H):ae(ue),this.a.onreadystatechange=y(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void wn(this,o)}t=n||"";var i=new xe(this.headers);r&&Ce(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=bn,n=t.length,r="string"===typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"===typeof t?t.charAt(e):t[e]}(i.L()),n=u.FormData&&t instanceof u.FormData,!(0<=_(mn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{In(this),0<this.o&&((this.D=function(t){return U&&X(9)&&"number"===typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=y(this.xa,this)):this.m=Ut(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){wn(this,o)}},o.xa=function(){"undefined"!=typeof s&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,It(this,"timeout"),this.abort(8))},o.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,It(this,"complete"),It(this,"abort"),En(this))},o.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),En(this,!0)),vn.X.G.call(this)},o.za=function(){this.j||(this.A||this.l||this.g?Tn(this):this.Ua())},o.Ua=function(){Tn(this)},o.W=function(){try{return 2<Sn(this)?this.a.status:-1}catch(t){return-1}},o.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},o.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),dn(e)}},o.ua=function(){return this.h},o.Qa=function(){return"string"===typeof this.f?this.f:String(this.f)},(o=xn.prototype).ha=8,o.v=1,o.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new pe(this,this.c,t,void 0),r=this.l;if(this.O&&(r?L(r=R(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"===typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Mn(this,n,e),Fe(i=Re(this.B),"RID",t),Fe(i,"CVER",22),this.A&&Fe(i,"X-HTTP-Session-Id",this.A),Ln(this,i),this.i&&r&&kn(i,this.i,r),sn(this.b,n),this.Ia&&Fe(i,"TYPE","init"),this.da?(Fe(i,"$req",e),Fe(i,"SID","null"),n.U=!0,ge(n,i,null)):ge(n,i,e),this.v=2}}else 3==this.v&&(t?Dn(this,t):0==this.g.length||rn(this.b)||Dn(this))},o.Aa=function(){if(this.j=null,Vn(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=ne(y(this.Ta,this),t)}},o.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,te(10),On(this),Vn(this))},o.Sa=function(){null!=this.m&&(this.m=null,On(this),Fn(this),te(19))},o.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),te(2)):(this.c.info("Failed to ping google.com"),te(1))},(o=Qn.prototype).ta=function(){},o.sa=function(){},o.ra=function(){},o.qa=function(){},o.Ja=function(){},Yn.prototype.a=function(t,e){return new Xn(t,e)},b(Xn,Et),Xn.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;te(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=Wn(t,null,t.fa),Rn(t)},Xn.prototype.close=function(){An(this.a)},Xn.prototype.h=function(t){if("string"===typeof t){var e={};e.__data__=t,Pn(this.a,e)}else this.l?((e={}).__data__=kt(t),Pn(this.a,e)):Pn(this.a,t)},Xn.prototype.G=function(){this.a.f=null,delete this.f,An(this.a),delete this.a,Xn.X.G.call(this)},b($n,le),b(Jn,he),b(Zn,Qn),Zn.prototype.ta=function(){It(this.a,"a")},Zn.prototype.sa=function(t){It(this.a,new $n(t))},Zn.prototype.ra=function(t){It(this.a,new Jn(t))},Zn.prototype.qa=function(){It(this.a,"b")},Yn.prototype.createWebChannel=Yn.prototype.a,Xn.prototype.send=Xn.prototype.h,Xn.prototype.open=Xn.prototype.g,Xn.prototype.close=Xn.prototype.close,re.NO_ERROR=0,re.TIMEOUT=8,re.HTTP_ERROR=6,ie.COMPLETE="complete",se.EventType=ce,ce.OPEN="a",ce.CLOSE="b",ce.ERROR="c",ce.MESSAGE="d",Et.prototype.listen=Et.prototype.va,vn.prototype.listenOnce=vn.prototype.wa,vn.prototype.getLastError=vn.prototype.Qa,vn.prototype.getLastErrorCode=vn.prototype.ua,vn.prototype.getStatus=vn.prototype.W,vn.prototype.getResponseJson=vn.prototype.Pa,vn.prototype.getResponseText=vn.prototype.$,vn.prototype.send=vn.prototype.ba;var tr=function(){return new Yn},er=function(){return Xt()},nr=re,rr=ie,ir=Qt,or={gb:0,jb:1,kb:2,Db:3,Ib:4,Fb:5,Gb:6,Eb:7,Cb:8,Hb:9,PROXY:10,NOPROXY:11,Ab:12,wb:13,xb:14,vb:15,yb:16,zb:17,bb:18,ab:19,cb:20},ar=se,sr=vn}).call(this,n(12))},,function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return h})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return p}));var o,a=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=c[e];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[a].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,a.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"===typeof t?s[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){a.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=s[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(t){if(null==t)return null;if("string"===typeof t)return t;if("number"===typeof t||"boolean"===typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!==r&&void 0!==r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=a;r<i.length;r++){n(i[r])}}},,function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(u){i=!0,o=u}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return f}));var r=function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function i(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function o(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function a(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function u(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create;var c=n(2),l=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),h=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(t){void 0===t&&(t="[DEFAULT]");var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new c.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r({identifier:"[DEFAULT]",optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);if(!this.isInitialized(o)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:o})}catch(a){if(i)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(f){}try{for(var r=a(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=s(i.value,2),u=o[0],c=o[1],l=this.normalizeInstanceIdentifier(u);try{var h=this.getOrInitializeService({instanceIdentifier:l});c.resolve(h)}catch(f){}}}catch(p){e={error:p}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return i(this,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(u(u([],s(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),s(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.instanceIdentifier,i=void 0===r?"[DEFAULT]":r,o=t.options,u=void 0===o?{}:o,c=this.normalizeInstanceIdentifier(i);if(this.isInitialized(c))throw Error(this.name+"("+c+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var l=this.getOrInitializeService({instanceIdentifier:c,options:u});try{for(var h=a(this.instancesDeferred.entries()),f=h.next();!f.done;f=h.next()){var p=s(f.value,2),d=p[0],v=p[1];c===this.normalizeInstanceIdentifier(d)&&v.resolve(l)}}catch(y){e={error:y}}finally{try{f&&!f.done&&(n=h.return)&&n.call(h)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(l,c),l},t.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r;try{for(var i=a(this.onInitCallbacks),o=i.next();!o.done;o=i.next()){var s=o.value;try{s(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,"[DEFAULT]"===e?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();var f=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new h(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},function(t,e,n){"use strict";var r=function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.create;Object.create;var i,o,a=n(2),s=n(9),u=n(6),c=((i={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",i["bad-app-name"]="Illegal App name: '{$appName}",i["duplicate-app"]="Firebase App named '{$appName}' already exists",i["app-deleted"]="Firebase App named '{$appName}' already deleted",i["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",i["invalid-log-argument"]="First argument to `onLog` must be null or a function.",i),l=new a.b("app","Firebase",c),h=((o={})["@firebase/app"]="fire-core",o["@firebase/analytics"]="fire-analytics",o["@firebase/app-check"]="fire-app-check",o["@firebase/auth"]="fire-auth",o["@firebase/database"]="fire-rtdb",o["@firebase/functions"]="fire-fn",o["@firebase/installations"]="fire-iid",o["@firebase/messaging"]="fire-fcm",o["@firebase/performance"]="fire-perf",o["@firebase/remote-config"]="fire-rc",o["@firebase/storage"]="fire-gcs",o["@firebase/firestore"]="fire-fst",o["fire-js"]="fire-js",o["firebase-wrapper"]="fire-js-all",o),f=new u.b("@firebase/app"),p=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(a.g)(t),this.container=new s.b(e.name),this._addComponent(new s.a("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){f.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var d=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!==typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!==typeof s||!s)throw l.create("bad-app-name",{appName:String(s)});if(Object(a.d)(e,s))throw l.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=h[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),u=e.match(/\s|\//);if(a||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void f.warn(c.join(" "))}o(new s.a(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!==typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.6.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(t=t||"[DEFAULT]",!Object(a.d)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return f.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!==typeof t[s])throw l.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&Object(a.h)(u,o.serviceProps),r[s]=u,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,s);return n.apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++){var p=h[c];e[p]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(p);return e.INTERNAL=r(r({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(a.h)(e,t)},createSubscribe:a.f,ErrorFactory:a.b,deepExtend:a.h}),e}(),v=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(Object(a.k)()&&void 0!==self.firebase){f.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&f.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var g=d.initializeApp;d.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(a.p)()&&f.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),g.apply(void 0,t)};var m,b,w=d;(m=w).INTERNAL.registerComponent(new s.a("platform-logger",(function(t){return new v(t)}),"PRIVATE")),m.registerVersion("@firebase/app","0.6.22",b),m.registerVersion("fire-js","");e.a=w},function(t,e,n){(function(e,n){t.exports=function(){"use strict";!function(t){var e,n,r,i,o,a,s,u,c,l;function h(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function f(t){return"string"!=typeof t?String(t):t}function p(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return n&&(e[Symbol.iterator]=function(){return e}),e}function d(t){this.map={},t instanceof d?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function v(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function y(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function g(t){var e=new FileReader,n=y(e);return e.readAsArrayBuffer(t),n}function m(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(r&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(i&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(e&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(o&&r&&s(t))this._bodyArrayBuffer=m(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!o||!ArrayBuffer.prototype.isPrototypeOf(t)&&!u(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=m(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):e&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r&&(this.blob=function(){var t=v(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?v(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(g)}),this.text=function(){var t,e,n=v(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,n=y(e=new FileReader),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(_)}),this.json=function(){return this.text().then(JSON.parse)},this}function w(t,e){var n,r=(e=e||{}).body;if(t instanceof w){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new d(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new d(e.headers)),this.method=(t=(n=e.method||this.method||"GET").toUpperCase(),-1<c.indexOf(t)?t:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function _(t){var e=new FormData;return t.trim().split("&").forEach((function(t){var n;t&&(t=(n=t.split("=")).shift().replace(/\+/g," "),n=n.join("=").replace(/\+/g," "),e.append(decodeURIComponent(t),decodeURIComponent(n)))})),e}function T(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new d(e.headers),this.url=e.url||"",this._initBody(t)}t.fetch||(e="URLSearchParams"in t,n="Symbol"in t&&"iterator"in Symbol,r="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),i="FormData"in t,(o="ArrayBuffer"in t)&&(a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],s=function(t){return t&&DataView.prototype.isPrototypeOf(t)},u=ArrayBuffer.isView||function(t){return t&&-1<a.indexOf(Object.prototype.toString.call(t))}),d.prototype.append=function(t,e){t=h(t),e=f(e);var n=this.map[t];this.map[t]=n?n+","+e:e},d.prototype.delete=function(t){delete this.map[h(t)]},d.prototype.get=function(t){return t=h(t),this.has(t)?this.map[t]:null},d.prototype.has=function(t){return this.map.hasOwnProperty(h(t))},d.prototype.set=function(t,e){this.map[h(t)]=f(e)},d.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},d.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),p(t)},d.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),p(t)},d.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),p(t)},n&&(d.prototype[Symbol.iterator]=d.prototype.entries),c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},b.call(w.prototype),b.call(T.prototype),T.prototype.clone=function(){return new T(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},T.error=function(){var t=new T(null,{status:0,statusText:""});return t.type="error",t},l=[301,302,303,307,308],T.redirect=function(t,e){if(-1===l.indexOf(e))throw new RangeError("Invalid status code");return new T(null,{status:e,headers:{location:t}})},t.Headers=d,t.Request=w,t.Response=T,t.fetch=function(t,e){return new Promise((function(n,i){var o=new w(t,e),a=new XMLHttpRequest;a.onload=function(){var t,e={status:a.status,statusText:a.statusText,headers:(r=a.getAllResponseHeaders()||"",t=new d,r.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var n=e.split(":");(e=n.shift().trim())&&(n=n.join(":").trim(),t.append(e,n))})),t)};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var r="response"in a?a.response:a.responseText;n(new T(r,e))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(o.method,o.url,!0),"include"===o.credentials?a.withCredentials=!0:"omit"===o.credentials&&(a.withCredentials=!1),"responseType"in a&&r&&(a.responseType="blob"),o.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),a.send(void 0===o._bodyInit?null:o._bodyInit)}))},t.fetch.polyfill=!0)}("undefined"!=typeof self?self:void 0);var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{};function r(t){var e={exports:{}};return t(e,e.exports),e.exports}function i(t){try{return!!t()}catch(t){return!0}}function o(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function a(t){return w.call(t).slice(8,-1)}function s(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function u(t){return T(s(t))}function c(t){return"object"==typeof t?null!==t:"function"==typeof t}function l(t,e){if(!c(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!c(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!c(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!c(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function h(t,e){return E.call(t,e)}function f(t){return S?I.createElement(t):{}}function p(t){if(!c(t))throw TypeError(String(t)+" is not an object");return t}function d(e,n){try{N(v,e,n)}catch(t){v[e]=n}return n}var v=(Ce=function(t){return t&&t.Math==Math&&t})("object"==typeof globalThis&&globalThis)||Ce("object"==typeof window&&window)||Ce("object"==typeof self&&self)||Ce("object"==typeof t&&t)||function(){return this}()||Function("return this")(),y=!i((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),g={}.propertyIsEnumerable,m=Object.getOwnPropertyDescriptor,b={f:m&&!g.call({1:2},1)?function(t){return!!(t=m(this,t))&&t.enumerable}:g},w={}.toString,_="".split,T=i((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==a(t)?_.call(t,""):Object(t)}:Object,E={}.hasOwnProperty,I=v.document,S=c(I)&&c(I.createElement),k=!y&&!i((function(){return 7!=Object.defineProperty(f("div"),"a",{get:function(){return 7}}).a})),C=Object.getOwnPropertyDescriptor,x={f:y?C:function(t,e){if(t=u(t),e=l(e,!0),k)try{return C(t,e)}catch(t){}if(h(t,e))return o(!b.f.call(t,e),t[e])}},A=Object.defineProperty,O={f:y?A:function(t,e,n){if(p(t),e=l(e,!0),p(n),k)try{return A(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},N=y?function(t,e,n){return O.f(t,e,o(1,n))}:function(t,e,n){return t[e]=n,t},P=v[Qt="__core-js_shared__"]||d(Qt,{}),R=Function.toString;function D(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++G+Q).toString(36)}"function"!=typeof P.inspectSource&&(P.inspectSource=function(t){return R.call(t)});var L,M,j,F,U,V,q,B,z=P.inspectSource,K="function"==typeof(Ne=v.WeakMap)&&/native code/.test(z(Ne)),H=!1,W=r((function(t){(t.exports=function(t,e){return P[t]||(P[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.8.1",mode:"global",copyright:"\xa9 2020 Denis Pushkarev (zloirock.ru)"})})),G=0,Q=Math.random(),Y=W("keys"),X=function(t){return Y[t]||(Y[t]=D(t))},$={},J=v.WeakMap;function Z(t){return"function"==typeof t?t:void 0}function tt(t,e){return arguments.length<2?Z(ft[t])||Z(v[t]):ft[t]&&ft[t][e]||v[t]&&v[t][e]}function et(t){return isNaN(t=+t)?0:(0<t?dt:pt)(t)}function nt(t){return 0<t?vt(et(t),9007199254740991):0}function rt(t,e){var n,r=u(t),i=0,o=[];for(n in r)!h($,n)&&h(r,n)&&o.push(n);for(;e.length>i;)h(r,n=e[i++])&&(~mt(o,n)||o.push(n));return o}function it(t,e){for(var n=Et(e),r=O.f,i=x.f,o=0;o<n.length;o++){var a=n[o];h(t,a)||r(t,a,i(e,a))}}function ot(t,e){var n,r,i,o=t.target,a=t.global,s=t.stat,u=a?v:s?v[o]||d(o,{}):(v[o]||{}).prototype;if(u)for(n in e){if(r=e[n],i=t.noTargetGet?(i=Ot(u,n))&&i.value:u[n],!At(a?n:o+(s?".":"#")+n,t.forced)&&void 0!==i){if(typeof r==typeof i)continue;it(r,i)}(t.sham||i&&i.sham)&&N(r,"sham",!0),ht(u,n,r,t)}}function at(t){return Object(s(t))}function st(){}function ut(t){return"<script>"+t+"</"+Ut+">"}q=K?(L=P.state||(P.state=new J),M=L.get,j=L.has,F=L.set,U=function(t,e){return e.facade=t,F.call(L,t,e),e},V=function(t){return M.call(L,t)||{}},function(t){return j.call(L,t)}):(B=X("state"),$[B]=!0,U=function(t,e){return e.facade=t,N(t,B,e),e},V=function(t){return h(t,B)?t[B]:{}},function(t){return h(t,B)});var ct,lt={set:U,get:V,has:q,enforce:function(t){return q(t)?V(t):U(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=V(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},ht=r((function(t){var e=lt.get,n=lt.enforce,r=String(String).split("String");(t.exports=function(t,e,i,o){var a=!!o&&!!o.unsafe,s=!!o&&!!o.enumerable,u=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof e||h(i,"name")||N(i,"name",e),(o=n(i)).source||(o.source=r.join("string"==typeof e?e:""))),t!==v?(a?!u&&t[e]&&(s=!0):delete t[e],s?t[e]=i:N(t,e,i)):s?t[e]=i:d(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||z(this)}))})),ft=v,pt=Math.ceil,dt=Math.floor,vt=Math.min,yt=Math.max,gt=Math.min,mt=((Ce=function(t){return function(e,n,r){var i,o=u(e),a=nt(o.length),s=function(t,e){return(t=et(t))<0?yt(t+e,0):gt(t,e)}(r,a);if(t&&n!=n){for(;s<a;)if((i=o[s++])!=i)return!0}else for(;s<a;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}})(!0),Ce(!1)),bt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],wt=bt.concat("length","prototype"),_t={f:Object.getOwnPropertyNames||function(t){return rt(t,wt)}},Tt={f:Object.getOwnPropertySymbols},Et=tt("Reflect","ownKeys")||function(t){var e=_t.f(p(t)),n=Tt.f;return n?e.concat(n(t)):e},It=/#|\.prototype\./,St=(t=function(t,e){return(t=kt[St(t)])==xt||t!=Ct&&("function"==typeof e?i(e):!!e)}).normalize=function(t){return String(t).replace(It,".").toLowerCase()},kt=t.data={},Ct=t.NATIVE="N",xt=t.POLYFILL="P",At=t,Ot=x.f,Nt=(g=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),X("IE_PROTO")),Pt=Object.prototype,Rt=g?Object.getPrototypeOf:function(t){return h(t=at(t),Nt)?t[Nt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Pt:null},Dt=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(n){}return function(n,r){return p(n),function(t){if(!c(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),Lt=Object.keys||function(t){return rt(t,bt)},Mt=y?Object.defineProperties:function(t,e){p(t);for(var n,r=Lt(e),i=r.length,o=0;o<i;)O.f(t,n=r[o++],e[n]);return t},jt=tt("document","documentElement"),Ft="prototype",Ut="script",Vt=X("IE_PROTO"),qt=function(){try{ct=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t;qt=ct?function(t){t.write(ut("")),t.close();var e=t.parentWindow.Object;return t=null,e}(ct):((t=f("iframe")).style.display="none",jt.appendChild(t),t.src=String("javascript:"),(t=t.contentWindow.document).open(),t.write(ut("document.F=Object")),t.close(),t.F);for(var e=bt.length;e--;)delete qt[Ft][bt[e]];return qt()};function Bt(t){return h(Yt,t)||(Gt&&h(Xt,t)?Yt[t]=Xt[t]:Yt[t]=$t("Symbol."+t)),Yt[t]}function zt(t){return void 0!==t&&(Jt.Array===t||te[Zt]===t)}function Kt(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function Ht(t,e,n){if(Kt(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}$[Vt]=!0;var Wt=Object.create||function(t,e){var n;return null!==t?(st[Ft]=p(t),n=new st,st[Ft]=null,n[Vt]=t):n=qt(),void 0===e?n:Mt(n,e)},Gt=!!Object.getOwnPropertySymbols&&!i((function(){return!String(Symbol())})),Qt=Gt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Yt=W("wks"),Xt=v.Symbol,$t=Qt?Xt:Xt&&Xt.withoutSetter||D,Jt={},Zt=Bt("iterator"),te=Array.prototype;function ee(t){if(null!=t)return t[ue]||t["@@iterator"]||Jt[se(t)]}function ne(t){var e=t.return;return void 0!==e&&p(e.call(t)).value}function re(t,e){this.stopped=t,this.result=e}function ie(t,e,n){function r(t){return o&&ne(o),new re(!0,t)}function i(t){return f?(p(t),v?y(t[0],t[1],r):y(t[0],t[1])):v?y(t,r):y(t)}var o,a,s,u,c,l,h=n&&n.that,f=!(!n||!n.AS_ENTRIES),d=!(!n||!n.IS_ITERATOR),v=!(!n||!n.INTERRUPTED),y=Ht(e,h,1+f+v);if(d)o=t;else{if("function"!=typeof(d=ee(t)))throw TypeError("Target is not iterable");if(zt(d)){for(a=0,s=nt(t.length);a<s;a++)if((u=i(t[a]))&&u instanceof re)return u;return new re(!1)}o=d.call(t)}for(c=o.next;!(l=c.call(o)).done;){try{u=i(l.value)}catch(t){throw ne(o),t}if("object"==typeof u&&u&&u instanceof re)return u}return new re(!1)}(Ne={})[Bt("toStringTag")]="z",K="[object z]"===String(Ne);var oe=Bt("toStringTag"),ae="Arguments"==a(function(){return arguments}()),se=K?a:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(t=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),oe))?t:ae?a(e):"Object"==(t=a(e))&&"function"==typeof e.callee?"Arguments":t},ue=Bt("iterator"),ce=function t(e,n){var r=this;return r instanceof t?(Dt&&(r=Dt(new Error(void 0),Rt(r))),void 0!==n&&N(r,"message",String(n)),ie(e,(n=[]).push,{that:n}),N(r,"errors",n),r):new t(e,n)};function le(t,e,n){for(var r in e)ht(t,r,e[r],n);return t}function he(t,e,n){t&&!h(t=n?t:t.prototype,ye)&&ve(t,ye,{configurable:!0,value:e})}function fe(t){var e=tt(t);t=O.f,y&&e&&!e[ge]&&t(e,ge,{configurable:!0,get:function(){return this}})}function pe(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}ce.prototype=Wt(Error.prototype,{constructor:o(5,ce),message:o(5,""),name:o(5,"AggregateError")}),ot({global:!0},{AggregateError:ce}),K||ht(Object.prototype,"toString",K?{}.toString:function(){return"[object "+se(this)+"]"},{unsafe:!0});var de=v.Promise,ve=O.f,ye=Bt("toStringTag"),ge=Bt("species"),me=Bt("iterator"),be=!1;try{var we=0;(Me={next:function(){return{done:!!we++}},return:function(){be=!0}})[me]=function(){return this},Array.from(Me,(function(){throw 2}))}catch(Na){}function _e(t,e){if(!e&&!be)return!1;var n=!1;try{var r={};r[me]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function Te(t,e){var n;return void 0===(t=p(t).constructor)||null==(n=p(t)[ke])?e:Kt(n)}function Ee(t){var e;De.hasOwnProperty(t)&&(e=De[t],delete De[t],e())}function Ie(t){return function(){Ee(t)}}var Se,ke=Bt("species"),Ce=(J=tt("navigator","userAgent")||"",/(iphone|ipod|ipad).*applewebkit/i.test(J)),xe="process"==a(v.process),Ae=v.location,Oe=(t=v.setImmediate,g=v.clearImmediate,v.process),Ne=v.MessageChannel,Pe=v.Dispatch,Re=0,De={},Le="onreadystatechange",Me=(K=function(t){Ee(t.data)},function(t){v.postMessage(t+"",Ae.protocol+"//"+Ae.host)});t&&g||(t=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return De[++Re]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Se(Re),Re},g=function(t){delete De[t]},xe?Se=function(t){Oe.nextTick(Ie(t))}:Pe&&Pe.now?Se=function(t){Pe.now(Ie(t))}:Ne&&!Ce?(He=(Ne=new Ne).port2,Ne.port1.onmessage=K,Se=Ht(He.postMessage,He,1)):v.addEventListener&&"function"==typeof postMessage&&!v.importScripts&&Ae&&"file:"!==Ae.protocol&&!i(Me)?(Se=Me,v.addEventListener("message",K,!1)):Se=Le in f("script")?function(t){jt.appendChild(f("script"))[Le]=function(){jt.removeChild(this),Ee(t)}}:function(t){setTimeout(Ie(t),0)});var je,Fe,Ue,Ve,qe,Be,ze,Ke,He={set:t,clear:g},We=(Me=x.f,He.set),Ge=(K=v.MutationObserver||v.WebKitMutationObserver,t=v.document,v.process);function Qe(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=Kt(e),this.reject=Kt(n)}function Ye(t,e){return p(t),c(e)&&e.constructor===t?e:((0,(t=Je.f(t)).resolve)(e),t.promise)}function Xe(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}g=v.Promise,(Me=(Me=Me(v,"queueMicrotask"))&&Me.value)||(je=function(){var t,e;for(xe&&(t=Ge.domain)&&t.exit();Fe;){e=Fe.fn,Fe=Fe.next;try{e()}catch(t){throw Fe?Ve():Ue=void 0,t}}Ue=void 0,t&&t.enter()},Ve=!Ce&&!xe&&K&&t?(qe=!0,Be=t.createTextNode(""),new K(je).observe(Be,{characterData:!0}),function(){Be.data=qe=!qe}):g&&g.resolve?(ze=g.resolve(void 0),Ke=ze.then,function(){Ke.call(ze,je)}):xe?function(){Ge.nextTick(je)}:function(){We.call(v,je)});var $e=Me||function(t){t={fn:t,next:void 0},Ue&&(Ue.next=t),Fe||(Fe=t,Ve()),Ue=t},Je={f:function(t){return new Qe(t)}};function Ze(t){var e;return!(!c(t)||"function"!=typeof(e=t.then))&&e}function tn(t,e){var n;t.notified||(t.notified=!0,n=t.reactions,$e((function(){for(var r=t.value,i=1==t.state,o=0;n.length>o;){var a,s,u,c=n[o++],l=i?c.ok:c.fail,h=c.resolve,f=c.reject,p=c.domain;try{l?(i||(2===t.rejection&&An(t),t.rejection=1),!0===l?a=r:(p&&p.enter(),a=l(r),p&&(p.exit(),u=!0)),a===c.promise?f(gn("Promise-chain cycle")):(s=Ze(a))?s.call(a,h,f):h(a)):f(r)}catch(r){p&&!u&&p.exit(),f(r)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&Cn(t)})))}function en(t,e,n){var r,i;En?((r=mn.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),v.dispatchEvent(r)):r={promise:e,reason:n},!In&&(i=v["on"+t])?i(r):t===Sn&&function(t,e){var n=v.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function nn(t,e,n){return function(r){t(e,r,n)}}function rn(t,e,n){t.done||(t.done=!0,(t=n||t).value=e,t.state=2,tn(t,!0))}(Me=(Me=(Me=v.process)&&Me.versions)&&Me.v8)?Ir=(kn=Me.split("."))[0]+kn[1]:J&&(!(kn=J.match(/Edge\/(\d+)/))||74<=kn[1])&&(kn=J.match(/Chrome\/(\d+)/))&&(Ir=kn[1]);var on,an,sn,un,cn=Ir&&+Ir,ln=He.set,hn=Bt("species"),fn="Promise",pn=lt.get,dn=lt.set,vn=lt.getterFor(fn),yn=de,gn=v.TypeError,mn=v.document,bn=v.process,wn=tt("fetch"),_n=Je.f,Tn=_n,En=!!(mn&&mn.createEvent&&v.dispatchEvent),In="function"==typeof PromiseRejectionEvent,Sn="unhandledrejection",kn=(J=At(fn,(function(){if(z(yn)===String(yn)){if(66===cn)return!0;if(!xe&&!In)return!0}if(51<=cn&&/native code/.test(yn))return!1;function t(t){t((function(){}),(function(){}))}var e=yn.resolve(1);return(e.constructor={})[hn]=t,!(e.then((function(){}))instanceof t)})))||!_e((function(t){yn.all(t).catch((function(){}))})),Cn=function(t){ln.call(v,(function(){var e,n=t.facade,r=t.value;if(xn(t)&&(e=Xe((function(){xe?bn.emit("unhandledRejection",r,n):en(Sn,n,r)})),t.rejection=xe||xn(t)?2:1,e.error))throw e.value}))},xn=function(t){return 1!==t.rejection&&!t.parent},An=function(t){ln.call(v,(function(){var e=t.facade;xe?bn.emit("rejectionHandled",e):en("rejectionhandled",e,t.value)}))},On=function t(e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===n)throw gn("Promise can't be resolved itself");var i=Ze(n);i?$e((function(){var r={done:!1};try{i.call(n,nn(t,r,e),nn(rn,r,e))}catch(n){rn(r,n,e)}})):(e.value=n,e.state=1,tn(e,!1))}catch(n){rn({done:!1},n,e)}}};J&&(yn=function(t){pe(this,yn,fn),Kt(t),on.call(this);var e=pn(this);try{t(nn(On,e),nn(rn,e))}catch(t){rn(e,t)}},(on=function(t){dn(this,{type:fn,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=le(yn.prototype,{then:function(t,e){var n=vn(this),r=_n(Te(this,yn));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=xe?bn.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&tn(n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),an=function(){var t=new on,e=pn(t);this.promise=t,this.resolve=nn(On,e),this.reject=nn(rn,e)},Je.f=_n=function(t){return t===yn||t===sn?new an:Tn(t)},"function"==typeof de&&(un=de.prototype.then,ht(de.prototype,"then",(function(t,e){var n=this;return new yn((function(t,e){un.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof wn&&ot({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return Ye(yn,wn.apply(v,arguments))}}))),ot({global:!0,wrap:!0,forced:J},{Promise:yn}),he(yn,fn,!1),fe(fn),sn=tt(fn),ot({target:fn,stat:!0,forced:J},{reject:function(t){var e=_n(this);return e.reject.call(void 0,t),e.promise}}),ot({target:fn,stat:!0,forced:J},{resolve:function(t){return Ye(this,t)}}),ot({target:fn,stat:!0,forced:kn},{all:function(t){var e=this,n=_n(e),r=n.resolve,i=n.reject,o=Xe((function(){var n=Kt(e.resolve),o=[],a=0,s=1;ie(t,(function(t){var u=a++,c=!1;o.push(void 0),s++,n.call(e,t).then((function(t){c||(c=!0,o[u]=t,--s||r(o))}),i)})),--s||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=_n(e),r=n.reject,i=Xe((function(){var i=Kt(e.resolve);ie(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}}),ot({target:"Promise",stat:!0},{allSettled:function(t){var e=this,n=Je.f(e),r=n.resolve,i=n.reject,o=Xe((function(){var n=Kt(e.resolve),i=[],o=0,a=1;ie(t,(function(t){var s=o++,u=!1;i.push(void 0),a++,n.call(e,t).then((function(t){u||(u=!0,i[s]={status:"fulfilled",value:t},--a||r(i))}),(function(t){u||(u=!0,i[s]={status:"rejected",reason:t},--a||r(i))}))})),--a||r(i)}));return o.error&&i(o.value),n.promise}});var Nn="No one promise resolved";function Pn(){return this}function Rn(){return this}function Dn(t,e,n,r,i,a,s){function u(t){if(t===i&&v)return v;if(!jn&&t in p)return p[t];switch(t){case"keys":case Un:case Vn:return function(){return new n(this,t)}}return function(){return new n(this)}}!function(t,e,n){e+=" Iterator",t.prototype=Wt(Ln,{next:o(1,n)}),he(t,e,!1),Jt[e]=Pn}(n,e,r);var c,l,h=e+" Iterator",f=!1,p=t.prototype,d=p[Fn]||p["@@iterator"]||i&&p[i],v=!jn&&d||u(i);if((r="Array"==e&&p.entries||d)&&(t=Rt(r.call(new t)),Mn!==Object.prototype&&t.next&&(Rt(t)!==Mn&&(Dt?Dt(t,Mn):"function"!=typeof t[Fn]&&N(t,Fn,Rn)),he(t,h,!0))),i==Un&&d&&d.name!==Un&&(f=!0,v=function(){return d.call(this)}),p[Fn]!==v&&N(p,Fn,v),Jt[e]=v,i)if(c={values:u(Un),keys:a?v:u("keys"),entries:u(Vn)},s)for(l in c)!jn&&!f&&l in p||ht(p,l,c[l]);else ot({target:e,proto:!0,forced:jn||f},c);return c}ot({target:"Promise",stat:!0},{any:function(t){var e=this,n=Je.f(e),r=n.resolve,i=n.reject,o=Xe((function(){var n=Kt(e.resolve),o=[],a=0,s=1,u=!1;ie(t,(function(t){var c=a++,l=!1;o.push(void 0),s++,n.call(e,t).then((function(t){l||u||(u=!0,r(t))}),(function(t){l||u||(l=!0,o[c]=t,--s||i(new(tt("AggregateError"))(o,Nn)))}))})),--s||i(new(tt("AggregateError"))(o,Nn))}));return o.error&&i(o.value),n.promise}}),ot({target:"Promise",proto:!0,real:!0,forced:Ir=!!de&&i((function(){de.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=Te(this,tt("Promise")),n="function"==typeof t;return this.then(n?function(n){return Ye(e,t()).then((function(){return n}))}:t,n?function(n){return Ye(e,t()).then((function(){throw n}))}:t)}}),"function"!=typeof de||de.prototype.finally||ht(de.prototype,"finally",tt("Promise").prototype.finally),J={codeAt:(He=function(t){return function(e,n){var r,i=String(s(e)),o=et(n);return e=i.length,o<0||e<=o?t?"":void 0:(n=i.charCodeAt(o))<55296||56319<n||o+1===e||(r=i.charCodeAt(o+1))<56320||57343<r?t?i.charAt(o):n:t?i.slice(o,o+2):r-56320+(n-55296<<10)+65536}})(!1),charAt:He(!0)},kn=Bt("iterator"),Ir=!1,[].keys&&("next"in(Qn=[].keys())?(Er=Rt(Rt(Qn)))!==Object.prototype&&(pr=Er):Ir=!0),h(pr=null==pr?{}:pr,kn)||N(pr,kn,(function(){return this}));var Ln=(He={IteratorPrototype:pr,BUGGY_SAFARI_ITERATORS:Ir}).IteratorPrototype,Mn=He.IteratorPrototype,jn=He.BUGGY_SAFARI_ITERATORS,Fn=Bt("iterator"),Un="values",Vn="entries",qn=J.charAt,Bn="String Iterator",zn=lt.set,Kn=lt.getterFor(Bn);Dn(String,"String",(function(t){zn(this,{type:Bn,string:String(t),index:0})}),(function(){var t=Kn(this),e=t.string,n=t.index;return n>=e.length?{value:void 0,done:!0}:(n=qn(e,n),t.index+=n.length,{value:n,done:!1})}));var Hn={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Wn=Bt("unscopables"),Gn=Array.prototype;null==Gn[Wn]&&O.f(Gn,Wn,{configurable:!0,value:Wt(null)});var Qn=function(t){Gn[Wn][t]=!0},Yn="Array Iterator",Xn=lt.set,$n=lt.getterFor(Yn),Jn=Dn(Array,"Array",(function(t,e){Xn(this,{type:Yn,target:u(t),index:0,kind:e})}),(function(){var t=$n(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");Jt.Arguments=Jt.Array,Qn("keys"),Qn("values"),Qn("entries");var Zn,tr=Bt("iterator"),er=Bt("toStringTag"),nr=Jn.values;for(Zn in Hn){var rr=v[Zn],ir=rr&&rr.prototype;if(ir){if(ir[tr]!==nr)try{N(ir,tr,nr)}catch(Na){ir[tr]=nr}if(ir[er]||N(ir,er,Zn),Hn[Zn])for(var or in Jn)if(ir[or]!==Jn[or])try{N(ir,or,Jn[or])}catch(Na){ir[or]=Jn[or]}}}function ar(t,e){var n;return new(void 0===(n=ur(t)&&("function"==typeof(n=t.constructor)&&(n===Array||ur(n.prototype))||c(n)&&null===(n=n[cr]))?void 0:n)?Array:n)(0===e?0:e)}function sr(t){throw t}ft.Promise,ot({target:"Promise",stat:!0},{try:function(t){var e=Je.f(this);return((t=Xe(t)).error?e.reject:e.resolve)(t.value),e.promise}});var ur=Array.isArray||function(t){return"Array"==a(t)},cr=Bt("species"),lr=[].push,hr=(kn={forEach:(Er=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=7==t,s=5==t||o;return function(u,c,l,h){for(var f,p,d=at(u),v=T(d),y=Ht(c,l,3),g=nt(v.length),m=0,b=(h=h||ar,e?h(u,g):n||a?h(u,0):void 0);m<g;m++)if((s||m in v)&&(p=y(f=v[m],m,d),t))if(e)b[m]=p;else if(p)switch(t){case 3:return!0;case 5:return f;case 6:return m;case 2:lr.call(b,f)}else switch(t){case 4:return!1;case 7:lr.call(b,f)}return o?-1:r||i?i:b}})(0),map:Er(1),filter:Er(2),some:Er(3),every:Er(4),find:Er(5),findIndex:Er(6),filterOut:Er(7)},Object.defineProperty),fr={},pr=function(t,e){if(h(fr,t))return fr[t];var n=[][t],r=!!h(e=e||{},"ACCESSORS")&&e.ACCESSORS,o=h(e,0)?e[0]:sr,a=h(e,1)?e[1]:void 0;return fr[t]=!!n&&!i((function(){if(r&&!y)return 1;var t={length:-1};r?hr(t,1,{enumerable:!0,get:sr}):t[1]=1,n.call(t,o,a)}))},dr=kn.find,vr=!0;He=pr(Ir="find"),Ir in[]&&Array(1)[Ir]((function(){vr=!1})),ot({target:"Array",proto:!0,forced:vr||!He},{find:function(t){return dr(this,t,1<arguments.length?arguments[1]:void 0)}}),Qn(Ir);var yr=Function.call,gr=((J=function(t,e,n){return Ht(yr,v[t].prototype[e],n)})("Array","find"),kn.findIndex),mr=!0;function br(t,e,n){(e=l(e))in t?O.f(t,e,o(0,n)):t[e]=n}He=pr(Er="findIndex"),Er in[]&&Array(1)[Er]((function(){mr=!1})),ot({target:"Array",proto:!0,forced:mr||!He},{findIndex:function(t){return gr(this,t,1<arguments.length?arguments[1]:void 0)}}),Qn(Er),J("Array","findIndex"),ot({target:"Array",stat:!0,forced:Ir=!_e((function(t){Array.from(t)}))},{from:function(t){var e,n,r,i,o,a=at(t),s="function"==typeof this?this:Array,u=arguments.length,c=1<u?arguments[1]:void 0,l=void 0!==c,h=(t=ee(a),0);if(l&&(c=Ht(c,2<u?arguments[2]:void 0,2)),null==t||s==Array&&zt(t))for(n=new s(e=nt(a.length));h<e;h++)br(n,h,l?c(a[h],h):a[h]);else for(o=(i=t.call(a)).next,n=new s;!(r=o.call(i)).done;h++)br(n,h,l?function(t,e,n,r){try{return e(p(n)[0],n[1])}catch(e){throw ne(t),e}}(i,c,[r.value,h]):r.value);return n.length=h,n}}),ft.Array.from;var wr,_r=kn.some;He=!!(wr=[].some)&&i((function(){wr.call(null,(function(){throw 1}),1)})),Qn=pr("some"),ot({target:"Array",proto:!0,forced:!He||!Qn},{some:function(t){return _r(this,t,1<arguments.length?arguments[1]:void 0)}}),J("Array","some");var Tr,Er="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,Ir=O.f,Sr=v.Int8Array,kr=Sr&&Sr.prototype,Cr=(He=(pr=v.Uint8ClampedArray)&&pr.prototype,Sr&&Rt(Sr)),xr=kr&&Rt(kr),Ar=((Qn=Object.prototype).isPrototypeOf,pr=Bt("toStringTag"),D("TYPED_ARRAY_TAG")),Or=Er&&!!Dt&&"Opera"!==se(v.opera),Nr=(Er=!1,{Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8}),Pr={BigInt64Array:8,BigUint64Array:8};for(Tr in Nr)v[Tr]||(Or=!1);if((!Or||"function"!=typeof Cr||Cr===Function.prototype)&&(Cr=function(){throw TypeError("Incorrect invocation")},Or))for(Tr in Nr)v[Tr]&&Dt(v[Tr],Cr);if((!Or||!xr||xr===Qn)&&(xr=Cr.prototype,Or))for(Tr in Nr)v[Tr]&&Dt(v[Tr].prototype,xr);if(Or&&Rt(He)!==xr&&Dt(He,xr),y&&!h(xr,pr))for(Tr in Er=!0,Ir(xr,pr,{get:function(){return c(this)?this[Ar]:void 0}}),Nr)v[Tr]&&N(v[Tr],Ar,Tr);He=function(t){if(function(t){return!!c(t)&&(t=se(t),h(Nr,t)||h(Pr,t))}(t))return t;throw TypeError("Target is not a typed array")},Ir=function(t,e,n){if(y){if(n)for(var r in Nr)(r=v[r])&&h(r.prototype,t)&&delete r.prototype[t];xr[t]&&!n||ht(xr,t,!n&&Or&&kr[t]||e)}},pr=Bt("iterator"),Er=v.Uint8Array;var Rr=Jn.values,Dr=Jn.keys,Lr=Jn.entries,Mr=He;He=Ir,Er=!!(Ir=Er&&Er.prototype[pr])&&("values"==Ir.name||null==Ir.name),Ir=function(){return Rr.call(Mr(this))},He("entries",(function(){return Lr.call(Mr(this))})),He("keys",(function(){return Dr.call(Mr(this))})),He("values",Ir,!Er),He(pr,Ir,!Er);var jr=Object.assign,Fr=Object.defineProperty;Ir=!jr||i((function(){if(y&&1!==jr({b:1},jr(Fr({},"a",{enumerable:!0,get:function(){Fr(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=jr({},t)[n]||Lt(jr({},e)).join("")!=r}))?function(t,e){for(var n=at(t),r=arguments.length,i=1,o=Tt.f,a=b.f;i<r;)for(var s,u=T(arguments[i++]),c=o?Lt(u).concat(o(u)):Lt(u),l=c.length,h=0;h<l;)s=c[h++],y&&!a.call(u,s)||(n[s]=u[s]);return n}:jr,ot({target:"Object",stat:!0,forced:Object.assign!==Ir},{assign:Ir}),ft.Object.assign;var Ur=b.f,Vr=(Ir={entries:(Er=function(t){return function(e){for(var n,r=u(e),i=Lt(r),o=i.length,a=0,s=[];a<o;)n=i[a++],y&&!Ur.call(r,n)||s.push(t?[n,r[n]]:r[n]);return s}})(!0),values:Er(!1)}).entries;ot({target:"Object",stat:!0},{entries:function(t){return Vr(t)}}),ft.Object.entries;var qr=Ir.values;function Br(t){if(c(e=t)&&(void 0!==(n=e[zr])?n:"RegExp"==a(e)))throw TypeError("The method doesn't accept regular expressions");var e,n;return t}ot({target:"Object",stat:!0},{values:function(t){return qr(t)}}),ft.Object.values;var zr=Bt("match"),Kr=Bt("match");ot({target:"String",proto:!0,forced:!(Er=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[Kr]=!1,"/./"[e](n)}catch(t){}}return!1})("includes")},{includes:function(t){return!!~String(s(this)).indexOf(Br(t),1<arguments.length?arguments[1]:void 0)}}),J("String","includes"),Ir=x.f;var Hr,Wr="".startsWith,Gr=Math.min;Er=Er("startsWith"),ot({target:"String",proto:!0,forced:!(Hr=!(Er||!(Hr=Ir(String.prototype,"startsWith"))||Hr.writable))&&!Er},{startsWith:function(t){var e=String(s(this));Br(t);var n=nt(Gr(1<arguments.length?arguments[1]:void 0,e.length));return t=String(t),Wr?Wr.call(e,t,n):e.slice(n,n+t.length)===t}}),J("String","startsWith"),ot({target:"String",proto:!0},{repeat:"".repeat||function(t){var e=String(s(this)),n="",r=et(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}}),J("String","repeat");var Qr=Bt("species"),Yr=Bt("isConcatSpreadable"),Xr=9007199254740991,$r="Maximum allowed index exceeded";function Jr(t){var e=ft.Symbol||(ft.Symbol={});h(e,t)||oi(e,t,{value:ii.f(t)})}function Zr(t,e){var n=bi[t]=Wt(pi[ci]);return li(n,{type:ui,tag:t,description:e}),y||(n.description=e),n}function ti(t,e){p(t);var n=u(e);return e=Lt(n).concat(xi(n)),ai(e,(function(e){y&&!Ci.call(n,e)||ki(t,e,n[e])})),t}Er=51<=cn||!i((function(){var t=[];return t[Yr]=!1,t.concat()[0]!==t})),J=51<=cn||!i((function(){var t=[];return(t.constructor={})[Qr]=function(){return{foo:1}},1!==t.concat(Boolean).foo})),ot({target:"Array",proto:!0,forced:!Er||!J},{concat:function(t){for(var e,n,r,i=at(this),o=ar(i,0),a=0,s=-1,u=arguments.length;s<u;s++)if(function(t){if(!c(t))return!1;var e=t[Yr];return void 0!==e?!!e:ur(t)}(r=-1===s?i:arguments[s])){if(n=nt(r.length),Xr<a+n)throw TypeError($r);for(e=0;e<n;e++,a++)e in r&&br(o,a,r[e])}else{if(Xr<=a)throw TypeError($r);br(o,a++,r)}return o.length=a,o}});var ei=_t.f,ni={}.toString,ri="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ii=(J={f:function(t){return ri&&"[object Window]"==ni.call(t)?function(t){try{return ei(t)}catch(t){return ri.slice()}}(t):ei(u(t))}},{f:Bt}),oi=O.f,ai=kn.forEach,si=X("hidden"),ui="Symbol",ci="prototype",li=(kn=Bt("toPrimitive"),lt.set),hi=lt.getterFor(ui),fi=Object[ci],pi=v.Symbol,di=tt("JSON","stringify"),vi=x.f,yi=O.f,gi=J.f,mi=b.f,bi=W("symbols"),wi=W("op-symbols"),_i=W("string-to-symbol-registry"),Ti=W("symbol-to-string-registry"),Ei=(X=W("wks"),!(W=v.QObject)||!W[ci]||!W[ci].findChild),Ii=y&&i((function(){return 7!=Wt(yi({},"a",{get:function(){return yi(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=vi(fi,e);r&&delete fi[e],yi(t,e,n),r&&t!==fi&&yi(fi,e,r)}:yi,Si=Qt?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof pi},ki=function t(e,n,r){return e===fi&&t(wi,n,r),p(e),n=l(n,!0),p(r),h(bi,n)?(r.enumerable?(h(e,si)&&e[si][n]&&(e[si][n]=!1),r=Wt(r,{enumerable:o(0,!1)})):(h(e,si)||yi(e,si,o(1,{})),e[si][n]=!0),Ii(e,n,r)):yi(e,n,r)},Ci=function(t){var e=l(t,!0);return t=mi.call(this,e),!(this===fi&&h(bi,e)&&!h(wi,e))&&(!(t||!h(this,e)||!h(bi,e)||h(this,si)&&this[si][e])||t)},xi=(W=function(t,e){var n=u(t);if(t=l(e,!0),n!==fi||!h(bi,t)||h(wi,t))return!(e=vi(n,t))||!h(bi,t)||h(n,si)&&n[si][t]||(e.enumerable=!0),e},Qt=function(t){t=gi(u(t));var e=[];return ai(t,(function(t){h(bi,t)||h($,t)||e.push(t)})),e},function(t){var e=t===fi,n=(t=gi(e?wi:u(t)),[]);return ai(t,(function(t){!h(bi,t)||e&&!h(fi,t)||n.push(bi[t])})),n});Gt||(ht((pi=function(){if(this instanceof pi)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=D(t),n=function t(n){this===fi&&t.call(wi,n),h(this,si)&&h(this[si],e)&&(this[si][e]=!1),Ii(this,e,o(1,n))};return y&&Ei&&Ii(fi,e,{configurable:!0,set:n}),Zr(e,t)})[ci],"toString",(function(){return hi(this).tag})),ht(pi,"withoutSetter",(function(t){return Zr(D(t),t)})),b.f=Ci,O.f=ki,x.f=W,_t.f=J.f=Qt,Tt.f=xi,ii.f=function(t){return Zr(Bt(t),t)},y&&(yi(pi[ci],"description",{configurable:!0,get:function(){return hi(this).description}}),ht(fi,"propertyIsEnumerable",Ci,{unsafe:!0}))),ot({global:!0,wrap:!0,forced:!Gt,sham:!Gt},{Symbol:pi}),ai(Lt(X),(function(t){Jr(t)})),ot({target:ui,stat:!0,forced:!Gt},{for:function(t){var e=String(t);return h(_i,e)?_i[e]:(t=pi(e),_i[e]=t,Ti[t]=e,t)},keyFor:function(t){if(!Si(t))throw TypeError(t+" is not a symbol");if(h(Ti,t))return Ti[t]},useSetter:function(){Ei=!0},useSimple:function(){Ei=!1}}),ot({target:"Object",stat:!0,forced:!Gt,sham:!y},{create:function(t,e){return void 0===e?Wt(t):ti(Wt(t),e)},defineProperty:ki,defineProperties:ti,getOwnPropertyDescriptor:W}),ot({target:"Object",stat:!0,forced:!Gt},{getOwnPropertyNames:Qt,getOwnPropertySymbols:xi}),ot({target:"Object",stat:!0,forced:i((function(){Tt.f(1)}))},{getOwnPropertySymbols:function(t){return Tt.f(at(t))}}),di&&ot({target:"JSON",stat:!0,forced:qi=!Gt||i((function(){var t=pi();return"[null]"!=di([t])||"{}"!=di({a:t})||"{}"!=di(Object(t))}))},{stringify:function(t,e,n){for(var r,i=[t],o=1;o<arguments.length;)i.push(arguments[o++]);if((c(r=e)||void 0!==t)&&!Si(t))return ur(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Si(e))return e}),i[1]=e,di.apply(null,i)}}),pi[ci][kn]||N(pi[ci],kn,pi[ci].valueOf),he(pi,ui),$[si]=!0,Jr("asyncIterator"),W=O.f;var Ai,Oi,Ni,Pi,Ri,Di=v.Symbol;!y||"function"!=typeof Di||"description"in Di.prototype&&void 0===Di().description||(Ai={},it(Oi=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof Oi?new Di(t):void 0===t?Di():Di(t);return""===t&&(Ai[e]=!0),e},Di),(Ki=Oi.prototype=Di.prototype).constructor=Oi,Ni=Ki.toString,Pi="Symbol(test)"==String(Di("test")),Ri=/^Symbol\((.*)\)[^)]+$/,W(Ki,"description",{configurable:!0,get:function(){var t=c(this)?this.valueOf():this,e=Ni.call(t);return h(Ai,t)?"":""===(e=Pi?e.slice(7,-1):e.replace(Ri,"$1"))?void 0:e}}),ot({global:!0,forced:!0},{Symbol:Oi})),Jr("hasInstance"),Jr("isConcatSpreadable"),Jr("iterator"),Jr("match"),Jr("matchAll"),Jr("replace"),Jr("search"),Jr("species"),Jr("split"),Jr("toPrimitive"),Jr("toStringTag"),Jr("unscopables"),he(v.JSON,"JSON",!0),he(Math,"Math",!0),ot({global:!0},{Reflect:{}}),he(v.Reflect,"Reflect",!0),ft.Symbol,Jr("asyncDispose"),Jr("dispose"),Jr("observable"),Jr("patternMatch"),Jr("replaceAll"),ii.f("iterator");var Li=!i((function(){return Object.isExtensible(Object.preventExtensions({}))})),Mi=r((function(t){function e(t){n(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var n=O.f,r=D("meta"),i=0,o=Object.isExtensible||function(){return!0},a=t.exports={REQUIRED:!1,fastKey:function(t,n){if(!c(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!h(t,r)){if(!o(t))return"F";if(!n)return"E";e(t)}return t[r].objectID},getWeakData:function(t,n){if(!h(t,r)){if(!o(t))return!0;if(!n)return!1;e(t)}return t[r].weakData},onFreeze:function(t){return Li&&a.REQUIRED&&o(t)&&!h(t,r)&&e(t),t}};$[r]=!0})),ji=(Qt=function(t,e,n){function r(t){var e=y[t];ht(y,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(f&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return f&&!c(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(f&&!c(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})}var o,a,s,u,l,h=-1!==t.indexOf("Map"),f=-1!==t.indexOf("Weak"),p=h?"set":"add",d=v[t],y=d&&d.prototype,g=d,m={};return At(t,"function"!=typeof d||!(f||y.forEach&&!i((function(){(new d).entries().next()}))))?(g=n.getConstructor(e,t,h,p),Mi.REQUIRED=!0):At(t,!0)&&(a=(o=new g)[p](f?{}:-0,1)!=o,s=i((function(){o.has(1)})),u=_e((function(t){new d(t)})),l=!f&&i((function(){for(var t=new d,e=5;e--;)t[p](e,e);return!t.has(-0)})),u||(((g=e((function(e,n){pe(e,g,t);var r,i,o,a=(a=new d,r=e,e=g,Dt&&"function"==typeof(i=r.constructor)&&i!==e&&c(o=i.prototype)&&o!==e.prototype&&Dt(a,o),a);return null!=n&&ie(n,a[p],{that:a,AS_ENTRIES:h}),a}))).prototype=y).constructor=g),(s||l)&&(r("delete"),r("has"),h&&r("get")),(l||a)&&r(p),f&&y.clear&&delete y.clear),m[t]=g,ot({global:!0,forced:g!=d},m),he(g,t),f||n.setStrong(g,t,h),g},O.f),Fi=Mi.fastKey,Ui=lt.set,Vi=lt.getterFor,qi={getConstructor:function(t,e,n,r){function i(t,e,n){var r,i=a(t),o=s(t,e);return o?o.value=n:(i.last=o={index:r=Fi(e,!0),key:e,value:n,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=o),n&&(n.next=o),y?i.size++:t.size++,"F"!==r&&(i.index[r]=o)),t}var o=t((function(t,i){pe(t,o,e),Ui(t,{type:e,index:Wt(null),first:void 0,last:void 0,size:0}),y||(t.size=0),null!=i&&ie(i,t[r],{that:t,AS_ENTRIES:n})})),a=Vi(e),s=function(t,e){var n,r=a(t);if("F"!==(t=Fi(e)))return r.index[t];for(n=r.first;n;n=n.next)if(n.key==e)return n};return le(o.prototype,{clear:function(){for(var t=a(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,y?t.size=0:this.size=0},delete:function(t){var e,n=a(this),r=s(this,t);return r&&(e=r.next,t=r.previous,delete n.index[r.index],r.removed=!0,t&&(t.next=e),e&&(e.previous=t),n.first==r&&(n.first=e),n.last==r&&(n.last=t),y?n.size--:this.size--),!!r},forEach:function(t){for(var e,n=a(this),r=Ht(t,1<arguments.length?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!s(this,t)}}),le(o.prototype,n?{get:function(t){return(t=s(this,t))&&t.value},set:function(t,e){return i(this,0===t?0:t,e)}}:{add:function(t){return i(this,t=0===t?0:t,t)}}),y&&ji(o.prototype,"size",{get:function(){return a(this).size}}),o},setStrong:function(t,e,n){var r=e+" Iterator",i=Vi(e),o=Vi(r);Dn(t,e,(function(t,e){Ui(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}}),n?"entries":"values",!n,!0),fe(e)}};function Bi(){for(var t,e=p(this),n=Kt(e.delete),r=!0,i=0,o=arguments.length;i<o;i++)t=n.call(e,arguments[i]),r=r&&t;return!!r}function zi(t){return Map.prototype.entries.call(t)}ot({target:"Map",stat:!0},{from:(Qt("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),qi),ft.Map,kn=function(t){var e,n,r,i,o=arguments.length,a=1<o?arguments[1]:void 0;return Kt(this),(e=void 0!==a)&&Kt(a),null==t?new this:(n=[],e?(r=0,i=Ht(a,2<o?arguments[2]:void 0,2),ie(t,(function(t){n.push(i(t,r++))}))):ie(t,n.push,{that:n}),new this(n))})}),ot({target:"Map",stat:!0},{of:W=function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}}),ot({target:"Map",proto:!0,real:!0,forced:H},{deleteAll:function(){return Bi.apply(this,arguments)}}),ot({target:"Map",proto:!0,real:!0,forced:H},{emplace:function(t,e){var n=p(this);return e=n.has(t)&&"update"in e?e.update(n.get(t),t,n):e.insert(t,n),n.set(t,e),e}}),ot({target:"Map",proto:!0,real:!0,forced:H},{every:function(t){var e=p(this),n=zi(e),r=Ht(t,1<arguments.length?arguments[1]:void 0,3);return!ie(n,(function(t,n,i){if(!r(n,t,e))return i()}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),ot({target:"Map",proto:!0,real:!0,forced:H},{filter:function(t){var e=p(this),n=zi(e),r=Ht(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(e,tt("Map"))),o=Kt(i.set);return ie(n,(function(t,n){r(n,t,e)&&o.call(i,t,n)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),ot({target:"Map",proto:!0,real:!0,forced:H},{find:function(t){var e=p(this),n=zi(e),r=Ht(t,1<arguments.length?arguments[1]:void 0,3);return ie(n,(function(t,n,i){if(r(n,t,e))return i(n)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),ot({target:"Map",proto:!0,real:!0,forced:H},{findKey:function(t){var e=p(this),n=zi(e),r=Ht(t,1<arguments.length?arguments[1]:void 0,3);return ie(n,(function(t,n,i){if(r(n,t,e))return i(t)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),ot({target:"Map",stat:!0},{groupBy:function(t,e){var n=new this;Kt(e);var r=Kt(n.has),i=Kt(n.get),o=Kt(n.set);return ie(t,(function(t){var a=e(t);r.call(n,a)?i.call(n,a).push(t):o.call(n,a,[t])})),n}}),ot({target:"Map",proto:!0,real:!0,forced:H},{includes:function(t){return ie(zi(p(this)),(function(e,n,r){if((i=n)===(n=t)||i!=i&&n!=n)return r();var i}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),ot({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;Kt(e);var r=Kt(n.set);return ie(t,(function(t){r.call(n,e(t),t)})),n}}),ot({target:"Map",proto:!0,real:!0,forced:H},{keyOf:function(t){return ie(zi(p(this)),(function(e,n,r){if(n===t)return r(e)}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),ot({target:"Map",proto:!0,real:!0,forced:H},{mapKeys:function(t){var e=p(this),n=zi(e),r=Ht(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(e,tt("Map"))),o=Kt(i.set);return ie(n,(function(t,n){o.call(i,r(n,t,e),n)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),ot({target:"Map",proto:!0,real:!0,forced:H},{mapValues:function(t){var e=p(this),n=zi(e),r=Ht(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(e,tt("Map"))),o=Kt(i.set);return ie(n,(function(t,n){o.call(i,t,r(n,t,e))}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),i}}),ot({target:"Map",proto:!0,real:!0,forced:H},{merge:function(t){for(var e=p(this),n=Kt(e.set),r=0;r<arguments.length;)ie(arguments[r++],n,{that:e,AS_ENTRIES:!0});return e}}),ot({target:"Map",proto:!0,real:!0,forced:H},{reduce:function(t){var e=p(this),n=zi(e),r=arguments.length<2,i=r?void 0:arguments[1];if(Kt(t),ie(n,(function(n,o){i=r?(r=!1,o):t(i,o,n,e)}),{AS_ENTRIES:!0,IS_ITERATOR:!0}),r)throw TypeError("Reduce of empty map with no initial value");return i}}),ot({target:"Map",proto:!0,real:!0,forced:H},{some:function(t){var e=p(this),n=zi(e),r=Ht(t,1<arguments.length?arguments[1]:void 0,3);return ie(n,(function(t,n,i){if(r(n,t,e))return i()}),{AS_ENTRIES:!0,IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),ot({target:"Map",proto:!0,real:!0,forced:H},{update:function(t,e){var n=p(this),r=arguments.length;Kt(e);var i=n.has(t);if(!i&&r<3)throw TypeError("Updating absent value");return r=i?n.get(t):Kt(2<r?arguments[2]:void 0)(t,n),n.set(t,e(r,t,n)),n}});var Ki=function(t,e){var n,r=p(this),i=2<arguments.length?arguments[2]:void 0;if("function"!=typeof e&&"function"!=typeof i)throw TypeError("At least one callback required");return r.has(t)?(n=r.get(t),"function"==typeof e&&(n=e(n),r.set(t,n))):"function"==typeof i&&(n=i(),r.set(t,n)),n};function Hi(t){return Set.prototype.values.call(t)}ot({target:"Map",proto:!0,real:!0,forced:H},{upsert:Ki}),ot({target:"Map",proto:!0,real:!0,forced:H},{updateOrInsert:Ki}),Qt("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),qi),ft.Set,ot({target:"Set",stat:!0},{from:kn}),ot({target:"Set",stat:!0},{of:W}),ot({target:"Set",proto:!0,real:!0,forced:H},{addAll:function(){return function(){for(var t=p(this),e=Kt(t.add),n=0,r=arguments.length;n<r;n++)e.call(t,arguments[n]);return t}.apply(this,arguments)}}),ot({target:"Set",proto:!0,real:!0,forced:H},{deleteAll:function(){return Bi.apply(this,arguments)}}),ot({target:"Set",proto:!0,real:!0,forced:H},{every:function(t){var e=p(this),n=Hi(e),r=Ht(t,1<arguments.length?arguments[1]:void 0,3);return!ie(n,(function(t,n){if(!r(t,t,e))return n()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),ot({target:"Set",proto:!0,real:!0,forced:H},{difference:function(t){var e=p(this),n=new(Te(e,tt("Set")))(e),r=Kt(n.delete);return ie(t,(function(t){r.call(n,t)})),n}}),ot({target:"Set",proto:!0,real:!0,forced:H},{filter:function(t){var e=p(this),n=Hi(e),r=Ht(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(e,tt("Set"))),o=Kt(i.add);return ie(n,(function(t){r(t,t,e)&&o.call(i,t)}),{IS_ITERATOR:!0}),i}}),ot({target:"Set",proto:!0,real:!0,forced:H},{find:function(t){var e=p(this),n=Hi(e),r=Ht(t,1<arguments.length?arguments[1]:void 0,3);return ie(n,(function(t,n){if(r(t,t,e))return n(t)}),{IS_ITERATOR:!0,INTERRUPTED:!0}).result}}),ot({target:"Set",proto:!0,real:!0,forced:H},{intersection:function(t){var e=p(this),n=new(Te(e,tt("Set"))),r=Kt(e.has),i=Kt(n.add);return ie(t,(function(t){r.call(e,t)&&i.call(n,t)})),n}}),ot({target:"Set",proto:!0,real:!0,forced:H},{isDisjointFrom:function(t){var e=p(this),n=Kt(e.has);return!ie(t,(function(t,r){if(!0===n.call(e,t))return r()}),{INTERRUPTED:!0}).stopped}}),ot({target:"Set",proto:!0,real:!0,forced:H},{isSubsetOf:function(t){var e=function(t){var e=ee(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return p(e.call(t))}(this),n=p(t),r=n.has;return"function"!=typeof r&&(n=new(tt("Set"))(t),r=Kt(n.has)),!ie(e,(function(t,e){if(!1===r.call(n,t))return e()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),ot({target:"Set",proto:!0,real:!0,forced:H},{isSupersetOf:function(t){var e=p(this),n=Kt(e.has);return!ie(t,(function(t,r){if(!1===n.call(e,t))return r()}),{INTERRUPTED:!0}).stopped}}),ot({target:"Set",proto:!0,real:!0,forced:H},{join:function(t){var e=Hi(n=p(this)),n=void 0===t?",":String(t);return ie(e,(t=[]).push,{that:t,IS_ITERATOR:!0}),t.join(n)}}),ot({target:"Set",proto:!0,real:!0,forced:H},{map:function(t){var e=p(this),n=Hi(e),r=Ht(t,1<arguments.length?arguments[1]:void 0,3),i=new(Te(e,tt("Set"))),o=Kt(i.add);return ie(n,(function(t){o.call(i,r(t,t,e))}),{IS_ITERATOR:!0}),i}}),ot({target:"Set",proto:!0,real:!0,forced:H},{reduce:function(t){var e=p(this),n=Hi(e),r=arguments.length<2,i=r?void 0:arguments[1];if(Kt(t),ie(n,(function(n){i=r?(r=!1,n):t(i,n,n,e)}),{IS_ITERATOR:!0}),r)throw TypeError("Reduce of empty set with no initial value");return i}}),ot({target:"Set",proto:!0,real:!0,forced:H},{some:function(t){var e=p(this),n=Hi(e),r=Ht(t,1<arguments.length?arguments[1]:void 0,3);return ie(n,(function(t,n){if(r(t,t,e))return n()}),{IS_ITERATOR:!0,INTERRUPTED:!0}).stopped}}),ot({target:"Set",proto:!0,real:!0,forced:H},{symmetricDifference:function(t){var e=p(this),n=new(Te(e,tt("Set")))(e),r=Kt(n.delete),i=Kt(n.add);return ie(t,(function(t){r.call(n,t)||i.call(n,t)})),n}}),ot({target:"Set",proto:!0,real:!0,forced:H},{union:function(t){var e;return ie(t,Kt((e=new(Te(e=p(this),tt("Set")))(e)).add),{that:e}),e}});var Wi=Math.floor;ot({target:"Number",stat:!0},{isInteger:function(t){return!c(t)&&isFinite(t)&&Wi(t)===t}}),ft.Number.isInteger,ot({target:"Number",stat:!0},{isNaN:function(t){return t!=t}}),ft.Number.isNaN;var Gi=function(t,e){return(Gi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Qi(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Gi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Yi=function(){return(Yi=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Xi(t,e,n,r){return new(n=n||Promise)((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):((e=t.value)instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function $i(t,e){var n,r,i,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},a={next:s(0),throw:s(1),return:s(2)};return"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,(a=i?[2&a[0],i.value]:a)[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=0<(i=o.trys).length&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(s){a=[6,s],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}function Ji(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&r>=t.length?void 0:t)&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Zi(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function to(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}function eo(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function no(t){try{return so.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var ro=!1,io="${JSCORE_VERSION}",oo=function(t,e){if(!t)throw ao(e)},ao=function(t){return new Error("Firebase Database ("+io+") INTERNAL ASSERT FAILED: "+t)},so={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=(15&s)<<2|(l=u?t[i+2]:0)>>6,l=63&l;u||(l=64,a||(c=64)),r.push(n[o>>2],n[(3&o)<<4|s>>4],n[c],n[l])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(eo(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i,o,a,s=t[n++];s<128?e[r++]=String.fromCharCode(s):191<s&&s<224?(o=t[n++],e[r++]=String.fromCharCode((31&s)<<6|63&o)):239<s&&s<365?(i=((7&s)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536,e[r++]=String.fromCharCode(55296+(i>>10)),e[r++]=String.fromCharCode(56320+(1023&i))):(o=t[n++],a=t[n++],e[r++]=String.fromCharCode((15&s)<<12|(63&o)<<6|63&a))}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();r.push(o<<2|a>>4),64!==s&&(r.push(a<<4&240|s>>2),64!==u&&r.push(s<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function uo(t){return co(void 0,t)}function co(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=co(t[n],e[n]));return t}var lo=(ho.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},ho);function ho(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}function fo(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0;if(!(e=t.sub||t.user_id))throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");return t=Yi({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:e,user_id:e,firebase:{sign_in_provider:"custom",identities:{}}},t),[so.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),so.encodeString(JSON.stringify(t),!1),""].join(".")}function po(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function vo(){return"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(po())}function yo(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function go(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function mo(){return!0===ro}function bo(){return"indexedDB"in self&&null!=indexedDB}function wo(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}function _o(){return!(!navigator||!navigator.cookieEnabled)}var To,Eo=(Qi(Io,To=Error),Io);function Io(t,e,n){return(e=To.call(this,e)||this).code=t,e.customData=n,e.name="FirebaseError",Object.setPrototypeOf(e,Io.prototype),Error.captureStackTrace&&Error.captureStackTrace(e,So.prototype.create),e}var So=(ko.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,i=e[0]||{},o=this.service+"/"+t;return t=(t=this.errors[t])?(r=i,t.replace(Co,(function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"}))):"Error",t=this.serviceName+": "+t+" ("+o+").",new Eo(o,t,i)},ko);function ko(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var Co=/\{\$([^}]+)}/g;function xo(t){return JSON.parse(t)}function Ao(t){return JSON.stringify(t)}function Oo(t){var e={},n={},r={},i="";try{var o=t.split(".");e=xo(no(o[0])||""),n=xo(no(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function No(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Po(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Ro(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Do(t,e,n){var r,i={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}var Lo=(Mo.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},Mo.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a=this.chain_[0],s=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){var h=r<40?r<20?(o=c^s&(u^c),1518500249):(o=s^u^c,1859775393):r<60?(o=s&u|c&(s|u),2400959708):(o=s^u^c,3395469782);i=(a<<5|a>>>27)+o+l+h+n[r]&4294967295,l=c,c=u,u=4294967295&(s<<30|s>>>2),s=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},Mo.prototype.update=function(t,e){if(null!=t){for(var n=(e=void 0===e?t.length:e)-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},Mo.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},Mo);function Mo(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function jo(t,e){return(e=new Fo(t,e)).subscribe.bind(e)}var Fo=(Uo.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},Uo.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},Uo.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},Uo.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");return void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=Vo),void 0===r.error&&(r.error=Vo),void 0===r.complete&&(r.complete=Vo),n=this.unsubscribeOne.bind(this,this.observers.length),this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),n},Uo.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},Uo.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},Uo.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},Uo.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},Uo);function Uo(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}function Vo(){}function qo(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function Bo(t,e){return t+" failed: "+e+" argument "}function zo(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Bo(t,e)+"must be a valid function.")}function Ko(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Bo(t,e)+"must be a valid context object.")}function Ho(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}function Wo(t,e,n){return void 0===n&&(n=2),n=(e=void 0===e?1e3:e)*Math.pow(n,t),t=Math.round(.5*n*(Math.random()-.5)*2),Math.min(144e5,n+t)}function Go(t){return t&&t._delegate?t._delegate:t}var Qo=(Yo.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},Yo.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},Yo.prototype.setServiceProps=function(t){return this.serviceProps=t,this},Yo.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},Yo);function Yo(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}var Xo="[DEFAULT]",$o=(Jo.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t=void 0===t?Xo:t);if(!this.instancesDeferred.has(e)&&(t=new lo,this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize()))try{var n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(t){}return this.instancesDeferred.get(e).promise},Jo.prototype.getImmediate=function(t){t=(e=Yi({identifier:Xo,optional:!1},t)).identifier;var e=e.optional;if(t=this.normalizeInstanceIdentifier(t),!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(e)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(t){if(e)return null;throw t}},Jo.prototype.getComponent=function(){return this.component},Jo.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if("EAGER"===t.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:Xo})}catch(t){}try{for(var r=Ji(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Zi(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService({instanceIdentifier:u});s.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},Jo.prototype.clearInstance=function(t){this.instancesDeferred.delete(t=void 0===t?Xo:t),this.instances.delete(t)},Jo.prototype.delete=function(){return Xi(this,void 0,void 0,(function(){var t;return $i(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(to(to([],Zi(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),Zi(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},Jo.prototype.isComponentSet=function(){return null!=this.component},Jo.prototype.isInitialized=function(t){return this.instances.has(t=void 0===t?Xo:t)},Jo.prototype.initialize=function(t){var e,n,r=(t=void 0===t?{}:t).instanceIdentifier,i=(t=void 0===(t=t.options)?{}:t,this.normalizeInstanceIdentifier(void 0===r?Xo:r));if(this.isInitialized(i))throw Error(this.name+"("+i+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var o=this.getOrInitializeService({instanceIdentifier:i,options:t});try{for(var a=Ji(this.instancesDeferred.entries()),s=a.next();!s.done;s=a.next()){var u=Zi(s.value,2),c=u[0],l=u[1];i===this.normalizeInstanceIdentifier(c)&&l.resolve(o)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(o,i),o},Jo.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},Jo.prototype.invokeOnInitCallbacks=function(t,e){var n,r;try{for(var i=Ji(this.onInitCallbacks),o=i.next();!o.done;o=i.next()){var a=o.value;try{a(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},Jo.prototype.getOrInitializeService=function(t){var e=t.instanceIdentifier,n=t.options,r=void 0===n?{}:n;if(!(t=this.instances.get(e))&&this.component&&(t=this.component.instanceFactory(this.container,{instanceIdentifier:(n=e)===Xo?void 0:n,options:r}),this.instances.set(e,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,t)}catch(t){}return t||null},Jo.prototype.normalizeInstanceIdentifier=function(t){return!this.component||this.component.multipleInstances?t:Xo},Jo.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},Jo);function Jo(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}var Zo=(ta.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},ta.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},ta.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new $o(t,this);return this.providers.set(t,e),e},ta.prototype.getProviders=function(){return Array.from(this.providers.values())},ta);function ta(t){this.name=t,this.providers=new Map}var ea,na=[];function ra(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=aa[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,to(["["+i+"]  "+t.name+":"],n))}}(kn=ea=ea||{})[kn.DEBUG=0]="DEBUG",kn[kn.VERBOSE=1]="VERBOSE",kn[kn.INFO=2]="INFO",kn[kn.WARN=3]="WARN",kn[kn.ERROR=4]="ERROR",kn[kn.SILENT=5]="SILENT";var ia={debug:ea.DEBUG,verbose:ea.VERBOSE,info:ea.INFO,warn:ea.WARN,error:ea.ERROR,silent:ea.SILENT},oa=ea.INFO,aa=((W={})[ea.DEBUG]="log",W[ea.VERBOSE]="log",W[ea.INFO]="info",W[ea.WARN]="warn",W[ea.ERROR]="error",W),sa=(Object.defineProperty(ua.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in ea))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),ua.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?ia[t]:t},Object.defineProperty(ua.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(ua.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),ua.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,to([this,ea.DEBUG],t)),this._logHandler.apply(this,to([this,ea.DEBUG],t))},ua.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,to([this,ea.VERBOSE],t)),this._logHandler.apply(this,to([this,ea.VERBOSE],t))},ua.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,to([this,ea.INFO],t)),this._logHandler.apply(this,to([this,ea.INFO],t))},ua.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,to([this,ea.WARN],t)),this._logHandler.apply(this,to([this,ea.WARN],t))},ua.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,to([this,ea.ERROR],t)),this._logHandler.apply(this,to([this,ea.ERROR],t))},ua);function ua(t){this.name=t,this._logLevel=oa,this._logHandler=ra,this._userLogHandler=null,na.push(this)}function ca(t){na.forEach((function(e){e.setLogLevel(t)}))}(H={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",H["bad-app-name"]="Illegal App name: '{$appName}",H["duplicate-app"]="Firebase App named '{$appName}' already exists",H["app-deleted"]="Firebase App named '{$appName}' already deleted",H["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",H["invalid-log-argument"]="First argument to `onLog` must be null or a function.";var la=new So("app","Firebase",kn=H),ha="@firebase/app",fa="[DEFAULT]",pa=((W={})[ha]="fire-core",W["@firebase/analytics"]="fire-analytics",W["@firebase/app-check"]="fire-app-check",W["@firebase/auth"]="fire-auth",W["@firebase/database"]="fire-rtdb",W["@firebase/functions"]="fire-fn",W["@firebase/installations"]="fire-iid",W["@firebase/messaging"]="fire-fcm",W["@firebase/performance"]="fire-perf",W["@firebase/remote-config"]="fire-rc",W["@firebase/storage"]="fire-gcs",W["@firebase/firestore"]="fire-fst",W["fire-js"]="fire-js",W["firebase-wrapper"]="fire-js-all",W),da=new sa("@firebase/app"),va=(Object.defineProperty(ya.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(ya.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(ya.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),ya.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},ya.prototype._getService=function(t,e){void 0===e&&(e=fa),this.checkDestroyed_();var n=this.container.getProvider(t);return n.isInitialized()||"EXPLICIT"!==(null===(t=n.getComponent())||void 0===t?void 0:t.instantiationMode)||n.initialize(),n.getImmediate({identifier:e})},ya.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=fa),this.container.getProvider(t).clearInstance(e)},ya.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){da.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},ya.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},ya.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},ya.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw la.create("app-deleted",{appName:this.name_})},ya);function ya(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=uo(t),this.container=new Zo(e.name),this._addComponent(new Qo("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}function ga(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;if(void 0===o.name&&(o.name=fa),"string"!=typeof(i=o.name)||!i)throw la.create("bad-app-name",{appName:String(i)});if(No(e,i))throw la.create("duplicate-app",{appName:i});return o=new t(n,o,r),e[i]=o},app:i,registerVersion:function(t,e,n){var r=null!==(i=pa[t])&&void 0!==i?i:t;n&&(r+="-"+n);var i=r.match(/\s|\//);t=e.match(/\s|\//),i||t?(n=['Unable to register library "'+r+'" with version "'+e+'":'],i&&n.push('library name "'+r+'" contains illegal characters (whitespace or "/")'),i&&t&&n.push("and"),t&&n.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),da.warn(n.join(" "))):o(new Qo(r+"-version",(function(){return{library:r,version:e}}),"VERSION"))},setLogLevel:ca,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw la.create("invalid-log-argument");!function(t,e){for(var n=0,r=na;n<r.length;n++)!function(n){var r=null;e&&e.level&&(r=ia[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:ea[n].toLowerCase(),message:a,args:i,type:e.name})}}(r[n])}(t,e)},apps:null,SDK_VERSION:"8.6.3",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"!==e?e:null}}};function i(t){if(!No(e,t=t||fa))throw la.create("no-app",{appName:t});return e[t]}function o(o){var a,s=o.name;if(n.has(s))return da.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;n.set(s,o),"PUBLIC"===o.type&&(a=function(t){if("function"!=typeof(t=void 0===t?i():t)[s])throw la.create("invalid-app-argument",{appName:s});return t[s]()},void 0!==o.serviceProps&&co(a,o.serviceProps),r[s]=a,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,s).apply(this,o.multipleInstances?t:[])});for(var u=0,c=Object.keys(e);u<c.length;u++){var l=c[u];e[l]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}va.prototype.name&&va.prototype.options||va.prototype.delete||console.log("dc"),H=function t(){var e=ga(va);return e.INTERNAL=Yi(Yi({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){co(e,t)},createSubscribe:jo,ErrorFactory:So,deepExtend:co}),e}();var ma=(ba.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){return function(t){return"VERSION"===(null==(t=t.getComponent())?void 0:t.type)}(t)?(t=t.getImmediate()).library+"/"+t.version:null})).filter((function(t){return t})).join(" ")},ba);function ba(t){this.container=t}"object"==typeof self&&self.self===self&&void 0!==self.firebase&&(da.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),(js=self.firebase.SDK_VERSION)&&0<=js.indexOf("LITE")&&da.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "));var wa=H.initializeApp;H.initializeApp=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(t){return}}()&&da.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),wa.apply(void 0,t)};var _a,Ta=H;(_a=Ta).INTERNAL.registerComponent(new Qo("platform-logger",(function(t){return new ma(t)}),"PRIVATE")),_a.registerVersion(ha,"0.6.22",void 0),_a.registerVersion("fire-js",""),Ta.registerVersion("firebase","8.6.3","app"),function(){var t,n="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},r=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof e&&e,t];for(var n=0;n<t.length;++n){var r=t[n];if(r&&r.Math==Math)return r}return globalThis}(this);function i(t){var e,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}!function(t,e){if(e){var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(e=e(o=i[t=t[t.length-1]]))!=o&&null!=e&&n(i,t,{configurable:!0,writable:!0,value:e})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){var e;null==this.a&&(this.a=[],(e=this).c((function(){e.g()}))),this.a.push(t)};var a=r.setTimeout;n.prototype.c=function(t){a(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.s=function(t){var e=this.f();t.Qa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(e){o(e)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Qa(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Qa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=i(t),a=r.next();!a.done;a=r.next())o(a.value).Qa(e,n)}))},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e((function(t,e){for(var i=[],a=0;i.push(void 0),a++,o(r.value).Qa(function(e){return function(n){i[e]=n,0==--a&&t(i)}}(i.length-1),e),!(r=n.next()).done;);}))},e}));var o=o||{},a=this||self,s=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&s.test(t)?t:""}function l(){}function h(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==h(t)}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),y=0;function g(t,e,n){return t.call.apply(t.bind,arguments)}function m(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:m).apply(null,arguments)}function w(t){var e=Array.prototype.slice.call(arguments,1);return function(){var n=e.slice();return n.push.apply(n,arguments),t.apply(this,n)}}function _(t,e){function n(){}n.prototype=e.prototype,t.ab=e.prototype,t.prototype=new n,t.prototype.constructor=t}function T(t){return t}function E(t,e,n){this.code=k+t,this.message=e||C[t]||"",this.a=n||null}function I(t){var e=t&&t.code;return e?new E(e.substring(k.length),t.message,t.serverResponse):null}_(E,Error),E.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},E.prototype.toJSON=function(){return this.w()};var S,k="auth/",C={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},x={ld:{Ta:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ta:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://securetoken.googleapis.com/v1/token",Wa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ta:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Za:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ta:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Za:"https://test-securetoken.sandbox.googleapis.com/v1/token",Wa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function A(t){for(var e in x)if(x[e].id===t)return{firebaseEndpoint:(t=x[e]).Ta,secureTokenEndpoint:t.Za,identityPlatformEndpoint:t.Wa};return null}function O(t){if(t)try{return t.$goog_Thenable}catch(t){return}}function N(t){var e;Error.captureStackTrace?Error.captureStackTrace(this,N):(e=Error().stack)&&(this.stack=e),t&&(this.message=String(t))}function P(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");N.call(this,n+t[r])}function R(t){throw new P("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function D(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function L(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function M(){this.b=this.a=null}S=A("__EID__")?"__EID__":void 0,_(N,Error),N.prototype.name="CustomError",_(P,N),P.prototype.name="AssertionError",D.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t};var j=new D((function(){return new F}),(function(t){t.reset()}));function F(){this.next=this.b=this.a=null}M.prototype.add=function(t,e){var n=j.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},F.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},F.prototype.reset=function(){this.next=this.b=this.a=null};var U=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},V=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},q=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n,r=t.length,i=[],o=0,a="string"==typeof t?t.split(""):t,s=0;s<r;s++)s in a&&(n=a[s],e.call(void 0,n,s,t)&&(i[o++]=n));return i},B=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},z=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function K(t,e){return 0<=U(t,e)}function H(t,e){var n;return(n=0<=(e=U(t,e)))&&Array.prototype.splice.call(t,e,1),n}function W(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1).length}))}function G(){return Array.prototype.concat.apply([],arguments)}function Q(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Y,X=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},$=/&/g,J=/</g,Z=/>/g,tt=/"/g,et=/'/g,nt=/\x00/g,rt=/[\x00&<>"']/;function it(t,e){return-1!=t.indexOf(e)}function ot(t,e){return t<e?-1:e<t?1:0}var at=a.navigator;function st(t){return it(Y,t)}function ut(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ct(t){for(var e in t)return;return 1}function lt(t){var e,n={};for(e in t)n[e]=t[e];return n}Y=at&&(at=at.userAgent)?at:"";var ht="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ft(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<ht.length;i++)e=ht[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function pt(t,e){t:{try{var n,r=t&&t.ownerDocument;if((n=(n=r&&(r.defaultView||r.parentWindow))||a).Element&&n.Location){var i=n;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(d(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;R("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function dt(t,e){this.a=t===mt&&e||"",this.b=gt}function vt(t){return t instanceof dt&&t.constructor===dt&&t.b===gt?t.a:(R("expected object of type Const, got '"+t+"'"),"type_error:Const")}dt.prototype.sa=!0,dt.prototype.ra=function(){return this.a},dt.prototype.toString=function(){return"Const{"+this.a+"}"};var yt,gt={},mt={};function bt(){if(void 0===yt){var t=null,e=a.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:T,createScript:T,createScriptURL:T})}catch(t){a.console&&a.console.error(t.message)}yt=t}else yt=t}return yt}function wt(t,e){this.a=e===St?t:""}function _t(t){return t instanceof wt&&t.constructor===wt?t.a:(R("expected object of type TrustedResourceUrl, got '"+t+"' of type "+h(t)),"type_error:TrustedResourceUrl")}function Tt(t,e){var n,r=vt(t);if(!It.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return n=t=r.replace(Et,(function(t,n){if(!Object.prototype.hasOwnProperty.call(e,n))throw Error('Found marker, "'+n+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[n])instanceof dt?vt(t):encodeURIComponent(String(t))})),new wt(n=(t=bt())?t.createScriptURL(n):n,St)}wt.prototype.sa=!0,wt.prototype.ra=function(){return this.a.toString()},wt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Et=/%{(\w+)}/g,It=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,St={};function kt(t,e){this.a=e===Rt?t:""}function Ct(t){return t instanceof kt&&t.constructor===kt?t.a:(R("expected object of type SafeUrl, got '"+t+"' of type "+h(t)),"type_error:SafeUrl")}kt.prototype.sa=!0,kt.prototype.ra=function(){return this.a.toString()},kt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var xt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,At=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Ot=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Nt(t){return t instanceof kt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),t=Ot.test(t)||(e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(At))&&xt.test(e[1])?new kt(t,Rt):null);var e}function Pt(t){return t instanceof kt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),new kt(t=Ot.test(t)?t:"about:invalid#zClosurez",Rt))}var Rt={},Dt=new kt("about:invalid#zClosurez",Rt);function Lt(t,e,n){this.a=n===Mt?t:""}Lt.prototype.sa=!0,Lt.prototype.ra=function(){return this.a.toString()},Lt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Mt={};function jt(t,e,n,r){return t=t instanceof kt?t:Pt(t),e=e||a,n=n instanceof dt?vt(n):n||"",e.open(Ct(t),n,r,void 0)}function Ft(t){for(var e=t.split("%s"),n="",r=Array.prototype.slice.call(arguments,1);r.length&&1<e.length;)n+=e.shift()+r.shift();return n+e.join("%s")}function Ut(t){return rt.test(t)&&-1!=(t=-1!=(t=-1!=(t=-1!=(t=-1!=(t=-1!=t.indexOf("&")?t.replace($,"&amp;"):t).indexOf("<")?t.replace(J,"&lt;"):t).indexOf(">")?t.replace(Z,"&gt;"):t).indexOf('"')?t.replace(tt,"&quot;"):t).indexOf("'")?t.replace(et,"&#39;"):t).indexOf("\0")&&(t=t.replace(nt,"&#0;")),t}function Vt(t){return Vt[" "](t),t}Vt[" "]=l;var qt,Bt=st("Opera"),zt=st("Trident")||st("MSIE"),Kt=st("Edge"),Ht=Kt||zt,Wt=st("Gecko")&&!(it(Y.toLowerCase(),"webkit")&&!st("Edge"))&&!(st("Trident")||st("MSIE"))&&!st("Edge"),Gt=it(Y.toLowerCase(),"webkit")&&!st("Edge");function Qt(){var t=a.document;return t?t.documentMode:void 0}var Yt="",Xt=(Xt=Y,Wt?/rv:([^\);]+)(\)|;)/.exec(Xt):Kt?/Edge\/([\d\.]+)/.exec(Xt):zt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Xt):Gt?/WebKit\/(\S+)/.exec(Xt):Bt?/(?:Version)[ \/]?(\S+)/.exec(Xt):void 0);Xt&&(Yt=Xt?Xt[1]:""),qt=zt&&null!=(Xt=Qt())&&Xt>parseFloat(Yt)?String(Xt):Yt;var $t={};function Jt(t){return e=t,n=function(){for(var e=0,n=X(String(qt)).split("."),r=X(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++)for(var a=n[o]||"",s=r[o]||"";a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],(0!=a[0].length||0!=s[0].length)&&(e=ot(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ot(0==a[2].length,0==s[2].length)||ot(a[2],s[2]),a=a[3],s=s[3],0==e););return 0<=e},r=$t,Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=n();var e,n,r}var Zt=a.document&&zt&&(Qt()||parseInt(qt,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var te=!zt||9<=Number(Zt);function ee(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ne(t,e){ut(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:oe.hasOwnProperty(n)?t.setAttribute(oe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var re,ie,oe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ae(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function se(t){a.setTimeout((function(){throw t}),0)}function ue(t,e){ie||function(){var t;ie=a.Promise&&a.Promise.resolve?(t=a.Promise.resolve(void 0),function(){t.then(he)}):function(){var t=he;!p(a.setImmediate)||a.Window&&a.Window.prototype&&!st("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(re=re||function(){var t=a.MessageChannel;if(void 0===(t=void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!st("Presto")?function(){var t=ae(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=b((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}:t)||st("Trident")||st("MSIE"))return function(t){a.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){var t;void 0!==n.next&&(t=(n=n.next).Gb,n.Gb=null,t())},function(t){r.next={Gb:t},r=r.next,e.port2.postMessage(0)}}())(t):a.setImmediate(t)}}(),ce||(ie(),ce=!0),le.add(t,e)}var ce=!1,le=new M;function he(){for(var t,e;e=t=void 0,e=null,(t=le).a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e=e;){try{e.a.call(e.b)}catch(t){se(t)}L(j,e)}ce=!1}function fe(t,e){if(this.a=pe,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,(function(t){Se(n,de,t)}),(function(t){if(!(t instanceof Pe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Se(n,ve,t)}))}catch(t){Se(this,ve,t)}}var pe=0,de=2,ve=3;function ye(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ye.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var ge=new D((function(){return new ye}),(function(t){t.reset()}));function me(t,e,n){var r=ge.get();return r.g=t,r.b=e,r.f=n,r}function be(t){if(t instanceof fe)return t;var e=new fe(l);return Se(e,de,t),e}function we(t){return new fe((function(e,n){n(t)}))}function _e(t,e,n){ke(t,e,n,null)||ue(w(e,t))}function Te(t){return new fe((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Pb:!0,value:o}:{Pb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)_e(t[o],w(i,o,!0),w(i,o,!1));else e(r)}))}function Ee(t,e){t.b||t.a!=de&&t.a!=ve||Ce(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ie(t,e,n,r){var i=me(null,null,null);return i.a=new fe((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(n){o(n)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Pe?o(e):t(i)}catch(e){o(e)}}:o})),Ee(i.a.c=t,i),i.a}function Se(t,e,n){var r,i;t.a==pe&&(t===n&&(e=ve,n=new TypeError("Promise cannot resolve to itself")),t.a=1,ke(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Ce(t),e!=ve||n instanceof Pe||(i=n,(r=t).g=!0,ue((function(){r.g&&Ne.call(null,i)})))))}function ke(t,e,n,r){if(t instanceof fe)return Ee(t,me(e||l,n||null,r)),1;if(O(t))return t.then(e,n,r),1;if(d(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,(function(t){a||(a=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),1}catch(t){return n.call(r,t),1}}function Ce(t){t.h||(t.h=!0,ue(t.gc,t))}function xe(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ae(t,e,n,r){if(n==ve&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Oe(e,n,r);else try{e.c?e.g.call(e.f):Oe(e,n,r)}catch(t){Ne.call(null,t)}L(ge,e)}function Oe(t,e,n){e==de?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}fe.prototype.then=function(t,e,n){return Ie(this,p(t)?t:null,p(e)?e:null,n)},fe.prototype.$goog_Thenable=!0,(t=fe.prototype).oa=function(t,e){return(t=me(t,t,e)).c=!0,Ee(this,t),this},t.o=function(t,e){return Ie(this,null,t,e)},t.cancel=function(t){var e;this.a==pe&&(e=new Pe(t),ue((function(){!function t(e,n){if(e.a==pe)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,!((o=s.a==e?s:o)&&1<i)));s=s.next)o||(a=s);o&&(r.a==pe&&1==i?t(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):xe(r),Ae(r,o,ve,n)))}e.c=null}else Se(e,ve,n)}(this,e)}),this))},t.$c=function(t){this.a=pe,Se(this,de,t)},t.ad=function(t){this.a=pe,Se(this,ve,t)},t.gc=function(){for(var t;t=xe(this);)Ae(this,t,this.a,this.i);this.h=!1};var Ne=se;function Pe(t){N.call(this,t)}function Re(){this.xa=this.xa,this.pa=this.pa}function De(t){t.xa||(t.xa=!0,t.Da(),1)||(t=t,Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++y))}_(Pe,N),Re.prototype.xa=!(Pe.prototype.name="cancel"),Re.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Le=Object.freeze||function(t){return t},Me=!zt||9<=Number(Zt),je=zt&&!Jt("9"),Fe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",l,e),a.removeEventListener("test",l,e)}catch(t){}return t}();function Ue(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ve(t,e){if(Ue.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Wt){t:{try{Vt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:qe[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}Ue.prototype.preventDefault=function(){this.defaultPrevented=!0},_(Ve,Ue);var qe=Le({2:"touch",3:"pen",4:"mouse"});Ve.prototype.preventDefault=function(){Ve.ab.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,je)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},Ve.prototype.g=function(){return this.a};var Be="closure_listenable_"+(1e6*Math.random()|0),ze=0;function Ke(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Va=i,this.key=++ze,this.va=this.Pa=!1}function He(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Va=null}function We(t){this.src=t,this.a={},this.b=0}function Ge(t,e){var n=e.type;n in t.a&&H(t.a[n],e)&&(He(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Qe(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Va==r)return i}return-1}We.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=Qe(t,e,r,i);return-1<a?(e=t[a],n||(e.Pa=!1)):((e=new Ke(e,this.src,o,!!r,i)).Pa=n,t.push(e)),e};var Ye="closure_lm_"+(1e6*Math.random()|0),Xe={};function $e(t,e,n,r,i){if(r&&r.once)Ze(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)$e(t,e[o],n,r,i);else n=cn(n),t&&t[Be]?hn(t,e,n,d(r)?!!r.capture:!!r,i):Je(t,e,n,!1,r,i)}function Je(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a,s,u=d(i)?!!i.capture:!!i,c=sn(t);if(c||(t[Ye]=c=new We(t)),!(n=c.add(e,n,r,u,o)).proxy)if(a=an,s=Me?function(t){return a.call(s.src,s.listener,t)}:function(t){if(!(t=a.call(s.src,s.listener,t)))return t},(n.proxy=r=s).src=t,r.listener=n,t.addEventListener)void 0===(i=Fe?i:u)&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(nn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function Ze(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ze(t,e[o],n,r,i);else n=cn(n),t&&t[Be]?fn(t,e,n,d(r)?!!r.capture:!!r,i):Je(t,e,n,!0,r,i)}function tn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)tn(t,e[o],n,r,i);else r=d(r)?!!r.capture:!!r,n=cn(n),t&&t[Be]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=Qe(o=t.a[e],n,r,i))&&(He(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):(t=t&&sn(t))&&(e=t.a[e.toString()],(n=(t=-1)<(t=e?Qe(e,n,r,i):t)?e[t]:null)&&en(n))}function en(t){var e,n,r;"number"!=typeof t&&t&&!t.va&&((e=t.src)&&e[Be]?Ge(e.v,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(nn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=sn(e))?(Ge(n,t),0==n.b&&(n.src=null,e[Ye]=null)):He(t)))}function nn(t){return t in Xe?Xe[t]:Xe[t]="on"+t}function rn(t,e,n,r){var i=!0;if((t=sn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=on(o,r),i=i&&!1!==o)}return i}function on(t,e){var n=t.listener,r=t.Va||t.src;return t.Pa&&en(t),n.call(r,e)}function an(t,e){if(t.va)return!0;if(Me)return on(t,new Ve(e,this));if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ve(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=rn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=rn(r[i],t,!1,e),n=n&&o}return n}function sn(t){return(t=t[Ye])instanceof We?t:null}var un="__closure_events_fn_"+(1e9*Math.random()>>>0);function cn(t){return p(t)?t:(t[un]||(t[un]=function(e){return t.handleEvent(e)}),t[un])}function ln(){Re.call(this),this.v=new We(this),(this.ac=this).gb=null}function hn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function fn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function pn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a,s,u=e[o];u&&!u.va&&u.capture==n&&(a=u.listener,s=u.Va||u.src,u.Pa&&Ge(t.v,u),i=!1!==a.call(s,r)&&i)}return i&&!r.defaultPrevented}function dn(t,e,n){if(p(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function vn(t){var e=null;return new fe((function(n,r){-1==(e=dn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw a.clearTimeout(e),t}))}function yn(t){if(t.W&&"function"==typeof t.W)return t.W();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function gn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.W||"function"!=typeof t.W){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function mn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof mn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function bn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];wn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)wn(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function wn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}_(ln,Re),ln.prototype[Be]=!0,ln.prototype.addEventListener=function(t,e,n,r){$e(this,t,e,n,r)},ln.prototype.removeEventListener=function(t,e,n,r){tn(this,t,e,n,r)},ln.prototype.dispatchEvent=function(t){var e;if(n=this.gb)for(e=[];n;n=n.gb)e.push(n);var n=this.ac,r=t.type||t;if("string"==typeof t?t=new Ue(t,n):t instanceof Ue?t.target=t.target||n:(a=t,ft(t=new Ue(r,n),a)),a=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.b=e[i],a=pn(o,r,!0,t)&&a;if(a=pn(o=t.b=n,r,!0,t)&&a,a=pn(o,r,!1,t)&&a,e)for(i=0;i<e.length;i++)a=pn(o=t.b=e[i],r,!1,t)&&a;return a},ln.prototype.Da=function(){if(ln.ab.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)He(n[r]);delete e.a[t],e.b--}}this.gb=null},(t=mn.prototype).W=function(){bn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return bn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return wn(this.b,t)?this.b[t]:e},t.set=function(t,e){wn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var _n=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Tn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Tn?(this.i=void 0!==e?e:t.i,En(this,t.c),this.l=t.l,this.a=t.a,In(this,t.g),this.f=t.f,Sn(this,Kn(t.b)),this.h=t.h):t&&(n=String(t).match(_n))?(this.i=!!e,En(this,n[1]||"",!0),this.l=On(n[2]||""),this.a=On(n[3]||"",!0),In(this,n[4]),this.f=On(n[5]||"",!0),Sn(this,n[6]||"",!0),this.h=On(n[7]||"")):(this.i=!!e,this.b=new Fn(null,this.i))}function En(t,e,n){t.c=n?On(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function In(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Sn(t,e,n){var r,i;e instanceof Fn?(t.b=e,r=t.b,(i=t.i)&&!r.f&&(Un(r),r.c=null,r.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(qn(this,e),zn(this,n,t))}),r)),r.f=i):(n||(e=Nn(e,Mn)),t.b=new Fn(e,t.i))}function kn(t,e,n){t.b.set(e,n)}function Cn(t,e){return t.b.get(e)}function xn(t){return t instanceof Tn?new Tn(t):new Tn(t,void 0)}function An(t,e,n,r){var i=new Tn(null,void 0);return t&&En(i,t),e&&(i.a=e),n&&In(i,n),r&&(i.f=r),i}function On(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Nn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Pn),t=n?t.replace(/%25([0-9a-fA-F]{2})/g,"%$1"):t):null}function Pn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Tn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Nn(e,Rn,!0),":");var n=this.a;return!n&&"file"!=e||(t.push("//"),(e=this.l)&&t.push(Nn(e,Rn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Nn(n,"/"==n.charAt(0)?Ln:Dn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Nn(n,jn)),t.join("")},Tn.prototype.resolve=function(t){var e=new Tn(this),n=!!t.c;n?En(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)In(e,t.g);else if(n=!!t.f)if("/"!=r.charAt(0)&&(this.a&&!this.f?r="/"+r:-1!=(i=e.f.lastIndexOf("/"))&&(r=e.f.substr(0,i+1)+r)),".."==(i=r)||"."==i)r="";else if(it(i,"./")||it(i,"/.")){r=0==i.lastIndexOf("/",0);for(var i=i.split("/"),o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i;return n?e.f=r:n=""!==t.b.toString(),n?Sn(e,Kn(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Rn=/[#\/\?@]/g,Dn=/[#\?:]/g,Ln=/[#\?]/g,Mn=/[#\?@]/g,jn=/#/g;function Fn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Un(t){t.a||(t.a=new mn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Vn(t){var e=gn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Fn(null,void 0);t=yn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?zn(n,i,o):n.add(i,o)}return n}function qn(t,e){Un(t),e=Hn(t,e),wn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,wn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&bn(t)))}function Bn(t,e){return Un(t),e=Hn(t,e),wn(t.a.b,e)}function zn(t,e,n){qn(t,e),0<n.length&&(t.c=null,t.a.set(Hn(t,e),Q(n)),t.b+=n.length)}function Kn(t){var e=new Fn;return e.c=t.c,t.a&&(e.a=new mn(t.a),e.b=t.b),e}function Hn(t,e){return e=String(e),t.f?e.toLowerCase():e}function Wn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),t(e,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(a=n[i])&&(r.push(o),Xn(i,r),r.push(":"),t(e,a,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Xn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Gn,t,e),e.join("")}function Gn(){}(t=Fn.prototype).add=function(t,e){Un(this),this.c=null,t=Hn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Un(this),this.a.forEach((function(n,r){V(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Un(this);for(var t=this.a.W(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.W=function(t){Un(this);var e=[];if("string"==typeof t)Bn(this,t)&&(e=G(e,this.a.get(Hn(this,t))));else{t=this.a.W();for(var n=0;n<t.length;n++)e=G(e,t[n])}return e},t.set=function(t,e){return Un(this),this.c=null,Bn(this,t=Hn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.W(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),o=(r=this.W(r),0);o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}return this.c=t.join("&")};var Qn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Yn=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Xn(t,e){e.push('"',t.replace(Yn,(function(t){var e=Qn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Qn[t]=e),e})),'"')}function $n(){var t=vr();return zt&&Zt&&11==Zt||/Edge\/\d+/.test(t)}function Jn(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function Zn(t,e){e=e||a.window;var n="about:blank";t&&(n=Ct(Nt(t)||Dt)),e.location.href=n}function tr(t){return!!((t=(t||vr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function er(t){t=t||a.window;try{t.close()}catch(t){}}function nr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=vr().toLowerCase(),r&&(e.target=r,it(n,"crios/")&&(e.target="_blank")),fr(vr())==hr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof kt?n:Nt(void 0!==n.href?n.href:String(n))||Dt,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((st("iPhone")&&!st("iPod")&&!st("iPad")||st("iPad")||st("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(pt(a=ae(document,"A"),"HTMLAnchorElement"),e=e instanceof kt?e:Pt(e),a.href=Ct(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=jt("",r,n,a),t=Ct(e),a&&(Ht&&it(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ut(t)+'">',t=new Lt(t=(r=bt())?r.createHTML(t):t,0,Mt),r=a.document)&&(r.write((o=t)instanceof Lt&&o.constructor===Lt?o.a:(R("expected object of type SafeHtml, got '"+o+"' of type "+h(o)),"type_error:SafeHtml")),r.close())):(a=jt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var rr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ir=/^[^@]+@[^@]+$/;function or(){var t=null;return new fe((function(e){"complete"==a.document.readyState?e():(t=function(){e()},Ze(window,"load",t))})).o((function(e){throw tn(window,"load",t),e}))}function ar(t){return t=t||vr(),!("file:"!==wr()&&"ionic:"!==wr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function sr(){var t=a.window;try{return t&&t!=t.top}catch(t){return}}function ur(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function cr(){return Ta.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Ta.INTERNAL.hasOwnProperty("node")?"Node":ur()?"Worker":"Browser"}function lr(){var t=cr();return"ReactNative"===t||"Node"===t}var hr="Firefox";function fr(t){var e=t.toLowerCase();return it(e,"opera/")||it(e,"opr/")||it(e,"opios/")?"Opera":it(e,"iemobile")?"IEMobile":it(e,"msie")||it(e,"trident/")?"IE":it(e,"edge/")?"Edge":it(e,"firefox/")?hr:it(e,"silk/")?"Silk":it(e,"blackberry")?"Blackberry":it(e,"webos")?"Webos":!it(e,"safari/")||it(e,"chrome/")||it(e,"crios/")||it(e,"android")?!it(e,"chrome/")&&!it(e,"crios/")||it(e,"edge/")?it(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":"Chrome":"Safari"}var pr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function dr(t,e){e=e||[];var n,r=[],i={};for(n in pr)i[pr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=cr())?r=fr(i=vr()):"Worker"===r&&(r=fr(i=vr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function vr(){return a.navigator&&a.navigator.userAgent||""}function yr(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length?void 0:e}function gr(){try{var t=a.localStorage,e=Sr();if(t)return t.setItem(e,"1"),t.removeItem(e),!$n()||!!a.indexedDB}catch(t){return ur()&&!!a.indexedDB}return!1}function mr(){return(br()||"chrome-extension:"===wr()||ar())&&!lr()&&gr()&&!ur()}function br(){return"http:"===wr()||"https:"===wr()}function wr(){return a.location&&a.location.protocol||null}function _r(t){return!tr(t=t||vr())&&fr(t)!=hr}function Tr(t){return void 0===t?null:Wn(t)}function Er(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Ir(t){if(null!==t)return JSON.parse(t)}function Sr(t){return t||Math.floor(1e9*Math.random()).toString()}function kr(t){return"Safari"!=fr(t=t||vr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Cr(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function xr(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=vr(),e=cr(),this.b=tr(t)||"ReactNative"===e}function Ar(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Or(){var t=a.document,e=null;return Ar()||!t?be():new fe((function(n){e=function(){Ar()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}function Nr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Pr(){return yr("fireauth.oauthhelper",a)||yr("fireauth.iframe",a)}xr.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!br()&&"chrome-extension:"!==wr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Rr,Dr={};function Lr(t){Dr[t]||(Dr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Mr={};Object.defineProperty(Mr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Mr,"abcd",{configurable:!0,enumerable:!0,value:2}),Rr=2==Mr.abcd}catch(t){Rr=!1}function jr(t,e,n){Rr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Fr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&jr(t,n,e[n])}function Ur(t){var e={};return Fr(e,t),e}function Vr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)jr(e,n,Vr(t[n]));return e}function qr(t){var e=t&&(t[Wr]?"phone":null);if(!(e&&t&&t[Hr]))throw new E("internal-error","Internal assert: invalid MultiFactorInfo object");jr(this,"uid",t[Hr]),jr(this,"displayName",t[zr]||null);var n=null;jr(this,"enrollmentTime",n=t[Kr]?new Date(t[Kr]).toUTCString():n),jr(this,"factorId",e)}function Br(t){try{var e=new Gr(t)}catch(t){e=null}return e}qr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var zr="displayName",Kr="enrolledAt",Hr="mfaEnrollmentId",Wr="phoneInfo";function Gr(t){qr.call(this,t),jr(this,"phoneNumber",t[Wr])}function Qr(t){var e={},n=t[Jr],r=t[ti],i=t[ei];if(t=Br(t[Zr]),!i||i!=Xr&&i!=$r&&!n||i==$r&&!r||i==Yr&&!t)throw Error("Invalid checkActionCode response!");i==$r?(e[ri]=n||null,e[oi]=n||null,e[ni]=r):(e[ri]=r||null,e[oi]=r||null,e[ni]=n||null),e[ii]=t||null,jr(this,si,i),jr(this,ai,Vr(e))}_(Gr,qr),Gr.prototype.w=function(){var t=Gr.ab.w.call(this);return t.phoneNumber=this.phoneNumber,t};var Yr="REVERT_SECOND_FACTOR_ADDITION",Xr="EMAIL_SIGNIN",$r="VERIFY_AND_CHANGE_EMAIL",Jr="email",Zr="mfaInfo",ti="newEmail",ei="requestType",ni="email",ri="fromEmail",ii="multiFactorInfo",oi="previousEmail",ai="data",si="operation";function ui(t){var e=Cn(t=xn(t),ci)||null,n=Cn(t,li)||null,r=(r=Cn(t,pi)||null)&&vi[r]||null;if(!e||!n||!r)throw new E("argument-error",ci+", "+li+"and "+pi+" are required in a valid action code URL.");Fr(this,{apiKey:e,operation:r,code:n,continueUrl:Cn(t,hi)||null,languageCode:Cn(t,fi)||null,tenantId:Cn(t,di)||null})}var ci="apiKey",li="oobCode",hi="continueUrl",fi="languageCode",pi="mode",di="tenantId",vi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Yr,signIn:Xr,verifyAndChangeEmail:$r,verifyEmail:"VERIFY_EMAIL"};function yi(t){try{return new ui(t)}catch(t){return null}}function gi(t){if(void 0===(e=t[Ti]))throw new E("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new E("invalid-continue-uri");if(this.h=e,this.b=this.a=null,this.g=!1,(r=t[mi])&&"object"==typeof r){var e=r[Si],n=r[Ei],r=r[Ii];if("string"==typeof e&&e.length){if(this.a=e,void 0!==n&&"boolean"!=typeof n)throw new E("argument-error",Ei+" property must be a boolean when specified.");if(this.g=!!n,void 0!==r&&("string"!=typeof r||"string"==typeof r&&!r.length))throw new E("argument-error",Ii+" property must be a non empty string when specified.");this.b=r||null}else{if(void 0!==e)throw new E("argument-error",Si+" property must be a non empty string when specified.");if(void 0!==n||void 0!==r)throw new E("missing-android-pkg-name")}}else if(void 0!==r)throw new E("argument-error",mi+" property must be a non null object when specified.");if(this.f=null,(e=t[_i])&&"object"==typeof e){if("string"==typeof(e=e[ki])&&e.length)this.f=e;else if(void 0!==e)throw new E("argument-error",ki+" property must be a non empty string when specified.")}else if(void 0!==e)throw new E("argument-error",_i+" property must be a non null object when specified.");if(void 0!==(e=t[wi])&&"boolean"!=typeof e)throw new E("argument-error",wi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[bi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new E("argument-error",bi+" property must be a non empty string when specified.");this.i=t||null}var mi="android",bi="dynamicLinkDomain",wi="handleCodeInApp",_i="iOS",Ti="url",Ei="installApp",Ii="minimumVersion",Si="packageName",ki="bundleId";function Ci(t){var e,n={};for(e in n.continueUrl=t.h,n.canHandleCodeInApp=t.c,(n.androidPackageName=t.a)&&(n.androidMinimumVersion=t.b,n.androidInstallApp=t.g),n.iOSBundleId=t.f,n.dynamicLinkDomain=t.i,n)null===n[e]&&delete n[e];return n}var xi=null;function Ai(t){var e=Ni(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Oi(t){try{return new Ai(t)}catch(t){return null}}function Ni(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=function(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=xi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!xi){xi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===xi[o]&&(xi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e.push(t)})),e}(t);for(t=[],n=e=0;e<r.length;){var i,o,a,s=r[e++];s<128?t[n++]=String.fromCharCode(s):191<s&&s<224?(i=r[e++],t[n++]=String.fromCharCode((31&s)<<6|63&i)):239<s&&s<365?(a=((7&s)<<18|(63&(i=r[e++]))<<12|(63&(o=r[e++]))<<6|63&r[e++])-65536,t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))):(i=r[e++],o=r[e++],t[n++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&o))}return JSON.parse(t.join(""))}catch(t){}return null}Ai.prototype.T=function(){return this.f},Ai.prototype.l=function(){return this.c},Ai.prototype.toString=function(){return this.h};var Pi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Ri=["client_id","response_type","scope","redirect_uri","state"],Di={nd:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Xa:Ri},pd:{Ja:null,ua:500,ta:750,fa:"github.com",Xa:Ri},qd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Xa:Ri},wd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Xa:Pi},kd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Xa:[]}};function Li(t){for(var e in Di)if(Di[e].fa==t)return Di[e];return null}function Mi(t){var e={};e["facebook.com"]=qi,e["google.com"]=zi,e["github.com"]=Bi,e["twitter.com"]=Ki;var n=t&&t[Fi];try{if(n)return new(e[n]||Vi)(t);if(void 0!==t[ji])return new Ui(t)}catch(t){}return null}var ji="idToken",Fi="providerId";function Ui(t){var e,n=t[Fi];if(n||!t[ji]||(e=Oi(t[ji]))&&e.b&&(n=e.b),!n)throw Error("Invalid additional user info!");e=!1,void 0!==t.isNewUser?e=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(e=!0),jr(this,"providerId",n="anonymous"==n||"custom"==n?null:n),jr(this,"isNewUser",e)}function Vi(t){Ui.call(this,t),jr(this,"profile",Vr((t=Ir(t.rawUserInfo||"{}"))||{}))}function qi(t){if(Vi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Bi(t){if(Vi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");jr(this,"username",this.profile&&this.profile.login||null)}function zi(t){if(Vi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ki(t){if(Vi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");jr(this,"username",t.screenName||null)}function Hi(t){var e=Cn(r=xn(t),"link"),n=Cn(xn(e),"link"),r=Cn(r,"deep_link_id");return Cn(xn(r),"link")||r||n||e||t}function Wi(t,e){if(!t&&!e)throw new E("internal-error","Internal assert: no raw session string available");if(t&&e)throw new E("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Gi:Qi}_(Vi,Ui),_(qi,Vi),_(Bi,Vi),_(zi,Vi),_(Ki,Vi);var Gi="enroll",Qi="signin";function Yi(){}function Xi(t,e){return t.then((function(t){if(t[Ua]){var n=Oi(t[Ua]);if(!n||e!=n.i)throw new E("user-mismatch");return t}throw new E("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==k+"user-not-found"?new E("user-mismatch"):t}))}function $i(t,e){if(!e)throw new E("internal-error","failed to construct a credential");this.a=e,jr(this,"providerId",t),jr(this,"signInMethod",t)}function Ji(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Zi(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new $i(t.providerId,t.pendingToken)}catch(t){}return null}function to(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&jr(this,"idToken",e.idToken),e.accessToken&&jr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&jr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new E("internal-error","failed to construct a credential");jr(this,"accessToken",e.oauthToken),jr(this,"secret",e.oauthTokenSecret)}jr(this,"providerId",t),jr(this,"signInMethod",n)}function eo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Vn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function no(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new to(t.providerId,e,t.signInMethod)}catch(t){}}return null}function ro(t,e){this.Qc=e||[],Fr(this,{providerId:t,isOAuthProvider:!0}),this.Ib={},this.pb=(Li(t)||{}).Ja||null,this.ob=null}function io(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new E("argument-error",'SAML provider IDs must be prefixed with "saml."');ro.call(this,t,[])}function oo(t){ro.call(this,t,Ri),this.a=[]}function ao(){oo.call(this,"facebook.com")}function so(t){if(!t)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new ao).credential({accessToken:e})}function uo(){oo.call(this,"github.com")}function co(t){if(!t)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new uo).credential({accessToken:e})}function lo(){oo.call(this,"google.com"),this.Ca("profile")}function ho(t,e){var n=t;return d(t)&&(n=t.idToken,e=t.accessToken),(new lo).credential({idToken:n,accessToken:e})}function fo(){ro.call(this,"twitter.com",Pi)}function po(t,e){var n=t;if(!(n=d(n)?n:{oauthToken:t,oauthTokenSecret:e}).oauthToken||!n.oauthTokenSecret)throw new E("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new to("twitter.com",n,"twitter.com")}function vo(t,e,n){this.a=t,this.f=e,jr(this,"providerId","password"),jr(this,"signInMethod",n===go.EMAIL_LINK_SIGN_IN_METHOD?go.EMAIL_LINK_SIGN_IN_METHOD:go.EMAIL_PASSWORD_SIGN_IN_METHOD)}function yo(t){return t&&t.email&&t.password?new vo(t.email,t.password,t.signInMethod):null}function go(){Fr(this,{providerId:"password",isOAuthProvider:!1})}function mo(t,e){if(!(e=bo(e)))throw new E("argument-error","Invalid email link!");return new vo(t,e.code,go.EMAIL_LINK_SIGN_IN_METHOD)}function bo(t){return(t=yi(t=Hi(t)))&&t.operation===Xr?t:null}function wo(t){if(!(t.eb&&t.cb||t.La&&t.ea))throw new E("internal-error");this.a=t,jr(this,"providerId","phone"),this.fa="phone",jr(this,"signInMethod","phone")}function _o(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return V(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new wo(e)}return null}function To(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.eb,code:t.a.cb}}function Eo(t){try{this.a=t||Ta.auth()}catch(t){throw new E("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Fr(this,{providerId:"phone",isOAuthProvider:!1})}function Io(t,e){if(!t)throw new E("missing-verification-id");if(!e)throw new E("missing-verification-code");return new wo({eb:t,cb:e})}function So(t){if(t.temporaryProof&&t.phoneNumber)return new wo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return ho(o,n);case"facebook.com":return so(n);case"github.com":return co(n);case"twitter.com":return po(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new $i(e,a):new to(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new oo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function ko(t){if(!t.isOAuthProvider)throw new E("invalid-oauth-provider")}function Co(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new E("invalid-auth-event");if(this.g&&this.a)throw new E("invalid-auth-event");if(this.g&&!this.f)throw new E("invalid-auth-event")}function xo(t){return(t=t||{}).type?new Co(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&I(t.error),t.postBody,t.tenantId):null}function Ao(){this.b=null,this.a=[]}Wi.prototype.Ha=function(){return this.a?be(this.a):be(this.b)},Wi.prototype.w=function(){return this.type==Gi?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Yi.prototype.ka=function(){},Yi.prototype.b=function(){},Yi.prototype.c=function(){},Yi.prototype.w=function(){},$i.prototype.ka=function(t){return as(t,Ji(this))},$i.prototype.b=function(t,e){var n=Ji(this);return n.idToken=e,ss(t,n)},$i.prototype.c=function(t,e){return Xi(us(t,Ji(this)),e)},$i.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},to.prototype.ka=function(t){return as(t,eo(this))},to.prototype.b=function(t,e){var n=eo(this);return n.idToken=e,ss(t,n)},to.prototype.c=function(t,e){return Xi(us(t,eo(this)),e)},to.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},ro.prototype.Ka=function(t){return this.Ib=lt(t),this},_(io,ro),_(oo,ro),oo.prototype.Ca=function(t){return K(this.a,t)||this.a.push(t),this},oo.prototype.Qb=function(){return Q(this.a)},oo.prototype.credential=function(t,e){if(!(e=d(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!e.accessToken)throw new E("argument-error","credential failed: must provide the ID token and/or the access token.");return new to(this.providerId,e,this.providerId)},_(ao,oo),jr(ao,"PROVIDER_ID","facebook.com"),jr(ao,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),_(uo,oo),jr(uo,"PROVIDER_ID","github.com"),jr(uo,"GITHUB_SIGN_IN_METHOD","github.com"),_(lo,oo),jr(lo,"PROVIDER_ID","google.com"),jr(lo,"GOOGLE_SIGN_IN_METHOD","google.com"),_(fo,ro),jr(fo,"PROVIDER_ID","twitter.com"),jr(fo,"TWITTER_SIGN_IN_METHOD","twitter.com"),vo.prototype.ka=function(t){return this.signInMethod==go.EMAIL_LINK_SIGN_IN_METHOD?zs(t,ys,{email:this.a,oobCode:this.f}):zs(t,Fs,{email:this.a,password:this.f})},vo.prototype.b=function(t,e){return this.signInMethod==go.EMAIL_LINK_SIGN_IN_METHOD?zs(t,gs,{idToken:e,email:this.a,oobCode:this.f}):zs(t,Os,{idToken:e,email:this.a,password:this.f})},vo.prototype.c=function(t,e){return Xi(this.ka(t),e)},vo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Fr(go,{PROVIDER_ID:"password"}),Fr(go,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Fr(go,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),wo.prototype.ka=function(t){return t.fb(To(this))},wo.prototype.b=function(t,e){var n=To(this);return n.idToken=e,zs(t,Vs,n)},wo.prototype.c=function(t,e){var n=To(this);return n.operation="REAUTH",Xi(t=zs(t,qs,n),e)},wo.prototype.w=function(){var t={providerId:"phone"};return this.a.eb&&(t.verificationId=this.a.eb),this.a.cb&&(t.verificationCode=this.a.cb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Eo.prototype.fb=function(t,e){var n=this.a.a;return be(e.verify()).then((function(r){if("string"!=typeof r)throw new E("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"!==e.type)throw new E("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.');var i=d(t)?t.session:null,o=d(t)?t.phoneNumber:t;return(i=i&&i.type==Gi?i.Ha().then((function(t){return zs(n,Ps,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}}).then((function(t){return t.phoneSessionInfo.sessionInfo}))})):i&&i.type==Qi?i.Ha().then((function(e){return e={mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}},zs(n,Rs,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))})):zs(n,xs,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}))}))},Fr(Eo,{PROVIDER_ID:"phone"}),Fr(Eo,{PHONE_SIGN_IN_METHOD:"phone"}),Co.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Co.prototype.T=function(){return this.h},Co.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Oo,No=null;function Po(t){var e="unauthorized-domain",n=void 0,r=xn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Ft("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ft("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",E.call(this,e,n)}function Ro(t,e,n){E.call(this,t,n),(t=e||{}).Jb&&jr(this,"email",t.Jb),t.ea&&jr(this,"phoneNumber",t.ea),t.credential&&jr(this,"credential",t.credential),t.Zb&&jr(this,"tenantId",t.Zb)}function Do(t){if(t.code){var e=t.code||"";0==e.indexOf(k)&&(e=e.substring(k.length));var n={credential:So(t),Zb:t.tenantId};if(t.email)n.Jb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new E(e,t.message||void 0);return new Ro(e,n,t.message)}return null}function Lo(){}function Mo(t){return t.c||(t.c=t.b())}function jo(){}function Fo(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function Uo(){}function Vo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=b(this.qc,this),this.a.onerror=b(this.Sb,this),this.a.onprogress=b(this.rc,this),this.a.ontimeout=b(this.vc,this)}function qo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Bo(t,e,n){this.reset(t,e,n,void 0,void 0)}function zo(t){this.f=t,this.b=this.c=this.a=null}function Ko(t,e){this.name=t,this.value=e}_(Po,E),_(Ro,E),Ro.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&ft(t,e),t},Ro.prototype.toJSON=function(){return this.w()},Lo.prototype.c=null,_(jo,Lo),jo.prototype.a=function(){var t=Fo(this);return t?new ActiveXObject(t):new XMLHttpRequest},jo.prototype.b=function(){var t={};return Fo(this)&&(t[0]=!0,t[1]=!0),t},Oo=new jo,_(Uo,Lo),Uo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Vo;throw Error("Unsupported browser")},Uo.prototype.b=function(){return{}},(t=Vo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,qo(this,4)},t.Sb=function(){this.status=500,this.response=this.responseText="",qo(this,4)},t.vc=function(){this.Sb()},t.rc=function(){this.status=200,qo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Bo.prototype.a=null,Bo.prototype.reset=function(t,e,n,r,i){delete this.a},Ko.prototype.toString=function(){return this.name};var Ho=new Ko("SEVERE",1e3),Wo=new Ko("WARNING",900),Go=new Ko("CONFIG",700),Qo=new Ko("FINE",500);zo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c||(e.a?t(e.a):(R("Root logger has no level set."),null))}(this).value)for(p(e)&&(e=e()),t=new Bo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Yo,Xo={},$o=null;function Jo(t){var e,n,r;return $o||($o=new zo(""),(Xo[""]=$o).c=Go),(e=Xo[t])||(e=new zo(t),r=t.lastIndexOf("."),n=t.substr(r+1),(r=Jo(t.substr(0,r))).b||(r.b={}),(r.b[n]=e).a=r,Xo[t]=e),e}function Zo(t,e){t&&t.log(Qo,e,void 0)}function ta(t){this.f=t}function ea(t){ln.call(this),this.u=t,this.h=void 0,this.readyState=na,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=Jo("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}_(ta,Lo),ta.prototype.a=function(){return new ea(this.f)},ta.prototype.b=(Yo={},function(){return Yo}),_(ea,ln);var na=0;function ra(t){t.c.read().then(t.pc.bind(t)).catch(t.Ua.bind(t))}function ia(t){t.readyState=4,t.g=null,t.c=null,t.m=null,oa(t)}function oa(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function aa(t){ln.call(this),this.headers=new mn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.R=this.l="",this.f=this.O=this.i=this.J=!1,this.g=0,this.s=null,this.m=sa,this.u=this.S=!1}(t=ea.prototype).open=function(t,e){if(this.readyState!=na)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,oa(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Ua.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ia(this)),this.readyState=na},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,oa(this)),this.a&&(this.readyState=3,oa(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Ua.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ra(this)):t.text().then(this.tc.bind(this),this.Ua.bind(this)))))},t.pc=function(t){var e;this.a&&((e=this.m.decode(t.value||new Uint8Array(0),{stream:!t.done}))&&(this.response=this.responseText+=e),(t.done?ia:oa)(this),3==this.readyState&&ra(this))},t.tc=function(t){this.a&&(this.response=this.responseText=t,ia(this))},t.sc=function(t){this.a&&(this.response=t,ia(this))},t.Ua=function(t){var e=this.i;e&&e.log(Wo,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ia(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(Wo,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b)return(t=this.i)&&t.log(Wo,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),"";for(var t=[],e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ea.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),_(aa,ln);var sa="";aa.prototype.b=Jo("goog.net.XhrIo");var ua=/^https?$/i,ca=["POST","PUT"];function la(t){return"content-type"==t.toLowerCase()}function ha(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,fa(t),da(t)}function fa(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function pa(t){if(t.c&&void 0!==o)if(t.C[1]&&4==ya(t)&&2==ga(t))Zo(t.b,ma(t,"Local request error detected and ignored"));else if(t.i&&4==ya(t))dn(t.Vb,0,t);else if(t.dispatchEvent("readystatechange"),4==ya(t)){Zo(t.b,ma(t,"Request complete")),t.c=!1;try{var e,n,r,i,s=ga(t);t:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break t;default:u=!1}if((e=u)||((n=0===s)&&(!(i=String(t.l).match(_n)[1]||null)&&a.self&&a.self.location&&(i=(r=a.self.location.protocol).substr(0,r.length-1)),n=!ua.test(i?i.toLowerCase():"")),e=n),e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<ya(t)?t.a.statusText:""}catch(e){Zo(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+ga(t)+"]",fa(t)}}finally{da(t)}}}function da(t,e){if(t.a){va(t);var n=t.a,r=t.C[0]?l:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(Ho,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function va(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(a.clearTimeout(t.s),t.s=null)}function ya(t){return t.a?t.a.readyState:0}function ga(t){try{return 2<ya(t)?t.a.status:-1}catch(t){return-1}}function ma(t,e){return e+" ["+t.R+" "+t.l+" "+ga(t)+"]"}function ba(t){var e=Na;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function wa(t,e,n){t.a=!0,t.c=n,t.f=!e,Sa(t)}function _a(t){if(t.a){if(!t.v)throw new ka;t.v=!1}}function Ea(t,e,n,r){t.g.push([e,n,r]),t.a&&Sa(t)}function Ia(t){return z(t.g,(function(t){return p(t[1])}))}function Sa(t){var e;t.h&&t.a&&Ia(t)&&(n=t.h,(e=Aa[n])&&(a.clearTimeout(e.a),delete Aa[n]),t.h=0),t.b&&(t.b.l--,delete t.b);for(var n=t.c,r=e=!1;t.g.length&&!t.i;){var i=(s=t.g.shift())[0],o=s[1],s=s[2];if(i=t.f?o:i)try{var u=i.call(s||t.s,n);void 0!==u&&(t.f=t.f&&(u==n||u instanceof Error),t.c=n=u),(O(n)||"function"==typeof a.Promise&&n instanceof a.Promise)&&(r=!0,t.i=!0)}catch(r){n=r,t.f=!0,Ia(t)||(e=!0)}}t.c=n,r&&(u=b(t.m,t,!0),r=b(t.m,t,!1),n instanceof ba?(Ea(n,u,r),n.C=!0):n.then(u,r)),e&&(n=new xa(n),Aa[n.a]=n,t.h=n.a)}function ka(){N.call(this)}function Ca(){N.call(this)}function xa(t){this.a=a.setTimeout(b(this.c,this),0),this.b=t}(t=aa.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Zo(this.b,ma(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(Zo(this.b,ma(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),da(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),da(this,!0)),aa.ab.Da.call(this)},t.Vb=function(){this.xa||(this.O||this.i||this.f?pa(this):this.Jc())},t.Jc=function(){pa(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case sa:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Ho,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return Zo(this.b,"Can not get response: "+t.message),null}},ba.prototype.cancel=function(t){var e;this.a?this.c instanceof ba&&this.c.cancel():(this.b&&(e=this.b,delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())),this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Ca,_a(this),wa(this,!1,t)))},ba.prototype.m=function(t,e){this.i=!1,wa(this,t,e)},ba.prototype.then=function(t,e,n){var r,i,o=new fe((function(t,e){r=t,i=e}));return Ea(this,r,(function(t){t instanceof Ca?o.cancel():i(t)})),o.then(t,e,n)},ba.prototype.$goog_Thenable=!0,_(ka,N),ka.prototype.message="Deferred has already fired",ka.prototype.name="AlreadyCalledError",_(Ca,N),Ca.prototype.message="Deferred was canceled",Ca.prototype.name="CanceledError",xa.prototype.c=function(){throw delete Aa[this.a],this.b};var Aa={};function Oa(t){var e=document,n=_t(t).toString(),r=ae(document,"SCRIPT"),i={Wb:r,Ma:void 0},o=new ba(i),s=window.setTimeout((function(){Pa(r,!0);var t=new La(Da,"Timeout reached for loading script "+n);_a(o),wa(o,!1,t)}),5e3);return i.Ma=s,r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(Pa(r,!1,s),_a(o),wa(o,!0,null))},r.onerror=function(){Pa(r,!0,s);var t=new La(Ra,"Error while loading script "+n);_a(o),wa(o,!1,t)},ft(i={},{type:"text/javascript",charset:"UTF-8"}),ne(r,i),i=t,pt(t=r,"HTMLScriptElement"),t.src=_t(i),(i=(i=t.ownerDocument&&t.ownerDocument.defaultView)&&i!=a?c(i.document):u=null===u?c(a.document):u)&&t.setAttribute("nonce",i),((e=((i=e)||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:i.documentElement).appendChild(r),o}function Na(){var t;this&&this.Wb&&(t=this.Wb)&&"SCRIPT"==t.tagName&&Pa(t,!0,this.Ma)}function Pa(t,e,n){null!=n&&a.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Ra=0,Da=1;function La(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),N.call(this,n),this.code=t}function Ma(t){this.f=t}function ja(t,e,n){if(this.c=t,this.l=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Va,this.g=lt(t.secureTokenHeaders||qa),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||Ba,this.a=lt(t.firebaseHeaders||za),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==cr(),!(n=a.XMLHttpRequest||n&&Ta.INTERNAL.node&&Ta.INTERNAL.node.XMLHttpRequest)&&!ur())throw new E("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,ur()?this.f=new ta(self):lr()?this.f=new Ma(n):this.f=new Uo,this.b=null}_(La,N),_(Ma,Lo),Ma.prototype.a=function(){return new this.f},Ma.prototype.b=function(){return{}};var Fa,Ua="idToken",Va=new xr(3e4,6e4),qa={"Content-Type":"application/x-www-form-urlencoded"},Ba=new xr(3e4,6e4),za={"Content-Type":"application/json"};function Ka(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Ha(t,e){e&&(t.l=Wa("https://securetoken.googleapis.com/v1/token",e),t.h=Wa("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=Wa("https://identitytoolkit.googleapis.com/v2/",e))}function Wa(t,e){return t=xn(t),e=xn(e.url),t.f=t.a+t.f,En(t,e.c),t.a=e.a,In(t,e.g),t.toString()}function Ga(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Qa(t,e,n,r,i,o,s){var u;(t=((u="Chrome"==fr(u=vr())&&(u=u.match(/\sChrome\/(\d+)/i))&&2==u.length?parseInt(u[1],10):null)&&u<30||zt&&Zt&&!(9<Zt))&&!ur()?(Fa=Fa||new fe((function(t,e){var n,r;n=t,r=e,((window.gapi||{}).client||{}).request?n():(a[Xa]=function(){((window.gapi||{}).client||{}).request?n():r(Error("CORS_UNSUPPORTED"))},function(t,e){Ea(t,null,(function(){r(Error("CORS_UNSUPPORTED"))}),void 0)}(Oa(Tt(Ya,{onload:Xa}))))})),b(t.s,t)):b(t.u,t))(e,n,r,i,o,s)}ja.prototype.T=function(){return this.b},ja.prototype.u=function(t,e,n,r,i,o){if(ur()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new E("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s,u=new aa(this.f);o&&(u.g=Math.max(0,o),s=setTimeout((function(){u.dispatchEvent("timeout")}),o)),hn(u,"complete",(function(){s&&clearTimeout(s);var n=null;try{n=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return Zo(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){n=null}e&&e(n)})),fn(u,"ready",(function(){s&&clearTimeout(s),De(this)})),fn(u,"timeout",(function(){s&&clearTimeout(s),De(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.R=n,t.J=!1,t.c=!0,t.a=(t.D||Oo).a(),t.C=t.D?Mo(t.D):Mo(Oo),t.a.onreadystatechange=b(t.Vb,t);try{Zo(t.b,ma(t,"Opening Xhr")),t.O=!0,t.a.open(n,String(e),!0),t.O=!1}catch(e){return Zo(t.b,ma(t,"Error opening Xhr: "+e.message)),void ha(t,e)}e=r||"";var o,s=new mn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)V(t,e,void 0);else for(var n=gn(t),r=yn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){s.set(e,t)})),i=function(t){t:{for(var e=la,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(s.Y()),r=a.FormData&&e instanceof a.FormData,!K(ca,n)||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{va(t),0<t.g&&(t.u=(o=t.a,zt&&Jt(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),Zo(t.b,ma(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=b(t.Ma,t)):t.s=dn(t.Ma,t.g,t)),Zo(t.b,ma(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){Zo(t.b,ma(t,"Send error: "+e.message)),ha(t,e)}}(u,t,n,r,i)};var Ya=new dt(mt,"https://apis.google.com/js/client.js?onload=%{onload}"),Xa="__fcb"+Math.floor(1e6*Math.random()).toString();function $a(t){if("string"!=typeof(t=t.email)||!ir.test(t))throw new E("invalid-email")}function Ja(t){"email"in t&&$a(t)}function Za(t){if(!t[Ua]){if(t.mfaPendingCredential)throw new E("multi-factor-auth-required",null,lt(t));throw new E("internal-error")}}function ts(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new E("internal-error")}else{if(!t.sessionInfo)throw new E("missing-verification-id");if(!t.code)throw new E("missing-verification-code")}}ja.prototype.s=function(t,e,n,r,i){var o=this;Fa.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},ja.prototype.zb=function(){return zs(this,Ns,{})},ja.prototype.Bb=function(t,e){return zs(this,As,{idToken:t,email:e})},ja.prototype.Cb=function(t,e){return zs(this,Os,{idToken:t,password:e})};var es={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ns(t){if(!t.phoneVerificationInfo)throw new E("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new E("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new E("missing-verification-code")}function rs(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new E("internal-error")}function is(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Bn(t=new Fn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function os(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Do(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Do(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Do(t)):t.errorMessage&&(e=Ks(t.errorMessage)),e)throw e;Za(t)}function as(t,e){return e.returnIdpCredential=!0,zs(t,Ds,e)}function ss(t,e){return e.returnIdpCredential=!0,zs(t,Ms,e)}function us(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,zs(t,Ls,e)}function cs(t){if(!t.oobCode)throw new E("invalid-action-code")}(t=ja.prototype).Db=function(t,e){var n={idToken:t},r=[];return ut(es,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),zs(this,As,n)},t.vb=function(t,e){return ft(t={requestType:"PASSWORD_RESET",email:t},e),zs(this,Is,t)},t.wb=function(t,e){return ft(t={requestType:"EMAIL_SIGNIN",email:t},e),zs(this,_s,t)},t.ub=function(t,e){return ft(t={requestType:"VERIFY_EMAIL",idToken:t},e),zs(this,Ts,t)},t.Eb=function(t,e,n){return ft(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),zs(this,Es,t)},t.fb=function(t){return zs(this,Us,t)},t.nb=function(t,e){return zs(this,Cs,{oobCode:t,newPassword:e})},t.Ra=function(t){return zs(this,hs,{oobCode:t})},t.jb=function(t){return zs(this,ls,{oobCode:t})};var ls={endpoint:"setAccountInfo",A:cs,Z:"email",B:!0},hs={endpoint:"resetPassword",A:cs,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new E("internal-error")},B:!0},fs={endpoint:"signupNewUser",A:function(t){if($a(t),!t.password)throw new E("weak-password")},G:Za,V:!0,B:!0},ps={endpoint:"createAuthUri",B:!0},ds={endpoint:"deleteAccount",N:["idToken"]},vs={endpoint:"setAccountInfo",N:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new E("internal-error")}},ys={endpoint:"emailLinkSignin",N:["email","oobCode"],A:$a,G:Za,V:!0,B:!0},gs={endpoint:"emailLinkSignin",N:["idToken","email","oobCode"],A:$a,G:Za,V:!0},ms={endpoint:"accounts/mfaEnrollment:finalize",N:["idToken","phoneVerificationInfo"],A:ns,G:Za,B:!0,Na:!0},bs={endpoint:"accounts/mfaSignIn:finalize",N:["mfaPendingCredential","phoneVerificationInfo"],A:ns,G:Za,B:!0,Na:!0},ws={endpoint:"getAccountInfo"},_s={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new E("internal-error");$a(t)},Z:"email",B:!0},Ts={endpoint:"getOobConfirmationCode",N:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new E("internal-error")},Z:"email",B:!0},Es={endpoint:"getOobConfirmationCode",N:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new E("internal-error")},Z:"email",B:!0},Is={endpoint:"getOobConfirmationCode",N:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new E("internal-error");$a(t)},Z:"email",B:!0},Ss={lb:!0,endpoint:"getProjectConfig",Ub:"GET"},ks={lb:!0,endpoint:"getRecaptchaParam",Ub:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new E("internal-error")}},Cs={endpoint:"resetPassword",A:cs,Z:"email",B:!0},xs={endpoint:"sendVerificationCode",N:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},As={endpoint:"setAccountInfo",N:["idToken"],A:Ja,V:!0},Os={endpoint:"setAccountInfo",N:["idToken"],A:function(t){if(Ja(t),!t.password)throw new E("weak-password")},G:Za,V:!0},Ns={endpoint:"signupNewUser",G:Za,V:!0,B:!0},Ps={endpoint:"accounts/mfaEnrollment:start",N:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new E("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new E("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new E("internal-error")},B:!0,Na:!0},Rs={endpoint:"accounts/mfaSignIn:start",N:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new E("internal-error")},B:!0,Na:!0},Ds={endpoint:"verifyAssertion",A:rs,Ya:is,G:os,V:!0,B:!0},Ls={endpoint:"verifyAssertion",A:rs,Ya:is,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new E("user-not-found");if(t.errorMessage)throw Ks(t.errorMessage);Za(t)},V:!0,B:!0},Ms={endpoint:"verifyAssertion",A:function(t){if(rs(t),!t.idToken)throw new E("internal-error")},Ya:is,G:os,V:!0},js={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new E("invalid-custom-token")},G:Za,V:!0,B:!0},Fs={endpoint:"verifyPassword",A:function(t){if($a(t),!t.password)throw new E("wrong-password")},G:Za,V:!0,B:!0},Us={endpoint:"verifyPhoneNumber",A:ts,G:Za,B:!0},Vs={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new E("internal-error");ts(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Do(t);Za(t)}},qs={Hb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ts,G:Za,B:!0},Bs={endpoint:"accounts/mfaEnrollment:withdraw",N:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ua]^!!t.refreshToken)throw new E("internal-error")},B:!0,Na:!0};function zs(t,e,n){if(!function(t,e){if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return}return 1}}(n,e.N))return we(new E("internal-error"));var r,i=!!e.Na,o=e.Ub||"POST";return be(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,a){var s=xn(e+n);kn(s,"key",t.c),a&&kn(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&kn(s,c,i[c]);return new fe((function(e,n){Qa(t,s.toString(),(function(t){t?t.error?n(Hs(t,o||{})):e(t):n(new E("network-request-failed"))}),r,u?void 0:Wn(Er(i)),t.a,t.v.get())}))}(t,i?t.i:t.h,e.endpoint,o,n,e.Hb,e.lb||!1)})).then((function(t){return r=t,e.Ya?e.Ya(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new E("internal-error");return r[e.Z]}))}function Ks(t){return Hs({error:{errors:[{message:t}],code:400,message:t}})}function Hs(t,e){var n,r=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(r=i[r]?new E(i[r]):null)return r;for(n in r=t.error&&t.error.message||"",ft(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=r.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,i)if(0===r.indexOf(n))return new E(i[n],e);return new E("internal-error",e=!e&&t?Tr(t):e)}function Ws(t){var e;this.b=t,this.a=null,this.rb=(e=this,(Xs=Xs||new fe((function(t,e){function n(){Cr(),yr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Cr(),e(Error("Network Error"))},timeout:Qs.get()})}var r;yr("gapi.iframes.Iframe")?t():yr("gapi.load")?n():(r="__iframefcb"+Math.floor(1e6*Math.random()).toString(),a[r]=function(){yr("gapi.load")?n():e(Error("Network Error"))},be(Oa(r=Tt(Gs,{onload:r}))).o((function(){e(Error("Network Error"))})))})).o((function(t){throw Xs=null,t}))).then((function(){return new fe((function(t,n){yr("gapi.iframes.getContext")().open({where:document.body,url:e.b,messageHandlersFilter:yr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),t()}e.a=r,e.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),Ys.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))})))}var Gs=new dt(mt,"https://apis.google.com/js/api.js?onload=%{onload}"),Qs=new xr(3e4,6e4),Ys=new xr(5e3,15e3),Xs=null;function $s(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?An((t=xn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):An("https",this.l,null,"/__/auth/iframe"),this.a=t,kn(this.a,"apiKey",this.h),kn(this.a,"appName",this.i),this.b=null,this.c=[]}function Js(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function Zs(t){try{return Ta.app(t).auth().Ga()}catch(t){return[]}}function tu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function eu(t){var e=Jn();return zs(t,Ss,{}).then((function(t){return t.authorizedDomains||[]})).then((function(t){t:{for(var n=(r=xn(e)).c,r=r.a,i=0;i<t.length;i++){var o=t[i],a=r,s=n;if(a=0==o.indexOf("chrome-extension://")?xn(o).a==a&&"chrome-extension"==s:("http"==s||"https"==s)&&(rr.test(o)?a==o:(o=o.split(".").join("\\."),new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)))){t=!0;break t}}t=!1}if(!t)throw new Po(Jn())}))}function nu(t){return t.m||(t.m=or().then((function(){var e,n,r,i;t.u||(e=t.c,n=t.i,r=Zs(t.b),(i=new $s(t.s,t.g,t.b,t.f)).f=e,i.b=n,i.c=Q(r||[]),t.u=i.toString()),t.v=new Ws(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.rb.then((function(){t.a.register("authEvent",e,yr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=xo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",be(n)}return n.status="ERROR",be(n)}))}(t)})),t.m)}function ru(t){return t.l||(t.C=t.c?dr(t.c,Zs(t.b)):null,t.l=new ja(t.g,A(t.i),t.C),t.f&&Ha(t.l,t.f)),t.l}function iu(t,e,n,r,i,o,a,s,u,c,l,h){return(t=new Js(t,e,n,r,i,h)).l=o,t.g=a,t.i=s,t.b=lt(u||null),t.f=c,t.yb(l).toString()}function ou(t){if(this.a=t||Ta.INTERNAL.reactNative&&Ta.INTERNAL.reactNative.AsyncStorage,!this.a)throw new E("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function au(t){this.b=t,this.a={},this.f=b(this.c,this)}$s.prototype.toString=function(){return this.f?kn(this.a,"v",this.f):qn(this.a.b,"v"),this.b?kn(this.a,"eid",this.b):qn(this.a.b,"eid"),this.c.length?kn(this.a,"fw",this.c.join(",")):qn(this.a.b,"fw"),this.a.toString()},Js.prototype.yb=function(t){return this.h=t,this},Js.prototype.toString=function(){var t;if(kn(t=this.v?An((t=xn(this.v.url)).c,t.a,t.g,"/emulator/auth/handler"):An("https",this.u,null,"/__/auth/handler"),"apiKey",this.s),kn(t,"appName",this.c),kn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=Ta.app(this.c).auth().la()}catch(t){n=null}for(r in e.ob=n,kn(t,"providerId",this.a.providerId),e=Er((n=this.a).Ib))e[r]=e[r].toString();for(var r=n.Qc,i=(e=lt(e),0);i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.pb&&n.ob&&!e[n.pb]&&(e[n.pb]=n.ob),ct(e)||kn(t,"customParameters",Tr(e))}if("function"==typeof this.a.Qb&&(n=this.a.Qb()).length&&kn(t,"scopes",n.join(",")),this.l?kn(t,"redirectUrl",this.l):qn(t.b,"redirectUrl"),this.g?kn(t,"eventId",this.g):qn(t.b,"eventId"),this.i?kn(t,"v",this.i):qn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Cn(t,a)&&kn(t,a,this.b[a]);return this.h?kn(t,"tid",this.h):qn(t.b,"tid"),this.f?kn(t,"eid",this.f):qn(t.b,"eid"),(a=Zs(this.c)).length&&kn(t,"fw",a.join(",")),t.toString()},(t=tu.prototype).Ob=function(t,e,n){var r=new E("popup-closed-by-user"),i=new E("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){var n,r;r={type:"webStorageSupport"},nu(n=o).then((function(){return t=n.v,e=r,t.rb.then((function(){return new fe((function(n){t.a.send(e.type,e,n,yr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}));var t,e})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})).then((function(n){n||(t&&er(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return e=t,new fe((function(t){return function n(){vn(2e3).then((function(){return e&&!e.closed?n():void t()}))}()}));var e})).then((function(){if(!a)return vn(n).then((function(){e(r)}))}))},t.Xb=function(){var t=vr();return!_r(t)&&!kr(t)},t.Tb=function(){return!1},t.Mb=function(t,e,n,r,i,o,a,s){if(!t)return we(new E("popup-blocked"));if(a&&!_r())return this.ma().o((function(e){er(t),i(e)})),r(),be();this.a||(this.a=eu(ru(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw er(t),i(e),e}));return r(),e})).then((function(){ko(n),a||Zn(iu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Nb=function(t,e,n,r){this.a||(this.a=eu(ru(this)));var i=this;return this.a.then((function(){ko(e),Zn(iu(i.s,i.g,i.b,t,e,Jn(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return nu(this).then((function(){return t.v.rb})).o((function(){throw t.a=null,new E("network-request-failed")}))},t.$b=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Sa=function(t){W(this.h,(function(e){return e==t}))},(t=ou.prototype).get=function(t){return be(this.a.getItem(t)).then((function(t){return t&&Ir(t)}))},t.set=function(t,e){return be(this.a.setItem(t,Tr(e)))},t.U=function(t){return be(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var su,uu=[];function cu(t,e,n){ct(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function lu(t){this.a=t}function hu(t){this.c=t,this.b=!1,this.a=[]}function fu(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return we(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new fe((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(c),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return pu(t,c),e})).o((function(e){throw pu(t,c),e}))}function pu(t,e){var n,r;e&&(n=e.messageChannel,r=e.onMessage,n&&(n.port1.removeEventListener("message",r),n.port1.close()),W(t.a,(function(t){return t==e})))}function du(){if(!gu())throw new E("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=a.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t,e,n,r=this;ur()&&self?(this.v=(n=ur()?self:null,V(uu,(function(t){t.b==n&&(e=t)})),e||(e=new au(n),uu.push(e)),e),cu(this.v,"keyChanged",(function(t,e){return Tu(r).then((function(t){return 0<t.length&&V(r.a,(function(e){e(t)})),{keyProcessed:K(t,e.key)}}))})),cu(this.v,"ping",(function(){return be(["keyChanged"])}))):((t=a.navigator)&&t.serviceWorker?be().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):be(null)).then((function(t){(r.h=t)&&(r.g=new hu(new lu(t)),fu(r.g,"ping",null,!0).then((function(t){t[0].fulfilled&&K(t[0].value,"keyChanged")&&(r.s=!0)})).o((function(){})))}))}function vu(t){return t.i||(t.i=function t(e){return new fe((function(n,r){var i=e.m.open("firebaseLocalStorageDb",1);i.onerror=function(t){try{t.preventDefault()}catch(t){}r(Error(t.target.error))},i.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){r(t)}},i.onsuccess=function(i){var o;(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(i):(o=e,new fe((function(t,e){var n=o.m.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}})).then((function(){return t(e)})).then((function(t){n(t)})).o((function(t){r(t)})))}}))}(t)),t.i}function yu(t,e){var n=0;return new fe((function r(i,o){vu(t).then(e).then(i).o((function(e){return 3<++n?void o(e):vu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}))}))}))}function gu(){try{return a.indexedDB}catch(t){return}}function mu(t){return t.objectStore("firebaseLocalStorage")}function bu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function wu(t){return new fe((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function _u(t,e){return t.g&&t.h&&((n=a.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?fu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):be();var n}function Tu(t){return vu(t).then((function(t){var e=mu(bu(t,!1));return e.getAll?wu(e.getAll()):new fe((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n&&typeof e[r]==typeof n[r]?"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r}))}function Eu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Iu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=be().then((function(){if(gu()){var t=Sr(),r="__sak"+t;return su=su||new du,(n=su).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){V(e.a,(function(e){e(t)}))})),t}))}function Su(){this.a={},this.type="inMemory"}function ku(){if(!function(){var t="Node"==cr();if(!(t=Cu()||t&&Ta.INTERNAL.node&&Ta.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==cr())throw new E("internal-error","The LocalStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=Cu()||Ta.INTERNAL.node.localStorage,this.type="localStorage"}function Cu(){try{var t=a.localStorage,e=Sr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function xu(){this.type="nullStorage"}function Au(){if(!function(){var t="Node"==cr();if(!(t=Ou()||t&&Ta.INTERNAL.node&&Ta.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==cr())throw new E("internal-error","The SessionStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=Ou()||Ta.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Ou(){try{var t=a.sessionStorage,e=Sr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Nu(){var t={};t.Browser=Du,t.Node=Lu,t.ReactNative=Mu,t.Worker=ju,this.a=t[cr()]}au.prototype.c=function(t){var e,n=t.data.eventType,r=t.data.eventId,i=this.a[n];i&&0<i.length&&(t.ports[0].postMessage({status:"ack",eventId:r,eventType:n,response:null}),e=[],V(i,(function(n){e.push(be().then((function(){return n(t.origin,t.data.data)})))})),Te(e).then((function(e){var i=[];V(e,(function(t){i.push({fulfilled:t.Pb,value:t.value,reason:t.reason?t.reason.message:void 0})})),V(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:r,eventType:n,response:i})})))},lu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},hu.prototype.close=function(){for(;0<this.a.length;)pu(this,this.a[0]);this.b=!0},(t=du.prototype).set=function(t,e){var n=this,r=!1;return yu(this,(function(e){return wu((e=mu(bu(e,!0))).get(t))})).then((function(i){return yu(n,(function(o){if(o=mu(bu(o,!0)),i)return i.value=e,wu(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,wu(o.add(a))}))})).then((function(){return n.c[t]=e,_u(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return yu(this,(function(e){return wu(mu(bu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return yu(this,(function(r){return n=!0,e.b++,wu(mu(bu(r,!0)).delete(t))})).then((function(){return delete e.c[t],_u(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){var e;0==this.a.length&&(Eu(e=this),function t(){e.f=setTimeout((function(){e.l=Tu(e).then((function(t){0<t.length&&V(e.a,(function(e){e(t)}))})).then((function(){t()})).o((function(e){"STOP_EVENT"!=e.message&&t()}))}),800)}()),this.a.push(t)},t.ia=function(t){W(this.a,(function(e){return e==t})),0==this.a.length&&Eu(this)},(t=Iu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){W(this.a,(function(e){return e==t}))},(t=Su.prototype).get=function(t){return be(this.a[t])},t.set=function(t,e){return this.a[t]=e,be()},t.U=function(t){return delete this.a[t],be()},t.ca=function(){},t.ia=function(){},(t=ku.prototype).get=function(t){var e=this;return be().then((function(){return Ir(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return be().then((function(){var r=Tr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return be().then((function(){e.a.removeItem(t)}))},t.ca=function(t){a.window&&$e(a.window,"storage",t)},t.ia=function(t){a.window&&tn(a.window,"storage",t)},(t=xu.prototype).get=function(){return be(null)},t.set=function(){return be()},t.U=function(){return be()},t.ca=function(){},t.ia=function(){},(t=Au.prototype).get=function(t){var e=this;return be().then((function(){return Ir(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return be().then((function(){var r=Tr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return be().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Pu,Ru,Du={F:ku,bb:Au},Lu={F:ku,bb:Au},Mu={F:ou,bb:xu},ju={F:ku,bb:xu},Fu={rd:"local",NONE:"none",td:"session"};function Uu(){var t=!(kr(vr())||!sr()),e=_r(),n=gr();this.m=t,this.h=e,this.l=n,this.a={},t=Pu=Pu||new Nu;try{this.g=!$n()&&Pr()||!a.indexedDB?new t.a.F:new Iu(new(ur()?Su:t.a.F))}catch(t){this.g=new Su,this.h=!0}try{this.i=new t.a.bb}catch(t){this.i=new Su}this.v=new Su,this.f=b(this.Yb,this),this.b={}}function Vu(){return Ru=Ru||new Uu}function qu(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function Bu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function zu(t,e,n){return n=Bu(e,n),"local"==e.F&&(t.b[n]=null),qu(t,e.F).U(n)}function Ku(t){t.c&&(clearInterval(t.c),t.c=null)}function Hu(t){this.a=t,this.b=Vu()}(t=Uu.prototype).get=function(t,e){return qu(this,t.F).get(Bu(t,e))},t.set=function(t,e,n){var r=Bu(t,n),i=this,o=qu(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){var r;t=Bu(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),ct(this.a)&&(qu(this,"local").ca(this.f),this.h||($n()||!Pr())&&a.indexedDB||!this.l||(Ku(r=this),r.c=setInterval((function(){for(var t in r.a){var e=a.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new Ve({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Yb(e))}}),1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Bu(t,e),this.a[t]&&(W(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),ct(this.a)&&(qu(this,"local").ia(this.f),Ku(this))},t.Yb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.mb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?qu(this,"local").ia(this.f):Ku(this),this.m)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.mb(e))},zt&&Zt&&10==Zt&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else V(t,b(this.mb,this))},t.mb=function(t){this.a[t]&&V(this.a[t],(function(t){t()}))};var Wu,Gu={name:"authEvent",F:"local"};function Qu(){this.a=Vu()}function Yu(t,e){this.b=Xu,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===Wu&&(Wu=a.Int32Array?new Int32Array(rc):rc),this.reset()}_(Yu,(function(){this.b=-1}));for(var Xu=64,$u=Xu-1,Ju=[],Zu=0;Zu<$u;Zu++)Ju[Zu]=0;var tc=G(128,Ju);function ec(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|Wu[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function nc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(ec(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(ec(t),i=0)}}t.c=i,t.g+=n}Yu.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):Q(this.h)};var rc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ic(){Yu.call(this,8,oc)}_(ic,Yu);var oc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function ac(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new Qu,this.g=new Hu(this.h),this.f=null,this.b=[],this.a=this.c=null}function sc(t){return new E("invalid-cordova-configuration",t)}function uc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function cc(t){return t.f||(t.f=t.ma().then((function(){return new fe((function(e){function n(t){o=!0,s&&s.cancel(),lc(r).then((function(e){var n,o=i;e&&t&&t.url&&(n=null,o=(n=-1!=(o=Hi(t.url)).indexOf("/__/auth/callback")?(n="object"==typeof(n=Ir(Cn(n=xn(o),"firebaseError")||null))?I(n):null)?new Co(e.c,e.b,null,null,n,null,e.T()):new Co(e.c,e.b,o,e.f,null,null,e.T()):n)||i),uc(r,o)}))}var r,i,o,s,u;t.Ea((function n(r){return e(r),t.Sa(n),!1})),r=t,i=new Co("unknown",null,null,null,new E("no-auth-event")),o=!1,s=vn(500).then((function(){return lc(r).then((function(){o||uc(r,i)}))})),u=a.handleOpenURL,a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(yr("BuildInfo.packageName",a).toLowerCase()+"://")&&n({url:t}),"function"==typeof u)try{u(t)}catch(t){console.error(t)}},No=No||new Ao,function(t){var e=No;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=yr("universalLinks.subscribe",a))&&t(null,e.b))}(n)}))}))),t.f}function lc(t){var e,n=null;return(e=t.g).b.get(Gu,e.a).then(xo).then((function(e){return n=e,zu((e=t.g).b,Gu,e.a)})).then((function(){return n}))}function hc(t){this.a=t,this.b=Vu()}(t=ac.prototype).ma=function(){return this.Ia||(this.Ia=(ar(void 0)?or().then((function(){return new fe((function(t,e){var n=a.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):we(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof yr("universalLinks.subscribe",a))throw sc("cordova-universal-links-plugin-fix is not installed");if(void 0===yr("BuildInfo.packageName",a))throw sc("cordova-plugin-buildinfo is not installed");if("function"!=typeof yr("cordova.plugins.browsertab.openUrl",a))throw sc("cordova-plugin-browsertab is not installed");if("function"!=typeof yr("cordova.InAppBrowser.open",a))throw sc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new E("cordova-not-ready")})))},t.Ob=function(t,e){return e(new E("operation-not-supported-in-this-environment")),be()},t.Mb=function(){return we(new E("operation-not-supported-in-this-environment"))},t.$b=function(){return!1},t.Xb=function(){return!0},t.Tb=function(){return!0},t.Nb=function(t,e,n,r){if(this.c)return we(new E("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,l=null;return this.c=be().then((function(){return ko(e),cc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Co(e,r,null,o,new E("no-auth-event"),null,i),u=yr("BuildInfo.packageName",a);if("string"!=typeof u)throw new E("invalid-cordova-configuration");var c=yr("BuildInfo.displayName",a),l={};if(vr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!vr().toLowerCase().match(/android/))return we(new E("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=function(t){var e=new ic;nc(e,t),t=[];var n=8*e.g;e.c<56?nc(e,tc,56-e.c):nc(e,tc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(ec(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return B(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(o),l.sessionId=o;var h=iu(t.v,t.i,t.l,e,n,null,r,t.m,l,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(Gu,s.w(),e)})).then((function(){var e=yr("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new E("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=yr("cordova.plugins.browsertab.openUrl",a)))throw new E("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=yr("cordova.InAppBrowser.open",a)))throw new E("invalid-cordova-configuration");e=vr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new fe((function(t,e){u=function(){var e=yr("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){s=s||vn(2e3).then((function(){e(new E("redirect-cancelled-by-user"))}))},l=function(){Ar()&&c()},o.addEventListener("resume",c,!1),vr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).o((function(t){return lc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),s&&s.cancel(),u&&i.Sa(u),i.c=null}))},t.Ea=function(t){this.b.push(t),cc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Co("unknown",null,null,null,new E("no-auth-event")),t(e))}))},t.Sa=function(t){W(this.b,(function(e){return e==t}))};var fc={name:"pendingRedirect",F:"session"};function pc(t){return zu(t.b,fc,t.a)}function dc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=b(this.s,this),this.b=new Ac,this.C=new Dc,this.g=new hc(Cc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=vc(this.D,this.v,this.m,S,this.J)}function vc(t,e,n,r,i){var o=Ta.SDK_VERSION||null;return new(ar()?ac:tu)(t,e,n,o,r,i)}function yc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function gc(t){t.a.Xb()&&yc(t).o((function(e){var n=new Co("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));Ec(e)&&t.s(n)})),t.a.Tb()||Oc(t.b)}function mc(t,e){K(t.h,e)||t.h.push(e),t.f||(e=t.g).b.get(fc,e.a).then((function(t){return"pending"==t})).then((function(e){e?pc(t.g).then((function(){yc(t).o((function(e){var n=new Co("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));Ec(e)&&t.s(n)}))})):gc(t)})).o((function(){gc(t)}))}function bc(t,e){W(t.h,(function(t){return t==e}))}dc.prototype.reset=function(){this.f=!1,this.a.Sa(this.l),this.a=vc(this.D,this.v,this.m,null,this.J),this.i={}},dc.prototype.s=function(t){if(!t)throw new E("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Fb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Oc(this.b),e};var wc=new xr(2e3,1e4),_c=new xr(3e4,6e4);function Tc(t,e,n,r,i,o,a){return t.a.Mb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function Ec(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Ic(t,e,n,r,i){var o,a;return(a=t.g).b.set(fc,"pending",a.a).then((function(){return t.a.Nb(e,n,r,i).o((function(e){if(Ec(e))throw new E("operation-not-supported-in-this-environment");return o=e,pc(t.g).then((function(){throw o}))})).then((function(){return t.a.$b()?new fe((function(){})):pc(t.g).then((function(){return t.qa()})).then((function(){})).o((function(){}))}))}))}function Sc(t,e,n,r,i){return t.a.Ob(r,(function(t){e.na(n,null,t,i)}),wc.get())}dc.prototype.qa=function(){return this.b.qa()};var kc={};function Cc(t,e,n){return t=t+":"+e,n?t+":"+n.url:t}function xc(t,e,n,r){var i=Cc(e,n,r);return kc[i]||(kc[i]=new dc(t,e,n,r)),kc[i]}function Ac(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Oc(t){t.g||(t.g=!0,Rc(t,!1,null,null))}function Nc(t){t.g&&!t.i&&Rc(t,!1,null,null)}function Pc(t,e){if(t.b=function(){return be(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Rc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return we(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Pc(t,n):Pc(t,{user:null}),t.f=[],t.c=[]}function Dc(){}function Lc(){this.ib=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.ib},set:function(t){this.ib=t},enumerable:!1})}function Mc(t,e){this.a=e,jr(this,"verificationId",t)}function jc(t,e,n,r){return new Eo(t).fb(e,n).then((function(t){return new Mc(t,r)}))}function Fc(t){var e=Ni(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new E("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Fr(this,{token:t,expirationTime:Nr(1e3*e.exp),authTime:Nr(1e3*e.auth_time),issuedAtTime:Nr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Uc(t,e,n){var r=e&&e[qc];if(!r)throw new E("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=lt(e),this.g=n,this.c=new Wi(null,r),this.b=[];var i=this;V(e[Vc]||[],(function(t){(t=Br(t))&&i.b.push(t)})),jr(this,"auth",this.a),jr(this,"session",this.c),jr(this,"hints",this.b)}Ac.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Ac.prototype.h=function(t,e){var n,r,i,o;t?(this.reset(),this.g=!0,n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code,this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Rc(this,!0,null,t.a),be()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){Rc(t,s,e,null)})).o((function(e){Rc(t,s,null,e)}))}(this,t,e):we(new E("invalid-auth-event")):(Rc(this,!1,null,null),be())):we(new E("invalid-auth-event"))},Ac.prototype.qa=function(){var t=this;return new fe((function(e,n){var r,i;t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),r=t,i=new E("timeout"),r.a&&r.a.cancel(),r.a=vn(_c.get()).then((function(){r.b||(r.g=!0,Rc(r,!0,null,i))})))}))},Dc.prototype.h=function(t,e){var n,r,i,o,a;t?(n=t.c,r=t.b,t.a?(e.na(t.c,null,t.a,t.b),be()):e.Fa(n,r)?(i=e,o=(t=t).b,a=t.c,i.Fa(a,o)(t.g,t.f,t.T(),t.i).then((function(t){i.na(a,t,null,o)})).o((function(t){i.na(a,null,t,o)}))):we(new E("invalid-auth-event"))):we(new E("invalid-auth-event"))},Mc.prototype.confirm=function(t){return t=Io(this.verificationId,t),this.a(t)};var Vc="mfaInfo",qc="mfaPendingCredential";function Bc(t,e,n,r){E.call(this,"multi-factor-auth-required",r,e),this.b=new Uc(t,e,n),jr(this,"resolver",this.b)}function zc(t,e,n){if(t&&d(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Bc(e,t.serverResponse,n,t.message)}catch(t){}return null}function Kc(){}function Hc(t){jr(this,"factorId",t.fa),this.a=t}function Wc(t){if(Hc.call(this,t),this.a.fa!=Eo.PROVIDER_ID)throw new E("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Gc(t,e){for(var n in Ue.call(this,t),e)this[n]=e[n]}function Qc(t,e){this.a=t,this.b=[],this.c=b(this.yc,this),$e(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&V(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[Hr]=t.uid),t.displayName&&(r[zr]=t.displayName),t.enrollmentTime&&(r[Kr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[Wr]=t.phoneNumber);try{e=new Gr(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),Yc(this,n)}function Yc(t,e){t.b=e,jr(t,"enrolledFactors",e)}function Xc(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function $c(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function Jc(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function Zc(t,e){t.b=Oi(e[Ua]||""),t.a=e.refreshToken,Jc(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function tl(t,e){this.a=t||null,this.b=e||null,Fr(this,{lastSignInTime:Nr(e||null),creationTime:Nr(t||null)})}function el(t,e,n,r,i,o){Fr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function nl(t,e,n){this.J=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r,i=Ta.SDK_VERSION?dr(Ta.SDK_VERSION):null;this.a=new ja(this.l,A(S),i),t.emulatorConfig&&Ha(this.a,t.emulatorConfig),this.b=new $c(this.a),ll(this,e[Ua]),Zc(this.b,e),jr(this,"refreshToken",this.b.a),pl(this,n||{}),ln.call(this),this.R=!1,this.s&&mr()&&(this.i=xc(this.s,this.l,this.m)),this.S=[],this.h=null,this.u=(r=this,new Xc((function(){return r.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var t=r.b.c-Date.now()-3e5;return 0<t?t:0}))),this.aa=b(this.hb,this);var o=this;this.ya=null,this.Oa=function(t){o.wa(t.h)},this.ja=null,this.Aa=function(t){Ha(o.a,t.c)},this.X=null,this.$=[],this.Ba=function(t){ol(o,t.f)},this.ba=null,this.O=new Qc(this,n),jr(this,"multiFactor",this.O)}function rl(t,e){t.ja&&tn(t.ja,"languageCodeChanged",t.Oa),(t.ja=e)&&$e(e,"languageCodeChanged",t.Oa)}function il(t,e){t.X&&tn(t.X,"emulatorConfigChanged",t.Aa),(t.X=e)&&$e(e,"emulatorConfigChanged",t.Aa)}function ol(t,e){t.$=e,Ga(t.a,Ta.SDK_VERSION?dr(Ta.SDK_VERSION,t.$):null)}function al(t,e){t.ba&&tn(t.ba,"frameworkChanged",t.Ba),(t.ba=e)&&$e(e,"frameworkChanged",t.Ba)}function sl(e){try{return Ta.app(e.m).auth()}catch(t){throw new E("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function ul(t){t.D||t.u.b||(t.u.start(),tn(t,"tokenChanged",t.aa),$e(t,"tokenChanged",t.aa))}function cl(t){tn(t,"tokenChanged",t.aa),t.u.stop()}function ll(t,e){t.za=e,jr(t,"_lat",e)}function hl(t){for(var e=[],n=0;n<t.S.length;n++)e.push(t.S[n](t));return Te(e).then((function(){return t}))}function fl(t){t.i&&!t.R&&(t.R=!0,mc(t.i,t))}function pl(t,e){Fr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new tl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function dl(){}function vl(t){return be().then((function(){if(t.D)throw new E("app-deleted")}))}function yl(t){return B(t.providerData,(function(t){return t.providerId}))}function gl(t,e){e&&(ml(t,e.providerId),t.providerData.push(e))}function ml(t,e){W(t.providerData,(function(t){return t.providerId==e}))}function bl(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&jr(t,e,n)}function wl(t,e){var n,r;t!=e&&(Fr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?jr(t,"metadata",new tl((r=e.metadata).a,r.b)):jr(t,"metadata",new tl),V(e.providerData,(function(e){gl(t,e)})),n=t.b,r=e.b,n.b=r.b,n.a=r.a,n.c=r.c,jr(t,"refreshToken",t.b.a),Yc(t.O,e.O.b))}function _l(t){return t.I().then((function(e){var n,r=t.isAnonymous;return zs((n=t).a,ws,{idToken:e}).then(b(n.Kc,n)).then((function(){return r||bl(t,"isAnonymous",!1),e}))}))}function Tl(t,e){e[Ua]&&t.za!=e[Ua]&&(Zc(t.b,e),t.dispatchEvent(new Gc("tokenChanged")),ll(t,e[Ua]),bl(t,"refreshToken",t.b.a))}function El(t,e){return _l(t).then((function(){if(K(yl(t),e))return hl(t).then((function(){throw new E("provider-already-linked")}))}))}function Il(t,e,n){return Ur({user:t,credential:So(e),additionalUserInfo:e=Mi(e),operationType:n})}function Sl(t,e){return Tl(t,e),t.reload().then((function(){return t}))}function kl(t,e,n,r,i){if(!mr())return we(new E("operation-not-supported-in-this-environment"));if(t.h&&!i)return we(t.h);var o=Li(n.providerId),a=Sr(t.uid+":::"),s=null,u=nr(s=(!_r()||sr())&&t.s&&n.isOAuthProvider?iu(t.s,t.l,t.m,e,n,null,a,Ta.SDK_VERSION||null,null,null,t.tenantId):s,o&&o.ua,o&&o.ta);return r=r().then((function(){if(xl(t),!i)return t.I().then((function(){}))})).then((function(){return Tc(t.i,u,e,n,a,!!s,t.tenantId)})).then((function(){return new fe((function(n,r){t.na(e,null,new E("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=Sc(t.i,t,e,u,a)}))})).then((function(t){return u&&er(u),t?Ur(t):null})).o((function(t){throw u&&er(u),t})),Al(t,r,i)}function Cl(t,e,n,r,i){if(!mr())return we(new E("operation-not-supported-in-this-environment"));if(t.h&&!i)return we(t.h);var o=null,a=Sr(t.uid+":::");return r=r().then((function(){if(xl(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,hl(t)})).then((function(e){return t.ha?(e=t.ha).b.set(Pl,t.w(),e.a):e})).then((function(){return Ic(t.i,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return Rl(t.ha);throw o})).then((function(){if(o)throw o})),Al(t,r,i)}function xl(t){if(!t.i||!t.R){if(t.i&&!t.R)throw new E("internal-error");throw new E("auth-domain-config-required")}}function Al(t,e,n){var r,i=(e=e,n=n,(r=t).h&&!n?(e.cancel(),we(r.h)):e.o((function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.h||r.dispatchEvent(new Gc("userInvalidated")),r.h=t),t})));return t.J.push(i),i.oa((function(){H(t.J,i)})),i.o((function(e){var n=null;throw(n=e&&"auth/multi-factor-auth-required"===e.code?zc(e.w(),sl(t),b(t.jc,t)):n)||e}))}function Ol(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ua]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new nl(e,n,t);return t.providerData&&V(t.providerData,(function(t){t&&gl(i,Ur(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Nl(t){this.a=t,this.b=Vu()}Uc.prototype.Rc=function(t){var e=this;return t.sb(this.a.a,this.c).then((function(t){var n=lt(e.f);return delete n[Vc],delete n[qc],ft(n,t),e.g(n)}))},_(Bc,E),Kc.prototype.sb=function(t,e,n){return e.type==Gi?(o=this,a=t,s=n,e.Ha().then((function(t){return t={idToken:t},void 0!==s&&(t.displayName=s),ft(t,{phoneVerificationInfo:To(o.a)}),zs(a,ms,t)}))):(r=this,i=t,e.Ha().then((function(t){return ft(t={mfaPendingCredential:t},{phoneVerificationInfo:To(r.a)}),zs(i,bs,t)})));var r,i,o,a,s},_(Hc,Kc),_(Wc,Hc),_(Gc,Ue),(t=Qc.prototype).yc=function(t){var e;Yc(this,(t=t.hd,e=[],V(t.mfaInfo||[],(function(t){(t=Br(t))&&e.push(t)})),e))},t.Rb=function(){return this.a.I().then((function(t){return new Wi(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Rb().then((function(n){return t.sb(r,n,e)})).then((function(t){return Tl(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return zs(r,Bs,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=q(e.b,(function(t){return t.uid!=n}));return Yc(e,r),Tl(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:B(this.b,(function(t){return t.w()}))}}},Xc.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=vn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then(Or).then((function(){return e.h()})).then((function(){t(e,!0)})).o((function(n){e.i(n)&&t(e,!1)}))}(this,!0)},Xc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},$c.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},$c.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?we(new E("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return n=t.f,r=e,new fe((function(t,e){"refresh_token"==r.grant_type&&r.refresh_token||"authorization_code"==r.grant_type&&r.code?Qa(n,n.l+"?key="+encodeURIComponent(n.c),(function(n){n?n.error?e(Hs(n)):n.access_token&&n.refresh_token?t(n):e(new E("internal-error")):e(new E("network-request-failed"))}),"POST",Vn(r).toString(),n.g,n.m.get()):e(new E("internal-error"))})).then((function(e){return t.b=Oi(e.access_token),t.a=e.refresh_token,Jc(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}));var n,r}(this,{grant_type:"refresh_token",refresh_token:this.a}):be(null):be({accessToken:this.b.toString(),refreshToken:this.a})},tl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},_(nl,ln),nl.prototype.wa=function(t){this.ya=t,Ka(this.a,t)},nl.prototype.la=function(){return this.ya},nl.prototype.Ga=function(){return Q(this.$)},nl.prototype.hb=function(){this.u.b&&(this.u.stop(),this.u.start())},jr(nl.prototype,"providerId","firebase"),(t=nl.prototype).reload=function(){var t=this;return Al(this,vl(this).then((function(){return _l(t).then((function(){return hl(t)})).then(dl)})))},t.oc=function(t){return this.I(t).then((function(t){return new Fc(t)}))},t.I=function(t){var e=this;return Al(this,vl(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new E("internal-error");return t.accessToken!=e.za&&(ll(e,t.accessToken),e.dispatchEvent(new Gc("tokenChanged"))),bl(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new E("internal-error");pl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e,n=(e=(e=t).providerUserInfo)&&e.length?B(e,(function(t){return new el(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[],r=0;r<n.length;r++)gl(this,n[r]);bl(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new Gc("userReloaded",{hd:t}))},t.Lc=function(t){return Lr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.tb(t)},t.tb=function(t){var e=this,n=null;return Al(this,t.c(this.a,this.uid).then((function(t){return Tl(e,t),n=Il(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Lr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.qb(t)},t.qb=function(t){var e=this,n=null;return Al(this,El(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Il(e,t,"link"),Sl(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return Al(this,El(this,"phone").then((function(){return jc(sl(n),t,e,b(n.qb,n))})))},t.Mc=function(t,e){var n=this;return Al(this,be().then((function(){return jc(sl(n),t,e,b(n.tb,n))})),!0)},t.Bb=function(t){var e=this;return Al(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return Tl(e,t),e.reload()})))},t.ed=function(t){var e=this;return Al(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Tl(e,t),e.reload()})))},t.Cb=function(t){var e=this;return Al(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Tl(e,t),e.reload()})))},t.Db=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return vl(this);var e=this;return Al(this,this.I().then((function(n){return e.a.Db(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Tl(e,t),bl(e,"displayName",t.displayName||null),bl(e,"photoURL",t.photoUrl||null),V(e.providerData,(function(t){"password"===t.providerId&&(jr(t,"displayName",e.displayName),jr(t,"photoURL",e.photoURL))})),hl(e)})).then(dl))},t.cd=function(t){var e=this;return Al(this,_l(this).then((function(n){return K(yl(e),t)?zs(e.a,vs,{idToken:n,deleteProvider:[t]}).then((function(t){var n={};return V(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),V(yl(e),(function(t){n[t]||ml(e,t)})),n[Eo.PROVIDER_ID]||jr(e,"phoneNumber",null),hl(e)})):hl(e).then((function(){throw new E("no-such-provider")}))})))},t.delete=function(){var t=this;return Al(this,this.I().then((function(e){return zs(t.a,ds,{idToken:e})})).then((function(){t.dispatchEvent(new Gc("userDeleted"))}))).then((function(){for(var e=0;e<t.J.length;e++)t.J[e].cancel("app-deleted");rl(t,null),il(t,null),al(t,null),t.J=[],t.D=!0,cl(t),jr(t,"refreshToken",null),t.i&&bc(t.i,t)}))},t.Fb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?b(this.Kb,this):"reauthViaPopup"==t&&e==(this.g||null)?b(this.Lb,this):"linkViaRedirect"==t&&(this.ga||null)==e?b(this.Kb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?b(this.Lb,this):null},t.Ec=function(t){var e=this;return kl(this,"linkViaPopup",t,(function(){return El(e,t.providerId).then((function(){return hl(e)}))}),!1)},t.Nc=function(t){return kl(this,"reauthViaPopup",t,(function(){return be()}),!0)},t.Fc=function(t){var e=this;return Cl(this,"linkViaRedirect",t,(function(){return El(e,t.providerId)}),!1)},t.Oc=function(t){return Cl(this,"reauthViaRedirect",t,(function(){return be()}),!0)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Al(this,this.I().then((function(n){return ss(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Il(i,t,"link"),Sl(i,t)})).then((function(){return o})))},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Al(this,be().then((function(){return Xi(us(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Il(i,t,"reauthenticate"),Tl(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},t.ub=function(t){var e=this,n=null;return Al(this,this.I().then((function(e){return n=e,void 0===t||ct(t)?{}:Ci(new gi(t))})).then((function(t){return e.a.ub(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Eb=function(t,e){var n=this,r=null;return Al(this,this.I().then((function(t){return r=t,void 0===e||ct(e)?{}:Ci(new gi(e))})).then((function(e){return n.a.Eb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return Al(this,t=Xi(be(t),n.uid).then((function(t){return e=Il(n,t,"reauthenticate"),Tl(n,t),n.h=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&ft(t,this.metadata.w()),V(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),ft(t,this.O.w()),t};var Pl={name:"redirectUser",F:"session"};function Rl(t){return zu(t.b,Pl,t.a)}function Dl(t){var e,n,r,i;this.a=t,this.b=Vu(),this.c=null,this.f=(n=jl("local"),r=jl("session"),i=jl("none"),function(t,e,n){var r=Bu(e,n),i=qu(t,e.F);return t.get(e,n).then((function(o){var s=null;try{s=Ir(a.localStorage.getItem(r))}catch(o){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)}))}((e=this).b,n,e.a).then((function(){return e.b.get(r,e.a)})).then((function(t){return t?r:e.b.get(i,e.a).then((function(t){return t?i:e.b.get(n,e.a).then((function(t){return t?n:e.b.get(Ml,e.a).then((function(t){return t?jl(t):n}))}))}))})).then((function(t){return e.c=t,Ll(e,t.F)})).o((function(){e.c||(e.c=n)}))),this.b.addListener(jl("local"),this.a,b(this.g,this))}function Ll(t,e){var n,r,i=[];for(n in Fu)Fu[n]!==e&&i.push(zu(t.b,jl(Fu[n]),t.a));return i.push(zu(t.b,Ml,t.a)),r=i,new fe((function(t,e){var n=r.length,i=[];if(n)for(var o=function(e,r){n--,i[e]=r,0==n&&t(i)},a=function(t){e(t)},s=0;s<r.length;s++)_e(r[s],w(o,s),a);else t(i)}))}Dl.prototype.g=function(){var t=this,e=jl("local");ql(this,(function(){return be().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Ll(t,"local").then((function(){t.c=e}))}))}))};var Ml={name:"persistence",F:"session"};function jl(t){return{name:"authUser",F:t}}function Fl(t,e){return ql(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function Ul(t){return ql(t,(function(){return zu(t.b,t.c,t.a)}))}function Vl(t,e,n){return ql(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Ol(t||{})}))}))}function ql(t,e){return t.f=t.f.then(e,e),t.f}function Bl(t){if(this.l=!1,jr(this,"settings",new Lc),jr(this,"app",t),!this.app.options||!this.app.options.apiKey)throw new E("invalid-api-key");var e,n,r,i,o,a;t=Ta.SDK_VERSION?dr(Ta.SDK_VERSION):null,this.a=new ja(this.app.options&&this.app.options.apiKey,A(S),t),this.R=[],this.s=[],this.O=[],this.hb=Ta.INTERNAL.createSubscribe(b(this.zc,this)),this.X=void 0,this.bc=Ta.INTERNAL.createSubscribe(b(this.Ac,this)),Ql(this,null),this.i=new Dl(this.app.options.apiKey+":"+this.app.name),this.D=new Nl(this.app.options.apiKey+":"+this.app.name),this.$=Zl(this,(n=(e=this).app.options.authDomain,t=function(t){var e=function(t,e){return t.b.get(Pl,t.a).then((function(t){return t&&e&&(t.authDomain=e),Ol(t||{})}))}(t.D,t.app.options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Rl(t.D)}));return Zl(t,e)}(e).then((function(){return Vl(e.i,n,e.P)})).then((function(t){return t?(t.ha=e.D,e.m&&(e.m.ga||null)==(t.ga||null)?t:t.reload().then((function(){return Fl(e.i,t).then((function(){return t}))})).o((function(n){return"auth/network-request-failed"==n.code?t:Ul(e.i)}))):null})).then((function(t){Ql(e,t||null)})),Zl(e,t))),this.h=Zl(this,(r=this).$.then((function(){return Gl(r)})).o((function(){})).then((function(){if(!r.l)return r.ja()})).o((function(){})).then((function(){var t;r.l||(r.ba=!0,(t=r.i).b.addListener(jl("local"),t.a,r.ja))}))),this.ba=!1,this.ja=b(this.Zc,this),this.Ba=b(this.da,this),this.ya=b(this.mc,this),this.za=b(this.wc,this),this.Aa=b(this.xc,this),this.b=null,o=(i=this).app.options.authDomain,a=i.app.options.apiKey,o&&mr()&&(i.Oa=i.$.then((function(){var t;if(!i.l)return i.b=xc(o,a,i.app.name,i.P),mc(i.b,i),Xl(i)&&fl(Xl(i)),i.m&&(fl(i.m),(t=i.m).wa(i.la()),rl(t,i),ol(t=i.m,i.J),al(t,i),Ha((t=i.m).a,i.P),il(t,i),i.m=null),i.b}))),this.INTERNAL={},this.INTERNAL.delete=b(this.delete,this),this.INTERNAL.logFramework=b(this.Gc,this),this.u=0,ln.call(this),t=this,Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.yb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){var t;return this.P?Ur({protocol:(t=xn(this.P.url)).c,host:t.a,port:t.g,options:Ur({disableWarnings:this.P.ec})}):null},enumerable:!1}),this.J=[],this.P=null}function zl(t){Ue.call(this,"languageCodeChanged"),this.h=t}function Kl(t){Ue.call(this,"emulatorConfigChanged"),this.c=t}function Hl(t){Ue.call(this,"frameworkChanged"),this.f=t}function Wl(t){return t.Oa||we(new E("auth-domain-config-required"))}function Gl(t){if(!mr())return we(new E("operation-not-supported-in-this-environment"));var e=Wl(t).then((function(){return t.b.qa()})).then((function(t){return t?Ur(t):null}));return Zl(t,e)}function Ql(t,e){var n,r;Xl(t)&&(n=Xl(t),r=t.Ba,W(n.S,(function(t){return t==r})),tn(Xl(t),"tokenChanged",t.ya),tn(Xl(t),"userDeleted",t.za),tn(Xl(t),"userInvalidated",t.Aa),cl(Xl(t))),e&&(e.S.push(t.Ba),$e(e,"tokenChanged",t.ya),$e(e,"userDeleted",t.za),$e(e,"userInvalidated",t.Aa),0<t.u&&ul(e)),jr(t,"currentUser",e),e&&(e.wa(t.la()),rl(e,t),ol(e,t.J),al(e,t),Ha(e.a,t.P),il(e,t))}function Yl(t,e){var n=null,r=null;return Zl(t,e.then((function(e){return n=So(e),r=Mi(e),function(t,e){var n={};return n.apiKey=t.app.options.apiKey,n.authDomain=t.app.options.authDomain,n.appName=t.app.name,t.P&&(n.emulatorConfig=t.P),t.$.then((function(){return r=n,i=e,o=t.D,a=t.Ga(),s=new nl(r,i),o&&(s.ha=o),a&&ol(s,a),s.reload().then((function(){return s}));var r,i,o,a,s})).then((function(e){return Xl(t)&&e.uid==Xl(t).uid?wl(Xl(t),e):(Ql(t,e),fl(e)),t.da(e)})).then((function(){Jl(t)}))}(t,e)}),(function(e){var n=null;throw(n=e&&"auth/multi-factor-auth-required"===e.code?zc(e.w(),t,b(t.kc,t)):n)||e})).then((function(){return Ur({user:Xl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function Xl(t){return t.currentUser}function $l(t){return Xl(t)&&Xl(t)._lat||null}function Jl(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e]($l(t));if(t.X!==t.getUid()&&t.O.length)for(t.X=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e]($l(t))}}function Zl(t,e){return t.R.push(e),e.oa((function(){H(t.R,e)})),e}function th(){}function eh(){this.a={},this.b=1e12}Dl.prototype.xb=function(t){var e=null,n=this;return function(t){var e=new E("invalid-persistence-type"),n=new E("unsupported-persistence-type");t:{for(r in Fu)if(Fu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(cr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!gu()&&"none"!==t)throw n;break;default:if(!gr()&&"none"!==t)throw n}}(t),ql(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Ll(n,t)})).then((function(){if(n.c=jl(t),e)return n.b.set(n.c,e,n.a)})):be()}))},_(Bl,ln),_(zl,Ue),_(Kl,Ue),_(Hl,Ue),(t=Bl.prototype).xb=function(t){return Zl(this,t=this.i.xb(t))},t.wa=function(t){this.aa===t||this.l||(this.aa=t,Ka(this.a,this.aa),this.dispatchEvent(new zl(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=a.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.P){if(!/^https?:\/\//.test(t))throw new E("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");n=e=!!e&&!!e.disableWarnings,"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!n&&or().then((function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)})),this.P={url:t,ec:e},this.settings.ib=!0,Ha(this.a,this.P),this.dispatchEvent(new Kl(this.P))}var n},t.Gc=function(t){this.J.push(t),Ga(this.a,Ta.SDK_VERSION?dr(Ta.SDK_VERSION,this.J):null),this.dispatchEvent(new Hl(this.J))},t.Ga=function(){return Q(this.J)},t.yb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:this.app.options.apiKey,authDomain:this.app.options.authDomain,appName:this.app.name,currentUser:Xl(this)&&Xl(this).w()}},t.Fb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?b(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return Yl(i,as(i.a,o))}))},t.Xc=function(t){if(!mr())return we(new E("operation-not-supported-in-this-environment"));var e=this,n=Li(t.providerId),r=Sr(),i=null,o=nr(i=(!_r()||sr())&&this.app.options.authDomain&&t.isOAuthProvider?iu(this.app.options.authDomain,this.app.options.apiKey,this.app.name,"signInViaPopup",t,null,r,Ta.SDK_VERSION||null,null,null,this.T(),this.P):i,n&&n.ua,n&&n.ta);return Zl(this,n=Wl(this).then((function(n){return Tc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new fe((function(t,n){e.na("signInViaPopup",null,new E("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=Sc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&er(o),t?Ur(t):null})).o((function(t){throw o&&er(o),t})))},t.Yc=function(t){if(!mr())return we(new E("operation-not-supported-in-this-environment"));var e=this;return Zl(this,Wl(this).then((function(){return ql(t=e.i,(function(){return t.b.set(Ml,t.c.F,t.a)}));var t})).then((function(){return Ic(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.qa=function(){var t=this;return Gl(this).then((function(e){return t.b&&Nc(t.b.b),e})).o((function(e){throw t.b&&Nc(t.b.b),e}))},t.dd=function(t){if(!t)return we(new E("null-user"));if(this.S!=t.tenantId)return we(new E("tenant-id-mismatch"));var e=this,n={};n.apiKey=this.app.options.apiKey,n.authDomain=this.app.options.authDomain,n.appName=this.app.name;var r,i,o,a,s,u=(r=t,i=n,o=e.D,a=e.Ga(),s=r.b,(n={})[Ua]=s.b&&s.b.toString(),n.refreshToken=s.a,i=new nl(i||{apiKey:r.l,authDomain:r.s,appName:r.m},n),o&&(i.ha=o),a&&ol(i,a),wl(i,r),i);return Zl(this,this.h.then((function(){if(e.app.options.apiKey!=t.l)return u.reload()})).then((function(){return Xl(e)&&t.uid==Xl(e).uid?(wl(Xl(e),t),e.da(t)):(Ql(e,u),fl(u),e.da(u))})).then((function(){Jl(e)})))},t.Ab=function(){var t=this;return Zl(this,this.h.then((function(){return t.b&&Nc(t.b.b),Xl(t)?(Ql(t,null),Ul(t.i).then((function(){Jl(t)}))):be()})))},t.Zc=function(){var t=this;return Vl(this.i,this.app.options.authDomain).then((function(e){if(!t.l){var n,r;if((n=Xl(t)&&e)&&(n=Xl(t).uid,r=e.uid,n=null!=n&&""!==n&&null!=r&&""!==r&&n==r),n)return wl(Xl(t),e),Xl(t).I();(Xl(t)||e)&&(Ql(t,e),e&&(fl(e),e.ha=t.D),t.b&&mc(t.b,t),Jl(t))}}))},t.da=function(t){return Fl(this.i,t)},t.mc=function(){Jl(this),this.da(Xl(this))},t.wc=function(){this.Ab()},t.xc=function(){this.Ab()},t.kc=function(t){var e=this;return this.h.then((function(){return Yl(e,be(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(Xl(e))}))},t.Ac=function(t){var e,n,r=this;n=function(){t.next(Xl(r))},(e=this).O.push(n),Zl(e,e.h.then((function(){!e.l&&K(e.O,n)&&e.X!==e.getUid()&&(e.X=e.getUid(),n($l(e)))})))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(Xl(r)):"function"==typeof t.next&&t.next(Xl(r))})),this.hb(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(Xl(r)):"function"==typeof t.next&&t.next(Xl(r))})),this.bc(t,e,n)},t.nc=function(t){var e=this;return Zl(this,this.h.then((function(){return Xl(e)?Xl(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return Yl(e,zs(e.a,js,{token:t}))})).then((function(t){var n=t.user;return bl(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return Yl(n,zs(n.a,Fs,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return Yl(n,zs(n.a,fs,{email:t,password:e}))}))},t.$a=function(t){var e=this;return this.h.then((function(){return Yl(e,t.ka(e.a))}))},t.Sc=function(t){return Lr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.$a(t)},t.zb=function(){var t=this;return this.h.then((function(){var e=Xl(t);if(e&&e.isAnonymous){var n=Ur({providerId:null,isNewUser:!1});return Ur({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return Yl(t,t.a.zb()).then((function(e){var n=e.user;return bl(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return Xl(this)&&Xl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&Xl(this)&&ul(Xl(this))},t.Pc=function(t){var e=this;V(this.s,(function(n){n==t&&e.u--})),this.u<0&&(this.u=0),0==this.u&&Xl(this)&&cl(Xl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),Zl(this,this.h.then((function(){e.l||K(e.s,t)&&t($l(e))})))},t.removeAuthTokenListener=function(t){W(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.i&&(t=this.i).b.removeListener(jl("local"),t.a,this.ja),this.b&&(bc(this.b,this),Nc(this.b.b)),Promise.resolve()},t.hc=function(t){return Zl(this,zs(this.a,ps,{identifier:t,continueUri:br()?Jn():"http://localhost"}).then((function(t){return t.signinMethods||[]})))},t.Bc=function(t){return!!bo(t)},t.wb=function(t,e){var n=this;return Zl(this,be().then((function(){var t=new gi(e);if(!t.c)throw new E("argument-error",wi+" must be true when sending sign in link to email");return Ci(t)})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.jd=function(t){return this.Ra(t).then((function(t){return t.data.email}))},t.nb=function(t,e){return Zl(this,this.a.nb(t,e).then((function(){})))},t.Ra=function(t){return Zl(this,this.a.Ra(t).then((function(t){return new Qr(t)})))},t.jb=function(t){return Zl(this,this.a.jb(t).then((function(){})))},t.vb=function(t,e){var n=this;return Zl(this,be().then((function(){return void 0===e||ct(e)?{}:Ci(new gi(e))})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.Wc=function(t,e){return Zl(this,jc(this,t,e,b(this.$a,this)))},t.Vc=function(t,e){var n=this;return Zl(this,be().then((function(){var r=e||Jn(),i=mo(t,r);if(!(r=bo(r)))throw new E("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new E("tenant-id-mismatch");return n.$a(i)})))},th.prototype.render=function(){},th.prototype.reset=function(){},th.prototype.getResponse=function(){},th.prototype.execute=function(){};var nh=null;function rh(t,e){return(e=ih(e))&&t.a[e]||null}function ih(t){return(t=void 0===t?1e12:t)?t.toString():null}function oh(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ee(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():$e(this.f,"click",this.i)}function ah(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function sh(){}function uh(){}eh.prototype.render=function(t,e){return this.a[this.b.toString()]=new oh(t,e),this.b++},eh.prototype.reset=function(t){var e=rh(this,t);t=ih(t),e&&t&&(e.delete(),delete this.a[t])},eh.prototype.getResponse=function(t){return(t=rh(this,t))?t.getResponse():null},eh.prototype.execute=function(t){(t=rh(this,t))&&t.execute()},oh.prototype.getResponse=function(){return ah(this),this.b},oh.prototype.execute=function(){ah(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(e){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(e){}t.h&&t.execute()}),6e4)}),500))},oh.prototype.delete=function(){ah(this),this.g=!0,clearTimeout(this.a),this.a=null,tn(this.f,"click",this.i)},jr(sh,"FACTOR_ID","phone"),uh.prototype.g=function(){return be(nh=nh||new eh)},uh.prototype.c=function(){};var ch=null;function lh(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var hh=new dt(mt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),fh=new xr(3e4,6e4);lh.prototype.g=function(t){var e=this;return new fe((function(n,r){var i=setTimeout((function(){r(new E("network-request-failed"))}),fh.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){var o;a.grecaptcha?(e.f=t,o=a.grecaptcha.render,a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)):(clearTimeout(i),r(new E("internal-error"))),delete a[e.a]},be(Oa(Tt(hh,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new E("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(a.grecaptcha))}))},lh.prototype.c=function(){this.b--};var ph=null;function dh(t,e,n,r,i,o,s){if(jr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.v=e,this.g=null,s=s?ch=ch||new uh:ph=ph||new lh,this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[gh])throw new E("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[mh],!a.document)throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ee(e)||!this.i&&ee(e).hasChildNodes())throw new E("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new ja(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[vh];this.a[vh]=function(t){var e;bh(u,t),"function"==typeof c?c(t):"string"!=typeof c||"function"==typeof(e=yr(c,a))&&e(t)};var l=this.a[yh];this.a[yh]=function(){var t;bh(u,null),"function"==typeof l?l():"string"!=typeof l||"function"==typeof(t=yr(l,a))&&t()}}var vh="callback",yh="expired-callback",gh="sitekey",mh="size";function bh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function wh(t,e){return t.h.push(e),e.oa((function(){H(t.h,e)})),e}function _h(t){if(t.D)throw new E("internal-error","RecaptchaVerifier instance has been destroyed.")}function Th(t,e,n){var r=!1;try{this.b=n||Ta.app()}catch(t){throw new E("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new E("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Ta.SDK_VERSION?dr(Ta.SDK_VERSION,o):null,dh.call(this,n,t,e,(function(){try{var e=i.b.auth().la()}catch(t){e=null}return e}),o,A(S),r)}function Eh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new E("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],i<0||i>=Ih.length)throw new E("internal-error","Argument validator received an unsupported number of arguments.");n=Ih[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new E("argument-error",t+" failed: "+r)}(t=dh.prototype).Ia=function(){var t=this;return this.f||(this.f=wh(this,be().then((function(){if(br()&&!ur())return or();throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,zs(t.s,ks,{})})).then((function(e){t.a[gh]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e}))))},t.render=function(){_h(this);var t=this;return wh(this,this.Ia().then((function(){var e,n;return null===t.c&&(n=t.v,t.i||(e=ee(n),n=function(){var t,e=arguments,n=document,r=String(e[0]),i=e[1];return!te&&i&&(i.name||i.type)&&(r=["<",r],i.name&&r.push(' name="',Ut(i.name),'"'),i.type&&(r.push(' type="',Ut(i.type),'"'),ft(t={},i),delete t.type,i=t),r.push(">"),r=r.join("")),r=ae(n,r),i&&("string"==typeof i?r.className=i:Array.isArray(i)?r.className=i.join(" "):ne(r,i)),2<e.length&&function(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||d(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(d(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){a="function"==typeof o.item;break t}}a=!1}V(a?Q(o):o,r)}}}(n,r,e),r}("DIV"),e.appendChild(n)),t.c=t.g.render(n,t.a)),t.c})))},t.verify=function(){_h(this);var t=this;return wh(this,this.render().then((function(e){return new fe((function(n){var r,i=t.g.getResponse(e);i?n(i):(t.l.push(r=function(e){var i;e&&(i=r,W(t.l,(function(t){return t==i})),n(e))}),t.i&&t.g.execute(t.c))}))})))},t.reset=function(){_h(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){_h(this),this.D=!0,this.m.c();for(var t,e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i)for(e=ee(this.v);t=e.firstChild;)e.removeChild(t)},_(Th,dh);var Ih="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Sh(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function kh(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Ch(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:d}}function xh(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Ah(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Oh(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Nh(t,e){return d(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Ph(t){return d(t)&&"string"==typeof t.uid}function Rh(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Dh(t,e){for(var n in e){var r=e[n].name;t[r]=jh(r,t[n],e[n].j)}}function Lh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:w((function(t){return this[t]}),n),set:w((function(t,e,n,r){Eh(t,[n],[r],!0),this[e]=r}),r,n,e[n].kb),enumerable:!0})}}function Mh(t,e,n,r){t[e]=jh(e,n,r)}function jh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Eh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=(t=(t=t).split("."))[t.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Dh(Bl.prototype,{jb:{name:"applyActionCode",j:[Sh("code")]},Ra:{name:"checkActionCode",j:[Sh("code")]},nb:{name:"confirmPasswordReset",j:[Sh("code"),Sh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Sh("email"),Sh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Sh("email")]},qa:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Sh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Rh(Ch(),xh(),"nextOrObserver"),xh("opt_error",!0),xh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Rh(Ch(),xh(),"nextOrObserver"),xh("opt_error",!0),xh("opt_completed",!0)]},vb:{name:"sendPasswordResetEmail",j:[Sh("email"),Rh(Ch("opt_actionCodeSettings",!0),Ah(null,!0),"opt_actionCodeSettings",!0)]},wb:{name:"sendSignInLinkToEmail",j:[Sh("email"),Ch("actionCodeSettings")]},xb:{name:"setPersistence",j:[Sh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Oh()]},zb:{name:"signInAnonymously",j:[]},$a:{name:"signInWithCredential",j:[Oh()]},Tc:{name:"signInWithCustomToken",j:[Sh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Sh("email"),Sh("password")]},Vc:{name:"signInWithEmailLink",j:[Sh("email"),Sh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Sh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Rh({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof nl)}},Ah(),"user")]},Ab:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Sh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Sh("url"),Ch("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Sh("code")]}}),Lh(Bl.prototype,{lc:{name:"languageCode",kb:Rh(Sh(),Ah(),"languageCode")},ti:{name:"tenantId",kb:Rh(Sh(),Ah(),"tenantId")}}),(Bl.Persistence=Fu).LOCAL="local",Bl.Persistence.SESSION="session",Bl.Persistence.NONE="none",Dh(nl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[kh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[kh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Oh()]},qb:{name:"linkWithCredential",j:[Oh()]},Dc:{name:"linkWithPhoneNumber",j:[Sh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Oh()]},tb:{name:"reauthenticateWithCredential",j:[Oh()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Sh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},ub:{name:"sendEmailVerification",j:[Rh(Ch("opt_actionCodeSettings",!0),Ah(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Sh(null,!0)]},cd:{name:"unlink",j:[Sh("provider")]},Bb:{name:"updateEmail",j:[Sh("email")]},Cb:{name:"updatePassword",j:[Sh("password")]},ed:{name:"updatePhoneNumber",j:[Oh("phone")]},Db:{name:"updateProfile",j:[Ch("profile")]},Eb:{name:"verifyBeforeUpdateEmail",j:[Sh("email"),Rh(Ch("opt_actionCodeSettings",!0),Ah(null,!0),"opt_actionCodeSettings",!0)]}}),Dh(eh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Dh(th.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Dh(fe.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Lh(Lc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",kb:kh("appVerificationDisabledForTesting")}}),Dh(Mc.prototype,{confirm:{name:"confirm",j:[Sh("verificationCode")]}}),Mh(Yi,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[no,yo,_o,Zi],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Rh(Sh(),Ch(),"json")]),Mh(go,"credential",(function(t,e){return new vo(t,e)}),[Sh("email"),Sh("password")]),Dh(vo.prototype,{w:{name:"toJSON",j:[Sh(null,!0)]}}),Dh(ao.prototype,{Ca:{name:"addScope",j:[Sh("scope")]},Ka:{name:"setCustomParameters",j:[Ch("customOAuthParameters")]}}),Mh(ao,"credential",so,[Rh(Sh(),Ch(),"token")]),Mh(go,"credentialWithLink",mo,[Sh("email"),Sh("emailLink")]),Dh(uo.prototype,{Ca:{name:"addScope",j:[Sh("scope")]},Ka:{name:"setCustomParameters",j:[Ch("customOAuthParameters")]}}),Mh(uo,"credential",co,[Rh(Sh(),Ch(),"token")]),Dh(lo.prototype,{Ca:{name:"addScope",j:[Sh("scope")]},Ka:{name:"setCustomParameters",j:[Ch("customOAuthParameters")]}}),Mh(lo,"credential",ho,[Rh(Sh(),Rh(Ch(),Ah()),"idToken"),Rh(Sh(),Ah(),"accessToken",!0)]),Dh(fo.prototype,{Ka:{name:"setCustomParameters",j:[Ch("customOAuthParameters")]}}),Mh(fo,"credential",po,[Rh(Sh(),Ch(),"token"),Sh("secret",!0)]),Dh(oo.prototype,{Ca:{name:"addScope",j:[Sh("scope")]},credential:{name:"credential",j:[Rh(Sh(),Rh(Ch(),Ah()),"optionsOrIdToken"),Rh(Sh(),Ah(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Ch("customOAuthParameters")]}}),Dh(to.prototype,{w:{name:"toJSON",j:[Sh(null,!0)]}}),Dh($i.prototype,{w:{name:"toJSON",j:[Sh(null,!0)]}}),Mh(Eo,"credential",Io,[Sh("verificationId"),Sh("verificationCode")]),Dh(Eo.prototype,{fb:{name:"verifyPhoneNumber",j:[Rh(Sh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Nh(t.session,Gi)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Nh(t.session,Qi)&&Ph(t.multiFactorHint):t.session&&t.multiFactorUid?Nh(t.session,Qi)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Dh(wo.prototype,{w:{name:"toJSON",j:[Sh(null,!0)]}}),Dh(E.prototype,{toJSON:{name:"toJSON",j:[Sh(null,!0)]}}),Dh(Ro.prototype,{toJSON:{name:"toJSON",j:[Sh(null,!0)]}}),Dh(Po.prototype,{toJSON:{name:"toJSON",j:[Sh(null,!0)]}}),Dh(Bc.prototype,{toJSON:{name:"toJSON",j:[Sh(null,!0)]}}),Dh(Uc.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}}]}}),Dh(Qc.prototype,{Rb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.sb}},Sh("displayName",!0)]},bd:{name:"unenroll",j:[Rh({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Ph},Sh(),"multiFactorInfoIdentifier")]}}),Dh(Th.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Mh(ui,"parseLink",yi,[Sh("link")]),Mh(sh,"assertion",(function(t){return new Wc(t)}),[Oh("phone")]),function(){if(void 0===Ta||!Ta.INTERNAL||!Ta.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Xr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Yr,VERIFY_AND_CHANGE_EMAIL:$r,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Bl,AuthCredential:Yi,Error:E};Mh(t,"EmailAuthProvider",go,[]),Mh(t,"FacebookAuthProvider",ao,[]),Mh(t,"GithubAuthProvider",uo,[]),Mh(t,"GoogleAuthProvider",lo,[]),Mh(t,"TwitterAuthProvider",fo,[]),Mh(t,"OAuthProvider",oo,[Sh("providerId")]),Mh(t,"SAMLAuthProvider",io,[Sh("providerId")]),Mh(t,"PhoneAuthProvider",Eo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof Bl)}}]),Mh(t,"RecaptchaVerifier",Th,[Rh(Sh(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Ch("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Ta.app.App)}}]),Mh(t,"ActionCodeURL",ui,[]),Mh(t,"PhoneMultiFactorGenerator",sh,[]),Ta.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Bl(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Ta.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:b((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:b(t.nc,t),addAuthTokenListener:b(t.cc,t),removeAuthTokenListener:b(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Ta.registerVersion("@firebase/auth","0.16.6"),Ta.INTERNAL.extendNamespace({User:nl})}()}.apply("undefined"!=typeof e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Ea="";function Ia(t){Ea=t}var Sa=(ka.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Ao(e))},ka.prototype.get=function(t){return null==(t=this.domStorage_.getItem(this.prefixedName_(t)))?null:xo(t)},ka.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},ka.prototype.prefixedName_=function(t){return this.prefix_+t},ka.prototype.toString=function(){return this.domStorage_.toString()},ka);function ka(t){this.domStorage_=t,this.prefix_="firebase:"}var Ca=(xa.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},xa.prototype.get=function(t){return No(this.cache_,t)?this.cache_[t]:null},xa.prototype.remove=function(t){delete this.cache_[t]},xa);function xa(){this.cache_={},this.isInMemoryStorage=!0}function Aa(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i,o=t.charCodeAt(r);55296<=o&&o<=56319&&(i=o-55296,oo(++r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(i<<10)+(t.charCodeAt(r)-56320)),o<128?e[n++]=o:(o<2048?e[n++]=o>>6|192:(o<65536?e[n++]=o>>12|224:(e[n++]=o>>18|240,e[n++]=o>>12&63|128),e[n++]=o>>6&63|128),e[n++]=63&o|128)}return e}(t);return(t=new Lo).update(e),t=t.digest(),so.encodeByteArray(t)}function Oa(t,e){oo(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(Ua.logLevel=ea.VERBOSE,Ba=Ua.log.bind(Ua),e&&Fa.set("logging_enabled",!0)):"function"==typeof t?Ba=t:(Ba=null,Fa.remove("logging_enabled"))}function Na(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+qa.apply(void 0,to([],Zi(t)));Ua.error(n)}function Pa(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function Ra(t,e){return t===e?0:t<e?-1:1}function Da(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ao(e))}function La(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var Ma,ja=(kn=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Sa(e)}}catch(t){}return new Ca})("localStorage"),Fa=kn("sessionStorage"),Ua=new sa("@firebase/database"),Va=(Ma=1,function(){return Ma++}),qa=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];for(var r="",i=0;i<e.length;i++){var o=e[i];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?r+=t.apply(null,o):r+="object"==typeof o?Ao(o):o,r+=" "}return r},Ba=null,za=!0,Ka=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!0===za&&(za=!1,null===Ba&&!0===Fa.get("logging_enabled")&&Oa(!0)),Ba&&(t=qa.apply(null,e),Ba(t))},Ha=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Ka.apply(void 0,to([t],Zi(e)))}},Wa=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+qa.apply(void 0,to([],Zi(t)));throw Ua.error(n),new Error(n)},Ga=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+qa.apply(void 0,to([],Zi(t)));Ua.warn(n)},Qa="[MIN_NAME]",Ya="[MAX_NAME]",Xa=function(t,e){if(t===e)return 0;if(t===Qa||e===Ya)return-1;if(e===Qa||t===Ya)return 1;var n=is(t),r=is(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null===r&&t<e?-1:1},$a=function t(e){if("object"!=typeof e||null===e)return Ao(e);var n,r=[];for(n in e)r.push(n);r.sort();for(var i="{",o=0;o<r.length;o++)0!==o&&(i+=","),i+=Ao(r[o]),i+=":",i+=t(e[r[o]]);return i+"}"};function Ja(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function Za(t){var e,n,r,i;oo(!Pa(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));for(var o=[],a=52;a;--a)o.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;--a)o.push(n%2?1:0),n=Math.floor(n/2);o.push(e?1:0),o.reverse();var s=o.join(""),u="";for(a=0;a<64;a+=8){var c=parseInt(s.substr(a,8),2).toString(16);u+=c=1===c.length?"0"+c:c}return u.toLowerCase()}function ts(t,e){return"object"==typeof(e=setTimeout(t,e))&&e.unref&&e.unref(),e}var es=new RegExp("^-?(0*)\\d{1,10}$"),ns=-2147483648,rs=2147483647,is=function(t){return es.test(t)&&(t=Number(t),ns<=t&&t<=rs)?t:null},os=function(t){try{t()}catch(r){setTimeout((function(){var e=r.stack||"";throw Ga("Exception was thrown by user callback.",e),r}),Math.floor(0))}},as=(ss.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise((function(n,r){setTimeout((function(){e.appCheck?e.getToken(t).then(n,r):n(null)}),0)}))},ss.prototype.addTokenChangeListener=function(t){var e;null!==(e=this.appCheckProvider)&&void 0!==e&&e.get().then((function(e){return e.addTokenListener(t)}))},ss.prototype.notifyForInvalidToken=function(){Ga('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},ss);function ss(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null!=e&&e.get().then((function(t){return n.appCheck=t}))}var us=(cs.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(Ka("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):new Promise((function(n,r){setTimeout((function(){e.auth_?e.getToken(t).then(n,r):n(null)}),0)}))},cs.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)}))},cs.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},cs.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ga(t)},cs);function cs(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(t){return r.auth_=t}))}var ls=(hs.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},hs.prototype.addTokenChangeListener=function(t){t(this.accessToken)},hs.prototype.removeTokenChangeListener=function(t){},hs.prototype.notifyForInvalidToken=function(){},hs.OWNER="owner",hs);function hs(t){this.accessToken=t}var fs=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ps="websocket",ds="long_polling",vs=(ys.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},ys.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(ys.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&ja.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),ys.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},ys.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return t+this.host+"/"+e},ys);function ys(t,e,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ja.get("host:"+t)||this._host}function gs(t,e,n){var r;if(oo("string"==typeof e,"typeof type must == string"),oo("object"==typeof n,"typeof params must == object"),e===ps)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==ds)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}((e=t).host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams)&&(n.ns=t.namespace);var i=[];return Ja(n,(function(t,e){i.push(t+"="+e)})),r+i.join("&")}var ms=(bs.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),No(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},bs.prototype.get=function(){return uo(this.counters_)},bs);function bs(){this.counters_={}}var ws={},_s={};function Ts(t){return t=t.toString(),ws[t]||(ws[t]=new ms),ws[t]}var Es=(Is.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},Is.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=0;e<t.length;++e)!function(e){t[e]&&os((function(){n.onMessage_(t[e])}))}(e);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},Is);function Is(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var Ss=(ks.prototype.open=function(t,e){var n,r,i,o=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Es(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){o.log_("Timed out trying to connect."),o.onClosed_(),o.connectTimeoutTimer_=null}),Math.floor(3e4)),n=function(){var t;o.isClosed_||(o.scriptTagHolder=new Cs((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Zi(t,5),r=n[0],i=n[1],a=n[2];if(n[3],n[4],o.incrementIncomingBytes_(t),o.scriptTagHolder)if(o.connectTimeoutTimer_&&(clearTimeout(o.connectTimeoutTimer_),o.connectTimeoutTimer_=null),o.everConnected_=!0,"start"===r)o.id=i,o.password=a;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(o.scriptTagHolder.sendNewPolls=!1,o.myPacketOrderer.closeAfter(i,(function(){o.onClosed_()}))):o.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=(r=Zi(t,2))[0],r=r[1];o.incrementIncomingBytes_(t),o.myPacketOrderer.handleResponse(n,r)}),(function(){o.onClosed_()}),o.urlFn),(t={start:"t"}).ser=Math.floor(1e8*Math.random()),o.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=o.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",o.transportSessionId&&(t.s=o.transportSessionId),o.lastSessionId&&(t.ls=o.lastSessionId),o.applicationId&&(t.p=o.applicationId),o.appCheckToken&&(t.ac=o.appCheckToken),"undefined"!=typeof location&&location.hostname&&fs.test(location.hostname)&&(t.r="f"),t=o.urlFn(t),o.log_("Connecting via long-poll to "+t),o.scriptTagHolder.addTag(t,(function(){})))},"complete"===document.readyState?n():(r=!1,i=function(){document.body?r||(r=!0,n()):setTimeout(i,Math.floor(10))},document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&i()})),window.attachEvent("onload",i)))},ks.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},ks.forceAllow=function(){ks.forceAllow_=!0},ks.forceDisallow=function(){ks.forceDisallow_=!0},ks.isAvailable=function(){return!!ks.forceAllow_||!(ks.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},ks.prototype.markConnectionHealthy=function(){},ks.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},ks.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},ks.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},ks.prototype.send=function(t){t=Ao(t),this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var e=La(t=function(t){return t=eo(t),so.encodeByteArray(t,!0)}(t),1840),n=0;n<e.length;n++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,e.length,e[n]),this.curSegmentNum++},ks.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},ks.prototype.incrementIncomingBytes_=function(t){t=Ao(t).length,this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},ks);function ks(t,e,n,r,i,o,a){var s=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ha(t),this.stats_=Ts(e),this.urlFn=function(t){return s.appCheckToken&&(t.ac=s.appCheckToken),gs(e,ds,t)}}var Cs=(xs.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ka("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},xs.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},xs.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},xs.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++,(t={}).id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var t=this.urlFn(t),e="",n=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+e.length<=1870;){var r=this.pendingSegs.shift();e=e+"&seg"+n+"="+r.seg+"&ts"+n+"="+r.ts+"&d"+n+"="+r.d,n++}return this.addLongPollTag_(t+=e,this.currentSerial),!0}return!1},xs.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},xs.prototype.addLongPollTag_=function(t,e){var n=this;function r(){n.outstandingRequests.delete(e),n.newRequest_()}this.outstandingRequests.add(e);var i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},xs.prototype.addTag=function(t,e){var n=this;setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){Ka("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}}),Math.floor(1))},xs);function xs(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=Va(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=xs.createIFrame_(),e="",e="<html><body>"+(e=this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)?'<script>document.domain="'+document.domain+'";<\/script>':e)+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(e),this.myIFrame.doc.close()}catch(t){Ka("frame writing exception"),t.stack&&Ka(t.stack),Ka(t)}}var As=null;"undefined"!=typeof MozWebSocket?As=MozWebSocket:"undefined"!=typeof WebSocket&&(As=WebSocket);var Os=(Ns.connectionURL_=function(t,e,n,r){var i={v:"5"};return"undefined"!=typeof location&&location.hostname&&fs.test(location.hostname)&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),r&&(i.ac=r),gs(t,ps,i)},Ns.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ja.set("previous_websocket_failure",!0);try{mo()||(r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}},this.mySock=new As(this.connURL,[],r))}catch(t){this.log_("Error instantiating WebSocket.");var r=t.message||t.data;return r&&this.log_(r),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection."),(t=t.message||t.data)&&n.log_(t),n.onClosed_()}},Ns.prototype.start=function(){},Ns.forceDisallow=function(){Ns.forceDisallow_=!0},Ns.isAvailable=function(){var t,e=!1;return"undefined"!=typeof navigator&&navigator.userAgent&&(t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/))&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0),!e&&null!==As&&!Ns.forceDisallow_},Ns.previouslyFailed=function(){return ja.isInMemoryStorage||!0===ja.get("previous_websocket_failure")},Ns.prototype.markConnectionHealthy=function(){ja.remove("previous_websocket_failure")},Ns.prototype.appendFrame_=function(t){this.frames.push(t),this.frames.length===this.totalFrames&&(t=this.frames.join(""),this.frames=null,t=xo(t),this.onMessage(t))},Ns.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},Ns.prototype.extractFrameCount_=function(t){if(oo(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},Ns.prototype.handleIncomingFrame=function(t){null!==this.mySock&&(t=t.data,this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),(null!==this.frames||null!==(t=this.extractFrameCount_(t)))&&this.appendFrame_(t))},Ns.prototype.send=function(t){this.resetKeepAlive(),t=Ao(t),this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var e=La(t,16384);1<e.length&&this.sendString_(String(e.length));for(var n=0;n<e.length;n++)this.sendString_(e[n])},Ns.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},Ns.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},Ns.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},Ns.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},Ns.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},Ns.responsesRequiredToBeHealthy=2,Ns.healthyTimeout=3e4,Ns);function Ns(t,e,n,r,i,o,a){this.connId=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ha(this.connId),this.stats_=Ts(e),this.connURL=Ns.connectionURL_(e,o,a,r),this.nodeAdmin=e.nodeAdmin}var Ps=(Object.defineProperty(Rs,"ALL_TRANSPORTS",{get:function(){return[Ss,Os]},enumerable:!1,configurable:!0}),Rs.prototype.initTransports_=function(t){var e,n,r=Os&&Os.isAvailable(),i=r&&!Os.previouslyFailed();if(t.webSocketOnly&&(r||Ga("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Os];else{var o=this.transports_=[];try{for(var a=Ji(Rs.ALL_TRANSPORTS),s=a.next();!s.done;s=a.next()){var u=s.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}}},Rs.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},Rs.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},Rs);function Rs(t){this.initTransports_(t)}var Ds=(Ls.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0)),0<(e=e.healthyTimeout||0)&&(this.healthyTimeout_=ts((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(e)))},Ls.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},Ls.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},Ls.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},Ls.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},Ls.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},Ls.prototype.onSecondaryControl_=function(t){"t"in t&&("a"===(t=t.t)?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_()))},Ls.prototype.onSecondaryMessageReceived_=function(t){var e=Da("t",t);if(t=Da("d",t),"c"===e)this.onSecondaryControl_(t);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(t)}},Ls.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},Ls.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},Ls.prototype.onPrimaryMessageReceived_=function(t){var e=Da("t",t);t=Da("d",t),"c"===e?this.onControl_(t):"d"===e&&this.onDataMessage_(t)},Ls.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},Ls.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},Ls.prototype.onControl_=function(t){var e=Da("t",t);if("d"in t)if(t=t.d,"h"===e)this.onHandshake_(t);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var n=0;n<this.pendingDataMessages.length;++n)this.onDataMessage_(this.pendingDataMessages[n]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(t):"r"===e?this.onReset_(t):"e"===e?Na("Server Error: "+t):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Na("Unknown control packet command: "+e)},Ls.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&Ga("Protocol version mismatch detected"),this.tryStartUpgrade_())},Ls.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},Ls.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_);t=this.disconnReceiver_(this.secondaryConn_),this.secondaryConn_.open(n,t),ts((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},Ls.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},Ls.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ts((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},Ls.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},Ls.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},Ls.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ja.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},Ls.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},Ls.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},Ls.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},Ls.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},Ls);function Ls(t,e,n,r,i,o,a,s,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ha("c:"+this.id+":"),this.transportManager_=new Ps(e),this.log_("Connection created"),this.start_()}function Ms(){}Ms.prototype.put=function(t,e,n,r){},Ms.prototype.merge=function(t,e,n,r){},Ms.prototype.refreshAuthToken=function(t){},Ms.prototype.refreshAppCheckToken=function(t){},Ms.prototype.onDisconnectPut=function(t,e,n){},Ms.prototype.onDisconnectMerge=function(t,e,n){},Ms.prototype.onDisconnectCancel=function(t,e){},Ms.prototype.reportStats=function(t){},W=Ms;var js=(Fs.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=to([],Zi(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},Fs.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n}),(t=this.getInitialEvent(t))&&e.apply(n,t)},Fs.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},Fs.prototype.validateEventType_=function(t){oo(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},Fs);function Fs(t){this.allowedEvents_=t,this.listeners_={},oo(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var Us,Vs=(Qi(qs,Us=js),qs.getInstance=function(){return new qs},qs.prototype.getInitialEvent=function(t){return oo("online"===t,"Unknown event type: "+t),[this.online_]},qs.prototype.currentlyOnline=function(){return this.online_},qs);function qs(){var t=Us.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||vo()||(window.addEventListener("online",(function(){t.online_||(t.online_=!0,t.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){t.online_&&(t.online_=!1,t.trigger("online",!1))}),!1)),t}var Bs=(zs.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},zs);function zs(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}function Ks(){return new Bs("")}function Hs(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ws(t){return t.pieces_.length-t.pieceNum_}function Gs(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new Bs(t.pieces_,e)}function Qs(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function Ys(t,e){return t.pieces_.slice(t.pieceNum_+(e=void 0===e?0:e))}function Xs(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Bs(e,0)}function $s(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Bs)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)0<i[r].length&&n.push(i[r])}return new Bs(n,0)}function Js(t){return t.pieceNum_>=t.pieces_.length}function Zs(t,e){var n=Hs(t),r=Hs(e);if(null===n)return e;if(n===r)return Zs(Gs(t),Gs(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function tu(t,e){for(var n=Ys(t,0),r=Ys(e,0),i=0;i<n.length&&i<r.length;i++){var o=Xa(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function eu(t,e){if(Ws(t)!==Ws(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function nu(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(Ws(t)>Ws(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var ru=function(t,e){this.errorPrefix_=e,this.parts_=Ys(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Ho(this.parts_[n]);iu(this)};function iu(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ou(t))}function ou(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var au,su=(Qi(uu,au=js),uu.getInstance=function(){return new uu},uu.prototype.getInitialEvent=function(t){return oo("visible"===t,"Unknown event type: "+t),[this.visible_]},uu);function uu(){var t,e,n=au.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),n.visible_=!0,e&&document.addEventListener(e,(function(){var e=!document[t];e!==n.visible_&&(n.visible_=e,n.trigger("visible",e))}),!1),n}var cu,lu=1e3,hu=(Qi(fu,cu=W),fu.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_;e={r:r,a:t,b:e},this.log_(Ao(e)),oo(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(e),n&&(this.requestCBHash_[r]=n)},fu.prototype.get=function(t){var e=this;this.initConnection_();var n=new lo,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[o];void 0!==t&&i===t&&(delete e.outstandingGets_[o],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+o+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(o),n.promise},fu.prototype.listen=function(t,e,n,r){this.initConnection_();var i=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),oo(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),oo(!this.listens.get(o).has(i),"listen() called twice for same path/queryId."),n={onComplete:r,hashFn:e,query:t,tag:n},this.listens.get(o).set(i,n),this.connected_&&this.sendListen_(n)},fu.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},fu.prototype.sendListen_=function(t){var e=this,n=t.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);var o={p:r};t.tag&&(o.q=n._queryObject,o.t=t.tag),o.h=t.hashFn(),this.sendRequest("q",o,(function(o){var a=o.d,s=o.s;fu.warnOnListenWarnings_(a,n),(e.listens.get(r)&&e.listens.get(r).get(i))===t&&(e.log_("listen response",o),"ok"!==s&&e.removeListen_(r,i),t.onComplete&&t.onComplete(s,a))}))},fu.warnOnListenWarnings_=function(t,e){t&&"object"==typeof t&&No(t,"w")&&(t=Po(t,"w"),Array.isArray(t)&&~t.indexOf("no_index")&&(t='".indexOn": "'+e._queryParams.getIndex().toString()+'"',e=e._path.toString(),Ga("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+t+" at "+e+" to your security rules for better performance.")))},fu.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},fu.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||function(t){return"object"==typeof(t=Oo(t).claims)&&!0===t.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},fu.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},fu.prototype.tryAuth=function(){var t,e,n,r=this;this.connected_&&this.authToken_&&(e=function(t){return!!(t=Oo(t).claims)&&"object"==typeof t&&t.hasOwnProperty("iat")}(t=this.authToken_)?"auth":"gauth",n={cred:t},null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(e,n,(function(e){var n=e.s;e=e.d||"error",r.authToken_===t&&("ok"===n?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(n,e))})))},fu.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(e){var n=e.s;e=e.d||"error","ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,e)}))},fu.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),oo(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},fu.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e),t={p:t},r&&(t.q=n,t.t=r),this.sendRequest("n",t)},fu.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},fu.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},fu.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},fu.prototype.sendOnDisconnect_=function(t,e,n,r){n={p:e,d:n},this.log_("onDisconnect "+t,n),this.sendRequest(t,n,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},fu.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},fu.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},fu.prototype.putInternal=function(t,e,n,r,i){this.initConnection_(),n={p:e,d:n},void 0!==i&&(n.h=i),this.outstandingPuts_.push({action:t,request:n,onComplete:r}),this.outstandingPutCount_++,r=this.outstandingPuts_.length-1,this.connected_?this.sendPut_(r):this.log_("Buffering put: "+e)},fu.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},fu.prototype.reportStats=function(t){var e=this;this.connected_&&(this.log_("reportStats",t={c:t}),this.sendRequest("s",t,(function(t){"ok"!==t.s&&(t=t.d,e.log_("reportStats","Error sending stats: "+t))})))},fu.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Ao(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},fu.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):Na("Unrecognized action received from server: "+Ao(t)+"\nAre you using the latest client?")},fu.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},fu.prototype.scheduleConnect_=function(t){var e=this;oo(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},fu.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},fu.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=lu,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},fu.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=lu,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},fu.prototype.onRealtimeDisconnect_=function(){var t;this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()&&(this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=lu),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime()),t=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-t),t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)),this.onConnectStatus_(!1)},fu.prototype.establishConnection_=function(){return Xi(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,l=this;return $i(this,(function(h){switch(h.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),e=this.onReady_.bind(this),n=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+fu.nextConnectionId_++,c=this.lastSessionId,i=!1,o=null,a=function(){o?o.close():(i=!0,n())},u=function(t){oo(o,"sendRequest call when we're not connected not allowed."),o.sendRequest(t)},this.realtime_={close:a,sendRequest:u},s=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(s),this.appCheckTokenProvider_.getToken(s)])];case 2:return u=Zi.apply(void 0,[h.sent(),2]),s=u[0],u=u[1],i?Ka("getToken() completed but was canceled"):(Ka("getToken() completed. Creating connection."),this.authToken_=s&&s.accessToken,this.appCheckToken_=u&&u.token,o=new Ds(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,e,n,(function(t){Ga(t+" ("+l.repoInfo_.toString()+")"),l.interrupt("server_kill")}),c)),[3,4];case 3:return c=h.sent(),this.log_("Failed to get token: "+c),i||(this.repoInfo_.nodeAdmin&&Ga(c),a()),[3,4];case 4:return[2]}}))}))},fu.prototype.interrupt=function(t){Ka("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},fu.prototype.resume=function(t){Ka("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Ro(this.interruptReasons_)&&(this.reconnectDelay_=lu,this.realtime_||this.scheduleConnect_(0))},fu.prototype.handleTimestamp_=function(t){t-=(new Date).getTime(),this.onServerInfoUpdate_({serverTimeOffset:t})},fu.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},fu.prototype.onListenRevoked_=function(t,e){e=e?e.map((function(t){return $a(t)})).join("$"):"default",(e=this.removeListen_(t,e))&&e.onComplete&&e.onComplete("permission_denied")},fu.prototype.removeListen_=function(t,e){var n,r=new Bs(t).toString();return this.listens.has(r)?(n=(t=this.listens.get(r)).get(e),t.delete(e),0===t.size&&this.listens.delete(r)):n=void 0,n},fu.prototype.onAuthRevoked_=function(t,e){Ka("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},fu.prototype.onAppCheckRevoked_=function(t,e){Ka("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,3<=this.invalidAppCheckTokenCount_&&this.appCheckTokenProvider_.notifyForInvalidToken())},fu.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},fu.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=Ji(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,Ji(a.values())),u=s.next();!u.done;u=s.next()){var c=u.value;this.sendListen_(c)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},fu.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+Ea.replace(/\./g,"-")]=1,vo()?t["framework.cordova"]=1:go()&&(t["framework.reactnative"]=1),this.reportStats(t)},fu.prototype.shouldReconnect_=function(){var t=Vs.getInstance().currentlyOnline();return Ro(this.interruptReasons_)&&t},fu.nextPersistentConnectionId_=0,fu.nextConnectionId_=0,fu);function fu(t,e,n,r,i,o,a,s){var u=cu.call(this)||this;if(u.repoInfo_=t,u.applicationId_=e,u.onDataUpdate_=n,u.onConnectStatus_=r,u.onServerInfoUpdate_=i,u.authTokenProvider_=o,u.appCheckTokenProvider_=a,u.authOverride_=s,u.id=fu.nextPersistentConnectionId_++,u.log_=Ha("p:"+u.id+":"),u.interruptReasons_={},u.listens=new Map,u.outstandingPuts_=[],u.outstandingGets_=[],u.outstandingPutCount_=0,u.outstandingGetCount_=0,u.onDisconnectRequestQueue_=[],u.connected_=!1,u.reconnectDelay_=lu,u.maxReconnectDelay_=3e5,u.securityDebugCallback_=null,u.lastSessionId=null,u.establishConnectionTimer_=null,u.visible_=!1,u.requestCBHash_={},u.requestNumber_=0,u.realtime_=null,u.authToken_=null,u.appCheckToken_=null,u.forceTokenRefresh_=!1,u.invalidAuthTokenCount_=0,u.invalidAppCheckTokenCount_=0,u.firstConnection_=!0,u.lastConnectionAttemptTime_=null,u.lastConnectionEstablishedTime_=null,s&&!mo())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return su.getInstance().on("visible",u.onVisible_,u),-1===t.host.indexOf("fblocal")&&Vs.getInstance().on("online",u.onOnline_,u),u}var pu,du,vu=(yu.Wrap=function(t,e){return new yu(t,e)},yu);function yu(t,e){this.name=t,this.node=e}function gu(){}function mu(){return null!==du&&du.apply(this,arguments)||this}gu.prototype.getCompare=function(){return this.compare.bind(this)},gu.prototype.indexedValueChanged=function(t,e){return t=new vu(Qa,t),e=new vu(Qa,e),0!==this.compare(t,e)},gu.prototype.minPost=function(){return vu.MIN};var bu=new(Qi(mu,du=H=gu),Object.defineProperty(mu,"__EMPTY_NODE",{get:function(){return pu},set:function(t){pu=t},enumerable:!1,configurable:!0}),mu.prototype.compare=function(t,e){return Xa(t.name,e.name)},mu.prototype.isDefinedOn=function(t){throw ao("KeyIndex.isDefinedOn not expected to be called.")},mu.prototype.indexedValueChanged=function(t,e){return!1},mu.prototype.minPost=function(){return vu.MIN},mu.prototype.maxPost=function(){return new vu(Ya,pu)},mu.prototype.makePost=function(t,e){return oo("string"==typeof t,"KeyIndex indexValue must always be a string."),new vu(t,pu)},mu.prototype.toString=function(){return".key"},kn=mu),wu=(_u.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_.pop(),e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value};if(this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},_u.prototype.hasNext=function(){return 0<this.nodeStack_.length},_u.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},_u);function _u(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var Tu=(Eu.prototype.copy=function(t,e,n,r,i){return new Eu(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Eu.prototype.count=function(){return this.left.count()+1+this.right.count()},Eu.prototype.isEmpty=function(){return!1},Eu.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},Eu.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},Eu.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},Eu.prototype.minKey=function(){return this.min_().key},Eu.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Eu.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},Eu.prototype.removeMin_=function(){if(this.left.isEmpty())return ku.EMPTY_NODE;var t=this;return(t=(t=t.left.isRed_()||t.left.left.isRed_()?t:t.moveRedLeft_()).copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},Eu.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r=(r=r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_()?r:r.moveRedLeft_()).copy(null,null,null,r.left.remove(t,e),null);else{if(0===e(t,(r=(r=r.left.isRed_()?r.rotateRight_():r).right.isEmpty()||r.right.isRed_()||r.right.left.isRed_()?r:r.moveRedRight_()).key)){if(r.right.isEmpty())return ku.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp_()},Eu.prototype.isRed_=function(){return this.color},Eu.prototype.fixUp_=function(){var t=this;return(t=(t=t.right.isRed_()&&!t.left.isRed_()?t.rotateLeft_():t).left.isRed_()&&t.left.left.isRed_()?t.rotateRight_():t).left.isRed_()&&t.right.isRed_()?t.colorFlip_():t},Eu.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()?(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_():t},Eu.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()?(t=t.rotateRight_()).colorFlip_():t},Eu.prototype.rotateLeft_=function(){var t=this.copy(null,null,Eu.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Eu.prototype.rotateRight_=function(){var t=this.copy(null,null,Eu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Eu.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Eu.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},Eu.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},Eu.RED=!0,Eu.BLACK=!1,Eu);function Eu(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Eu.RED,this.left=null!=r?r:ku.EMPTY_NODE,this.right=null!=i?i:ku.EMPTY_NODE}function Iu(){}Iu.prototype.copy=function(t,e,n,r,i){return this},Iu.prototype.insert=function(t,e,n){return new Tu(t,e,null)},Iu.prototype.remove=function(t,e){return this},Iu.prototype.count=function(){return 0},Iu.prototype.isEmpty=function(){return!0},Iu.prototype.inorderTraversal=function(t){return!1},Iu.prototype.reverseTraversal=function(t){return!1},Iu.prototype.minKey=function(){return null},Iu.prototype.maxKey=function(){return null},Iu.prototype.check_=function(){return 0},Iu.prototype.isRed_=function(){return!1},js=Iu;var Su,ku=(Cu.prototype.insert=function(t,e){return new Cu(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Tu.BLACK,null,null))},Cu.prototype.remove=function(t){return new Cu(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Tu.BLACK,null,null))},Cu.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},Cu.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},Cu.prototype.isEmpty=function(){return this.root_.isEmpty()},Cu.prototype.count=function(){return this.root_.count()},Cu.prototype.minKey=function(){return this.root_.minKey()},Cu.prototype.maxKey=function(){return this.root_.maxKey()},Cu.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},Cu.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},Cu.prototype.getIterator=function(t){return new wu(this.root_,null,this.comparator_,!1,t)},Cu.prototype.getIteratorFrom=function(t,e){return new wu(this.root_,t,this.comparator_,!1,e)},Cu.prototype.getReverseIteratorFrom=function(t,e){return new wu(this.root_,t,this.comparator_,!0,e)},Cu.prototype.getReverseIterator=function(t){return new wu(this.root_,null,this.comparator_,!0,t)},Cu.EMPTY_NODE=new js,Cu);function Cu(t,e){void 0===e&&(e=Cu.EMPTY_NODE),this.comparator_=t,this.root_=e}function xu(t,e){return Xa(t.name,e.name)}function Au(t,e){return Xa(t,e)}function Ou(t){return"number"==typeof t?"number:"+Za(t):"string:"+t}var Nu,Pu,Ru,Du,Lu=function(t){var e;t.isLeafNode()?(e=t.val(),oo("string"==typeof e||"number"==typeof e||"object"==typeof e&&No(e,".sv"),"Priority must be a string or number.")):oo(t===Su||t.isEmpty(),"priority of unexpected type."),oo(t===Su||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Mu=(Object.defineProperty(ju,"__childrenNodeConstructor",{get:function(){return Nu},set:function(t){Nu=t},enumerable:!1,configurable:!0}),ju.prototype.isLeafNode=function(){return!0},ju.prototype.getPriority=function(){return this.priorityNode_},ju.prototype.updatePriority=function(t){return new ju(this.value_,t)},ju.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:ju.__childrenNodeConstructor.EMPTY_NODE},ju.prototype.getChild=function(t){return Js(t)?this:".priority"===Hs(t)?this.priorityNode_:ju.__childrenNodeConstructor.EMPTY_NODE},ju.prototype.hasChild=function(){return!1},ju.prototype.getPredecessorChildName=function(t,e){return null},ju.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:ju.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},ju.prototype.updateChild=function(t,e){var n=Hs(t);return null===n?e:e.isEmpty()&&".priority"!==n?this:(oo(".priority"!==n||1===Ws(t),".priority must be the last token in a path"),this.updateImmediateChild(n,ju.__childrenNodeConstructor.EMPTY_NODE.updateChild(Gs(t),e)))},ju.prototype.isEmpty=function(){return!1},ju.prototype.numChildren=function(){return 0},ju.prototype.forEachChild=function(t,e){return!1},ju.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},ju.prototype.hash=function(){var t,e;return null===this.lazyHash_&&(t="",this.priorityNode_.isEmpty()||(t+="priority:"+Ou(this.priorityNode_.val())+":"),t+=(e=typeof this.value_)+":",t+="number"==e?Za(this.value_):this.value_,this.lazyHash_=Aa(t)),this.lazyHash_},ju.prototype.getValue=function(){return this.value_},ju.prototype.compareTo=function(t){return t===ju.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof ju.__childrenNodeConstructor?-1:(oo(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},ju.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=ju.VALUE_TYPE_ORDER.indexOf(e),i=ju.VALUE_TYPE_ORDER.indexOf(n);return oo(0<=r,"Unknown leaf type: "+e),oo(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},ju.prototype.withIndex=function(){return this},ju.prototype.isIndexed=function(){return!0},ju.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},ju.VALUE_TYPE_ORDER=["object","boolean","number","string"],ju);function ju(t,e){void 0===e&&(e=ju.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,oo(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Lu(this.priorityNode_)}function Fu(){return null!==Du&&Du.apply(this,arguments)||this}var Uu=new(Qi(Fu,Du=H),Fu.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority();return 0===(r=n.compareTo(r))?Xa(t.name,e.name):r},Fu.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},Fu.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},Fu.prototype.minPost=function(){return vu.MIN},Fu.prototype.maxPost=function(){return new vu(Ya,new Mu("[PRIORITY-POST]",Ru))},Fu.prototype.makePost=function(t,e){return t=Pu(t),new vu(e,new Mu("[PRIORITY-POST]",t))},Fu.prototype.toString=function(){return".priority"},Fu),Vu=Math.log(2),qu=(Bu.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},Bu);function Bu(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Vu,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}var zu,Ku,Hu=function(t,e,n,r){t.sort(e);var i=function(e){for(var r=null,i=null,o=t.length,a=function(e,r){var i=o-e,a=o;o-=e,e=function e(r,i){if(0==(o=i-r))return null;if(1==o)return a=t[r],s=n?n(a):a,new Tu(s,a.node,Tu.BLACK,null,null);r=e(r,o=parseInt(o/2,10)+r),i=e(o+1,i);var o,a=t[o],s=n?n(a):a;return new Tu(s,a.node,Tu.BLACK,r,i)}(1+i,a),a=t[i],i=n?n(a):a,s(new Tu(i,a.node,r,null,e))},s=function(t){r=r?r.left=t:i=t},u=0;u<e.count;++u){var c=e.nextBitIsOne(),l=Math.pow(2,e.count-(u+1));c?a(l,Tu.BLACK):(a(l,Tu.BLACK),a(l,Tu.RED))}return i}(new qu(t.length));return new ku(r||e,i)},Wu={},Gu=(Object.defineProperty(Qu,"Default",{get:function(){return oo(Uu,"ChildrenNode.ts has not been loaded"),zu=zu||new Qu({".priority":Wu},{".priority":Uu})},enumerable:!1,configurable:!0}),Qu.prototype.get=function(t){var e=Po(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof ku?e:null},Qu.prototype.hasIndex=function(t){return No(this.indexSet_,t.toString())},Qu.prototype.addIndex=function(t,e){oo(t!==bu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n=[],r=!1,i=e.getIterator(vu.Wrap),o=i.getNext();o;)r=r||t.isDefinedOn(o.node),n.push(o),o=i.getNext();var a=r?Hu(n,t.getCompare()):Wu,s=t.toString(),u=Yi({},this.indexSet_);return u[s]=t,(e=Yi({},this.indexes_))[s]=a,new Qu(e,u)},Qu.prototype.addToIndexes=function(t,e){var n=this;return new Qu(Do(this.indexes_,(function(r,i){var o=Po(n.indexSet_,i);if(oo(o,"Missing index implementation for "+i),r===Wu){if(o.isDefinedOn(t.node)){for(var a=[],s=e.getIterator(vu.Wrap),u=s.getNext();u;)u.name!==t.name&&a.push(u),u=s.getNext();return a.push(t),Hu(a,o.getCompare())}return Wu}return o=r,(o=(i=e.get(t.name))?r.remove(new vu(t.name,i)):o).insert(t,t.node)})),this.indexSet_)},Qu.prototype.removeFromIndexes=function(t,e){return new Qu(Do(this.indexes_,(function(n){if(n===Wu)return n;var r=e.get(t.name);return r?n.remove(new vu(t.name,r)):n})),this.indexSet_)},Qu);function Qu(t,e){this.indexes_=t,this.indexSet_=e}var Yu,Xu=(Object.defineProperty($u,"EMPTY_NODE",{get:function(){return Ku=Ku||new $u(new ku(Au),null,Gu.Default)},enumerable:!1,configurable:!0}),$u.prototype.isLeafNode=function(){return!1},$u.prototype.getPriority=function(){return this.priorityNode_||Ku},$u.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new $u(this.children_,t,this.indexMap_)},$u.prototype.getImmediateChild=function(t){return".priority"===t?this.getPriority():null===(t=this.children_.get(t))?Ku:t},$u.prototype.getChild=function(t){var e=Hs(t);return null===e?this:this.getImmediateChild(e).getChild(Gs(t))},$u.prototype.hasChild=function(t){return null!==this.children_.get(t)},$u.prototype.updateImmediateChild=function(t,e){if(oo(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new vu(t,e),r=void 0,i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_));return n=r.isEmpty()?Ku:this.priorityNode_,new $u(r,n,i)},$u.prototype.updateChild=function(t,e){var n=Hs(t);return null===n?e:(oo(".priority"!==Hs(t)||1===Ws(t),".priority must be the last token in a path"),e=this.getImmediateChild(n).updateChild(Gs(t),e),this.updateImmediateChild(n,e))},$u.prototype.isEmpty=function(){return this.children_.isEmpty()},$u.prototype.numChildren=function(){return this.children_.count()},$u.prototype.val=function(t){if(this.isEmpty())return null;var e={},n=0,r=0,i=!0;if(this.forEachChild(Uu,(function(o,a){e[o]=a.val(t),n++,i&&$u.INTEGER_REGEXP_.test(o)?r=Math.max(r,Number(o)):i=!1})),!t&&i&&r<2*n){var o,a=[];for(o in e)a[o]=e[o];return a}return t&&!this.getPriority().isEmpty()&&(e[".priority"]=this.getPriority().val()),e},$u.prototype.hash=function(){var t;return null===this.lazyHash_&&(t="",this.getPriority().isEmpty()||(t+="priority:"+Ou(this.getPriority().val())+":"),this.forEachChild(Uu,(function(e,n){""!==(n=n.hash())&&(t+=":"+e+":"+n)})),this.lazyHash_=""===t?"":Aa(t)),this.lazyHash_},$u.prototype.getPredecessorChildName=function(t,e,n){return(n=this.resolveIndex_(n))?(e=n.getPredecessorKey(new vu(t,e)))?e.name:null:this.children_.getPredecessorKey(t)},$u.prototype.getFirstChildName=function(t){return(t=this.resolveIndex_(t))?(t=t.minKey())&&t.name:this.children_.minKey()},$u.prototype.getFirstChild=function(t){return(t=this.getFirstChildName(t))?new vu(t,this.children_.get(t)):null},$u.prototype.getLastChildName=function(t){return(t=this.resolveIndex_(t))?(t=t.maxKey())&&t.name:this.children_.maxKey()},$u.prototype.getLastChild=function(t){return(t=this.getLastChildName(t))?new vu(t,this.children_.get(t)):null},$u.prototype.forEachChild=function(t,e){return(t=this.resolveIndex_(t))?t.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},$u.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},$u.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,vu.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},$u.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},$u.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,vu.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},$u.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Zu?-1:0},$u.prototype.withIndex=function(t){return t===bu||this.indexMap_.hasIndex(t)?this:(t=this.indexMap_.addIndex(t,this.children_),new $u(this.children_,this.priorityNode_,t))},$u.prototype.isIndexed=function(t){return t===bu||this.indexMap_.hasIndex(t)},$u.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()!==t.children_.count())return!1;for(var e=this.getIterator(Uu),n=t.getIterator(Uu),r=e.getNext(),i=n.getNext();r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1},$u.prototype.resolveIndex_=function(t){return t===bu?null:this.indexMap_.get(t.toString())},$u.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,$u);function $u(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Lu(this.priorityNode_),this.children_.isEmpty()&&oo(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function Ju(){return Yu.call(this,new ku(Au),Xu.EMPTY_NODE,Gu.Default)||this}var Zu=new(Qi(Ju,Yu=Xu),Ju.prototype.compareTo=function(t){return t===this?0:1},Ju.prototype.equals=function(t){return t===this},Ju.prototype.getPriority=function(){return this},Ju.prototype.getImmediateChild=function(t){return Xu.EMPTY_NODE},Ju.prototype.isEmpty=function(){return!1},Ju);function tc(t,e){if(void 0===e&&(e=null),null===t)return Xu.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),oo(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"!=typeof(t="object"==typeof t&&".value"in t&&null!==t[".value"]?t[".value"]:t)||".sv"in t)return new Mu(t,tc(e));if(t instanceof Array){var n=Xu.EMPTY_NODE;return Ja(t,(function(e,r){No(t,e)&&"."!==e.substring(0,1)&&(!(r=tc(r)).isLeafNode()&&r.isEmpty()||(n=n.updateImmediateChild(e,r)))})),n.updatePriority(tc(e))}var r=[],i=!1;if(Ja(t,(function(t,e){"."!==t.substring(0,1)&&((e=tc(e)).isEmpty()||(i=i||!e.getPriority().isEmpty(),r.push(new vu(t,e))))})),0===r.length)return Xu.EMPTY_NODE;var o=Hu(r,xu,(function(t){return t.name}),Au);if(i){var a=Hu(r,Uu.getCompare());return new Xu(o,tc(e),new Gu({".priority":a},{".priority":Uu}))}return new Xu(o,tc(e),Gu.Default)}Object.defineProperties(vu,{MIN:{value:new vu(Qa,Xu.EMPTY_NODE)},MAX:{value:new vu(Ya,Zu)}}),kn.__EMPTY_NODE=Xu.EMPTY_NODE,Mu.__childrenNodeConstructor=Xu,Ru=Su=Zu,Pu=tc;var ec,nc,rc=(Qi(ic,ec=H),ic.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},ic.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},ic.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node);return 0===(r=n.compareTo(r))?Xa(t.name,e.name):r},ic.prototype.makePost=function(t,e){return t=tc(t),t=Xu.EMPTY_NODE.updateChild(this.indexPath_,t),new vu(e,t)},ic.prototype.maxPost=function(){var t=Xu.EMPTY_NODE.updateChild(this.indexPath_,Zu);return new vu(Ya,t)},ic.prototype.toString=function(){return Ys(this.indexPath_,0).join("/")},ic);function ic(t){var e=ec.call(this)||this;return e.indexPath_=t,oo(!Js(t)&&".priority"!==Hs(t),"Can't create PathIndex with empty path or .priority key"),e}function oc(){return null!==nc&&nc.apply(this,arguments)||this}function ac(t){if(t===""+rs)return"-";var e=is(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;0<=i&&"z"===n[i];)i--;return-1===i?Ya:(e=n[i],e=hc.charAt(hc.indexOf(e)+1),n[i]=e,n.slice(0,i+1).join(""))}function sc(t){if(t===""+ns)return Qa;var e=is(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?""+rs:(delete n[n.length-1],n.join("")):(n[n.length-1]=hc.charAt(hc.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))}var uc,cc,lc=new(Qi(oc,nc=H),oc.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?Xa(t.name,e.name):n},oc.prototype.isDefinedOn=function(t){return!0},oc.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},oc.prototype.minPost=function(){return vu.MIN},oc.prototype.maxPost=function(){return vu.MAX},oc.prototype.makePost=function(t,e){return t=tc(t),new vu(e,t)},oc.prototype.toString=function(){return".value"},oc),hc="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",fc=(uc=0,cc=[],function(t){var e=t===uc;uc=t;for(var n=new Array(8),r=7;0<=r;r--)n[r]=hc.charAt(t%64),t=Math.floor(t/64);oo(0===t,"Cannot push at time == 0");var i=n.join("");if(e){for(r=11;0<=r&&63===cc[r];r--)cc[r]=0;cc[r]++}else for(r=0;r<12;r++)cc[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)i+=hc.charAt(cc[r]);return oo(20===i.length,"nextPushId: Length should be 20."),i});function pc(t){return{type:"value",snapshotNode:t}}function dc(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function vc(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function yc(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var gc=(mc.prototype.updateChild=function(t,e,n,r,i,o){oo(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(vc(e,a)):oo(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(dc(e,n)):o.trackChildChange(yc(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},mc.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Uu,(function(t,r){e.hasChild(t)||n.trackChildChange(vc(t,r))})),e.isLeafNode()||e.forEachChild(Uu,(function(e,r){var i;t.hasChild(e)?(i=t.getImmediateChild(e)).equals(r)||n.trackChildChange(yc(e,r,i)):n.trackChildChange(dc(e,r))}))),e.withIndex(this.index_)},mc.prototype.updatePriority=function(t,e){return t.isEmpty()?Xu.EMPTY_NODE:t.updatePriority(e)},mc.prototype.filtersNodes=function(){return!1},mc.prototype.getIndexedFilter=function(){return this},mc.prototype.getIndex=function(){return this.index_},mc);function mc(t){this.index_=t}var bc=(wc.prototype.getStartPost=function(){return this.startPost_},wc.prototype.getEndPost=function(){return this.endPost_},wc.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},wc.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new vu(e,n))||(n=Xu.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},wc.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Xu.EMPTY_NODE);var r=(r=e.withIndex(this.index_)).updatePriority(Xu.EMPTY_NODE),i=this;return e.forEachChild(Uu,(function(t,e){i.matches(new vu(t,e))||(r=r.updateImmediateChild(t,Xu.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},wc.prototype.updatePriority=function(t,e){return t},wc.prototype.filtersNodes=function(){return!0},wc.prototype.getIndexedFilter=function(){return this.indexedFilter_},wc.prototype.getIndex=function(){return this.index_},wc.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},wc.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},wc);function wc(t){this.indexedFilter_=new gc(t.getIndex()),this.index_=t.getIndex(),this.startPost_=wc.getStartPost_(t),this.endPost_=wc.getEndPost_(t)}var _c=(Tc.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new vu(e,n))||(n=Xu.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},Tc.prototype.updateFullNode=function(t,e,n){if(e.isLeafNode()||e.isEmpty())r=Xu.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){var r=Xu.EMPTY_NODE.withIndex(this.index_),i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Xu.EMPTY_NODE);var s,u=void 0,c=void 0,l=void 0;i=void 0,l=this.reverse_?(i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost(),s=this.index_.getCompare(),function(t,e){return s(e,t)}):(i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),this.index_.getCompare()),o=0;for(var h=!1;i.hasNext();)a=i.getNext(),(h=!h&&l(u,a)<=0||h)&&o<this.limit_&&l(a,c)<=0?o++:r=r.updateImmediateChild(a.name,Xu.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},Tc.prototype.updatePriority=function(t,e){return t},Tc.prototype.filtersNodes=function(){return!0},Tc.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},Tc.prototype.getIndex=function(){return this.index_},Tc.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o,a;a=this.reverse_?(o=this.index_.getCompare(),function(t,e){return o(e,t)}):this.index_.getCompare();var s=t;oo(s.numChildren()===this.limit_,"");var u=new vu(e,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(e)){for(var h=s.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:a(f,u);return l&&!n.isEmpty()&&0<=p?(null!=i&&i.trackChildChange(yc(e,n,h)),s.updateImmediateChild(e,n)):(null!=i&&i.trackChildChange(vc(e,h)),h=s.updateImmediateChild(e,Xu.EMPTY_NODE),null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(dc(f.name,f.node)),h.updateImmediateChild(f.name,f.node)):h)}return!n.isEmpty()&&l&&0<=a(c,u)?(null!=i&&(i.trackChildChange(vc(c.name,c.node)),i.trackChildChange(dc(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(c.name,Xu.EMPTY_NODE)):t},Tc);function Tc(t){this.rangedFilter_=new bc(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var Ec=(Ic.prototype.hasStart=function(){return this.startSet_},Ic.prototype.hasStartAfter=function(){return this.startAfterSet_},Ic.prototype.hasEndBefore=function(){return this.endBeforeSet_},Ic.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},Ic.prototype.getIndexStartValue=function(){return oo(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},Ic.prototype.getIndexStartName=function(){return oo(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Qa},Ic.prototype.hasEnd=function(){return this.endSet_},Ic.prototype.getIndexEndValue=function(){return oo(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},Ic.prototype.getIndexEndName=function(){return oo(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ya},Ic.prototype.hasLimit=function(){return this.limitSet_},Ic.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},Ic.prototype.getLimit=function(){return oo(this.limitSet_,"Only valid if limit has been set"),this.limit_},Ic.prototype.getIndex=function(){return this.index_},Ic.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},Ic.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Uu},Ic.prototype.copy=function(){var t=new Ic;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},Ic);function Ic(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Uu}function Sc(t,e,n){return(t=t.copy()).startSet_=!0,t.indexStartValue_=e=void 0===e?null:e,null!=n?(t.startNameSet_=!0,t.indexStartName_=n):(t.startNameSet_=!1,t.indexStartName_=""),t}function kc(t,e,n){return(t=t.copy()).endSet_=!0,t.indexEndValue_=e=void 0===e?null:e,void 0!==n?(t.endNameSet_=!0,t.indexEndName_=n):(t.endNameSet_=!1,t.indexEndName_=""),t}function Cc(t,e){return(t=t.copy()).index_=e,t}function xc(t){var e,n={};return t.isDefault()||(e=t.index_===Uu?"$priority":t.index_===lc?"$value":t.index_===bu?"$key":(oo(t.index_ instanceof rc,"Unrecognized index type!"),t.index_.toString()),n.orderBy=Ao(e),t.startSet_&&(n.startAt=Ao(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Ao(t.indexStartName_))),t.endSet_&&(n.endAt=Ao(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Ao(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function Ac(t){var e,n={};return t.startSet_&&(n.sp=t.indexStartValue_,t.startNameSet_&&(n.sn=t.indexStartName_)),t.endSet_&&(n.ep=t.indexEndValue_,t.endNameSet_&&(n.en=t.indexEndName_)),t.limitSet_&&(n.l=t.limit_,""===(e=t.viewFrom_)&&(e=t.isViewFromLeft()?"l":"r"),n.vf=e),t.index_!==Uu&&(n.i=t.index_.toString()),n}var Oc,Nc=(Qi(Pc,Oc=W),Pc.prototype.reportStats=function(t){throw new Error("Method not implemented.")},Pc.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(oo(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},Pc.prototype.listen=function(t,e,n,r){var i=this,o=t._path.toString();this.log_("Listen called for "+o+" "+t._queryIdentifier);var a=Pc.getListenId_(t,n),s={};this.listens_[a]=s,t=xc(t._queryParams),this.restRequest_(o+".json",t,(function(t,e){null===(t=404===t?e=null:t)&&i.onDataUpdate_(o,e,!1,n),Po(i.listens_,a)===s&&r(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},Pc.prototype.unlisten=function(t,e){e=Pc.getListenId_(t,e),delete this.listens_[e]},Pc.prototype.get=function(t){var e=this,n=xc(t._queryParams),r=t._path.toString(),i=new lo;return this.restRequest_(r+".json",n,(function(t,n){null===(t=404===t?n=null:t)?(e.onDataUpdate_(r,n,!1,null),i.resolve(n)):i.reject(new Error(n))})),i.promise},Pc.prototype.refreshAuthToken=function(t){},Pc.prototype.restRequest_=function(t,e,n){var r=this;return(e=void 0===e?{}:e).format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){i=(o=Zi(i,2))[0];var o=o[1];i&&i.accessToken&&(e.auth=i.accessToken),o&&o.token&&(e.ac=o.token);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+function(t){for(var e=[],n=0,r=Object.entries(t);n<r.length;n++){var i=r[n];!function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}(i[0],i[1])}return e.length?"&"+e.join("&"):""}(e);r.log_("Sending REST request for "+a);var s=new XMLHttpRequest;s.onreadystatechange=function(){if(n&&4===s.readyState){r.log_("REST Response for "+a+" received. status:",s.status,"response:",s.responseText);var t=null;if(200<=s.status&&s.status<300){try{t=xo(s.responseText)}catch(t){Ga("Failed to parse JSON response for "+a+": "+s.responseText)}n(null,t)}else 401!==s.status&&404!==s.status&&Ga("Got unsuccessful REST response for "+a+" Status: "+s.status),n(s.status);n=null}},s.open("GET",a,!0),s.send()}))},Pc);function Pc(t,e,n,r){var i=Oc.call(this)||this;return i.repoInfo_=t,i.onDataUpdate_=e,i.authTokenProvider_=n,i.appCheckTokenProvider_=r,i.log_=Ha("p:rest:"),i.listens_={},i}var Rc=(Dc.prototype.getNode=function(t){return this.rootNode_.getChild(t)},Dc.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},Dc);function Dc(){this.rootNode_=Xu.EMPTY_NODE}function Lc(){return{value:null,children:new Map}}function Mc(t,e,n){var r;Js(e)?(t.value=n,t.children.clear()):null!==t.value?t.value=t.value.updateChild(e,n):(r=Hs(e),t.children.has(r)||t.children.set(r,Lc()),Mc(t.children.get(r),e=Gs(e),n))}function jc(t,e,n){var r;null!==t.value?n(e,t.value):(r=function(t,r){jc(r,new Bs(e.toString()+"/"+t),n)},t.children.forEach((function(t,e){r(e,t)})))}var Fc=(Uc.prototype.get=function(){var t=this.collection_.get(),e=Yi({},t);return this.last_&&Ja(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},Uc);function Uc(t){this.collection_=t,this.last_=null}var Vc,qc=(Bc.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;Ja(e,(function(e,i){0<i&&No(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),ts(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},Bc);function Bc(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Fc(t),t=1e4+2e4*Math.random(),ts(this.reportStats_.bind(this),Math.floor(t))}function zc(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}(js=Vc=Vc||{})[js.OVERWRITE=0]="OVERWRITE",js[js.MERGE=1]="MERGE",js[js.ACK_USER_WRITE=2]="ACK_USER_WRITE",js[js.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Kc=(Hc.prototype.operationForChild=function(t){if(Js(this.path)){if(null!=this.affectedTree.value)return oo(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new Bs(t));return new Hc(Ks(),e,this.revert)}return oo(Hs(this.path)===t,"operationForChild called for unrelated child."),new Hc(Gs(this.path),this.affectedTree,this.revert)},Hc);function Hc(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Vc.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}var Wc=(Gc.prototype.operationForChild=function(t){return Js(this.path)?new Gc(this.source,Ks()):new Gc(this.source,Gs(this.path))},Gc);function Gc(t,e){this.source=t,this.path=e,this.type=Vc.LISTEN_COMPLETE}var Qc=(Yc.prototype.operationForChild=function(t){return Js(this.path)?new Yc(this.source,Ks(),this.snap.getImmediateChild(t)):new Yc(this.source,Gs(this.path),this.snap)},Yc);function Yc(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Vc.OVERWRITE}var Xc=($c.prototype.operationForChild=function(t){if(Js(this.path)){var e=this.children.subtree(new Bs(t));return e.isEmpty()?null:e.value?new Qc(this.source,Ks(),e.value):new $c(this.source,Ks(),e)}return oo(Hs(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new $c(this.source,Gs(this.path),this.children)},$c.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},$c);function $c(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Vc.MERGE}var Jc=(Zc.prototype.isFullyInitialized=function(){return this.fullyInitialized_},Zc.prototype.isFiltered=function(){return this.filtered_},Zc.prototype.isCompleteForPath=function(t){return Js(t)?this.isFullyInitialized()&&!this.filtered_:(t=Hs(t),this.isCompleteForChild(t))},Zc.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},Zc.prototype.getNode=function(){return this.node_},Zc);function Zc(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var tl,el=function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()};function nl(t,e,n,r,i,o){(r=r.filter((function(t){return t.type===n}))).sort((function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw ao("Should only compare child_ events.");return e=new vu(e.childName,e.snapshotNode),n=new vu(n.childName,n.snapshotNode),t.index_.compare(e,n)}(t,e,n)})),r.forEach((function(n){var r,a,s,u=(r=t,s=o,"value"===(a=n).type||"child_removed"===a.type||(a.prevName=s.getPredecessorChildName(a.childName,a.snapshotNode,r.index_)),a);i.forEach((function(r){r.respondsTo(n.type)&&e.push(r.createEvent(u,t.query_))}))}))}function rl(t,e){return{eventCache:t,serverCache:e}}function il(t,e,n,r){return rl(new Jc(e,n,r),t.serverCache)}function ol(t,e,n,r){return rl(t.eventCache,new Jc(e,n,r))}function al(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function sl(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var ul=(cl.fromObject=function(t){var e=new cl(null);return Ja(t,(function(t,n){e=e.set(new Bs(t),n)})),e},cl.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},cl.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Ks(),value:this.value};if(Js(t))return null;var n=Hs(t),r=this.children.get(n);return null===r||null==(e=r.findRootMostMatchingPathAndValue(Gs(t),e))?null:{path:$s(new Bs(n),e.path),value:e.value}},cl.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},cl.prototype.subtree=function(t){if(Js(t))return this;var e=Hs(t);return null!==(e=this.children.get(e))?e.subtree(Gs(t)):new cl(null)},cl.prototype.set=function(t,e){if(Js(t))return new cl(e,this.children);var n=Hs(t);return e=(this.children.get(n)||new cl(null)).set(Gs(t),e),e=this.children.insert(n,e),new cl(this.value,e)},cl.prototype.remove=function(t){if(Js(t))return this.children.isEmpty()?new cl(null):new cl(null,this.children);var e=Hs(t),n=this.children.get(e);return n?(n=n.remove(Gs(t)),t=void 0,t=n.isEmpty()?this.children.remove(e):this.children.insert(e,n),null===this.value&&t.isEmpty()?new cl(null):new cl(this.value,t)):this},cl.prototype.get=function(t){if(Js(t))return this.value;var e=Hs(t);return(e=this.children.get(e))?e.get(Gs(t)):null},cl.prototype.setTree=function(t,e){if(Js(t))return e;var n=Hs(t);return t=(this.children.get(n)||new cl(null)).setTree(Gs(t),e),e=void 0,e=t.isEmpty()?this.children.remove(n):this.children.insert(n,t),new cl(this.value,e)},cl.prototype.fold=function(t){return this.fold_(Ks(),t)},cl.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_($s(t,r),e)})),e(t,this.value,n)},cl.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Ks(),e)},cl.prototype.findOnPath_=function(t,e,n){if(r=!!this.value&&n(e,this.value))return r;if(Js(t))return null;var r,i=Hs(t);return(r=this.children.get(i))?r.findOnPath_(Gs(t),$s(e,i),n):null},cl.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Ks(),e)},cl.prototype.foreachOnPath_=function(t,e,n){if(Js(t))return this;this.value&&n(e,this.value);var r=Hs(t),i=this.children.get(r);return i?i.foreachOnPath_(Gs(t),$s(e,r),n):new cl(null)},cl.prototype.foreach=function(t){this.foreach_(Ks(),t)},cl.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_($s(t,n),e)})),this.value&&e(t,this.value)},cl.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},cl);function cl(t,e){void 0===e&&(e=tl=tl||new ku(Ra)),this.value=t,this.children=e}var ll=(hl.empty=function(){return new hl(new ul(null))},hl);function hl(t){this.writeTree_=t}function fl(t,e,n){if(Js(e))return new ll(new ul(n));if(null!=(o=t.writeTree_.findRootMostValueAndPath(e))){var r=o.path,i=o.value,o=Zs(r,e);return i=i.updateChild(o,n),new ll(t.writeTree_.set(r,i))}return n=new ul(n),n=t.writeTree_.setTree(e,n),new ll(n)}function pl(t,e,n){var r=t;return Ja(n,(function(t,n){r=fl(r,$s(e,t),n)})),r}function dl(t,e){return Js(e)?ll.empty():(e=t.writeTree_.setTree(e,new ul(null)),new ll(e))}function vl(t,e){return null!=yl(t,e)}function yl(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(Zs(n.path,e)):null}function gl(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Uu,(function(t,n){e.push(new vu(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new vu(t,n.value))})),e}function ml(t,e){if(Js(e))return t;var n=yl(t,e);return new ll(null!=n?new ul(n):t.writeTree_.subtree(e))}function bl(t){return t.writeTree_.isEmpty()}function wl(t,e){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var i=null;return n.children.inorderTraversal((function(n,o){".priority"===n?(oo(null!==o.value,"Priority writes must always be leaf nodes"),i=o.value):r=t($s(e,n),o,r)})),r=r.getChild(e).isEmpty()||null===i?r:r.updateChild($s(e,".priority"),i)}(Ks(),t.writeTree_,e)}function _l(t,e){return Nl(e,t)}function Tl(t){return t.visible}function El(t,e,n){for(var r=ll.empty(),i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,s=void 0;if(o.snap)nu(n,a)?r=fl(r,s=Zs(n,a),o.snap):nu(a,n)&&(s=Zs(a,n),r=fl(r,Ks(),o.snap.getChild(s)));else{if(!o.children)throw ao("WriteRecord should have .snap or .children");nu(n,a)?r=pl(r,s=Zs(n,a),o.children):nu(a,n)&&(Js(s=Zs(a,n))?r=pl(r,Ks(),o.children):(o=Po(o.children,Hs(s)))&&(s=o.getChild(Gs(s)),r=fl(r,Ks(),s)))}}}return r}function Il(t,e,n,r,i){if(r||i){var o=ml(t.visibleWrites,e);return!i&&bl(o)?n:i||null!=n||vl(o,Ks())?wl(El(t.allWrites,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(nu(t.path,e)||nu(e,t.path))}),e),n||Xu.EMPTY_NODE):null}return null!=(o=yl(t.visibleWrites,e))?o:bl(t=ml(t.visibleWrites,e))?n:null!=n||vl(t,Ks())?wl(t,n||Xu.EMPTY_NODE):null}function Sl(t,e,n,r){return Il(t.writeTree,t.treePath,e,n,r)}function kl(t,e){return function(t,e,n){var r=Xu.EMPTY_NODE,i=yl(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Uu,(function(t,e){r=r.updateImmediateChild(t,e)})),r;if(n){var o=ml(t.visibleWrites,e);return n.forEachChild(Uu,(function(t,e){e=wl(ml(o,new Bs(t)),e),r=r.updateImmediateChild(t,e)})),gl(o).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}return gl(ml(t.visibleWrites,e)).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}(t.writeTree,t.treePath,e)}function Cl(t,e,n,r){return i=t.writeTree,t=t.treePath,e=e,r=r,oo(n||r,"Either existingEventSnap or existingServerSnap must exist"),t=$s(t,e),vl(i.visibleWrites,t)?null:bl(t=ml(i.visibleWrites,t))?r.getChild(e):wl(t,r.getChild(e));var i}function xl(t,e){return n=t.writeTree,e=$s(t.treePath,e),yl(n.visibleWrites,e);var n}function Al(t,e,n){return r=t.writeTree,i=t.treePath,t=n,e=$s(i,n=e),null!=(i=yl(r.visibleWrites,e))?i:t.isCompleteForChild(n)?wl(ml(r.visibleWrites,e),t.getNode().getImmediateChild(n)):null;var r,i}function Ol(t,e){return Nl($s(t.treePath,e),t.writeTree)}function Nl(t,e){return{treePath:t,writeTree:e}}var Pl=(Rl.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;oo("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),oo(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,yc(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,vc(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,dc(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw ao("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,yc(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},Rl.prototype.getChanges=function(){return Array.from(this.changeMap.values())},Rl);function Rl(){this.changeMap=new Map}function Dl(){}var Ll=new(Dl.prototype.getCompleteChild=function(t){return null},Dl.prototype.getChildAfterChild=function(t,e,n){return null},Dl),Ml=(jl.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;return e.isCompleteForChild(t)?e.getNode().getImmediateChild(t):(e=null!=this.optCompleteServerCache_?new Jc(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache,Al(this.writes_,t,e))},jl.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:sl(this.viewCache_);return 0===(t=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,a){var s;if(null!=(e=yl(t=ml(t.visibleWrites,e),Ks())))s=e;else{if(null==n)return[];s=wl(t,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var u=[],c=a.getCompare(),l=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),h=l.getNext();h&&u.length<i;)0!==c(h,r)&&u.push(h),h=l.getNext();return u}(t.writeTree,t.treePath,e,n,r,i,o)}(this.writes_,r,e,1,n,t)).length?null:t[0]},jl);function jl(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}function Fl(t,e,n,r,i,o){var a=e.eventCache;if(null!=xl(r,n))return e;var s,u,c,l,h,f=void 0;return h=Js(n)?(oo(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()?(s=kl(r,(s=sl(e))instanceof Xu?s:Xu.EMPTY_NODE),t.filter.updateFullNode(e.eventCache.getNode(),s,o)):(u=Sl(r,sl(e)),t.filter.updateFullNode(e.eventCache.getNode(),u,o))):".priority"===(u=Hs(n))?(oo(1===Ws(n),"Can't have a priority with additional path components"),null!=(l=Cl(r,n,c=a.getNode(),f=e.serverCache.getNode()))?t.filter.updatePriority(c,l):a.getNode()):(c=Gs(n),l=void 0,null!=(l=a.isCompleteForChild(u)?(f=e.serverCache.getNode(),null!=(f=Cl(r,n,a.getNode(),f))?a.getNode().getImmediateChild(u).updateChild(c,f):a.getNode().getImmediateChild(u)):Al(r,u,e.serverCache))?t.filter.updateChild(a.getNode(),u,l,c,i,o):a.getNode()),il(e,h,a.isFullyInitialized()||Js(n),t.filter.filtersNodes())}function Ul(t,e,n,r,i,o,a,s){var u=e.serverCache,c=a?t.filter:t.filter.getIndexedFilter();if(Js(n))h=c.updateFullNode(u.getNode(),r,null);else if(c.filtersNodes()&&!u.isFiltered())var l=u.getNode().updateChild(n,r),h=c.updateFullNode(u.getNode(),l,null);else{if(a=Hs(n),!u.isCompleteForPath(n)&&1<Ws(n))return e;l=Gs(n),r=u.getNode().getImmediateChild(a).updateChild(l,r),h=".priority"===a?c.updatePriority(u.getNode(),r):c.updateChild(u.getNode(),a,r,l,Ll,null)}return Fl(t,c=ol(e,h,u.isFullyInitialized()||Js(n),c.filtersNodes()),n,i,new Ml(i,c,o),s)}function Vl(t,e,n,r,i,o,a){var s,u,c=e.eventCache,l=new Ml(i,e,o);return Js(n)?(u=t.filter.updateFullNode(e.eventCache.getNode(),r,a),il(e,u,!0,t.filter.filtersNodes())):".priority"===(s=Hs(n))?(u=t.filter.updatePriority(e.eventCache.getNode(),r),il(e,u,c.isFullyInitialized(),c.isFiltered())):(i=Gs(n),o=c.getNode().getImmediateChild(s),u=void 0,u=Js(i)?r:null!=(n=l.getCompleteChild(s))?".priority"===Qs(i)&&n.getChild(Xs(i)).isEmpty()?n:n.updateChild(i,r):Xu.EMPTY_NODE,o.equals(u)?e:il(e,t.filter.updateChild(c.getNode(),s,u,i,l,a),c.isFullyInitialized(),t.filter.filtersNodes()))}function ql(t,e){return t.eventCache.isCompleteForChild(e)}function Bl(t,e,n){return n.foreach((function(t,n){e=e.updateChild(t,n)})),e}function zl(t,e,n,r,i,o,a,s){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u=e,c=(r=Js(n)?r:new ul(null).setTree(n,r),e.serverCache.getNode());return r.children.inorderTraversal((function(n,r){c.hasChild(n)&&(r=Bl(0,e.serverCache.getNode().getImmediateChild(n),r),u=Ul(t,u,new Bs(n),r,i,o,a,s))})),r.children.inorderTraversal((function(n,r){var l=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;c.hasChild(n)||l||(r=Bl(0,e.serverCache.getNode().getImmediateChild(n),r),u=Ul(t,u,new Bs(n),r,i,o,a,s))})),u}var Kl,Hl=(Object.defineProperty(Wl.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),Wl);function Wl(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_._queryParams,r=new gc(n.getIndex()),i=(o=n).loadsAllData()?new gc(o.getIndex()):new(o.hasLimit()?_c:bc)(o);this.processor_={filter:i},t=e.serverCache,n=e.eventCache;var o=r.updateFullNode(Xu.EMPTY_NODE,t.getNode(),null);e=i.updateFullNode(Xu.EMPTY_NODE,n.getNode(),null),r=new Jc(o,t.isFullyInitialized(),r.filtersNodes()),i=new Jc(e,n.isFullyInitialized(),i.filtersNodes()),this.viewCache_=rl(i,r),this.eventGenerator_=new el(this.query_)}function Gl(t){return 0===t.eventRegistrations_.length}function Ql(t,e,n){var r,i=[];if(n&&(oo(null==e,"A cancel should cancel all event registrations."),r=t.query._path,t.eventRegistrations_.forEach((function(t){(t=t.createCancelEvent(n,r))&&i.push(t)}))),e){for(var o=[],a=0;a<t.eventRegistrations_.length;++a){var s=t.eventRegistrations_[a];if(s.matches(e)){if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(a+1));break}}else o.push(s)}t.eventRegistrations_=o}else t.eventRegistrations_=[];return i}function Yl(t,e,n,r){e.type===Vc.MERGE&&null!==e.source.queryId&&(oo(sl(t.viewCache_),"We should always have a full cache before handling merges"),oo(al(t.viewCache_),"Missing event cache, even though we have a server cache"));var i=t.viewCache_;return e=function(t,e,n,r,i){var o,a,s,u,c,l,h,f,p=new Pl;if(n.type===Vc.OVERWRITE)var d=n,v=d.source.fromUser?Vl(t,e,d.path,d.snap,r,i,p):(oo(d.source.fromServer,"Unknown source."),o=d.source.tagged||e.serverCache.isFiltered()&&!Js(d.path),Ul(t,e,d.path,d.snap,r,i,o,p));else if(n.type===Vc.MERGE){var y=n;v=y.source.fromUser?(a=t,s=e,u=y.path,d=y.children,c=r,l=i,h=p,f=s,d.foreach((function(t,e){t=$s(u,t),ql(s,Hs(t))&&(f=Vl(a,f,t,e,c,l,h))})),d.foreach((function(t,e){t=$s(u,t),ql(s,Hs(t))||(f=Vl(a,f,t,e,c,l,h))})),f):(oo(y.source.fromServer,"Unknown source."),o=y.source.tagged||e.serverCache.isFiltered(),zl(t,e,y.path,y.children,r,i,o,p))}else if(n.type===Vc.ACK_USER_WRITE){var g=n;v=g.revert?function(t,e,n,r,i,o){var a;if(null!=xl(r,n))return e;var s,u,c=new Ml(r,e,i),l=e.eventCache.getNode();return i=void 0,Js(n)||".priority"===Hs(n)?(u=void 0,u=e.serverCache.isFullyInitialized()?Sl(r,sl(e)):(s=e.serverCache.getNode(),oo(s instanceof Xu,"serverChildren would be complete if leaf node"),kl(r,s)),i=t.filter.updateFullNode(l,u,o)):(null==(u=Al(r,s=Hs(n),e.serverCache))&&e.serverCache.isCompleteForChild(s)&&(u=l.getImmediateChild(s)),(i=null!=u?t.filter.updateChild(l,s,u,Gs(n),c,o):e.eventCache.getNode().hasChild(s)?t.filter.updateChild(l,s,Xu.EMPTY_NODE,Gs(n),c,o):l).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=Sl(r,sl(e))).isLeafNode()&&(i=t.filter.updateFullNode(i,a,o))),a=e.serverCache.isFullyInitialized()||null!=xl(r,Ks()),il(e,i,a,t.filter.filtersNodes())}(t,e,g.path,r,i,p):function(t,e,n,r,i,o,a){if(null!=xl(i,n))return e;var s=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(Js(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Ul(t,e,n,u.getNode().getChild(n),i,o,s,a);if(Js(n)){var c=new ul(null);return u.getNode().forEachChild(bu,(function(t,e){c=c.set(new Bs(t),e)})),zl(t,e,n,c,i,o,s,a)}return e}var l=new ul(null);return r.foreach((function(t,e){var r=$s(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))})),zl(t,e,n,l,i,o,s,a)}(t,e,g.path,g.affectedTree,r,i,p)}else{if(n.type!==Vc.LISTEN_COMPLETE)throw ao("Unknown operation type: "+n.type);g=t,i=n.path,t=r,n=p,v=Fl(g,r=ol(e,(r=e.serverCache).getNode(),r.isFullyInitialized()||Js(i),r.isFiltered()),i,t,Ll,n)}return function(t,e,n){var r,i,o=e.eventCache;o.isFullyInitialized()&&(r=o.getNode().isLeafNode()||o.getNode().isEmpty(),i=al(t),(0<n.length||!t.eventCache.isFullyInitialized()||r&&!o.getNode().equals(i)||!o.getNode().getPriority().equals(i.getPriority()))&&n.push(pc(al(e))))}(e,v,p=p.getChanges()),{viewCache:v,changes:p}}(t.processor_,i,e,n,r),n=t.processor_,r=e.viewCache,oo(r.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),oo(r.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed"),oo(e.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=e.viewCache,Xl(t,e.changes,e.viewCache.eventCache.getNode(),null)}function Xl(t,e,n,r){return r=r?[r]:t.eventRegistrations_,function(t,e,n,r){var i=[],o=[];return e.forEach((function(e){var n;"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push((n=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:n}))})),nl(t,i,"child_removed",e,r,n),nl(t,i,"child_added",e,r,n),nl(t,i,"child_moved",o,r,n),nl(t,i,"child_changed",e,r,n),nl(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r)}var $l,Jl=function(){this.views=new Map};function Zl(t,e,n,r){var i,o,a=e.source.queryId;if(null!==a){var s=t.views.get(a);return oo(null!=s,"SyncTree gave us an op for an invalid query."),Yl(s,e,n,r)}var u=[];try{for(var c=Ji(t.views.values()),l=c.next();!l.done;l=c.next())s=l.value,u=u.concat(Yl(s,e,n,r))}catch(t){i={error:t}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return u}function th(t,e,n,r,i){var o=e._queryIdentifier;return(t=t.views.get(o))?t:(t=!1,t=!!(o=Sl(n,i?r:null))||(o=r instanceof Xu?kl(n,r):Xu.EMPTY_NODE,!1),i=rl(new Jc(o,t,!1),new Jc(r,i,!1)),new Hl(e,i))}function eh(t){var e,n,r=[];try{for(var i=Ji(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function nh(t,e){var n,r,i,o,a,s=null;try{for(var u=Ji(t.views.values()),c=u.next();!c.done;c=u.next()){var l=c.value;s=s||(o=e,a=void 0,(a=sl((i=l).viewCache_))&&(i.query._queryParams.loadsAllData()||!Js(o)&&!a.getImmediateChild(Hs(o)).isEmpty())?a.getChild(o):null)}}catch(t){n={error:t}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return s}function rh(t,e){return e._queryParams.loadsAllData()?ah(t):(e=e._queryIdentifier,t.views.get(e))}function ih(t,e){return null!=rh(t,e)}function oh(t){return null!=ah(t)}function ah(t){var e,n;try{for(var r=Ji(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var sh=1,uh=function(t){this.listenProvider_=t,this.syncPointTree_=new ul(null),this.pendingWriteTree_={visibleWrites:ll.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function ch(t,e,n,r,i){var o,a,s,u;return o=t.pendingWriteTree_,a=e,s=n,u=i,oo((r=r)>o.lastWriteId,"Stacking an older write on top of newer ones"),o.allWrites.push({path:a,snap:s,writeId:r,visible:u=void 0===u||u}),u&&(o.visibleWrites=fl(o.visibleWrites,a,s)),o.lastWriteId=r,i?vh(t,new Qc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function lh(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex((function(t){return t.writeId===e}));oo(0<=n,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i,o=r.visible,a=!1,s=t.allWrites.length-1;o&&0<=s;){var u=t.allWrites[s];u.visible&&(n<=s&&function(t,e){if(t.snap)return nu(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&nu($s(t.path,n),e))return!0;return!1}(u,r.path)?o=!1:nu(r.path,u.path)&&(a=!0)),s--}return!!o&&(a?((i=t).visibleWrites=El(i.allWrites,Tl,Ks()),0<i.allWrites.length?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1):r.snap?t.visibleWrites=dl(t.visibleWrites,r.path):Ja(r.children,(function(e){t.visibleWrites=dl(t.visibleWrites,$s(r.path,e))})),!0)}(t.pendingWriteTree_,e)){var i=new ul(null);return null!=r.snap?i=i.set(Ks(),!0):Ja(r.children,(function(t){i=i.set(new Bs(t),!0)})),vh(t,new Kc(r.path,i,n))}return[]}function hh(t,e,n){return vh(t,new Qc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function fh(t,e,n,r){var i=e._path,o=t.syncPointTree_.get(i),a=[];if(o&&("default"===e._queryIdentifier||ih(o,e))){var s=function(t,e,n,r){var i,o,a=e._queryIdentifier,s=[],u=[],c=oh(t);if("default"===a)try{for(var l=Ji(t.views.entries()),h=l.next();!h.done;h=l.next()){var f=Zi(h.value,2),p=f[0],d=f[1];u=u.concat(Ql(d,n,r)),Gl(d)&&(t.views.delete(p),d.query._queryParams.loadsAllData()||s.push(d.query))}}catch(t){i={error:t}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}else(d=t.views.get(a))&&(u=u.concat(Ql(d,n,r)),Gl(d)&&(t.views.delete(a),d.query._queryParams.loadsAllData()||s.push(d.query)));return c&&!oh(t)&&s.push((oo(Kl,"Reference.ts has not been loaded"),new Kl(e._repo,e._path))),{removed:s,events:u}}(o,e,n,r);if(0===o.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i)),n=s.removed,a=s.events,o=-1!==n.findIndex((function(t){return t._queryParams.loadsAllData()})),s=t.syncPointTree_.findOnPath(i,(function(t,e){return oh(e)})),o&&!s&&!(i=t.syncPointTree_.subtree(i)).isEmpty())for(var u=i.fold((function(t,e,n){if(e&&oh(e))return[ah(e)];var r=[];return e&&(r=eh(e)),Ja(n,(function(t,e){r=r.concat(e)})),r})),c=0;c<u.length;++c){var l=(h=u[c]).query,h=yh(t,h);t.listenProvider_.startListening(Th(l),gh(t,l),h.hashFn,h.onComplete)}!s&&0<n.length&&!r&&(o?t.listenProvider_.stopListening(Th(e),null):n.forEach((function(e){var n=t.queryToTagMap.get(mh(e));t.listenProvider_.stopListening(Th(e),n)}))),function(t,e){for(var n=0;n<e.length;++n){var r,i=e[n];i._queryParams.loadsAllData()||(r=mh(i),i=t.queryToTagMap.get(r),t.queryToTagMap.delete(r),t.tagToQueryMap.delete(i))}}(t,n)}return a}function ph(t,e,n){var r=e._path,i=null,o=!1;t.syncPointTree_.foreachOnPath(r,(function(t,e){t=Zs(t,r),i=i||nh(e,t),o=o||oh(e)}));var a=t.syncPointTree_.get(r);a?(o=o||oh(a),i=i||nh(a,Ks())):(a=new Jl,t.syncPointTree_=t.syncPointTree_.set(r,a)),null!=i?l=!0:(l=!1,i=Xu.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((function(t,e){(e=nh(e,Ks()))&&(i=i.updateImmediateChild(t,e))})));var s,u,c=ih(a,e);c||e._queryParams.loadsAllData()||(s=mh(e),oo(!t.queryToTagMap.has(s),"View does not exist, but we have a tag"),u=sh++,t.queryToTagMap.set(s,u),t.tagToQueryMap.set(u,s));var l=function(t,e,n,r,i,o){var a;return o=th(t,e,r,i,o),t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),o.eventRegistrations_.push(n),e=n,o=(n=o).viewCache_.eventCache,a=[],o.getNode().isLeafNode()||o.getNode().forEachChild(Uu,(function(t,e){a.push(dc(t,e))})),o.isFullyInitialized()&&a.push(pc(o.getNode())),Xl(n,a,o.getNode(),e)}(a,e,n,_l(t.pendingWriteTree_,r),i,l);return c||o||(a=rh(a,e),l=l.concat(function(t,e,n){var r=e._path,i=gh(t,e);if(n=yh(t,n),n=t.listenProvider_.startListening(Th(e),i,n.hashFn,n.onComplete),r=t.syncPointTree_.subtree(r),i)oo(!oh(r.value),"If we're adding a query, it shouldn't be shadowed");else for(var o=r.fold((function(t,e,n){if(!Js(t)&&e&&oh(e))return[ah(e).query];var r=[];return e&&(r=r.concat(eh(e).map((function(t){return t.query})))),Ja(n,(function(t,e){r=r.concat(e)})),r})),a=0;a<o.length;++a){var s=o[a];t.listenProvider_.stopListening(Th(s),gh(t,s))}return n}(t,e,a))),l}function dh(t,e,n){var r=t.pendingWriteTree_;return t=t.syncPointTree_.findOnPath(e,(function(t,n){if(t=nh(n,Zs(t,e)))return t})),Il(r,e,t,n,!0)}function vh(t,e){return function t(e,n,r,i){if(Js(e.path))return function t(e,n,r,i){var o=n.get(Ks());null==r&&null!=o&&(r=nh(o,Ks()));var a=[];return n.children.inorderTraversal((function(n,o){var s=r?r.getImmediateChild(n):null,u=Ol(i,n);(n=e.operationForChild(n))&&(a=a.concat(t(n,o,s,u)))})),a=o?a.concat(Zl(o,e,i,r)):a}(e,n,r,i);var o=n.get(Ks());null==r&&null!=o&&(r=nh(o,Ks()));var a=[],s=Hs(e.path),u=e.operationForChild(s),c=n.children.get(s);return c&&u&&(n=r?r.getImmediateChild(s):null,s=Ol(i,s),a=a.concat(t(u,c,n,s))),o?a.concat(Zl(o,e,i,r)):a}(e,t.syncPointTree_,null,_l(t.pendingWriteTree_,Ks()))}function yh(t,e){var n=e.query,r=gh(t,n);return{hashFn:function(){return(e.viewCache_.serverCache.getNode()||Xu.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=bh(t,n);return r?(r=(n=wh(r)).path,n=n.queryId,e=Zs(r,e),_h(t,r,new Wc(zc(n),e))):[]}(t,n._path,r):(i=n._path,vh(t,new Wc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},i)));var i=(i="Unknown Error","too_big"===(e=e)?i="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?i="Client doesn't have permission to access the desired data.":"unavailable"===e&&(i="The service is unavailable"),(i=new Error(e+" at "+n._path.toString()+": "+i)).code=e.toUpperCase(),i);return fh(t,n,null,i)}}}function gh(t,e){return e=mh(e),t.queryToTagMap.get(e)}function mh(t){return t._path.toString()+"$"+t._queryIdentifier}function bh(t,e){return t.tagToQueryMap.get(e)}function wh(t){var e=t.indexOf("$");return oo(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Bs(t.substr(0,e))}}function _h(t,e,n){var r=t.syncPointTree_.get(e);return oo(r,"Missing sync point for query tag that we're tracking"),Zl(r,n,_l(t.pendingWriteTree_,e),null)}function Th(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?(oo($l,"Reference.ts has not been loaded"),new $l(t._repo,t._path)):t}var Eh=(Ih.prototype.getImmediateChild=function(t){return new Ih(this.node_.getImmediateChild(t))},Ih.prototype.node=function(){return this.node_},Ih);function Ih(t){this.node_=t}var Sh=(kh.prototype.getImmediateChild=function(t){return t=$s(this.path_,t),new kh(this.syncTree_,t)},kh.prototype.node=function(){return dh(this.syncTree_,this.path_)},kh);function kh(t,e){this.syncTree_=t,this.path_=e}var Ch=function(t,e,n){return t&&"object"==typeof t?(oo(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?xh(t[".sv"],e,n):"object"==typeof t[".sv"]?Ah(t[".sv"],e):void oo(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},xh=function(t,e,n){if("timestamp"===t)return n.timestamp;oo(!1,"Unexpected server value: "+t)},Ah=function(t,e,n){return t.hasOwnProperty("increment")||oo(!1,"Unexpected server value: "+JSON.stringify(t,null,2)),"number"!=typeof(t=t.increment)&&oo(!1,"Unexpected increment value: "+t),e=e.node(),oo(null!=e,"Expected ChildrenNode.EMPTY_NODE for nulls"),e.isLeafNode()?"number"!=typeof(e=e.getValue())?t:e+t:t},Oh=function(t,e,n,r){return Ph(e,new Sh(n,t),r)},Nh=function(t,e,n){return Ph(t,new Eh(e),n)};function Ph(t,e,n){var r=t.getPriority().val(),i=Ch(r,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var o=t;return(r=Ch(o.getValue(),e,n))!==o.getValue()||i!==o.getPriority().val()?new Mu(r,tc(i)):t}var a=t=t;return i!==t.getPriority().val()&&(a=a.updatePriority(new Mu(i))),t.forEachChild(Uu,(function(t,r){var i=Ph(r,e.getImmediateChild(t),n);i!==r&&(a=a.updateImmediateChild(t,i))})),a}var Rh=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t=void 0===t?"":t,this.parent=e,this.node=n};function Dh(t,e){for(var n=e instanceof Bs?e:new Bs(e),r=t,i=Hs(n);null!==i;){var o=Po(r.node.children,i)||{children:{},childCount:0};r=new Rh(i,r,o),i=Hs(n=Gs(n))}return r}function Lh(t){return t.node.value}function Mh(t,e){t.node.value=e,function t(e){var n,r,i,o;null!==e.parent&&(n=e.parent,r=e.name,o=function(t){return void 0===Lh(t)&&!jh(t)}(i=e),e=No(n.node.children,r),o&&e?(delete n.node.children[r],n.node.childCount--,t(n)):o||e||(n.node.children[r]=i.node,n.node.childCount++,t(n)))}(t)}function jh(t){return 0<t.node.childCount}function Fh(t,e){Ja(t.node.children,(function(n,r){e(new Rh(n,t,r))}))}function Uh(t){return new Bs(null===t.parent?t.name:Uh(t.parent)+"/"+t.name)}function Vh(t){return"string"==typeof t&&0!==t.length&&!Hh.test(t)}function qh(t){return"string"==typeof t&&0!==t.length&&!Wh.test(t)}function Bh(t,e,n,r){if(!r||void 0!==e){var i=Bo(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var o=[];Ja(e,(function(t,e){if(t=new Bs(t),Xh(i,e,$s(n,t)),".priority"===Qs(t)&&!Qh(e))throw new Error(i+"contains an invalid value for '"+t.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(t)})),function(t,e){for(var n=0;n<e.length;n++)for(var r,i=Ys(r=e[n]),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!Vh(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(tu);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&nu(a,r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(i,o)}}function zh(t,e,n){if(!n||void 0!==e){if(Pa(e))throw new Error(Bo(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Qh(e))throw new Error(Bo(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function Kh(t,e,n,r){if(!(r&&void 0===n||Vh(n)))throw new Error(Bo(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}var Hh=/[\[\].#$\/\u0000-\u001F\u007F]/,Wh=/[\[\].#$\u0000-\u001F\u007F]/,Gh=10485760,Qh=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!Pa(t)||t&&"object"==typeof t&&No(t,".sv")},Yh=function(t,e,n,r){r&&void 0===e||Xh(Bo(t,"value"),e,n)},Xh=function t(e,n,r){var i=r instanceof Bs?new ru(r,e):r;if(void 0===n)throw new Error(e+"contains undefined "+ou(i));if("function"==typeof n)throw new Error(e+"contains a function "+ou(i)+" with contents = "+n.toString());if(Pa(n))throw new Error(e+"contains "+n.toString()+" "+ou(i));if("string"==typeof n&&n.length>Gh/3&&Ho(n)>Gh)throw new Error(e+"contains a string greater than "+Gh+" utf8 bytes "+ou(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){var o=!1,a=!1;if(Ja(n,(function(n,r){if(".value"===n)o=!0;else if(".priority"!==n&&".sv"!==n&&(a=!0,!Vh(n)))throw new Error(e+" contains an invalid key ("+n+") "+ou(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s;s=n,0<(n=i).parts_.length&&(n.byteLength_+=1),n.parts_.push(s),n.byteLength_+=Ho(s),iu(n),t(e,r,i),r=(n=i).parts_.pop(),n.byteLength_-=Ho(r),0<n.parts_.length&&--n.byteLength_})),o&&a)throw new Error(e+' contains ".value" child '+ou(i)+" in addition to actual children.")}},$h=function(t,e,n,r){if(!(r&&void 0===n||qh(n)))throw new Error(Bo(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Jh=function(t,e,n,r){n=n&&n.replace(/^\/*\.info(\/|$)/,"/"),$h(t,e,n,r)},Zh=function(t,e){if(".info"===Hs(e))throw new Error(t+" failed = Can't modify data under /.info/")},tf=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Vh(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!qh(n=(n=n)&&n.replace(/^\/*\.info(\/|$)/,"/")))throw new Error(Bo(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},ef=function(){this.eventLists_=[],this.recursionDepth_=0};function nf(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||eu(o,n.path)||(t.eventLists_.push(n),n=null),(n=null===n?{events:[],path:o}:n).events.push(i)}n&&t.eventLists_.push(n)}function rf(t,e,n){nf(t,n),af(t,(function(t){return eu(t,e)}))}function of(t,e,n){nf(t,n),af(t,(function(t){return nu(t,e)||nu(e,t)}))}function af(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(function(t){for(var e=0;e<t.events.length;e++){var n,r=t.events[e];null!==r&&(t.events[e]=null,n=r.getEventRunner(),Ba&&Ka("event: "+r.toString()),os(n))}}(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}var sf="repo_interrupt",uf=(cf.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},cf);function cf(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ef,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Lc(),this.transactionQueueTree_=new Rh,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}function lf(t){return t=t.infoData_.getNode(new Bs(".info/serverTimeOffset")).val()||0,(new Date).getTime()+t}function hf(t){return function(t){return(t=t||{}).timestamp=t.timestamp||(new Date).getTime(),t}({timestamp:lf(t)})}function ff(t,e,n,r,i){t.dataUpdateCount++;var o,a,s,u,c,l=new Bs(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n,e=l,0<(c=i?r?(o=Do(n,(function(t){return tc(t)})),function(t,e,n,r){var i=bh(t,r);return i?(i=(r=wh(i)).path,r=r.queryId,e=Zs(i,e),n=ul.fromObject(n),_h(t,i,new Xc(zc(r),e,n))):[]}(t.serverSyncTree_,l,o,i)):(u=tc(n),o=t.serverSyncTree_,a=l,s=u,null==(i=bh(o,u=i))?[]:(u=wh(i),i=u.path,u=u.queryId,a=Zs(i,a),_h(o,i,new Qc(zc(u),a,s)))):r?(u=Do(n,(function(t){return tc(t)})),a=t.serverSyncTree_,s=l,r=u,r=ul.fromObject(u),vh(a,new Xc({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},s,r))):(n=tc(n),hh(t.serverSyncTree_,l,n))).length&&(e=If(t,l)),of(t.eventQueue_,e,c)}function pf(t,e){df(t,"connected",e),!1===e&&function(t){wf(t,"onDisconnectEvents");var e=hf(t),n=Lc();jc(t.onDisconnect_,Ks(),(function(r,i){i=Oh(r,i,t.serverSyncTree_,e),Mc(n,r,i)}));var r=[];jc(n,Ks(),(function(e,n){r=r.concat(hh(t.serverSyncTree_,e,n)),e=xf(t,e),If(t,e)})),t.onDisconnect_=Lc(),of(t.eventQueue_,Ks(),r)}(t)}function df(t,e,n){e=new Bs("/.info/"+e),n=tc(n),t.infoData_.updateSnapshot(e,n),n=hh(t.infoSyncTree_,e,n),of(t.eventQueue_,e,n)}function vf(t){return t.nextWriteId_++}function yf(t,e,n,r,i){wf(t,"set",{path:e.toString(),value:n,priority:r});var o=hf(t),a=(n=tc(n,r),r=dh(t.serverSyncTree_,e),o=Nh(n,r,o),vf(t));o=ch(t.serverSyncTree_,e,o,a,!0),nf(t.eventQueue_,o),t.server_.put(e.toString(),n.val(!0),(function(n,r){var o="ok"===n;o||Ga("set at "+e+" failed: "+n),o=lh(t.serverSyncTree_,a,!o),of(t.eventQueue_,e,o),_f(0,i,n,r)})),n=xf(t,e),If(t,n),of(t.eventQueue_,n,[])}function gf(t,e,n,r){var i=tc(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(function(n,o){"ok"===n&&Mc(t.onDisconnect_,e,i),_f(0,r,n,o)}))}function mf(t,e,n){n=".info"===Hs(e._path)?fh(t.infoSyncTree_,e,n):fh(t.serverSyncTree_,e,n),rf(t.eventQueue_,e._path,n)}function bf(t){t.persistentConnection_&&t.persistentConnection_.interrupt(sf)}function wf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),Ka.apply(void 0,to([r],Zi(e)))}function _f(t,e,n,r){e&&os((function(){var t,i;"ok"===n?e(null):(i=t=(n||"error").toUpperCase(),r&&(i+=": "+r),(i=new Error(i)).code=t,e(i))}))}function Tf(t,e,n){return dh(t.serverSyncTree_,e,n)||Xu.EMPTY_NODE}function Ef(t,e){var n;(e=void 0===e?t.transactionQueueTree_:e)||Cf(t,e),Lh(e)?(n=kf(t,e),oo(0<n.length,"Sending zero length transaction queue"),n.every((function(t){return 0===t.status}))&&function(t,e,n){for(var r=n.map((function(t){return t.currentWriteId})),i=u=Tf(t,e,r),o=(r=u.hash(),0);o<n.length;o++){var a=n[o];oo(0===a.status,"tryToSendTransactionQueue_: items in queue should all be run."),a.status=1,a.retryCount++;var s=Zs(e,a.path);i=i.updateChild(s,a.currentOutputSnapshotRaw)}var u=i.val(!0),c=e;t.server_.put(c.toString(),u,(function(r){wf(t,"transaction put response",{path:c.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=0;a<n.length;a++)!function(e){n[e].status=2,i=i.concat(lh(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push((function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)})),n[e].unwatcher()}(a);for(Cf(t,Dh(t.transactionQueueTree_,e)),Ef(t,t.transactionQueueTree_),of(t.eventQueue_,e,i),a=0;a<o.length;a++)os(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)3===n[a].status?n[a].status=4:n[a].status=0;else for(Ga("transaction at "+c.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;If(t,e)}}),r)}(t,Uh(e),n)):jh(e)&&Fh(e,(function(e){Ef(t,e)}))}function If(t,e){var n=Sf(t,e);return e=Uh(n),function(t,e,n){if(0!==e.length){for(var r=[],i=[],o=e.filter((function(t){return 0===t.status})).map((function(t){return t.currentWriteId})),a=0;a<e.length;a++)!function(a){var s,u,c,l,h=e[a],f=Zs(n,h.path),p=!1;oo(null!==f,"rerunTransactionsUnderNode_: relativePath should not be null."),4===h.status?(s=h.abortReason,i=i.concat(lh(t.serverSyncTree_,h.currentWriteId,p=!0))):0===h.status&&(i=h.retryCount>=25?(s="maxretry",i.concat(lh(t.serverSyncTree_,h.currentWriteId,p=!0))):(u=Tf(t,h.path,o),h.currentInputSnapshot=u,void 0!==(l=e[a].update(u.val()))?(Xh("transaction failed: Data returned ",l,h.path),c=tc(l),"object"==typeof l&&null!=l&&No(l,".priority")||(c=c.updatePriority(u.getPriority())),f=h.currentWriteId,l=hf(t),l=Nh(c,u,l),h.currentOutputSnapshotRaw=c,h.currentOutputSnapshotResolved=l,h.currentWriteId=vf(t),o.splice(o.indexOf(f),1),(i=i.concat(ch(t.serverSyncTree_,h.path,l,h.currentWriteId,h.applyLocally))).concat(lh(t.serverSyncTree_,f,!0))):(s="nodata",i.concat(lh(t.serverSyncTree_,h.currentWriteId,p=!0))))),of(t.eventQueue_,n,i),i=[],p&&(e[a].status=2,p=e[a].unwatcher,setTimeout(p,Math.floor(0)),e[a].onComplete&&("nodata"===s?r.push((function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)})):r.push((function(){return e[a].onComplete(new Error(s),!1,null)}))))}(a);for(Cf(t,t.transactionQueueTree_),a=0;a<r.length;a++)os(r[a]);Ef(t,t.transactionQueueTree_)}}(t,kf(t,n),e),e}function Sf(t,e){for(var n=t.transactionQueueTree_,r=Hs(e);null!==r&&void 0===Lh(n);)n=Dh(n,r),r=Hs(e=Gs(e));return n}function kf(t,e){var n=[];return function t(e,n,r){var i=Lh(n);if(i)for(var o=0;o<i.length;o++)r.push(i[o]);Fh(n,(function(n){t(e,n,r)}))}(t,e,n),n.sort((function(t,e){return t.order-e.order})),n}function Cf(t,e){var n=Lh(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Mh(e,0<n.length?n:void 0)}Fh(e,(function(e){Cf(t,e)}))}function xf(t,e){var n=Uh(Sf(t,e));return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return;r=r.parent}}(e=Dh(t.transactionQueueTree_,e),(function(e){Af(t,e)})),Af(t,e),function t(e,n,r,i){r&&!i&&n(e),Fh(e,(function(e){t(e,n,!0,i)})),r&&i&&n(e)}(e,(function(e){Af(t,e)})),n}function Af(t,e){var n=Lh(e);if(n){for(var r=[],i=[],o=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(oo(o===a-1,"All SENT items should be at beginning of queue."),n[o=a].status=3,n[a].abortReason="set"):(oo(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(lh(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===o?Mh(e,void 0):n.length=o+1,of(t.eventQueue_,Uh(e),i),a=0;a<r.length;a++)os(r[a])}}var Of=function(t,e){var n=Nf(t),r=n.namespace;return"firebase.com"===n.domain&&Wa(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Wa("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ga("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),t="ws"===n.scheme||"wss"===n.scheme,{repoInfo:new vs(n.host,n.secure,r,e,t,"",r!==n.subdomain),path:new Bs(n.pathString)}},Nf=function(t){var e,n,r,i="",o="",a="",s="",u="",c=!0,l="https",h=443;return"string"==typeof t&&(0<=(r=t.indexOf("//"))&&(l=t.substring(0,r-1),t=t.substring(r+2)),-1===(e=t.indexOf("/"))&&(e=t.length),-1===(n=t.indexOf("?"))&&(n=t.length),i=t.substring(0,Math.min(e,n)),e<n&&(s=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(e,n))),n=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Ji(t.split("&")),o=i.next();!o.done;o=i.next()){var a,s=o.value;0!==s.length&&(2===(a=s.split("=")).length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Ga("Invalid query segment '"+s+"' in query '"+t+"'"))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,n))),0<=(r=i.indexOf(":"))?(c="https"===l||"wss"===l,h=parseInt(i.substring(r+1),10)):r=i.length,"localhost"===(r=i.slice(0,r)).toLowerCase()?o="localhost":r.split(".").length<=2?o=r:(r=i.indexOf("."),a=i.substring(0,r).toLowerCase(),o=i.substring(r+1),u=a),"ns"in n&&(u=n.ns)),{host:i,port:h,domain:o,subdomain:a,secure:c,scheme:l,pathString:s,namespace:u}},Pf=(Rf.prototype.getPath=function(){var t=this.snapshot.ref;return("value"===this.eventType?t:t.parent)._path},Rf.prototype.getEventType=function(){return this.eventType},Rf.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},Rf.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Ao(this.snapshot.exportVal())},Rf);function Rf(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var Df=(Lf.prototype.getPath=function(){return this.path},Lf.prototype.getEventType=function(){return"cancel"},Lf.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},Lf.prototype.toString=function(){return this.path.toString()+":cancel"},Lf);function Lf(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var Mf=(jf.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},jf.prototype.onCancel=function(t){return oo(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(jf.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),jf.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},jf);function jf(t,e){this.snapshotCallback=t,this.cancelCallback=e}var Ff=(Uf.prototype.cancel=function(){var t=new lo;return function(t,e,n){t.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&function t(e,n){if(Js(n))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var r=e.value;return e.value=null,r.forEachChild(Uu,(function(t,n){Mc(e,new Bs(t),n)})),t(e,n)}return!(0<e.children.size)||(r=Hs(n),n=Gs(n),e.children.has(r)&&t(e.children.get(r),n)&&e.children.delete(r),0===e.children.size)}(t.onDisconnect_,e),_f(0,n,r,i)}))}(this._repo,this._path,t.wrapCallback((function(){}))),t.promise},Uf.prototype.remove=function(){Zh("OnDisconnect.remove",this._path);var t=new lo;return gf(this._repo,this._path,null,t.wrapCallback((function(){}))),t.promise},Uf.prototype.set=function(t){Zh("OnDisconnect.set",this._path),Yh("OnDisconnect.set",t,this._path,!1);var e=new lo;return gf(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},Uf.prototype.setWithPriority=function(t,e){Zh("OnDisconnect.setWithPriority",this._path),Yh("OnDisconnect.setWithPriority",t,this._path,!1),zh("OnDisconnect.setWithPriority",e,!1);var n,r,i,o,a=new lo;return n=this._repo,r=this._path,t=t,e=e,i=a.wrapCallback((function(){})),o=tc(t,e),n.server_.onDisconnectPut(r.toString(),o.val(!0),(function(t,e){"ok"===t&&Mc(n.onDisconnect_,r,o),_f(0,i,t,e)})),a.promise},Uf.prototype.update=function(t){Zh("OnDisconnect.update",this._path),Bh("OnDisconnect.update",t,this._path,!1);var e=new lo;return function(t,e,n,r){if(Ro(n))return Ka("onDisconnect().update() called with empty data.  Don't do anything."),_f(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(function(i,o){"ok"===i&&Ja(n,(function(n,r){r=tc(r),Mc(t.onDisconnect_,$s(e,n),r)})),_f(0,r,i,o)}))}(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},Uf);function Uf(t,e){this._repo=t,this._path=e}var Vf=(Object.defineProperty(qf.prototype,"key",{get:function(){return Js(this._path)?null:Qs(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(qf.prototype,"ref",{get:function(){return new Wf(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(qf.prototype,"_queryIdentifier",{get:function(){var t=Ac(this._queryParams);return"{}"===(t=$a(t))?"default":t},enumerable:!1,configurable:!0}),Object.defineProperty(qf.prototype,"_queryObject",{get:function(){return Ac(this._queryParams)},enumerable:!1,configurable:!0}),qf.prototype.isEqual=function(t){if(!((t=Go(t))instanceof qf))return!1;var e=this._repo===t._repo,n=eu(this._path,t._path);return t=this._queryIdentifier===t._queryIdentifier,e&&n&&t},qf.prototype.toJSON=function(){return this.toString()},qf.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},qf);function qf(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}function Bf(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function zf(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===bu){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Qa)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==Ya)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Uu){if(null!=e&&!Qh(e)||null!=n&&!Qh(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(oo(t.getIndex()instanceof rc||t.getIndex()===lc,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Kf(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Hf,Wf=(Qi(Gf,Hf=Vf),Object.defineProperty(Gf.prototype,"parent",{get:function(){var t=Xs(this._path);return null===t?null:new Gf(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(Gf.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),Gf);function Gf(t,e){return Hf.call(this,t,e,new Ec,!1)||this}var Qf=(Object.defineProperty(Yf.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(Yf.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(Yf.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),Yf.prototype.child=function(t){var e=new Bs(t);return t=Jf(this.ref,t),new Yf(this._node.getChild(e),t,Uu)},Yf.prototype.exists=function(){return!this._node.isEmpty()},Yf.prototype.exportVal=function(){return this._node.val(!0)},Yf.prototype.forEach=function(t){var e=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(n,r){return t(new Yf(r,Jf(e.ref,n),Uu))}))},Yf.prototype.hasChild=function(t){return t=new Bs(t),!this._node.getChild(t).isEmpty()},Yf.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},Yf.prototype.toJSON=function(){return this.exportVal()},Yf.prototype.val=function(){return this._node.val()},Yf);function Yf(t,e,n){this._node=t,this.ref=e,this._index=n}function Xf(t,e){return(t=Go(t))._checkNotDeleted("ref"),void 0!==e?Jf(t._root,e):t._root}function $f(t,e){(t=Go(t))._checkNotDeleted("refFromURL");var n=Of(e,t._repo.repoInfo_.nodeAdmin);return tf("refFromURL",n),e=n.repoInfo,t._repo.repoInfo_.isCustomHost()||e.host===t._repo.repoInfo_.host||Wa("refFromURL: Host name does not match the current database: (found "+e.host+" but expected "+t._repo.repoInfo_.host+")"),Xf(t,n.path.toString())}function Jf(t,e){return(null===Hs((t=Go(t))._path)?Jh:$h)("child","path",e,!1),new Wf(t._repo,$s(t._path,e))}function Zf(t,e){t=Go(t),Zh("set",t._path),Yh("set",e,t._path,!1);var n=new lo;return yf(t._repo,t._path,e,null,n.wrapCallback((function(){}))),n.promise}function tp(t,e){Bh("update",e,t._path,!1);var n=new lo;return function(t,e,n,r){wf(t,"update",{path:e.toString(),value:n});var i,o,a=!0,s=hf(t),u={};Ja(n,(function(n,r){a=!1,u[n]=Oh($s(e,n),tc(r),t.serverSyncTree_,s)})),a?(Ka("update() called with empty data.  Don't do anything."),_f(0,r,"ok",void 0)):(i=vf(t),o=function(t,e,n,r){var i,o,a;return i=t.pendingWriteTree_,o=e,a=n,oo((r=r)>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:o,children:a,writeId:r,visible:!0}),i.visibleWrites=pl(i.visibleWrites,o,a),i.lastWriteId=r,n=ul.fromObject(n),vh(t,new Xc({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n))}(t.serverSyncTree_,e,u,i),nf(t.eventQueue_,o),t.server_.merge(e.toString(),n,(function(n,o){(s="ok"===n)||Ga("update at "+e+" failed: "+n);var a=lh(t.serverSyncTree_,i,!s),s=0<a.length?If(t,e):e;of(t.eventQueue_,s,a),_f(0,r,n,o)})),Ja(n,(function(n){n=xf(t,$s(e,n)),If(t,n)})),of(t.eventQueue_,e,[]))}(t._repo,t._path,e,n.wrapCallback((function(){}))),n.promise}function ep(t){return t=Go(t),e=t._repo,n=t,(null!=(r=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(function(t,e){t=Zs(t,n),r=r||nh(e,t)}));var i=t.syncPointTree_.get(n);i?r=r||nh(i,Ks()):(i=new Jl,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,a=o?new Jc(r,!0,!1):null;return al(th(i,e,_l(t.pendingWriteTree_,e._path),o?a.getNode():Xu.EMPTY_NODE,o).viewCache_)}(e.serverSyncTree_,n))?Promise.resolve(r):e.server_.get(n).then((function(t){var r=tc(t).withIndex(n._queryParams.getIndex());return t=hh(e.serverSyncTree_,n._path,r),rf(e.eventQueue_,n._path,t),Promise.resolve(r)}),(function(t){return wf(e,"get for query "+Ao(n)+" failed: "+t),Promise.reject(new Error(t))}))).then((function(e){return new Qf(e,new Wf(t._repo,t._path),t._queryParams.getIndex())}));var e,n,r}var np=(rp.prototype.respondsTo=function(t){return"value"===t},rp.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new Pf("value",this,new Qf(t.snapshotNode,new Wf(e._repo,e._path),n))},rp.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},rp.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Df(this,t,e):null},rp.prototype.matches=function(t){return t instanceof rp&&(!t.callbackContext||!this.callbackContext||t.callbackContext.matches(this.callbackContext))},rp.prototype.hasAnyCallback=function(){return null!==this.callbackContext},rp);function rp(t){this.callbackContext=t}var ip=(op.prototype.respondsTo=function(t){return t="children_added"===t?"child_added":t,this.eventType===("children_removed"===t?"child_removed":t)},op.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Df(this,t,e):null},op.prototype.createEvent=function(t,e){oo(null!=t.childName,"Child events should have a childName.");var n=Jf(new Wf(e._repo,e._path),t.childName);return e=e._queryParams.getIndex(),new Pf(t.type,this,new Qf(t.snapshotNode,n,e),t.prevName)},op.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},op.prototype.matches=function(t){return t instanceof op&&this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext))},op.prototype.hasAnyCallback=function(){return!!this.callbackContext},op);function op(t,e){this.eventType=t,this.callbackContext=e}function ap(t,e,n,r,i){var o;"object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce&&((i=function(e,n){mf(t._repo,t,s),o(e,n)}).userCallback=(o=n).userCallback,i.context=n.context,n=i),n=new Mf(n,a||void 0);var a,s="value"===e?new np(n):new ip(e,n);return a=t._repo,e=s,e=".info"===Hs((n=t)._path)?ph(a.infoSyncTree_,n,e):ph(a.serverSyncTree_,n,e),rf(a.eventQueue_,n._path,e),function(){return mf(t._repo,t,s)}}function sp(t,e,n,r){return ap(t,"value",e,n,r)}function up(t,e,n,r){return ap(t,"child_added",e,n,r)}function cp(t,e,n,r){return ap(t,"child_changed",e,n,r)}function lp(t,e,n,r){return ap(t,"child_moved",e,n,r)}function hp(t,e,n,r){return ap(t,"child_removed",e,n,r)}function fp(t,e,n){var r=null;n=n?new Mf(n):null,"value"===e?r=new np(n):e&&(r=new ip(e,n)),mf(t._repo,t,r)}var pp,dp=(Qi(vp,pp=kn=function(){}),vp.prototype._apply=function(t){Yh("endAt",this._value,t._path,!0);var e=kc(t._queryParams,this._value,this._key);if(Kf(e),zf(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Vf(t._repo,t._path,e,t._orderByCalled)},vp);function vp(t,e){var n=pp.call(this)||this;return n._value=t,n._key=e,n}var yp,gp=(Qi(mp,yp=kn),mp.prototype._apply=function(t){var e,n,r;if(Yh("endBefore",this._value,t._path,!1),Kf((e=t._queryParams,n=this._value,r=this._key,(r=e.index_===bu?kc(e,n="string"==typeof n?sc(n):n,r):kc(e,n,null==r?Qa:sc(r))).endBeforeSet_=!0,r=r)),zf(r),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Vf(t._repo,t._path,r,t._orderByCalled)},mp);function mp(t,e){var n=yp.call(this)||this;return n._value=t,n._key=e,n}var bp,wp=(Qi(_p,bp=kn),_p.prototype._apply=function(t){Yh("startAt",this._value,t._path,!0);var e=Sc(t._queryParams,this._value,this._key);if(Kf(e),zf(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Vf(t._repo,t._path,e,t._orderByCalled)},_p);function _p(t,e){var n=bp.call(this)||this;return n._value=t,n._key=e,n}var Tp,Ep=(Qi(Ip,Tp=kn),Ip.prototype._apply=function(t){var e,n,r;if(Yh("startAfter",this._value,t._path,!1),Kf((e=t._queryParams,n=this._value,r=this._key,(r=e.index_===bu?Sc(e,n="string"==typeof n?ac(n):n,r):Sc(e,n,null==r?Ya:ac(r))).startAfterSet_=!0,r=r)),zf(r),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Vf(t._repo,t._path,r,t._orderByCalled)},Ip);function Ip(t,e){var n=Tp.call(this)||this;return n._value=t,n._key=e,n}var Sp,kp=(Qi(Cp,Sp=kn),Cp.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Vf(t._repo,t._path,(e=t._queryParams,n=this._limit,(e=e.copy()).limitSet_=!0,e.limit_=n,e.viewFrom_="l",e),t._orderByCalled);var e,n},Cp);function Cp(t){var e=Sp.call(this)||this;return e._limit=t,e}var xp,Ap=(Qi(Op,xp=kn),Op.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Vf(t._repo,t._path,(e=t._queryParams,n=this._limit,(e=e.copy()).limitSet_=!0,e.limit_=n,e.viewFrom_="r",e),t._orderByCalled);var e,n},Op);function Op(t){var e=xp.call(this)||this;return e._limit=t,e}var Np,Pp=(Qi(Rp,Np=kn),Rp.prototype._apply=function(t){Bf(t,"orderByChild");var e=new Bs(this._path);if(Js(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");return e=new rc(e),zf(e=Cc(t._queryParams,e)),new Vf(t._repo,t._path,e,!0)},Rp);function Rp(t){var e=Np.call(this)||this;return e._path=t,e}var Dp,Lp=(Qi(Mp,Dp=kn),Mp.prototype._apply=function(t){Bf(t,"orderByKey");var e=Cc(t._queryParams,bu);return zf(e),new Vf(t._repo,t._path,e,!0)},Mp);function Mp(){return null!==Dp&&Dp.apply(this,arguments)||this}var jp,Fp=(Qi(Up,jp=kn),Up.prototype._apply=function(t){Bf(t,"orderByPriority");var e=Cc(t._queryParams,Uu);return zf(e),new Vf(t._repo,t._path,e,!0)},Up);function Up(){return null!==jp&&jp.apply(this,arguments)||this}var Vp,qp=(Qi(Bp,Vp=kn),Bp.prototype._apply=function(t){Bf(t,"orderByValue");var e=Cc(t._queryParams,lc);return zf(e),new Vf(t._repo,t._path,e,!0)},Bp);function Bp(){return null!==Vp&&Vp.apply(this,arguments)||this}var zp,Kp,Hp,Wp=(Qi(Gp,zp=kn),Gp.prototype._apply=function(t){if(Yh("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new dp(this._value,this._key)._apply(new wp(this._value,this._key)._apply(t))},Gp);function Gp(t,e){var n=zp.call(this)||this;return n._value=t,n._key=e,n}function Qp(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=Go(t);try{for(var a=Ji(r),s=a.next();!s.done;s=a.next())o=s.value._apply(o)}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return o}Kp=Wf,oo(!Kl,"__referenceConstructor has already been defined"),Kl=Kp,Hp=Wf,oo(!$l,"__referenceConstructor has already been defined"),$l=Hp;var Yp={},Xp=!1;function $p(t,e,r,i,o){var a=i||t.options.databaseURL;void 0===a&&(t.options.projectId||Wa("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ka("Using default host for project ",t.options.projectId),a=t.options.projectId+"-default-rtdb.firebaseio.com");var s,u=Of(a,o),c=u.repoInfo;return i=void 0,(i="undefined"!=typeof n?Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).FIREBASE_DATABASE_EMULATOR_HOST:i)?(s=!0,a="http://"+i+"?ns="+c.namespace,c=(u=Of(a,o)).repoInfo):s=!u.repoInfo.secure,e=o&&s?new ls(ls.OWNER):new us(t.name,t.options,e),tf("Invalid Firebase Database URL",u),Js(u.path)||Wa("Database URL must point to the root of a Firebase Database (not including a child path)."),r=function(t,e,n,r){var i=Yp[e.name];return i||(i={},Yp[e.name]=i),(e=i[t.toURLString()])&&Wa("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),e=new uf(t,Xp,n,r),i[t.toURLString()]=e}(c,t,e,new as(t.name,r)),new Jp(r,t)}var Jp=(Object.defineProperty(Zp.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=Ts(t.repoInfo_),t.forceRestClient_||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))t.server_=new Nc(t.repoInfo_,(function(e,n,r,i){ff(t,e,n,r,i)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((function(){return pf(t,!0)}),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ao(n)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}t.persistentConnection_=new hu(t.repoInfo_,e,(function(e,n,r,i){ff(t,e,n,r,i)}),(function(e){pf(t,e)}),(function(e){var n;n=t,Ja(e,(function(t,e){df(n,t,e)}))}),t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((function(e){t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=(n=function(){return new qc(t.stats_,t.server_)},e=(e=t.repoInfo_).toString(),_s[e]||(_s[e]=n()),_s[e]),t.infoData_=new Rc,t.infoSyncTree_=new uh({startListening:function(e,n,r,i){var o=[],a=t.infoData_.getNode(e._path);return a.isEmpty()||(o=hh(t.infoSyncTree_,e._path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),df(t,"connected",!1),t.serverSyncTree_=new uh({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){r=i(n,r),of(t.eventQueue_,e._path,r)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(Zp.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Wf(this._repo,Ks())),this._rootInternal},enumerable:!1,configurable:!0}),Zp.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,e=this.app.name,(n=Yp[e])&&n[t.key]===t||Wa("Database "+e+"("+t.repoInfo_+") has already been deleted."),bf(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},Zp.prototype._checkNotDeleted=function(t){null===this._rootInternal&&Wa("Cannot call "+t+" on a deleted database.")},Zp);function Zp(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}function td(t){(t=Go(t))._checkNotDeleted("goOnline"),(t=t._repo).persistentConnection_&&t.persistentConnection_.resume(sf)}var ed=(nd.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},nd);function nd(t,e){this.committed=t,this.snapshot=e}function rd(t,e,n){if(t=Go(t),Zh("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";n=null===(i=null==n?void 0:n.applyLocally)||void 0===i||i;var r=new lo,i=sp(t,(function(){}));return function(t,e,n,r,i,o){wf(t,"transaction on "+e);var a={path:e,update:n,onComplete:r,status:null,order:Va(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null};n=Tf(t,e,void 0),a.currentInputSnapshot=n,void 0===(r=a.update(n.val()))?(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot)):(Xh("transaction failed: Data returned ",r,a.path),a.status=0,(i=Lh(o=Dh(t.transactionQueueTree_,e))||[]).push(a),Mh(o,i),o=void 0,"object"==typeof r&&null!==r&&No(r,".priority")?(o=Po(r,".priority"),oo(Qh(o),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):o=(dh(t.serverSyncTree_,e)||Xu.EMPTY_NODE).getPriority().val(),i=hf(t),o=tc(r,o),i=Nh(o,n,i),a.currentOutputSnapshotRaw=o,a.currentOutputSnapshotResolved=i,a.currentWriteId=vf(t),a=ch(t.serverSyncTree_,e,i,a.currentWriteId,a.applyLocally),of(t.eventQueue_,e,a),Ef(t,t.transactionQueueTree_))}(t._repo,t._path,e,(function(e,n,i){var o;e?r.reject(e):(o=new Qf(i,new Wf(t._repo,t._path),Uu),r.resolve(new ed(n,o)))}),i,n),r.promise}var id=(od.prototype.cancel=function(t){qo("OnDisconnect.cancel",0,1,arguments.length),zo("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},od.prototype.remove=function(t){qo("OnDisconnect.remove",0,1,arguments.length),zo("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},od.prototype.set=function(t,e){return qo("OnDisconnect.set",1,2,arguments.length),zo("OnDisconnect.set","onComplete",e,!0),t=this._delegate.set(t),e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},od.prototype.setWithPriority=function(t,e,n){return qo("OnDisconnect.setWithPriority",2,3,arguments.length),zo("OnDisconnect.setWithPriority","onComplete",n,!0),e=this._delegate.setWithPriority(t,e),n&&e.then((function(){return n(null)}),(function(t){return n(t)})),e},od.prototype.update=function(t,e){if(qo("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Ga("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}zo("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},od);function od(t){this._delegate=t}var ad=(sd.prototype.toJSON=function(){return qo("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},sd);function sd(t,e){this.committed=t,this.snapshot=e}var ud=(cd.prototype.val=function(){return qo("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},cd.prototype.exportVal=function(){return qo("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},cd.prototype.toJSON=function(){return qo("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},cd.prototype.exists=function(){return qo("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},cd.prototype.child=function(t){return qo("DataSnapshot.child",0,1,arguments.length),t=String(t),$h("DataSnapshot.child","path",t,!1),new cd(this._database,this._delegate.child(t))},cd.prototype.hasChild=function(t){return qo("DataSnapshot.hasChild",1,1,arguments.length),$h("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},cd.prototype.getPriority=function(){return qo("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},cd.prototype.forEach=function(t){var e=this;return qo("DataSnapshot.forEach",1,1,arguments.length),zo("DataSnapshot.forEach","action",t,!1),this._delegate.forEach((function(n){return t(new cd(e._database,n))}))},cd.prototype.hasChildren=function(){return qo("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(cd.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),cd.prototype.numChildren=function(){return qo("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},cd.prototype.getRef=function(){return qo("DataSnapshot.ref",0,0,arguments.length),new pd(this._database,this._delegate.ref)},Object.defineProperty(cd.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),cd);function cd(t,e){this._database=t,this._delegate=e}var ld=(hd.prototype.on=function(t,e,n,r){var i=this;function o(t,n){e.call(a.context,new ud(i.database,t),n)}qo("Query.on",2,4,arguments.length),zo("Query.on","callback",e,!1);var a=hd.getCancelAndContextArgs_("Query.on",n,r);o.userCallback=e,o.context=a.context;var s=null===(r=a.cancel)||void 0===r?void 0:r.bind(a.context);switch(t){case"value":return sp(this._delegate,o,s),e;case"child_added":return up(this._delegate,o,s),e;case"child_removed":return hp(this._delegate,o,s),e;case"child_changed":return cp(this._delegate,o,s),e;case"child_moved":return lp(this._delegate,o,s),e;default:throw new Error(Bo("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},hd.prototype.off=function(t,e,n){var r;qo("Query.off",0,3,arguments.length),function(t,e,n){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Bo("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,t),zo("Query.off","callback",e,!0),Ko("Query.off","context",n,!0),e?((r=function(){}).userCallback=e,r.context=n,fp(this._delegate,t,r)):fp(this._delegate,t)},hd.prototype.get=function(){var t=this;return ep(this._delegate).then((function(e){return new ud(t.database,e)}))},hd.prototype.once=function(t,e,n,r){var i=this;function o(t,n){t=new ud(i.database,t),e&&e.call(a.context,t,n),s.resolve(t)}qo("Query.once",1,4,arguments.length),zo("Query.once","callback",e,!0);var a=hd.getCancelAndContextArgs_("Query.once",n,r),s=new lo;function u(t){a.cancel&&a.cancel.call(a.context,t),s.reject(t)}switch(o.userCallback=e,o.context=a.context,t){case"value":sp(this._delegate,o,u,{onlyOnce:!0});break;case"child_added":up(this._delegate,o,u,{onlyOnce:!0});break;case"child_removed":hp(this._delegate,o,u,{onlyOnce:!0});break;case"child_changed":cp(this._delegate,o,u,{onlyOnce:!0});break;case"child_moved":lp(this._delegate,o,u,{onlyOnce:!0});break;default:throw new Error(Bo("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise},hd.prototype.limitToFirst=function(t){return qo("Query.limitToFirst",1,1,arguments.length),new hd(this.database,Qp(this._delegate,function(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new kp(t)}(t)))},hd.prototype.limitToLast=function(t){return qo("Query.limitToLast",1,1,arguments.length),new hd(this.database,Qp(this._delegate,function(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Ap(t)}(t)))},hd.prototype.orderByChild=function(t){return qo("Query.orderByChild",1,1,arguments.length),new hd(this.database,Qp(this._delegate,function(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return $h("orderByChild","path",t,!1),new Pp(t)}(t)))},hd.prototype.orderByKey=function(){return qo("Query.orderByKey",0,0,arguments.length),new hd(this.database,Qp(this._delegate,new Lp))},hd.prototype.orderByPriority=function(){return qo("Query.orderByPriority",0,0,arguments.length),new hd(this.database,Qp(this._delegate,new Fp))},hd.prototype.orderByValue=function(){return qo("Query.orderByValue",0,0,arguments.length),new hd(this.database,Qp(this._delegate,new qp))},hd.prototype.startAt=function(t,e){return void 0===t&&(t=null),qo("Query.startAt",0,2,arguments.length),new hd(this.database,Qp(this._delegate,(void 0===(t=t)&&(t=null),Kh("startAt","key",e=e,!0),new wp(t,e))))},hd.prototype.startAfter=function(t,e){return void 0===t&&(t=null),qo("Query.startAfter",0,2,arguments.length),new hd(this.database,Qp(this._delegate,(t=t,Kh("startAfter","key",e=e,!0),new Ep(t,e))))},hd.prototype.endAt=function(t,e){return void 0===t&&(t=null),qo("Query.endAt",0,2,arguments.length),new hd(this.database,Qp(this._delegate,(t=t,Kh("endAt","key",e=e,!0),new dp(t,e))))},hd.prototype.endBefore=function(t,e){return void 0===t&&(t=null),qo("Query.endBefore",0,2,arguments.length),new hd(this.database,Qp(this._delegate,(t=t,Kh("endBefore","key",e=e,!0),new gp(t,e))))},hd.prototype.equalTo=function(t,e){return qo("Query.equalTo",1,2,arguments.length),new hd(this.database,Qp(this._delegate,(t=t,Kh("equalTo","key",e=e,!0),new Wp(t,e))))},hd.prototype.toString=function(){return qo("Query.toString",0,0,arguments.length),this._delegate.toString()},hd.prototype.toJSON=function(){return qo("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},hd.prototype.isEqual=function(t){if(qo("Query.isEqual",1,1,arguments.length),t instanceof hd)return this._delegate.isEqual(t._delegate);throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")},hd.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,zo(t,"cancel",r.cancel,!0),r.context=n,Ko(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Bo(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(hd.prototype,"ref",{get:function(){return new pd(this.database,new Wf(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),hd);function hd(t,e){this.database=t,this._delegate=e}var fd,pd=(Qi(dd,fd=ld),dd.prototype.getKey=function(){return qo("Reference.key",0,0,arguments.length),this._delegate.key},dd.prototype.child=function(t){return qo("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new dd(this.database,Jf(this._delegate,t))},dd.prototype.getParent=function(){qo("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new dd(this.database,t):null},dd.prototype.getRoot=function(){return qo("Reference.root",0,0,arguments.length),new dd(this.database,this._delegate.root)},dd.prototype.set=function(t,e){return qo("Reference.set",1,2,arguments.length),zo("Reference.set","onComplete",e,!0),t=Zf(this._delegate,t),e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},dd.prototype.update=function(t,e){if(qo("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,Ga("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Zh("Reference.update",this._delegate._path),zo("Reference.update","onComplete",e,!0);var i=tp(this._delegate,t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},dd.prototype.setWithPriority=function(t,e,n){return qo("Reference.setWithPriority",2,3,arguments.length),zo("Reference.setWithPriority","onComplete",n,!0),e=function(t,e,n){if(Zh("setWithPriority",t._path),Yh("setWithPriority",e,t._path,!1),zh("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new lo;return yf(t._repo,t._path,e,n,r.wrapCallback((function(){}))),r.promise}(this._delegate,t,e),n&&e.then((function(){return n(null)}),(function(t){return n(t)})),e},dd.prototype.remove=function(t){qo("Reference.remove",0,1,arguments.length),zo("Reference.remove","onComplete",t,!0);var e=(e=this._delegate,Zh("remove",e._path),Zf(e,null));return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},dd.prototype.transaction=function(t,e,n){var r=this;return qo("Reference.transaction",1,3,arguments.length),zo("Reference.transaction","transactionUpdate",t,!1),zo("Reference.transaction","onComplete",e,!0),function(t,e,n,r){if(void 0!==n&&"boolean"!=typeof n)throw new Error(Bo("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,n),n=rd(this._delegate,t,{applyLocally:n}).then((function(t){return new ad(t.committed,new ud(r.database,t.snapshot))})),e&&n.then((function(t){return e(null,t.committed,t.snapshot)}),(function(t){return e(t,!1,null)})),n},dd.prototype.setPriority=function(t,e){return qo("Reference.setPriority",1,2,arguments.length),zo("Reference.setPriority","onComplete",e,!0),t=function(t,e){t=Go(t),Zh("setPriority",t._path),zh("setPriority",e,!1);var n=new lo;return yf(t._repo,$s(t._path,".priority"),e,null,n.wrapCallback((function(){}))),n.promise}(this._delegate,t),e&&t.then((function(){return e(null)}),(function(t){return e(t)})),t},dd.prototype.push=function(t,e){var n=this;qo("Reference.push",0,2,arguments.length),zo("Reference.push","onComplete",e,!0);var r=function(t,e){t=Go(t),Zh("push",t._path),Yh("push",e,t._path,!0);var n=lf(t._repo),r=fc(n),i=(n=Jf(t,r),Jf(t,r));return e=null!=e?Zf(i,e).then((function(){return i})):Promise.resolve(i),n.then=e.then.bind(e),n.catch=e.then.bind(e,void 0),n}(this._delegate,t);return t=r.then((function(t){return new dd(n.database,t)})),e&&t.then((function(){return e(null)}),(function(t){return e(t)})),(r=new dd(this.database,r)).then=t.then.bind(t),r.catch=t.catch.bind(t,void 0),r},dd.prototype.onDisconnect=function(){return Zh("Reference.onDisconnect",this._delegate._path),new id(new Ff(this._delegate._repo,this._delegate._path))},Object.defineProperty(dd.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(dd.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(dd.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),dd);function dd(t,e){var n=fd.call(this,t,new Vf(e._repo,e._path,new Ec,!1))||this;return n.database=t,n._delegate=e,n}var vd=(yd.prototype.useEmulator=function(t,e,n){!function(t,e,n,r){void 0===r&&(r={}),(t=Go(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&Wa("Cannot call useEmulator() after instance has already been initialized.");var i=t._repoInternal,o=void 0;i.repoInfo_.nodeAdmin?(r.mockUserToken&&Wa('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new ls(ls.OWNER)):r.mockUserToken&&(t=fo(r.mockUserToken,t.app.options.projectId),o=new ls(t)),o=o,(i=i).repoInfo_=new vs(e+":"+n,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams),o&&(i.authTokenProvider_=o)}(this._delegate,t,e,n=void 0===n?{}:n)},yd.prototype.ref=function(t){if(qo("database.ref",0,1,arguments.length),t instanceof pd){var e=$f(this._delegate,t.toString());return new pd(this,e)}return e=Xf(this._delegate,t),new pd(this,e)},yd.prototype.refFromURL=function(t){return qo("database.refFromURL",1,1,arguments.length),t=$f(this._delegate,t),new pd(this,t)},yd.prototype.goOffline=function(){var t;qo("database.goOffline",0,0,arguments.length),(t=Go(t=this._delegate))._checkNotDeleted("goOffline"),bf(t._repo)},yd.prototype.goOnline=function(){return qo("database.goOnline",0,0,arguments.length),td(this._delegate)},yd.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},yd);function yd(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}var gd=Object.freeze({__proto__:null,forceLongPolling:function(){Os.forceDisallow(),Ss.forceAllow()},forceWebSockets:function(){Ss.forceDisallow()},isWebSocketsAvailable:function(){return Os.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){var n;t=t._delegate._repo,void 0===(e=e)&&(e=!1),"undefined"!=typeof console&&(t=e?(t.statsListener_||(t.statsListener_=new Fc(t.stats_)),t.statsListener_.get()):t.stats_.get(),n=Object.keys(t).reduce((function(t,e){return Math.max(e.length,t)}),0),Ja(t,(function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)})))},statsIncrementCounter:function(t,e){e=e,(t=t._delegate._repo).stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){t._delegate._repo.interceptServerDataCallback_=e},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace;return t=void 0!==(t=t.nodeAdmin)&&t,Ia(r),(r=new $o("auth-internal",new Zo("database-standalone"))).setComponent(new Qo("auth-internal",(function(){return i}),"PRIVATE")),{instance:new vd($p(e,r,void 0,n,t),e),namespace:o}}});H=hu,hu.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},hu.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var md,bd=Object.freeze({__proto__:null,DataConnection:H,RealTimeConnection:Ds,hijackHash:function(t){var e=hu.prototype.put;return hu.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){hu.prototype.put=e}},ConnectionTarget:vs,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){Xp=t}}),wd=vd.ServerValue;Ia((md=Ta).SDK_VERSION),md.INTERNAL.registerComponent(new Qo("database",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate();return e=t.getProvider("auth-internal"),t=t.getProvider("app-check-internal"),new vd($p(r,e,t,n),r)}),"PUBLIC").setServiceProps({Reference:pd,Query:ld,Database:vd,DataSnapshot:ud,enableLogging:Oa,INTERNAL:gd,ServerValue:wd,TEST_ACCESS:bd}).setMultipleInstances(!0)),md.registerVersion("@firebase/database","0.10.2");var _d=function(t,e){return(_d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Td(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return{value:(t=t&&r>=t.length?void 0:t)&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}W="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{};var Ed={},Id=W||self;function Sd(){}function kd(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Cd(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var xd="closure_uid_"+(1e9*Math.random()>>>0),Ad=0;function Od(t,e,n){return t.call.apply(t.bind,arguments)}function Nd(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Pd(t,e,n){return(Pd=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Od:Nd).apply(null,arguments)}function Rd(t){var e=Array.prototype.slice.call(arguments,1);return function(){var n=e.slice();return n.push.apply(n,arguments),t.apply(this,n)}}function Dd(){return Date.now()}function Ld(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,(t.prototype.constructor=t).Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Md(){this.j=this.j,this.i=this.i}Md.prototype.j=!1,Md.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,xd)&&t[xd]||(t[xd]=++Ad))},Md.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var jd=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Fd=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Ud(){return Array.prototype.concat.apply([],arguments)}function Vd(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function qd(t){return/^[\s\xa0]*$/.test(t)}var Bd,zd=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Kd(t,e){return-1!=t.indexOf(e)}function Hd(t,e){return t<e?-1:e<t?1:0}var Wd=Id.navigator;function Gd(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Qd(t){var e,n={};for(e in t)n[e]=t[e];return n}Bd=Wd&&(Wd=Wd.userAgent)?Wd:"";var Yd="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xd(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<Yd.length;i++)e=Yd[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function $d(t){return $d[" "](t),t}$d[" "]=Sd;var Jd,Zd=Kd(Bd,"Opera"),tv=Kd(Bd,"Trident")||Kd(Bd,"MSIE"),ev=Kd(Bd,"Edge"),nv=ev||tv,rv=Kd(Bd,"Gecko")&&!(Kd(Bd.toLowerCase(),"webkit")&&!Kd(Bd,"Edge"))&&!(Kd(Bd,"Trident")||Kd(Bd,"MSIE"))&&!Kd(Bd,"Edge"),iv=Kd(Bd.toLowerCase(),"webkit")&&!Kd(Bd,"Edge");function ov(){var t=Id.document;return t?t.documentMode:void 0}var av="",sv=(sv=Bd,rv?/rv:([^\);]+)(\)|;)/.exec(sv):ev?/Edge\/([\d\.]+)/.exec(sv):tv?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(sv):iv?/WebKit\/(\S+)/.exec(sv):Zd?/(?:Version)[ \/]?(\S+)/.exec(sv):void 0);sv&&(av=sv?sv[1]:""),Jd=tv&&null!=(sv=ov())&&sv>parseFloat(av)?String(sv):av;var uv={};function cv(t){return e=t,n=function(){for(var e=0,n=zd(String(Jd)).split("."),r=zd(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++)for(var a=n[o]||"",s=r[o]||"";a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],(0!=a[0].length||0!=s[0].length)&&(e=Hd(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||Hd(0==a[2].length,0==s[2].length)||Hd(a[2],s[2]),a=a[3],s=s[3],0==e););return 0<=e},r=uv,Object.prototype.hasOwnProperty.call(r,e)?r[e]:r[e]=n();var e,n,r}var lv=Id.document&&tv&&(ov()||parseInt(Jd,10))||void 0,hv=!tv||9<=Number(lv),fv=tv&&!cv("9"),pv=function(){if(!Id.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Id.addEventListener("test",Sd,e),Id.removeEventListener("test",Sd,e)}catch(t){}return t}();function dv(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function vv(t,e){if(dv.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(rv){t:{try{$d(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:yv[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}dv.prototype.b=function(){this.defaultPrevented=!0},Ld(vv,dv);var yv={2:"touch",3:"pen",4:"mouse"};vv.prototype.b=function(){vv.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,fv)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var gv="closure_listenable_"+(1e6*Math.random()|0),mv=0;function bv(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++mv,this.Y=this.Z=!1}function wv(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function _v(t){this.src=t,this.a={},this.b=0}function Tv(t,e){var n,r,i,o=e.type;o in t.a&&(n=t.a[o],(i=0<=(r=jd(n,e)))&&Array.prototype.splice.call(n,r,1),i&&(wv(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function Ev(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}_v.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=Ev(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new bv(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Iv="closure_lm_"+(1e6*Math.random()|0),Sv={};function kv(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}return r=Dv(r),e&&e[gv]?e.wa(n,r,Cd(i)?!!i.capture:!!i,o):Cv(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)kv(t,e[o],n,r,i);return null}return n=Dv(n),t&&t[gv]?t.va(e,n,Cd(r)?!!r.capture:!!r,i):Cv(t,e,n,!1,r,i)}function Cv(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=Cd(i)?!!i.capture:!!i;if(a&&!hv)return null;var s,u,c=Pv(t);if(c||(t[Iv]=c=new _v(t)),(n=c.add(e,n,r,a,o)).proxy)return n;if(s=Nv,u=hv?function(t){return s.call(u.src,u.listener,t)}:function(t){if(!(t=s.call(u.src,u.listener,t)))return t},(n.proxy=r=u).src=t,r.listener=n,t.addEventListener)void 0===(i=pv?i:a)&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Av(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function xv(t){var e,n,r;"number"!=typeof t&&t&&!t.Y&&((e=t.src)&&e[gv]?Tv(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Av(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Pv(e))?(Tv(n,t),0==n.b&&(n.src=null,e[Iv]=null)):wv(t)))}function Av(t){return t in Sv?Sv[t]:Sv[t]="on"+t}function Ov(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&xv(t),n.call(r,e)}function Nv(t,e){if(t.Y)return!0;if(hv)return Ov(t,new vv(e,this));if(!e)t:{e=["window","event"];for(var n=Id,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Ov(t,e=new vv(e,this))}function Pv(t){return(t=t[Iv])instanceof _v?t:null}var Rv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dv(t){return"function"==typeof t?t:(t[Rv]||(t[Rv]=function(e){return t.handleEvent(e)}),t[Rv])}function Lv(){Md.call(this),this.c=new _v(this),(this.J=this).C=null}function Mv(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e?e=new dv(e,t):e instanceof dv?e.target=e.target||t:(a=e,Xd(e=new dv(r,t),a)),a=!0,n)for(var i=n.length-1;0<=i;i--)var o=e.a=n[i],a=jv(o,r,!0,e)&&a;if(a=jv(o=e.a=t,r,!0,e)&&a,a=jv(o,r,!1,e)&&a,n)for(i=0;i<n.length;i++)a=jv(o=e.a=n[i],r,!1,e)&&a}function jv(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a,s,u=e[o];u&&!u.Y&&u.capture==n&&(a=u.listener,s=u.ca||u.src,u.Z&&Tv(t.c,u),i=!1!==a.call(s,r)&&i)}return i&&!r.defaultPrevented}Ld(Lv,Md),Lv.prototype[gv]=!0,(js=Lv.prototype).addEventListener=function(t,e,n,r){kv(this,t,e,n,r)},js.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=Cd(i)?!!i.capture:!!i,r=Dv(r),e&&e[gv]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Ev(a=e.a[n],r,i,o))&&(wv(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete e.a[n],e.b--))):(e=e&&Pv(e))&&(n=e.a[n.toString()],(r=(e=-1)<(e=n?Ev(n,r,i,o):e)?n[e]:null)&&xv(r))}(this,t,e,n,r)},js.G=function(){if(Lv.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)wv(n[r]);delete e.a[t],e.b--}}this.C=null},js.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},js.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Fv=Id.JSON.stringify;function Uv(){this.b=this.a=null}var Vv,qv=(Bv.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new Bv((function(){return new zv}),(function(t){t.reset()})));function Bv(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function zv(){this.next=this.b=this.a=null}function Kv(t,e){var n;Vv||(n=Id.Promise.resolve(void 0),Vv=function(){n.then(Gv)}),Hv||(Vv(),Hv=!0),Wv.add(t,e)}Uv.prototype.add=function(t,e){var n=qv.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},zv.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var Hv=!(zv.prototype.reset=function(){this.next=this.b=this.a=null}),Wv=new Uv;function Gv(){for(var t;e=t=void 0,e=null,(t=Wv).a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),t=e;){try{t.a.call(t.b)}catch(t){!function(t){Id.setTimeout((function(){throw t}),0)}(t)}var e=qv;e.f(t),e.b<100&&(e.b++,t.next=e.a,e.a=t)}Hv=!1}function Qv(t,e){Lv.call(this),this.b=t||1,this.a=e||Id,this.f=Pd(this.Za,this),this.g=Dd()}function Yv(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Xv(t,e,n){if("function"==typeof t)n&&(t=Pd(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Pd(t.handleEvent,t)}return 2147483647<Number(e)?-1:Id.setTimeout(t,e||0)}Ld(Qv,Lv),(js=Qv.prototype).aa=!1,js.M=null,js.Za=function(){var t;this.aa&&(0<(t=Dd()-this.g)&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Mv(this,"tick"),this.aa&&(Yv(this),this.start())))},js.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Dd())},js.G=function(){Qv.X.G.call(this),Yv(this),delete this.a};var $v,Jv,Zv,ty=(_d(Jv=ny,Zv=$v=Md),Jv.prototype=null===Zv?Object.create(Zv):(ey.prototype=Zv.prototype,new ey),ny.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:function t(e){e.a=Xv((function(){e.a=null,e.c&&(e.c=!1,t(e))}),e.h);var n=e.b;e.b=null,e.g.apply(null,n)}(this)},ny.prototype.G=function(){$v.prototype.G.call(this),this.a&&(Id.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},ny);function ey(){this.constructor=Jv}function ny(t,e){var n=$v.call(this)||this;return n.g=t,n.h=e,n.b=null,n.c=!1,n.a=null,n}function ry(t){Md.call(this),this.b=t,this.a={}}Ld(ry,Md);var iy=[];function oy(t,e,n,r){Array.isArray(n)||(n&&(iy[0]=n.toString()),n=iy);for(var i=0;i<n.length;i++){var o=kv(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function ay(t){Gd(t.a,(function(t,e){this.a.hasOwnProperty(e)&&xv(t)}),t),t.a={}}function sy(){this.a=!0}function uy(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Fv(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}ry.prototype.G=function(){ry.X.G.call(this),ay(this)},ry.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},sy.prototype.info=function(){};var cy={},ly=null;function hy(){return ly=ly||new Lv}function fy(t){dv.call(this,cy.Fa,t)}function py(){var t=hy();Mv(t,new fy(t))}function dy(t,e){dv.call(this,cy.STAT_EVENT,t),this.stat=e}function vy(t){var e=hy();Mv(e,new dy(e,t))}function yy(t){dv.call(this,cy.Ga,t)}function gy(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Id.setTimeout((function(){t()}),e)}function my(){}function by(t){var e;return(e=t.a)?e:t.a={}}function wy(){}function _y(){dv.call(this,"d")}function Ty(){dv.call(this,"c")}function Ey(){}function Iy(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new ry(this),this.P=ky,this.R=new Qv(t=nv?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}cy.Fa="serverreachability",Ld(fy,dv),cy.STAT_EVENT="statevent",Ld(dy,dv),cy.Ga="timingevent",Ld(yy,dv),kn={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},H={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"},my.prototype.a=null,W={OPEN:"a",eb:"b",Ea:"c",qb:"d"},Ld(_y,dv),Ld(Ty,dv),Ld(Ey,my);var Sy=new Ey,ky=45e3,Cy={},xy={};function Ay(t,e,n){t.H=1,t.i=Xy(Ky(e)),t.j=n,t.I=!0,Oy(t,null)}function Oy(t,e){t.u=Dd(),Py(t),t.l=Ky(t.i);var n,r,i,o,a,s,u=t.l,c=t.S;Array.isArray(c)||(c=[String(c)]),cg(u.b,"t",c),t.D=0,t.a=nm(t.g,t.g.C?e:null),0<t.O&&(t.F=new ty(Pd(t.Ca,t,t.a),t.O)),oy(t.J,t.a,"readystatechange",t.Xa),e=t.B?Qd(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),py(),n=t.c,r=t.m,i=t.l,o=t.f,a=t.S,s=t.j,n.info((function(){if(n.a)if(s)for(var t="",e=s.split("&"),u=0;u<e.length;u++){var c,l,h=e[u].split("=");1<h.length&&(c=h[0],h=h[1],t=2<=(l=c.split("_")).length&&"type"==l[1]?t+(c+"=")+h+"&":t+(c+"=redacted&"))}else t=null;else t=s;return"XMLHTTP REQ ("+o+") [attempt "+a+"]: "+r+"\n"+i+"\n"+t}))}function Ny(t,e,n){for(var r,i,o,a=!0;!t.A&&t.D<n.length;){var s=(s=n,o=i=void 0,i=(r=t).D,-1==(o=s.indexOf("\n",i))?xy:(i=Number(s.substring(i,o)),isNaN(i)?Cy:(o+=1)+i>s.length?xy:(s=s.substr(o,i),r.D=o+i,s)));if(s==xy){4==e&&(t.h=4,vy(14),a=!1),uy(t.c,t.f,null,"[Incomplete Response]");break}if(s==Cy){t.h=4,vy(15),uy(t.c,t.f,n,"[Invalid Chunk]"),a=!1;break}uy(t.c,t.f,s,null),jy(t,s)}4==e&&0==n.length&&(t.h=1,vy(16),a=!1),t.b=t.b&&a,a?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Qg(e),e.F=!0,vy(11))):(uy(t.c,t.f,n,"[Invalid Chunked Response]"),My(t),Ly(t))}function Py(t){t.T=Dd()+t.P,Ry(t,t.P)}function Ry(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=gy(Pd(t.Va,t),e)}function Dy(t){t.o&&(Id.clearTimeout(t.o),t.o=null)}function Ly(t){0==t.g.v||t.A||$g(t.g,t)}function My(t){Dy(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Yv(t.R),ay(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function jy(t,e){try{var n,r,i,o,a,s,u,c,l,h,f,p=t.g;if(0!=p.v&&(p.a==t||yg(p.b,t)))if(p.I=t.N,!t.C&&yg(p.b,t)&&3==p.v){try{var d=p.ka.a.parse(e)}catch(t){d=null}if(Array.isArray(d)&&3==d.length){var v=d;if(0==v[0]){t:if(!p.j){if(p.a){if(!(p.a.u+3e3<t.u))break t;Xg(p),Ug(p)}Gg(p),vy(18)}}else p.oa=v[1],0<p.oa-p.P&&v[2]<37500&&p.H&&0==p.o&&!p.m&&(p.m=gy(Pd(p.Sa,p),6e3));if(vg(p.b)<=1&&p.ea){try{p.ea()}catch(t){}p.ea=void 0}}else Zg(p,11)}else if(!t.C&&p.a!=t||Xg(p),!qd(e))for(e=d=p.ka.a.parse(e),d=0;d<e.length;d++)v=e[d],p.P=v[0],v=v[1],2==p.v?"c"==v[0]?(p.J=v[1],p.ga=v[2],null!=(n=v[3])&&(p.ha=n,p.c.info("VER="+p.ha)),null!=(r=v[4])&&(p.pa=r,p.c.info("SVER="+p.pa)),null!=(i=v[5])&&"number"==typeof i&&0<i&&(o=1.5*i,p.D=o,p.c.info("backChannelRequestTimeoutMs_="+o)),o=p,(a=t.a)&&(!(s=a.a?a.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(u=o.b).a&&(Kd(s,"spdy")||Kd(s,"quic")||Kd(s,"h2"))&&(u.f=u.g,u.a=new Set,u.b&&(gg(u,u.b),u.b=null)),!o.A||(c=a.a?a.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(o.na=c,Yy(o.B,o.A,c))),p.v=3,p.f&&p.f.ta(),p.U&&(p.N=Dd()-t.u,p.c.info("Handshake RTT: "+p.N+"ms")),l=t,(o=p).la=em(o,o.C?o.ga:null,o.fa),l.C?(mg(o.b,l),h=l,(f=o.D)&&h.setTimeout(f),h.o&&(Dy(h),Py(h)),o.a=l):Wg(o),0<p.g.length&&Bg(p)):"stop"!=v[0]&&"close"!=v[0]||Zg(p,7):3==p.v&&("stop"==v[0]||"close"==v[0]?"stop"==v[0]?Zg(p,7):Fg(p):"noop"!=v[0]&&p.f&&p.f.sa(v),p.o=0);py()}catch(t){}}function Fy(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(kd(t)||"string"==typeof t)Fd(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(kd(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(kd(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Uy(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Uy)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Vy(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];qy(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)qy(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function qy(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(js=Iy.prototype).setTimeout=function(t){this.P=t},js.Xa=function(t){t=t.target;var e=this.F;e&&3==Dg(t)?e.f():this.Ca(t)},js.Ca=function(t){try{if(t==this.a)t:{var e=Dg(this.a),n=this.a.ua();if(this.a.W(),!(e<3||3==e&&!nv&&!this.a.$())){this.A||4!=e||7==n||py(),Dy(this);var r=this.a.W();this.N=r;var i=this.a.$();if(this.b=200==r,u=this.c,c=this.m,l=this.l,h=this.f,f=this.S,p=e,d=r,u.info((function(){return"XMLHTTP RESP ("+h+") [ attempt "+f+"]: "+c+"\n"+l+"\n"+p+" "+d})),this.b){if(this.U&&!this.C){e:{if(this.a){var o,a=this.a;if((o=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qd(o)){var s=o;break e}}s=null}if(!s){this.b=!1,this.h=3,vy(12),My(this),Ly(this);break t}uy(this.c,this.f,s,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,jy(this,s)}this.I?(Ny(this,e,i),nv&&this.b&&3==e&&(oy(this.J,this.R,"tick",this.Wa),this.R.start())):(uy(this.c,this.f,i,null),jy(this,i)),4==e&&My(this),this.b&&!this.A&&(4==e?$g(this.g,this):(this.b=!1,Py(this)))}else 400==r&&0<i.indexOf("Unknown SID")?(this.h=3,vy(12)):(this.h=0,vy(13)),My(this),Ly(this)}}}catch(t){}var u,c,l,h,f,p,d},js.Wa=function(){var t,e;this.a&&(t=Dg(this.a),e=this.a.$(),this.D<e.length&&(Dy(this),Ny(this,t,e),this.b&&4!=t&&Py(this)))},js.cancel=function(){this.A=!0,My(this)},js.Va=function(){this.o=null;var t,e,n=Dd();0<=n-this.T?(t=this.c,e=this.l,t.info((function(){return"TIMEOUT: "+e})),2!=this.H&&(py(),vy(17)),My(this),this.h=2,Ly(this)):Ry(this,this.T-n)},(js=Uy.prototype).K=function(){Vy(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},js.L=function(){return Vy(this),this.a.concat()},js.get=function(t,e){return qy(this.b,t)?this.b[t]:e},js.set=function(t,e){qy(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},js.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var By=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function zy(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof zy?(this.a=void 0!==e?e:t.a,Hy(this,t.f),this.j=t.j,Wy(this,t.c),Gy(this,t.h),this.g=t.g,e=t.b,(n=new og).c=e.c,e.a&&(n.a=new Uy(e.a),n.b=e.b),Qy(this,n),this.i=t.i):t&&(n=String(t).match(By))?(this.a=!!e,Hy(this,n[1]||"",!0),this.j=$y(n[2]||""),Wy(this,n[3]||"",!0),Gy(this,n[4]),this.g=$y(n[5]||"",!0),Qy(this,n[6]||"",!0),this.i=$y(n[7]||"")):(this.a=!!e,this.b=new og(null,this.a))}function Ky(t){return new zy(t)}function Hy(t,e,n){t.f=n?$y(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Wy(t,e,n){t.c=n?$y(e,!0):e}function Gy(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Qy(t,e,n){var r,i;e instanceof og?(t.b=e,r=t.b,(i=t.a)&&!r.f&&(ag(r),r.c=null,r.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(sg(this,e),cg(this,n,t))}),r)),r.f=i):(n||(e=Jy(e,rg)),t.b=new og(e,t.a))}function Yy(t,e,n){t.b.set(e,n)}function Xy(t){return Yy(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Dd()).toString(36)),t}function $y(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Jy(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Zy),t=n?t.replace(/%25([0-9a-fA-F]{2})/g,"%$1"):t):null}function Zy(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}zy.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Jy(e,tg,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(Jy(e,tg,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Jy(n,"/"==n.charAt(0)?ng:eg,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Jy(n,ig)),t.join("")};var tg=/[#\/\?@]/g,eg=/[#\?:]/g,ng=/[#\?]/g,rg=/[#\?@]/g,ig=/#/g;function og(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function ag(t){t.a||(t.a=new Uy,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function sg(t,e){ag(t),e=lg(t,e),qy(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,qy((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Vy(t)))}function ug(t,e){return ag(t),e=lg(t,e),qy(t.a.b,e)}function cg(t,e,n){sg(t,e),0<n.length&&(t.c=null,t.a.set(lg(t,e),Vd(n)),t.b+=n.length)}function lg(t,e){return e=String(e),t.f?e.toLowerCase():e}(js=og.prototype).add=function(t,e){ag(this),this.c=null,t=lg(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},js.forEach=function(t,e){ag(this),this.a.forEach((function(n,r){Fd(n,(function(n){t.call(e,n,r,this)}),this)}),this)},js.L=function(){ag(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},js.K=function(t){ag(this);var e=[];if("string"==typeof t)ug(this,t)&&(e=Ud(e,this.a.get(lg(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=Ud(e,t[n])}return e},js.set=function(t,e){return ag(this),this.c=null,ug(this,t=lg(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},js.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},js.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),o=(r=this.K(r),0);o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}return this.c=t.join("&")};var hg=function(t,e){this.b=t,this.a=e};function fg(t){this.g=t||pg,t=Id.PerformanceNavigationTiming?0<(t=Id.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Id.ia&&Id.ia.ya&&Id.ia.ya()&&Id.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var pg=10;function dg(t){return t.b||t.a&&t.a.size>=t.f}function vg(t){return t.b?1:t.a?t.a.size:0}function yg(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function gg(t,e){t.a?t.a.add(e):t.b=e}function mg(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function bg(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null==t.a||0===t.a.size)return Vd(t.c);var r=t.c;try{for(var i=Td(t.a.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function wg(){}function _g(){this.a=new wg}function Tg(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}fg.prototype.cancel=function(){var t,e;if(this.c=bg(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Td(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},wg.prototype.stringify=function(t){return Id.JSON.stringify(t,void 0)},wg.prototype.parse=function(t){return Id.JSON.parse(t,void 0)};var Eg=Id.JSON.parse;function Ig(t){Lv.call(this),this.headers=new Uy,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Sg,this.D=this.F=!1}Ld(Ig,Lv);var Sg="",kg=/^https?$/i,Cg=["POST","PUT"];function xg(t){return"content-type"==t.toLowerCase()}function Ag(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Og(t),Pg(t)}function Og(t){t.u||(t.u=!0,Mv(t,"complete"),Mv(t,"error"))}function Ng(t){if(t.b&&void 0!==Ed&&(!t.s[1]||4!=Dg(t)||2!=t.W()))if(t.l&&4==Dg(t))Xv(t.za,0,t);else if(Mv(t,"readystatechange"),4==Dg(t)){t.b=!1;try{var e,n,r,i,o=t.W();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var a=!0;break t;default:a=!1}if((e=a)||((n=0===o)&&(!(i=String(t.B).match(By)[1]||null)&&Id.self&&Id.self.location&&(i=(r=Id.self.location.protocol).substr(0,r.length-1)),n=!kg.test(i?i.toLowerCase():"")),e=n),e)Mv(t,"complete"),Mv(t,"success");else{t.h=6;try{var s=2<Dg(t)?t.a.statusText:""}catch(o){s=""}t.f=s+" ["+t.W()+"]",Og(t)}}finally{Pg(t)}}}function Pg(t,e){if(t.a){Rg(t);var n=t.a,r=t.s[0]?Sd:null;t.a=null,t.s=null,e||Mv(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Rg(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Id.clearTimeout(t.m),t.m=null)}function Dg(t){return t.a?t.a.readyState:0}function Lg(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",Gd(n,(function(t,e){i+=e,i+=":",i+=t,i+="\r\n"})),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Yy(t,e,n))}function Mg(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function jg(t){this.pa=0,this.g=[],this.c=new sy,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=Mg("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=Mg("baseRetryDelayMs",5e3,t),this.Ra=Mg("retryDelaySeedMs",1e4,t),this.Ma=Mg("forwardChannelMaxRetries",2,t),this.ma=Mg("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new fg(t&&t.concurrentRequestLimit),this.ka=new _g,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Fg(t){var e,n;Vg(t),3==t.v&&(e=t.R++,Yy(n=Ky(t.B),"SID",t.J),Yy(n,"RID",e),Yy(n,"TYPE","terminate"),Kg(t,n),(e=new Iy(t,t.c,e,void 0)).H=2,e.i=Xy(Ky(n)),n=!1,!(n=Id.navigator&&Id.navigator.sendBeacon?Id.navigator.sendBeacon(e.i.toString(),""):n)&&Id.Image&&((new Image).src=e.i,n=!0),n||(e.a=nm(e.g,null),e.a.ba(e.i)),e.u=Dd(),Py(e)),tm(t)}function Ug(t){t.a&&(Qg(t),t.a.cancel(),t.a=null)}function Vg(t){Ug(t),t.j&&(Id.clearTimeout(t.j),t.j=null),Xg(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Id.clearTimeout(t.h),t.h=null)}function qg(t,e){t.g.push(new hg(t.Oa++,e)),3==t.v&&Bg(t)}function Bg(t){dg(t.b)||t.h||(t.h=!0,Kv(t.Ba,t),t.u=0)}function zg(t,e){var n=e?e.f:t.R++,r=Ky(t.B);Yy(r,"SID",t.J),Yy(r,"RID",n),Yy(r,"AID",t.P),Kg(t,r),t.i&&t.l&&Lg(r,t.i,t.l),n=new Iy(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Hg(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),gg(t.b,n),Ay(n,r,e)}function Kg(t,e){t.f&&Fy({},(function(t,n){Yy(e,n,t)}))}function Hg(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Pd(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),s=!1;else try{!function(t,e,n){var r=n||"";try{Fy(t,(function(t,n){var i=t;Cd(t)&&(i=Fv(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}(l,a,"req"+c+"_")}catch(t){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Wg(t){t.a||t.j||(t.T=1,Kv(t.Aa,t),t.o=0)}function Gg(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=gy(Pd(t.Aa,t),Jg(t,t.o)),t.o++,1)}function Qg(t){null!=t.s&&(Id.clearTimeout(t.s),t.s=null)}function Yg(t){t.a=new Iy(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Ky(t.la);Yy(e,"RID","rpc"),Yy(e,"SID",t.J),Yy(e,"CI",t.H?"0":"1"),Yy(e,"AID",t.P),Kg(t,e),Yy(e,"TYPE","xmlhttp"),t.i&&t.l&&Lg(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Xy(Ky(e)),n.j=null,n.I=!0,Oy(n,t)}function Xg(t){null!=t.m&&(Id.clearTimeout(t.m),t.m=null)}function $g(t,e){var n,r,i,o=null;if(t.a==e){Xg(t),Qg(t),t.a=null;var a=2}else{if(!yg(t.b,e))return;o=e.s,mg(t.b,e),a=1}if(t.I=e.N,0!=t.v)if(e.b)1==a?(o=e.j?e.j.length:0,e=Dd()-e.u,n=t.u,Mv(a=hy(),new yy(a)),Bg(t)):Wg(t);else if(3==(n=e.h)||0==n&&0<t.I||(1!=a||(i=e,vg((r=t).b)>=r.b.f-(r.h?1:0)||(r.h?(r.g=i.s.concat(r.g),0):1==r.v||2==r.v||r.u>=(r.La?0:r.Ma)||(r.h=gy(Pd(r.Ba,r,i),Jg(r,r.u)),r.u++,0))))&&(2!=a||!Gg(t)))switch(o&&0<o.length&&(e=t.b,e.c=e.c.concat(o)),n){case 1:Zg(t,5);break;case 4:Zg(t,10);break;case 3:Zg(t,6);break;default:Zg(t,2)}}function Jg(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Zg(t,e){var n,r,i,o;t.c.info("Error code "+e),2==e?(r=null,t.f&&(r=null),o=Pd(t.Ya,t),r||(r=new zy("//www.google.com/images/cleardot.gif"),Id.location&&"http"==Id.location.protocol||Hy(r,"https"),Xy(r)),n=r.toString(),r=o,o=new sy,Id.Image?((i=new Image).onload=Rd(Tg,o,i,"TestLoadImage: loaded",!0,r),i.onerror=Rd(Tg,o,i,"TestLoadImage: error",!1,r),i.onabort=Rd(Tg,o,i,"TestLoadImage: abort",!1,r),i.ontimeout=Rd(Tg,o,i,"TestLoadImage: timeout",!1,r),Id.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=n):r(!1)):vy(2),t.v=0,t.f&&t.f.ra(e),tm(t),Vg(t)}function tm(t){t.v=0,t.I=-1,t.f&&(0==bg(t.b).length&&0==t.g.length||(t.b.c.length=0,Vd(t.g),t.g.length=0),t.f.qa())}function em(t,e,n){var r,i,o,a,s,u=(a=n)instanceof zy?Ky(a):new zy(a,void 0);return""!=u.c?(e&&Wy(u,e+"."+u.c),Gy(u,u.h)):(r=(s=Id.location).protocol,i=e?e+"."+s.hostname:s.hostname,o=+s.port,a=n,s=new zy(null,void 0),r&&Hy(s,r),i&&Wy(s,i),o&&Gy(s,o),a&&(s.g=a),u=s),t.V&&Gd(t.V,(function(t,e){Yy(u,e,t)})),e=t.A,n=t.na,e&&n&&Yy(u,e,n),Yy(u,"VER",t.ha),Kg(t,u),u}function nm(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ig(t.Na)).F=t.C,e}function rm(){}function im(){if(tv&&!(10<=Number(lv)))throw Error("Environmental error: no available transport.")}function om(t,e){Lv.call(this),this.a=new jg(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!qd(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!qd(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new um(this)}function am(t){_y.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function sm(){Ty.call(this),this.status=1}function um(t){this.a=t}(js=Ig.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?by(this.H):by(Sy),this.a.onreadystatechange=Pd(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Ag(this,t)}t=n||"";var i,o=new Uy(this.headers);r&&Fy(r,(function(t,e){o.set(e,t)})),r=function(t){t:{for(var e=xg,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.L()),n=Id.FormData&&t instanceof Id.FormData,0<=jd(Cg,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Rg(this),0<this.o&&((this.D=(i=this.a,tv&&cv(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=Pd(this.xa,this)):this.m=Xv(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Ag(this,t)}},js.xa=function(){void 0!==Ed&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Mv(this,"timeout"),this.abort(8))},js.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Mv(this,"complete"),Mv(this,"abort"),Pg(this))},js.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Pg(this,!0)),Ig.X.G.call(this)},js.za=function(){this.j||(this.A||this.l||this.g?Ng(this):this.Ua())},js.Ua=function(){Ng(this)},js.W=function(){try{return 2<Dg(this)?this.a.status:-1}catch(t){return-1}},js.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},js.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Eg(e)}},js.ua=function(){return this.h},js.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(js=jg.prototype).ha=8,js.v=1,js.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Iy(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Xd(r=Qd(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Hg(this,n,e),Yy(i=Ky(this.B),"RID",t),Yy(i,"CVER",22),this.A&&Yy(i,"X-HTTP-Session-Id",this.A),Kg(this,i),this.i&&r&&Lg(i,this.i,r),gg(this.b,n),this.Ia&&Yy(i,"TYPE","init"),this.da?(Yy(i,"$req",e),Yy(i,"SID","null"),n.U=!0,Ay(n,i,null)):Ay(n,i,e),this.v=2}}else 3==this.v&&(t?zg(this,t):0==this.g.length||dg(this.b)||zg(this))},js.Aa=function(){var t;this.j=null,Yg(this),this.U&&!(this.F||null==this.a||this.N<=0)&&(t=2*this.N,this.c.info("BP detection timer enabled: "+t),this.s=gy(Pd(this.Ta,this),t))},js.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,vy(10),Ug(this),Yg(this))},js.Sa=function(){null!=this.m&&(this.m=null,Ug(this),Gg(this),vy(19))},js.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),vy(2)):(this.c.info("Failed to ping google.com"),vy(1))},(js=rm.prototype).ta=function(){},js.sa=function(){},js.ra=function(){},js.qa=function(){},js.Ja=function(){},im.prototype.a=function(t,e){return new om(t,e)},Ld(om,Lv),om.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;vy(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=em(t,null,t.fa),Bg(t)},om.prototype.close=function(){Fg(this.a)},om.prototype.h=function(t){var e;"string"==typeof t?((e={}).__data__=t,qg(this.a,e)):this.l?((e={}).__data__=Fv(t),qg(this.a,e)):qg(this.a,t)},om.prototype.G=function(){this.a.f=null,delete this.f,Fg(this.a),delete this.a,om.X.G.call(this)},Ld(am,_y),Ld(sm,Ty),Ld(um,rm),um.prototype.ta=function(){Mv(this.a,"a")},um.prototype.sa=function(t){Mv(this.a,new am(t))},um.prototype.ra=function(t){Mv(this.a,new sm)},um.prototype.qa=function(){Mv(this.a,"b")},im.prototype.createWebChannel=im.prototype.a,om.prototype.send=om.prototype.h,om.prototype.open=om.prototype.g,kn.NO_ERROR=0,kn.TIMEOUT=8,kn.HTTP_ERROR=6,H.COMPLETE="complete",(wy.EventType=W).OPEN="a",W.CLOSE="b",W.ERROR="c",W.MESSAGE="d",Lv.prototype.listen=Lv.prototype.va,Ig.prototype.listenOnce=Ig.prototype.wa,Ig.prototype.getLastError=Ig.prototype.Qa,Ig.prototype.getLastErrorCode=Ig.prototype.ua,Ig.prototype.getStatus=Ig.prototype.W,Ig.prototype.getResponseJson=Ig.prototype.Pa,Ig.prototype.getResponseText=Ig.prototype.$,Ig.prototype.send=Ig.prototype.ba;var cm=hy,lm=kn,hm=H,fm=cy,pm=wy,dm=Ig,vm=(ym.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},ym.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},ym);function ym(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}vm.o=-1;var gm,mm={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},bm=(Qi(_m,gm=Error),_m),wm=new sa("@firebase/firestore");function _m(t,e){var n=this;return(n=gm.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function Tm(){return wm.logLevel}function Em(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];wm.logLevel<=ea.DEBUG&&(e=n.map(km),wm.debug.apply(wm,to(["Firestore (8.6.3): "+t],e)))}function Im(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];wm.logLevel<=ea.ERROR&&(e=n.map(km),wm.error.apply(wm,to(["Firestore (8.6.3): "+t],e)))}function Sm(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];wm.logLevel<=ea.WARN&&(e=n.map(km),wm.warn.apply(wm,to(["Firestore (8.6.3): "+t],e)))}function km(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function Cm(t){throw Im(t="FIRESTORE (8.6.3) INTERNAL ASSERTION FAILED: "+(t=void 0===t?"Unexpected state":t)),new Error(t)}function xm(t){t||Cm()}var Am=(Om.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=function(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(40);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<40;r++)n[r]=Math.floor(256*Math.random());return n}(),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},Om);function Om(){}function Nm(t,e){return t<e?-1:e<t?1:0}function Pm(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Rm(t){return t+"\0"}var Dm=(jm.now=function(){return jm.fromMillis(Date.now())},jm.fromDate=function(t){return jm.fromMillis(t.getTime())},jm.fromMillis=function(t){var e=Math.floor(t/1e3);return new jm(e,Math.floor(1e6*(t-1e3*e)))},jm.prototype.toDate=function(){return new Date(this.toMillis())},jm.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},jm.prototype._compareTo=function(t){return this.seconds===t.seconds?Nm(this.nanoseconds,t.nanoseconds):Nm(this.seconds,t.seconds)},jm.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},jm.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},jm.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},jm.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},jm),Lm=(Mm.fromTimestamp=function(t){return new Mm(t)},Mm.min=function(){return new Mm(new Dm(0,0))},Mm.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},Mm.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},Mm.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},Mm.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},Mm.prototype.toTimestamp=function(){return this.timestamp},Mm);function Mm(t){this.timestamp=t}function jm(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new bm(mm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new bm(mm.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new bm(mm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new bm(mm.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function Fm(t){var e,n=0;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n++;return n}function Um(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Vm(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}Object.defineProperty(Jm.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),Jm.prototype.isEqual=function(t){return 0===Jm.comparator(this,t)},Jm.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof Jm?t.forEach((function(t){e.push(t)})):e.push(t),this.construct(e)},Jm.prototype.limit=function(){return this.offset+this.length},Jm.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},Jm.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},Jm.prototype.firstSegment=function(){return this.segments[this.offset]},Jm.prototype.lastSegment=function(){return this.get(this.length-1)},Jm.prototype.get=function(t){return this.segments[this.offset+t]},Jm.prototype.isEmpty=function(){return 0===this.length},Jm.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Jm.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Jm.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},Jm.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},Jm.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0};var qm,Bm,zm=(Qi($m,Bm=kn=Jm),$m.prototype.construct=function(t,e,n){return new $m(t,e,n)},$m.prototype.canonicalString=function(){return this.toArray().join("/")},$m.prototype.toString=function(){return this.canonicalString()},$m.fromString=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];if(0<=o.indexOf("//"))throw new bm(mm.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");n.push.apply(n,o.split("/").filter((function(t){return 0<t.length})))}return new $m(n)},$m.emptyPath=function(){return new $m([])},$m),Km=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Hm=(Qi(Xm,qm=kn),Xm.prototype.construct=function(t,e,n){return new Xm(t,e,n)},Xm.isValidIdentifier=function(t){return Km.test(t)},Xm.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xm.isValidIdentifier(t)?t:"`"+t+"`"})).join(".")},Xm.prototype.toString=function(){return this.canonicalString()},Xm.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},Xm.keyField=function(){return new Xm(["__name__"])},Xm.fromServerFormat=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new bm(mm.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var a=t[r];if("\\"===a){if(r+1===t.length)throw new bm(mm.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var s=t[r+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new bm(mm.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=s,r+=2}else"`"===a?o=!o:"."!==a||o?n+=a:i(),r++}if(i(),o)throw new bm(mm.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Xm(e)},Xm.emptyPath=function(){return new Xm([])},Xm),Wm=(Ym.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},Ym.prototype.isEqual=function(t){return Pm(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},Ym),Gm=(Qm.fromBase64String=function(t){return new Qm(atob(t))},Qm.fromUint8Array=function(t){return new Qm(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},Qm.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},Qm.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},Qm.prototype.approximateByteSize=function(){return 2*this.binaryString.length},Qm.prototype.compareTo=function(t){return Nm(this.binaryString,t.binaryString)},Qm.prototype.isEqual=function(t){return this.binaryString===t.binaryString},Qm);function Qm(t){this.binaryString=t}function Ym(t){(this.fields=t).sort(Hm.comparator)}function Xm(){return null!==qm&&qm.apply(this,arguments)||this}function $m(){return null!==Bm&&Bm.apply(this,arguments)||this}function Jm(t,e,n){void 0===e?e=0:e>t.length&&Cm(),void 0===n?n=t.length-e:n>t.length-e&&Cm(),this.segments=t,this.offset=e,this.len=n}Gm.EMPTY_BYTE_STRING=new Gm("");var Zm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function tb(t){if(xm(!!t),"string"!=typeof t)return{seconds:eb(t.seconds),nanos:eb(t.nanos)};var e=0,n=Zm.exec(t);return xm(!!n),n[1]&&(n=((n=n[1])+"000000000").substr(0,9),e=Number(n)),t=new Date(t),{seconds:Math.floor(t.getTime()/1e3),nanos:e}}function eb(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function nb(t){return"string"==typeof t?Gm.fromBase64String(t):Gm.fromUint8Array(t)}function rb(t){return"server_timestamp"===(null===(t=((null===(t=null==t?void 0:t.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ib(t){return t=tb(t.mapValue.fields.__local_write_time__.timestampValue),new Dm(t.seconds,t.nanos)}function ob(t){return null==t}function ab(t){return 0===t&&1/t==-1/0}function sb(t){return"number"==typeof t&&Number.isInteger(t)&&!ab(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ub=(cb.fromPath=function(t){return new cb(zm.fromString(t))},cb.fromName=function(t){return new cb(zm.fromString(t).popFirst(5))},cb.prototype.hasCollectionId=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},cb.prototype.isEqual=function(t){return null!==t&&0===zm.comparator(this.path,t.path)},cb.prototype.toString=function(){return this.path.toString()},cb.comparator=function(t,e){return zm.comparator(t.path,e.path)},cb.isDocumentKey=function(t){return t.length%2==0},cb.fromSegments=function(t){return new cb(new zm(t.slice()))},cb);function cb(t){this.path=t}function lb(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?rb(t)?4:10:Cm()}function hb(t,e){var n,r,i=lb(t);if(i!==lb(e))return!1;switch(i){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ib(t).isEqual(ib(e));case 3:return function(e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=tb(t.timestampValue);return e=tb(e.timestampValue),n.seconds===e.seconds&&n.nanos===e.nanos}(e);case 5:return t.stringValue===e.stringValue;case 6:return r=e,nb(t.bytesValue).isEqual(nb(r.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return n=e,eb((r=t).geoPointValue.latitude)===eb(n.geoPointValue.latitude)&&eb(r.geoPointValue.longitude)===eb(n.geoPointValue.longitude);case 2:return function(t,e){return"integerValue"in t&&"integerValue"in e?eb(t.integerValue)===eb(e.integerValue):"doubleValue"in t&&"doubleValue"in e&&((t=eb(t.doubleValue))===(e=eb(e.doubleValue))?ab(t)===ab(e):isNaN(t)&&isNaN(e))}(t,e);case 9:return Pm(t.arrayValue.values||[],e.arrayValue.values||[],hb);case 10:return function(){var n,r=t.mapValue.fields||{},i=e.mapValue.fields||{};if(Fm(r)!==Fm(i))return!1;for(n in r)if(r.hasOwnProperty(n)&&(void 0===i[n]||!hb(r[n],i[n])))return!1;return!0}();default:return Cm()}}function fb(t,e){return void 0!==(t.values||[]).find((function(t){return hb(t,e)}))}function pb(t,e){var n,r,i,o=lb(t),a=lb(e);if(o!==a)return Nm(o,a);switch(o){case 0:return 0;case 1:return Nm(t.booleanValue,e.booleanValue);case 2:return r=e,(i=eb(t.integerValue||t.doubleValue))<(r=eb(r.integerValue||r.doubleValue))?-1:r<i?1:i===r?0:isNaN(i)?isNaN(r)?0:-1:1;case 3:return db(t.timestampValue,e.timestampValue);case 4:return db(ib(t),ib(e));case 5:return Nm(t.stringValue,e.stringValue);case 6:return function(t,e){return t=nb(t),e=nb(e),t.compareTo(e)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Nm(n[i],r[i]);if(0!==o)return o}return Nm(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return n=t.geoPointValue,i=e.geoPointValue,0!==(r=Nm(eb(n.latitude),eb(i.latitude)))?r:Nm(eb(n.longitude),eb(i.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=pb(n[i],r[i]);if(o)return o}return Nm(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Nm(r[a],o[a]);if(0!==s)return s;if(0!==(s=pb(n[r[a]],i[o[a]])))return s}return Nm(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Cm()}}function db(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Nm(t,e);var n=tb(t);return t=tb(e),0!==(e=Nm(n.seconds,t.seconds))?e:Nm(n.nanos,t.nanos)}function vb(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){return"time("+(t=tb(t)).seconds+","+t.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?nb(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ub.fromName(n).toString()):"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var a=o[i];r?r=!1:n+=",",n+=a+":"+t(e.fields[a])}return n+"}"}(e.mapValue):Cm();var n}(t)}function yb(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function gb(t){return t&&"integerValue"in t}function mb(t){return!!t&&"arrayValue"in t}function bb(t){return t&&"nullValue"in t}function wb(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function _b(t){return t&&"mapValue"in t}function Tb(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},tb(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return Um(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=Tb(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Tb(t.arrayValue.values[r]);return n}return Object.assign({},t)}var Eb=(Ib.empty=function(){return new Ib({mapValue:{}})},Ib.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!_b(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},Ib.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Tb(e)},Ib.prototype.setAll=function(t){var e=this,n=Hm.emptyPath(),r={},i=[];t.forEach((function(t,o){var a;n.isImmediateParentOf(o)||(a=e.getFieldsMap(n),e.applyChanges(a,r,i),r={},i=[],n=o.popLast()),t?r[o.lastSegment()]=Tb(t):i.push(o.lastSegment())})),t=this.getFieldsMap(n),this.applyChanges(t,r,i)},Ib.prototype.delete=function(t){var e=this.field(t.popLast());_b(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},Ib.prototype.isEqual=function(t){return hb(this.value,t.value)},Ib.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];_b(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},Ib.prototype.applyChanges=function(t,e,n){Um(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},Ib.prototype.clone=function(){return new Ib(Tb(this.value))},Ib);function Ib(t){this.value=t}var Sb=(Cb.newInvalidDocument=function(t){return new Cb(t,0,Lm.min(),Eb.empty(),0)},Cb.newFoundDocument=function(t,e,n){return new Cb(t,1,e,n,0)},Cb.newNoDocument=function(t,e){return new Cb(t,2,e,Eb.empty(),0)},Cb.newUnknownDocument=function(t,e){return new Cb(t,3,e,Eb.empty(),2)},Cb.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},Cb.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Eb.empty(),this.documentState=0,this},Cb.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Eb.empty(),this.documentState=2,this},Cb.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},Cb.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(Cb.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(Cb.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(Cb.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),Cb.prototype.isValidDocument=function(){return 0!==this.documentType},Cb.prototype.isFoundDocument=function(){return 1===this.documentType},Cb.prototype.isNoDocument=function(){return 2===this.documentType},Cb.prototype.isUnknownDocument=function(){return 3===this.documentType},Cb.prototype.isEqual=function(t){return t instanceof Cb&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)},Cb.prototype.clone=function(){return new Cb(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},Cb.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},Cb),kb=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function Cb(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}function xb(t,e,n,r,i,o,a){return new kb(t,e=void 0===e?null:e,n=void 0===n?[]:n,r=void 0===r?[]:r,i=void 0===i?null:i,o=void 0===o?null:o,a=void 0===a?null:a)}function Ab(t){var e=t;return null===e.h&&(t=e.path.canonicalString(),null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((function(t){return(t=t).field.canonicalString()+t.op.toString()+vb(t.value)})).join(","),t+="|ob:",t+=e.orderBy.map((function(t){return(t=t).field.canonicalString()+t.dir})).join(","),ob(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=iw(e.startAt)),e.endAt&&(t+="|ub:",t+=iw(e.endAt)),e.h=t),e.h}function Ob(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i=0;i<t.orderBy.length;i++)if(n=t.orderBy[i],r=e.orderBy[i],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o,a,s=0;s<t.filters.length;s++)if(o=t.filters[s],a=e.filters[s],o.op!==a.op||!o.field.isEqual(a.field)||!hb(o.value,a.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sw(t.startAt,e.startAt)&&sw(t.endAt,e.endAt)}function Nb(t){return ub.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Pb,Rb=(Qi(Db,Pb=function(){}),Db.create=function(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.l(t,e,n):new Fb(t,e,n):"array-contains"===e?new Yb(t,n):"in"===e?new Xb(t,n):"not-in"===e?new $b(t,n):"array-contains-any"===e?new Jb(t,n):new Db(t,e,n)},Db.l=function(t,e,n){return new("in"===e?Ub:Vb)(t,n)},Db.prototype.matches=function(t){return t=t.data.field(this.field),"!="===this.op?null!==t&&this.m(pb(t,this.value)):null!==t&&lb(this.value)===lb(t)&&this.m(pb(t,this.value))},Db.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return 0<t;case">=":return 0<=t;default:return Cm()}},Db.prototype.g=function(){return 0<=["<","<=",">",">=","!=","not-in"].indexOf(this.op)},Db);function Db(t,e,n){var r=this;return(r=Pb.call(this)||this).field=t,r.op=e,r.value=n,r}var Lb,Mb,jb,Fb=(Qi(zb,jb=Rb),zb.prototype.matches=function(t){return t=ub.comparator(t.key,this.key),this.m(t)},zb),Ub=(Qi(Bb,Mb=Rb),Bb.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},Bb),Vb=(Qi(qb,Lb=Rb),qb.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},qb);function qb(t,e){var n=this;return(n=Lb.call(this,t,"not-in",e)||this).keys=Kb(0,e),n}function Bb(t,e){var n=this;return(n=Mb.call(this,t,"in",e)||this).keys=Kb(0,e),n}function zb(t,e,n){var r=this;return(r=jb.call(this,t,e,n)||this).key=ub.fromName(n.referenceValue),r}function Kb(t,e){return((null===(e=e.arrayValue)||void 0===e?void 0:e.values)||[]).map((function(t){return ub.fromName(t.referenceValue)}))}var Hb,Wb,Gb,Qb,Yb=(Qi(rw,Qb=Rb),rw.prototype.matches=function(t){return mb(t=t.data.field(this.field))&&fb(t.arrayValue,this.value)},rw),Xb=(Qi(nw,Gb=Rb),nw.prototype.matches=function(t){return null!==(t=t.data.field(this.field))&&fb(this.value.arrayValue,t)},nw),$b=(Qi(ew,Wb=Rb),ew.prototype.matches=function(t){return!fb(this.value.arrayValue,{nullValue:"NULL_VALUE"})&&null!==(t=t.data.field(this.field))&&!fb(this.value.arrayValue,t)},ew),Jb=(Qi(tw,Hb=Rb),tw.prototype.matches=function(t){var e=this;return!(!mb(t=t.data.field(this.field))||!t.arrayValue.values)&&t.arrayValue.values.some((function(t){return fb(e.value.arrayValue,t)}))},tw),Zb=function(t,e){this.position=t,this.before=e};function tw(t,e){return Hb.call(this,t,"array-contains-any",e)||this}function ew(t,e){return Wb.call(this,t,"not-in",e)||this}function nw(t,e){return Gb.call(this,t,"in",e)||this}function rw(t,e){return Qb.call(this,t,"array-contains",e)||this}function iw(t){return(t.before?"b":"a")+":"+t.position.map(vb).join(",")}var ow=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function aw(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?ub.comparator(ub.fromName(a.referenceValue),n.key):pb(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function sw(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!hb(t.position[n],e.position[n]))return!1;return!0}var uw=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function cw(t,e,n,r,i,o,a,s){return new uw(t,e,n,r,i,o,a,s)}function lw(t){return new uw(t)}function hw(t){return!ob(t.limit)&&"F"===t.limitType}function fw(t){return!ob(t.limit)&&"L"===t.limitType}function pw(t){return 0<t.explicitOrderBy.length?t.explicitOrderBy[0].field:null}function dw(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function vw(t){return null!==t.collectionGroup}function yw(t){var e=t;if(null===e.p){e.p=[];var n=dw(e);if(t=pw(e),null!==n&&null===t)n.isKeyField()||e.p.push(new ow(n)),e.p.push(new ow(Hm.keyField(),"asc"));else{for(var r=!1,i=0,o=e.explicitOrderBy;i<o.length;i++){var a=o[i];e.p.push(a),a.field.isKeyField()&&(r=!0)}r||(n=0<e.explicitOrderBy.length?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",e.p.push(new ow(Hm.keyField(),n)))}}return e.p}function gw(t){var e=t;if(!e.T)if("F"===e.limitType)e.T=xb(e.path,e.collectionGroup,yw(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=yw(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new ow(o.field,a))}var s=e.endAt?new Zb(e.endAt.position,!e.endAt.before):null;t=e.startAt?new Zb(e.startAt.position,!e.startAt.before):null,e.T=xb(e.path,e.collectionGroup,n,e.filters,e.limit,s,t)}return e.T}function mw(t,e,n){return new uw(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function bw(t,e){return Ob(gw(t),gw(e))&&t.limitType===e.limitType}function ww(t){return Ab(gw(t))+"|lt:"+t.limitType}function _w(t){return"Query(target="+(n=(e=gw(t)).path.canonicalString(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map((function(t){return(t=t).field.canonicalString()+" "+t.op+" "+vb(t.value)})).join(", ")+"]"),ob(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map((function(t){return(t=t).field.canonicalString()+" ("+t.dir+")"})).join(", ")+"]"),e.startAt&&(n+=", startAt: "+iw(e.startAt)),e.endAt&&(n+=", endAt: "+iw(e.endAt)),"Target("+n+"); limitType=")+t.limitType+")";var e,n}function Tw(t,e){return e.isFoundDocument()&&(n=t,r=e.key.path,null!==n.collectionGroup?e.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(r):ub.isDocumentKey(n.path)?n.path.isEqual(r):n.path.isImmediateParentOf(r))&&function(e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return}return 1}(e)&&function(e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return;return 1}(e)&&(r=e,(!(e=t).startAt||aw(e.startAt,yw(e),r))&&(!e.endAt||!aw(e.endAt,yw(e),r)));var n,r}function Ew(t){return function(e,n){for(var r=!1,i=0,o=yw(t);i<o.length;i++){var a=o[i],s=function(t,e,n){var r=t.field.isKeyField()?ub.comparator(e.key,n.key):function(t,n){var r=e.data.field(t);return t=n.data.field(t),null!==r&&null!==t?pb(r,t):Cm()}(t.field,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Cm()}}(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function Iw(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ab(e)?"-0":e}}function Sw(t){return{integerValue:""+t}}function kw(t,e){return sb(e)?Sw(e):Iw(t,e)}function Cw(t,e){return t instanceof Vw?gb(t=e)||t&&"doubleValue"in t?e:{integerValue:0}:null}var xw,Aw,Ow=(Qi(Rw,Aw=H=function(){this._=void 0}),Rw),Nw=(Qi(Pw,xw=H),Pw);function Pw(t){var e=this;return(e=xw.call(this)||this).elements=t,e}function Rw(){return null!==Aw&&Aw.apply(this,arguments)||this}function Dw(t,e){for(var n=zw(e),r=0,i=t.elements;r<i.length;r++)!function(t){n.some((function(e){return hb(e,t)}))||n.push(t)}(i[r]);return{arrayValue:{values:n}}}var Lw,Mw=(Qi(jw,Lw=H),jw);function jw(t){var e=this;return(e=Lw.call(this)||this).elements=t,e}function Fw(t,e){for(var n=zw(e),r=0,i=t.elements;r<i.length;r++)!function(t){n=n.filter((function(e){return!hb(e,t)}))}(i[r]);return{arrayValue:{values:n}}}var Uw,Vw=(Qi(qw,Uw=H),qw);function qw(t,e){var n=this;return(n=Uw.call(this)||this).R=t,n.A=e,n}function Bw(t){return eb(t.integerValue||t.doubleValue)}function zw(t){return mb(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function Kw(t,e){this.version=t,this.transformResults=e}var Hw=function(t,e){this.field=t,this.transform=e},Ww=(Gw.none=function(){return new Gw},Gw.exists=function(t){return new Gw(void 0,t)},Gw.updateTime=function(t){return new Gw(t)},Object.defineProperty(Gw.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),Gw.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},Gw);function Gw(t,e){this.updateTime=t,this.exists=e}function Qw(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}function Yw(t,e,n){var r,i,o,a;t instanceof t_?(i=e,o=n,Qw((r=t).precondition,i)&&(a=r.value.clone(),o=a_(r.fieldTransforms,o,i),a.setAll(o),i.convertToFoundDocument($w(i),a).setHasLocalMutations())):t instanceof e_?(o=e,i=n,Qw((a=t).precondition,o)&&(n=a_(a.fieldTransforms,i,o),(i=o.data).setAll(i_(a)),i.setAll(n),o.convertToFoundDocument($w(o),i).setHasLocalMutations())):(e=e,Qw(t.precondition,e)&&e.convertToNoDocument(Lm.min()))}function Xw(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&Pm(n,r,(function(t,e){return e=e,(t=t).field.isEqual(e.field)&&(t=t.transform,e=e.transform,t instanceof Nw&&e instanceof Nw||t instanceof Mw&&e instanceof Mw?Pm(t.elements,e.elements,hb):t instanceof Vw&&e instanceof Vw?hb(t.A,e.A):t instanceof Ow&&e instanceof Ow)}))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}function $w(t){return t.isFoundDocument()?t.version:Lm.min()}var Jw,Zw,t_=(Qi(r_,Zw=kn=function(){}),r_),e_=(Qi(n_,Jw=kn),n_);function n_(t,e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=Jw.call(this)||this).key=t,o.data=e,o.fieldMask=n,o.precondition=r,o.fieldTransforms=i,o.type=1,o}function r_(t,e,n,r){void 0===r&&(r=[]);var i=this;return(i=Zw.call(this)||this).key=t,i.value=e,i.precondition=n,i.fieldTransforms=r,i.type=0,i}function i_(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){var r;n.isEmpty()||(r=t.data.field(n),e.set(n,r))})),e}function o_(t,e,n){var r=new Map;xm(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,(o=a,a=s,s=n[i],o instanceof Nw?Dw(o,a):o instanceof Mw?Fw(o,a):s))}return r}function a_(t,e,n){for(var r,i=new Map,o=0,a=t;o<a.length;o++){var s=a[o],u=s.transform,c=n.data.field(s.field);i.set(s.field,(r=c,s=e,c=void 0,(u=u)instanceof Ow?(c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}},r&&(c.fields.__previous_value__=r),{mapValue:c}):u instanceof Nw?Dw(u,r):u instanceof Mw?Fw(u,r):(r=Bw(u=Cw(c=u,r))+Bw(c.A),gb(u)&&gb(c.A)?Sw(r):Iw(c.R,r))))}return i}function s_(t){this.count=t}var u_,c_,l_,h_=(Qi(d_,l_=kn),d_),f_=(Qi(p_,c_=kn),p_);function p_(t,e){var n=this;return(n=c_.call(this)||this).key=t,n.precondition=e,n.type=3,n.fieldTransforms=[],n}function d_(t,e){var n=this;return(n=l_.call(this)||this).key=t,n.precondition=e,n.type=2,n.fieldTransforms=[],n}function v_(t){switch(t){case mm.OK:return Cm(),0;case mm.CANCELLED:case mm.UNKNOWN:case mm.DEADLINE_EXCEEDED:case mm.RESOURCE_EXHAUSTED:case mm.INTERNAL:case mm.UNAVAILABLE:case mm.UNAUTHENTICATED:return;case mm.INVALID_ARGUMENT:case mm.NOT_FOUND:case mm.ALREADY_EXISTS:case mm.PERMISSION_DENIED:case mm.FAILED_PRECONDITION:case mm.ABORTED:case mm.OUT_OF_RANGE:case mm.UNIMPLEMENTED:case mm.DATA_LOSS:return 1;default:return Cm(),0}}function y_(t){if(void 0===t)return Im("GRPC error has no .code"),mm.UNKNOWN;switch(t){case u_.OK:return mm.OK;case u_.CANCELLED:return mm.CANCELLED;case u_.UNKNOWN:return mm.UNKNOWN;case u_.DEADLINE_EXCEEDED:return mm.DEADLINE_EXCEEDED;case u_.RESOURCE_EXHAUSTED:return mm.RESOURCE_EXHAUSTED;case u_.INTERNAL:return mm.INTERNAL;case u_.UNAVAILABLE:return mm.UNAVAILABLE;case u_.UNAUTHENTICATED:return mm.UNAUTHENTICATED;case u_.INVALID_ARGUMENT:return mm.INVALID_ARGUMENT;case u_.NOT_FOUND:return mm.NOT_FOUND;case u_.ALREADY_EXISTS:return mm.ALREADY_EXISTS;case u_.PERMISSION_DENIED:return mm.PERMISSION_DENIED;case u_.FAILED_PRECONDITION:return mm.FAILED_PRECONDITION;case u_.ABORTED:return mm.ABORTED;case u_.OUT_OF_RANGE:return mm.OUT_OF_RANGE;case u_.UNIMPLEMENTED:return mm.UNIMPLEMENTED;case u_.DATA_LOSS:return mm.DATA_LOSS;default:return Cm()}}(H=u_=u_||{})[H.OK=0]="OK",H[H.CANCELLED=1]="CANCELLED",H[H.UNKNOWN=2]="UNKNOWN",H[H.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",H[H.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",H[H.NOT_FOUND=5]="NOT_FOUND",H[H.ALREADY_EXISTS=6]="ALREADY_EXISTS",H[H.PERMISSION_DENIED=7]="PERMISSION_DENIED",H[H.UNAUTHENTICATED=16]="UNAUTHENTICATED",H[H.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",H[H.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",H[H.ABORTED=10]="ABORTED",H[H.OUT_OF_RANGE=11]="OUT_OF_RANGE",H[H.UNIMPLEMENTED=12]="UNIMPLEMENTED",H[H.INTERNAL=13]="INTERNAL",H[H.UNAVAILABLE=14]="UNAVAILABLE",H[H.DATA_LOSS=15]="DATA_LOSS";var g_=(T_.prototype.insert=function(t,e){return new T_(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,b_.BLACK,null,null))},T_.prototype.remove=function(t){return new T_(this.comparator,this.root.remove(t,this.comparator).copy(null,null,b_.BLACK,null,null))},T_.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},T_.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},T_.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(T_.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),T_.prototype.minKey=function(){return this.root.minKey()},T_.prototype.maxKey=function(){return this.root.maxKey()},T_.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},T_.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},T_.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},T_.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},T_.prototype.getIterator=function(){return new m_(this.root,null,this.comparator,!1)},T_.prototype.getIteratorFrom=function(t){return new m_(this.root,t,this.comparator,!1)},T_.prototype.getReverseIterator=function(){return new m_(this.root,null,this.comparator,!0)},T_.prototype.getReverseIteratorFrom=function(t){return new m_(this.root,t,this.comparator,!0)},T_),m_=(__.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},__.prototype.hasNext=function(){return 0<this.nodeStack.length},__.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},__),b_=(w_.prototype.copy=function(t,e,n,r,i){return new w_(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},w_.prototype.isEmpty=function(){return!1},w_.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},w_.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},w_.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},w_.prototype.minKey=function(){return this.min().key},w_.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},w_.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},w_.prototype.removeMin=function(){if(this.left.isEmpty())return w_.EMPTY;var t=this;return(t=(t=t.left.isRed()||t.left.left.isRed()?t:t.moveRedLeft()).copy(null,null,null,t.left.removeMin(),null)).fixUp()},w_.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r=(r=r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()?r:r.moveRedLeft()).copy(null,null,null,r.left.remove(t,e),null);else{if(0===e(t,(r=(r=r.left.isRed()?r.rotateRight():r).right.isEmpty()||r.right.isRed()||r.right.left.isRed()?r:r.moveRedRight()).key)){if(r.right.isEmpty())return w_.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()},w_.prototype.isRed=function(){return this.color},w_.prototype.fixUp=function(){var t=this;return(t=(t=t.right.isRed()&&!t.left.isRed()?t.rotateLeft():t).left.isRed()&&t.left.left.isRed()?t.rotateRight():t).left.isRed()&&t.right.isRed()?t.colorFlip():t},w_.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()?(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip():t},w_.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()?(t=t.rotateRight()).colorFlip():t},w_.prototype.rotateLeft=function(){var t=this.copy(null,null,w_.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},w_.prototype.rotateRight=function(){var t=this.copy(null,null,w_.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},w_.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},w_.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},w_.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Cm();if(this.right.isRed())throw Cm();var t=this.left.check();if(t!==this.right.check())throw Cm();return t+(this.isRed()?0:1)},w_);function w_(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:w_.RED,this.left=null!=r?r:w_.EMPTY,this.right=null!=i?i:w_.EMPTY,this.size=this.left.size+1+this.right.size}function __(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}function T_(t,e){this.comparator=t,this.root=e||b_.EMPTY}function E_(){this.size=0}b_.EMPTY=null,b_.RED=!0,b_.BLACK=!1,b_.EMPTY=(Object.defineProperty(E_.prototype,"key",{get:function(){throw Cm()},enumerable:!1,configurable:!0}),Object.defineProperty(E_.prototype,"value",{get:function(){throw Cm()},enumerable:!1,configurable:!0}),Object.defineProperty(E_.prototype,"color",{get:function(){throw Cm()},enumerable:!1,configurable:!0}),Object.defineProperty(E_.prototype,"left",{get:function(){throw Cm()},enumerable:!1,configurable:!0}),Object.defineProperty(E_.prototype,"right",{get:function(){throw Cm()},enumerable:!1,configurable:!0}),E_.prototype.copy=function(t,e,n,r,i){return this},E_.prototype.insert=function(t,e,n){return new b_(t,e)},E_.prototype.remove=function(t,e){return this},E_.prototype.isEmpty=function(){return!0},E_.prototype.inorderTraversal=function(t){return!1},E_.prototype.reverseTraversal=function(t){return!1},E_.prototype.minKey=function(){return null},E_.prototype.maxKey=function(){return null},E_.prototype.isRed=function(){return!1},E_.prototype.checkMaxDepth=function(){return!0},E_.prototype.check=function(){return 0},new E_);var I_=(x_.prototype.has=function(t){return null!==this.data.get(t)},x_.prototype.first=function(){return this.data.minKey()},x_.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(x_.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),x_.prototype.indexOf=function(t){return this.data.indexOf(t)},x_.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},x_.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(0<=this.comparator(r.key,t[1]))return;e(r.key)}},x_.prototype.forEachWhile=function(t,e){for(var n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},x_.prototype.firstAfterOrEqual=function(t){return(t=this.data.getIteratorFrom(t)).hasNext()?t.getNext().key:null},x_.prototype.getIterator=function(){return new S_(this.data.getIterator())},x_.prototype.getIteratorFrom=function(t){return new S_(this.data.getIteratorFrom(t))},x_.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},x_.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},x_.prototype.isEmpty=function(){return this.data.isEmpty()},x_.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},x_.prototype.isEqual=function(t){if(!(t instanceof x_))return!1;if(this.size!==t.size)return!1;for(var e=this.data.getIterator(),n=t.data.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(r,i))return!1}return!0},x_.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},x_.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},x_.prototype.copy=function(t){var e=new x_(this.comparator);return e.data=t,e},x_),S_=(C_.prototype.getNext=function(){return this.iter.getNext().key},C_.prototype.hasNext=function(){return this.iter.hasNext()},C_),k_=new g_(ub.comparator);function C_(t){this.iter=t}function x_(t){this.comparator=t,this.data=new g_(this.comparator)}var A_=new g_(ub.comparator),O_=new g_(ub.comparator),N_=new I_(ub.comparator);function P_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=N_,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var R_=new I_(Nm),D_=(K_.createSynthesizedRemoteEventForCurrentChange=function(t,e){var n=new Map;return n.set(t,L_.createSynthesizedTargetChangeForCurrentChange(t,e)),new K_(Lm.min(),n,R_,k_,P_())},K_),L_=(z_.createSynthesizedTargetChangeForCurrentChange=function(t,e){return new z_(Gm.EMPTY_BYTE_STRING,e,P_(),P_(),P_())},z_),M_=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},j_=function(t,e){this.targetId=t,this.V=e},F_=function(t,e,n,r){void 0===n&&(n=Gm.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},U_=(Object.defineProperty(B_.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(B_.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(B_.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(B_.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),B_.prototype.O=function(t){0<t.approximateByteSize()&&(this.F=!0,this.C=t)},B_.prototype.M=function(){var t=P_(),e=P_(),n=P_();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Cm()}})),new L_(this.C,this.N,t,e,n)},B_.prototype.L=function(){this.F=!1,this.D=W_()},B_.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},B_.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},B_.prototype.U=function(){this.S+=1},B_.prototype.K=function(){--this.S},B_.prototype.j=function(){this.F=!0,this.N=!0},B_),V_=(q_.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},q_.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Cm()}}))},q_.prototype.forEachTarget=function(t,e){var n=this;0<t.targetIds.length?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},q_.prototype.rt=function(t){var e=t.targetId,n=t.V.count;(t=this.ot(e))&&(Nb(t=t.target)?0===n?(t=new ub(t.path),this.tt(e,t,Sb.newNoDocument(t,Lm.min()))):xm(1===n):this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e)))},q_.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);o&&(r.current&&Nb(o.target)&&(o=new ub(o.target.path),null!==e.H.get(o)||e.at(i,o)||e.tt(i,o,Sb.newNoDocument(o,t))),r.$&&(n.set(i,r.M()),r.L()))}));var r=P_();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){return!(t=e.ot(t))||2===t.purpose||(i=!1)})),i&&(r=r.add(t))}));var i=new D_(t,n,this.Y,this.H,r);return this.H=k_,this.J=H_(),this.Y=new I_(Nm),i},q_.prototype.Z=function(t,e){var n;this.st(t)&&(n=this.at(t,e.key)?2:0,this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t)))},q_.prototype.tt=function(t,e,n){var r;this.st(t)&&(r=this.nt(t),this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n)))},q_.prototype.removeTarget=function(t){this.G.delete(t)},q_.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},q_.prototype.U=function(t){this.nt(t).U()},q_.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new U_,this.G.set(t,e)),e},q_.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new I_(Nm),this.J=this.J.insert(t,e)),e},q_.prototype.st=function(t){var e=null!==this.ot(t);return e||Em("WatchChangeAggregator","Detected inactive target",t),e},q_.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},q_.prototype.it=function(t){var e=this;this.G.set(t,new U_),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},q_.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},q_);function q_(t){this.W=t,this.G=new Map,this.H=k_,this.J=H_(),this.Y=new I_(Nm)}function B_(){this.S=0,this.D=W_(),this.C=Gm.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}function z_(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}function K_(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}function H_(){return new g_(ub.comparator)}function W_(){return new g_(ub.comparator)}var G_={asc:"ASCENDING",desc:"DESCENDING"},Q_={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Y_=function(t,e){this.databaseId=t,this.I=e};function X_(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function $_(t,e){return t.I?e.toBase64():e.toUint8Array()}function J_(t){return xm(!!t),Lm.fromTimestamp((t=tb(t),new Dm(t.seconds,t.nanos)))}function Z_(t,e){return new zm(["projects",t.projectId,"databases",t.database]).child("documents").child(e).canonicalString()}function tT(t){return xm(wT(t=zm.fromString(t))),t}function eT(t,e){return Z_(t.databaseId,e.path)}function nT(t,e){if((e=tT(e)).get(1)!==t.databaseId.projectId)throw new bm(mm.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+t.databaseId.projectId);if(e.get(3)!==t.databaseId.database)throw new bm(mm.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+t.databaseId.database);return new ub(aT(e))}function rT(t,e){return Z_(t.databaseId,e)}function iT(t){return 4===(t=tT(t)).length?zm.emptyPath():aT(t)}function oT(t){return new zm(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function aT(t){return xm(4<t.length&&"documents"===t.get(4)),t.popFirst(5)}function sT(t,e,n){return{name:eT(t,e),fields:n.value.mapValue.fields}}function uT(t,e,n){var r=nT(t,e.name);return t=J_(e.updateTime),e=new Eb({mapValue:{fields:e.fields}}),e=Sb.newFoundDocument(r,t,e),n&&e.setHasCommittedMutations(),n?e.setHasCommittedMutations():e}function cT(t,e){var n,r,i;if(e instanceof t_)n={update:sT(t,e.key,e.value)};else if(e instanceof h_)n={delete:eT(t,e.key)};else if(e instanceof e_)n={update:sT(t,e.key,e.data),updateMask:(r=e.fieldMask,i=[],r.fields.forEach((function(t){return i.push(t.canonicalString())})),{fieldPaths:i})};else{if(!(e instanceof f_))return Cm();n={verify:eT(t,e.key)}}return 0<e.fieldTransforms.length&&(n.updateTransforms=e.fieldTransforms.map((function(t){var e=t.transform;if(e instanceof Ow)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(e instanceof Nw)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:e.elements}};if(e instanceof Mw)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:e.elements}};if(e instanceof Vw)return{fieldPath:t.field.canonicalString(),increment:e.A};throw Cm()}))),e.precondition.isNone||(n.currentDocument=void 0!==(e=e.precondition).updateTime?{updateTime:X_(t,e.updateTime.toTimestamp())}:void 0!==e.exists?{exists:e.exists}:Cm()),n}function lT(t,e){var n=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Ww.updateTime(J_(a.updateTime)):void 0!==a.exists?Ww.exists(a.exists):Ww.none():Ww.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n,r=null;return"setToServerValue"in e?(xm("REQUEST_TIME"===e.setToServerValue),r=new Ow):"appendMissingElements"in e?(n=e.appendMissingElements.values||[],r=new Nw(n)):"removeAllFromArray"in e?(n=e.removeAllFromArray.values||[],r=new Mw(n)):"increment"in e?r=new Vw(t,e.increment):Cm(),e=Hm.fromServerFormat(e.fieldPath),new Hw(e,r)}(t,e)})):[];if(e.update){e.update.name;var i=nT(t,e.update.name),o=new Eb({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=(a=e.updateMask.fieldPaths||[],new Wm(a.map((function(t){return Hm.fromServerFormat(t)}))));return new e_(i,o,a,n,r)}return new t_(i,o,n,r)}return e.delete?(r=nT(t,e.delete),new h_(r,n)):e.verify?(e=nT(t,e.verify),new f_(e,n)):Cm()}function hT(t,e){return{documents:[rT(t,e.path)]}}function fT(t,e){var n={structuredQuery:{}},r=e.path;return null!==e.collectionGroup?(n.parent=rT(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=rT(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),(r=function(t){if(0!==t.length)return 1===(t=t.map((function(t){if("=="===t.op){if(wb(t.value))return{unaryFilter:{field:yT(t.field),op:"IS_NAN"}};if(bb(t.value))return{unaryFilter:{field:yT(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(wb(t.value))return{unaryFilter:{field:yT(t.field),op:"IS_NOT_NAN"}};if(bb(t.value))return{unaryFilter:{field:yT(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yT(t.field),op:(e=t.op,Q_[e]),value:t.value}};var e}))).length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(e.filters))&&(n.structuredQuery.where=r),(r=function(t){if(0!==t.length)return t.map((function(t){return{field:yT((t=t).field),direction:(t=t.dir,G_[t])}}))}(e.orderBy))&&(n.structuredQuery.orderBy=r),r=e.limit,null!==(r=t.I||ob(r)?r:{value:r})&&(n.structuredQuery.limit=r),e.startAt&&(n.structuredQuery.startAt=dT(e.startAt)),e.endAt&&(n.structuredQuery.endAt=dT(e.endAt)),n}function pT(t){var e=iT(t.parent),n=t.structuredQuery,r=null;0<(a=n.from?n.from.length:0)&&(xm(1===a),(s=n.from[0]).allDescendants?r=s.collectionId:e=e.child(s.collectionId));var i=[];n.where&&(i=function t(e){return e?void 0!==e.unaryFilter?[bT(e)]:void 0!==e.fieldFilter?[mT(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):Cm():[]}(n.where));var o=[],a=(t=null,null),s=null;return cw(e,r,o=n.orderBy?n.orderBy.map((function(t){return new ow(gT((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e})):o,i,t=n.limit?ob(i="object"==typeof(i=n.limit)?i.value:i)?null:i:t,"F",a=n.startAt?vT(n.startAt):a,s=n.endAt?vT(n.endAt):s)}function dT(t){return{before:t.before,values:t.position}}function vT(t){var e=!!t.before;return t=t.values||[],new Zb(t,e)}function yT(t){return{fieldPath:t.canonicalString()}}function gT(t){return Hm.fromServerFormat(t.fieldPath)}function mT(t){return Rb.create(gT(t.fieldFilter.field),function(){switch(t.fieldFilter.op){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Cm()}}(),t.fieldFilter.value)}function bT(t){switch(t.unaryFilter.op){case"IS_NAN":var e=gT(t.unaryFilter.field);return Rb.create(e,"==",{doubleValue:NaN});case"IS_NULL":return e=gT(t.unaryFilter.field),Rb.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var n=gT(t.unaryFilter.field);return Rb.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":return n=gT(t.unaryFilter.field),Rb.create(n,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Cm()}}function wT(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}function _T(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=TT(e)),e=function(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}(t.get(n),e);return TT(e)}function TT(t){return t+"\x01\x01"}function ET(t){var e=t.length;if(xm(2<=e),2===e)return xm("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),zm.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("\x01",o);switch((a<0||n<a)&&Cm(),t.charAt(a+1)){case"\x01":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=t.substring(o,a),i+="\0";break;case"\x11":i+=t.substring(o,a+1);break;default:Cm()}o=a+2}return new zm(r)}function IT(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}var ST=function(t,e){this.seconds=t,this.nanoseconds=e};function kT(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}function CT(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}IT.store="owner",IT.key="owner",kT.store="mutationQueues",kT.keyPath="userId",CT.store="mutations",CT.keyPath="batchId",CT.userMutationsIndex="userMutationsIndex",CT.userMutationsKeyPath=["userId","batchId"];var xT=(AT.prefixForUser=function(t){return[t]},AT.prefixForPath=function(t,e){return[t,_T(e)]},AT.key=function(t,e,n){return[t,_T(e),n]},AT);function AT(){}function OT(t,e){this.path=t,this.readTime=e}function NT(t,e){this.path=t,this.version=e}xT.store="documentMutations",xT.PLACEHOLDER=new xT;var PT=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};function RT(t){this.byteSize=t}function DT(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}PT.store="remoteDocuments",PT.readTimeIndex="readTimeIndex",PT.readTimeIndexPath="readTime",PT.collectionReadTimeIndex="collectionReadTimeIndex",PT.collectionReadTimeIndexPath=["parentPath","readTime"],RT.store="remoteDocumentGlobal",RT.key="remoteDocumentGlobalKey",DT.store="targets",DT.keyPath="targetId",DT.queryTargetsIndexName="queryTargetsIndex",DT.queryTargetsKeyPath=["canonicalId","targetId"];var LT=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};function MT(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}function jT(t,e){this.collectionId=t,this.parent=e}function FT(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}function UT(t,e,n){this.bundleId=t,this.createTime=e,this.version=n}function VT(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n}LT.store="targetDocuments",LT.keyPath=["targetId","path"],LT.documentTargetsIndex="documentTargetsIndex",LT.documentTargetsKeyPath=["path","targetId"],MT.key="targetGlobalKey",MT.store="targetGlobal",jT.store="collectionParents",jT.keyPath=["collectionId","parent"],FT.store="clientMetadata",FT.keyPath="clientId",UT.store="bundles",UT.keyPath="bundleId",VT.store="namedQueries",VT.keyPath="name";var qT,BT=to(to([],to(to([],to(to([],to(to([],[kT.store,CT.store,xT.store,PT.store,DT.store,IT.store,MT.store,LT.store]),[FT.store])),[RT.store])),[jT.store])),[UT.store,VT.store]),zT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",KT=(eE.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},eE.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},kn=eE,function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}),HT=(tE.prototype.catch=function(t){return this.next(void 0,t)},tE.prototype.next=function(t,e){var n=this;return this.callbackAttached&&Cm(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new tE((function(r,i){n.nextCallback=function(e){n.wrapSuccess(t,e).next(r,i)},n.catchCallback=function(t){n.wrapFailure(e,t).next(r,i)}}))},tE.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},tE.prototype.wrapUserFunction=function(t){try{var e=t();return e instanceof tE?e:tE.resolve(e)}catch(t){return tE.reject(t)}},tE.prototype.wrapSuccess=function(t,e){return t?this.wrapUserFunction((function(){return t(e)})):tE.resolve(e)},tE.prototype.wrapFailure=function(t,e){return t?this.wrapUserFunction((function(){return t(e)})):tE.reject(e)},tE.resolve=function(t){return new tE((function(e,n){e(t)}))},tE.reject=function(t){return new tE((function(e,n){n(t)}))},tE.waitFor=function(t){return new tE((function(e,n){var r=0,i=0,o=!1;t.forEach((function(t){++r,t.next((function(){++i,o&&i===r&&e()}),(function(t){return n(t)}))})),o=!0,i===r&&e()}))},tE.or=function(t){for(var e=tE.resolve(!1),n=0,r=t;n<r.length;n++)!function(t){e=e.next((function(e){return e?tE.resolve(e):t()}))}(r[n]);return e},tE.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},tE),WT=(ZT.open=function(t,e,n,r){try{return new ZT(e,t.transaction(r,n))}catch(t){throw new YT(e,t)}},Object.defineProperty(ZT.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),ZT.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Em("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},ZT.prototype.store=function(t){return t=this.transaction.objectStore(t),new rE(t)},ZT),GT=(JT.delete=function(t){return Em("SimpleDb","Removing database:",t),oE(window.indexedDB.deleteDatabase(t)).toPromise()},JT.yt=function(){if("undefined"==typeof indexedDB)return!1;if(JT.gt())return!0;var t=po(),e=0<(n=JT._t(t))&&n<10,n=0<(n=JT.Et(t))&&n<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||e||n)},JT.gt=function(){var t;return"undefined"!=typeof n&&"YES"===(null===(t=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}))||void 0===t?void 0:t.Tt)},JT.It=function(t,e){return t.store(e)},JT._t=function(t){return t=(t=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i))?t[1].split("_").slice(0,2).join("."):"-1",Number(t)},JT.Et=function(t){return t=(t=t.match(/Android ([\d.]+)/i))?t[1].split(".").slice(0,2).join("."):"-1",Number(t)},JT.prototype.At=function(t){return Xi(this,void 0,void 0,(function(){var e,n=this;return $i(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Em("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){t=t.target.result,e(t)},i.onblocked=function(){r(new YT(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){"VersionError"===(e=e.target.error).name?r(new bm(mm.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new YT(t,e))},i.onupgradeneeded=function(t){Em("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){Em("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},JT.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},JT.prototype.runTransaction=function(t,e,n,r){return Xi(this,void 0,void 0,(function(){var i,o,a,s;return $i(this,(function(u){switch(u.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u;return $i(this,(function(c){switch(c.label){case 0:++o,c.label=1;case 1:return c.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=c.sent(),e=WT.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),HT.reject(t)})).toPromise(),u={},s.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(c.sent(),s),u)];case 4:return s=c.sent(),u="FirebaseError"!==s.name&&o<3,Em("SimpleDb","Transaction failed with error:",s.message,"Retrying:",u),a.close(),u?[3,5]:[2,{value:Promise.reject(s)}];case 5:return[2]}}))},a=this,u.label=1;case 1:return[5,s()];case 2:if("object"==typeof(s=u.sent()))return[2,s.value];u.label=3;case 3:return[3,1];case 4:return[2]}}))}))},JT.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},JT),QT=(Object.defineProperty($T.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty($T.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty($T.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),$T.prototype.done=function(){this.Vt=!0},$T.prototype.Ct=function(t){this.St=t},$T.prototype.delete=function(){return oE(this.Pt.delete())},$T),YT=(Qi(XT,qT=bm),XT);function XT(t,e){var n=this;return(n=qT.call(this,mm.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+e)||this).name="IndexedDbTransactionError",n}function $T(t){this.Pt=t,this.Vt=!1,this.St=null}function JT(t,e,n){this.name=t,this.version=e,this.wt=n,12.2===JT._t(po())&&Im("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function ZT(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new KT,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new YT(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){e=sE(e.target.error),n.ft.reject(new YT(t,e))}}function tE(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}function eE(){this.onCommittedListeners=[]}function nE(t){return"IndexedDbTransactionError"===t.name}var rE=(iE.prototype.put=function(t,e){return oE(t=void 0!==e?(Em("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(Em("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t)))},iE.prototype.add=function(t){return Em("SimpleDb","ADD",this.store.name,t,t),oE(this.store.add(t))},iE.prototype.get=function(t){var e=this;return oE(this.store.get(t)).next((function(n){return Em("SimpleDb","GET",e.store.name,t,n=void 0===n?null:n),n}))},iE.prototype.delete=function(t){return Em("SimpleDb","DELETE",this.store.name,t),oE(this.store.delete(t))},iE.prototype.count=function(){return Em("SimpleDb","COUNT",this.store.name),oE(this.store.count())},iE.prototype.Nt=function(t,e){e=this.cursor(this.options(t,e));var n=[];return this.xt(e,(function(t,e){n.push(e)})).next((function(){return n}))},iE.prototype.Ft=function(t,e){return Em("SimpleDb","DELETE ALL",this.store.name),(e=this.options(t,e)).kt=!1,e=this.cursor(e),this.xt(e,(function(t,e,n){return n.delete()}))},iE.prototype.$t=function(t,e){e?n=t:(n={},e=t);var n=this.cursor(n);return this.xt(n,e)},iE.prototype.Ot=function(t){var e=this.cursor({});return new HT((function(n,r){e.onerror=function(t){t=sE(t.target.error),r(t)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},iE.prototype.xt=function(t,e){var n=[];return new HT((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i,o=t.target.result;o?(i=new QT(o),(t=e(o.primaryKey,o.value,i))instanceof HT&&(t=t.catch((function(t){return i.done(),HT.reject(t)})),n.push(t)),i.isDone?r():null===i.Dt?o.continue():o.continue(i.Dt)):r()}})).next((function(){return HT.waitFor(n)}))},iE.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},iE.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},iE);function iE(t){this.store=t}function oE(t){return new HT((function(e,n){t.onsuccess=function(t){t=t.target.result,e(t)},t.onerror=function(t){t=sE(t.target.error),n(t)}}))}var aE=!1;function sE(t){var e=GT._t(po());if(12.2<=e&&e<13&&(e="An internal error was encountered in the Indexed Database server",0<=t.message.indexOf(e))){var n=new bm("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+e+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return aE||(aE=!0,setTimeout((function(){throw n}),0)),n}return t}var uE,cE=(Qi(lE,uE=kn),lE);function lE(t,e){var n=this;return(n=uE.call(this)||this).Mt=t,n.currentSequenceNumber=e,n}function hE(t,e){return GT.It(t.Mt,e)}var fE=(mE.prototype.applyToRemoteDocument=function(t,e){for(var n,r,i,o,a,s,u=e.mutationResults,c=0;c<this.mutations.length;c++){var l=this.mutations[c];l.key.isEqual(t.key)&&(n=l,r=t,i=u[c],l=s=a=o=void 0,n instanceof t_?(a=r,s=i,l=(o=n).value.clone(),o=o_(o.fieldTransforms,a,s.transformResults),l.setAll(o),a.convertToFoundDocument(s.version,l).setHasCommittedMutations()):n instanceof e_?(o=r,a=i,Qw((s=n).precondition,o)?(l=o_(s.fieldTransforms,o,a.transformResults),(n=o.data).setAll(i_(s)),n.setAll(l),o.convertToFoundDocument(a.version,n).setHasCommittedMutations()):o.convertToUnknownDocument(a.version)):r.convertToNoDocument(i.version).setHasCommittedMutations())}},mE.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(r=n[e]).key.isEqual(t.key)&&Yw(r,t,this.localWriteTime);for(var r,i=0,o=this.mutations;i<o.length;i++)(r=o[i]).key.isEqual(t.key)&&Yw(r,t,this.localWriteTime)},mE.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key);n=r,e.applyToLocalView(n),r.isValidDocument()||n.convertToNoDocument(Lm.min())}))},mE.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),P_())},mE.prototype.isEqual=function(t){return this.batchId===t.batchId&&Pm(this.mutations,t.mutations,Xw)&&Pm(this.baseMutations,t.baseMutations,Xw)},mE),pE=(gE.from=function(t,e,n){xm(t.mutations.length===n.length);for(var r=O_,i=t.mutations,o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new gE(t,e,n,r)},gE),dE=(yE.prototype.withSequenceNumber=function(t){return new yE(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},yE.prototype.withResumeToken=function(t,e){return new yE(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},yE.prototype.withLastLimboFreeSnapshotVersion=function(t){return new yE(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)},yE),vE=function(t){this.Lt=t};function yE(t,e,n,r,i,o,a){void 0===i&&(i=Lm.min()),void 0===o&&(o=Lm.min()),void 0===a&&(a=Gm.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}function gE(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}function mE(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}function bE(t,e){if(e.document)return uT(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ub.fromSegments(e.noDocument.path),r=IE(e.noDocument.readTime);return n=Sb.newNoDocument(n,r),e.hasCommittedMutations?n.setHasCommittedMutations():n}return e.unknownDocument?(n=ub.fromSegments(e.unknownDocument.path),r=IE(e.unknownDocument.version),Sb.newUnknownDocument(n,r)):Cm()}function wE(t,e,n){var r=_E(n);if(n=e.key.path.popLast().toArray(),e.isFoundDocument()){var i={name:eT(o=t.Lt,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:X_(o,a.version.toTimestamp())},o=e.hasCommittedMutations;return new PT(null,null,i,o,r,n)}if(e.isNoDocument()){var a=e.key.path.toArray();return i=EE(e.version),o=e.hasCommittedMutations,new PT(null,new OT(a,i),null,o,r,n)}return e.isUnknownDocument()?(o=e.key.path.toArray(),e=EE(e.version),new PT(new NT(o,e),null,null,!0,r,n)):Cm()}function _E(t){return[(t=t.toTimestamp()).seconds,t.nanoseconds]}function TE(t){return t=new Dm(t[0],t[1]),Lm.fromTimestamp(t)}function EE(t){return t=t.toTimestamp(),new ST(t.seconds,t.nanoseconds)}function IE(t){return t=new Dm(t.seconds,t.nanoseconds),Lm.fromTimestamp(t)}function SE(t,e){for(var n=(e.baseMutations||[]).map((function(e){return lT(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i,o=e.mutations[r];r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(i=e.mutations[r+1],o.updateTransforms=i.transform.fieldTransforms,e.mutations.splice(r+1,1),++r)}var a=e.mutations.map((function(e){return lT(t.Lt,e)})),s=Dm.fromMillis(e.localWriteTimeMs);return new fE(e.batchId,s,n,a)}function kE(t){var e=IE(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?IE(t.lastLimboFreeSnapshotVersion):Lm.min(),r=void 0!==t.query.documents?(xm(1===(r=t.query).documents.length),gw(lw(iT(r.documents[0])))):gw(pT(t.query));return new dE(r,t.targetId,0,t.lastListenSequenceNumber,e,n,Gm.fromBase64String(t.resumeToken))}function CE(t,e){var n=EE(e.snapshotVersion),r=EE(e.lastLimboFreeSnapshotVersion),i=(Nb(e.target)?hT:fT)(t.Lt,e.target);return t=e.resumeToken.toBase64(),new DT(e.targetId,Ab(e.target),n,t,e.sequenceNumber,r,i)}function xE(t){var e=pT({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?mw(e,e.limit,"L"):e}var AE=(OE.prototype.getBundleMetadata=function(t,e){return NE(t).get(e).next((function(t){if(t)return{id:(t=t).bundleId,createTime:IE(t.createTime),version:t.version}}))},OE.prototype.saveBundleMetadata=function(t,e){return NE(t).put({bundleId:(e=e).id,createTime:EE(J_(e.createTime)),version:e.version})},OE.prototype.getNamedQuery=function(t,e){return PE(t).get(e).next((function(t){if(t)return{name:(t=t).name,query:xE(t.bundledQuery),readTime:IE(t.readTime)}}))},OE.prototype.saveNamedQuery=function(t,e){return PE(t).put({name:(e=e).name,readTime:EE(J_(e.readTime)),bundledQuery:e.bundledQuery})},OE);function OE(){}function NE(t){return hE(t,UT.store)}function PE(t){return hE(t,VT.store)}var RE=(FE.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),HT.resolve()},FE.prototype.getCollectionParents=function(t,e){return HT.resolve(this.Bt.getEntries(e))},FE),DE=(jE.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new I_(zm.comparator);return t=!r.has(n),this.index[e]=r.add(n),t},jE.prototype.has=function(t){var e=t.lastSegment();return t=t.popLast(),(e=this.index[e])&&e.has(t)},jE.prototype.getEntries=function(t){return(this.index[t]||new I_(zm.comparator)).toArray()},jE),LE=(ME.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(this.qt.has(e))return HT.resolve();var r=e.lastSegment(),i=e.popLast();return t.addOnCommittedListener((function(){n.qt.add(e)})),i={collectionId:r,parent:_T(i)},UE(t).put(i)},ME.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Rm(e),""],!1,!0);return UE(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(ET(o.parent))}return n}))},ME);function ME(){this.qt=new DE}function jE(){this.index={}}function FE(){this.Bt=new DE}function UE(t){return hE(t,jT.store)}var VE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qE=(BE.withCacheSize=function(t){return new BE(t,BE.DEFAULT_COLLECTION_PERCENTILE,BE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},BE);function BE(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}function zE(t,e,n){var r=t.store(CT.store),i=t.store(xT.store),o=[],a=(t=IDBKeyRange.only(n.batchId),0);t=r.$t({range:t},(function(t,e,n){return a++,n.delete()})),o.push(t.next((function(){xm(1===a)})));for(var s=[],u=0,c=n.mutations;u<c.length;u++){var l=c[u],h=xT.key(e,l.key.path,n.batchId);o.push(i.delete(h)),s.push(l.key)}return HT.waitFor(o).next((function(){return s}))}function KE(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Cm();e=t.noDocument}return JSON.stringify(e).length}qE.DEFAULT_COLLECTION_PERCENTILE=10,qE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qE.DEFAULT=new qE(41943040,qE.DEFAULT_COLLECTION_PERCENTILE,qE.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qE.DISABLED=new qE(-1,0,0);var HE=(WE.Kt=function(t,e,n,r){return xm(""!==t.uid),new WE(t.isAuthenticated()?t.uid:"",e,n,r)},WE.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return QE(t).$t({index:CT.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},WE.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=YE(t),a=QE(t);return a.add({}).next((function(s){xm("number"==typeof s);for(var u,c,l,h,f,p=new fE(s,e,n,r),d=(u=i.R,c=i.userId,h=(l=p).baseMutations.map((function(t){return cT(u.Lt,t)})),f=l.mutations.map((function(t){return cT(u.Lt,t)})),new CT(c,l.batchId,l.localWriteTime.toMillis(),h,f)),v=[],y=new I_((function(t,e){return Nm(t.canonicalString(),e.canonicalString())})),g=0,m=r;g<m.length;g++){var b=m[g],w=xT.key(i.userId,b.key.path,s);y=y.add(b.key.path.popLast()),v.push(a.put(d)),v.push(o.put(w,xT.PLACEHOLDER))}return y.forEach((function(e){v.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Qt[s]=p.keys()})),HT.waitFor(v).next((function(){return p}))}))},WE.prototype.lookupMutationBatch=function(t,e){var n=this;return QE(t).get(e).next((function(t){return t?(xm(t.userId===n.userId),SE(n.R,t)):null}))},WE.prototype.jt=function(t,e){var n=this;return this.Qt[e]?HT.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next((function(t){return t?(t=t.keys(),n.Qt[e]=t):null}))},WE.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=(e=IDBKeyRange.lowerBound([this.userId,r]),null);return QE(t).$t({index:CT.userMutationsIndex,range:e},(function(t,e,o){e.userId===n.userId&&(xm(e.batchId>=r),i=SE(n.R,e)),o.done()})).next((function(){return i}))},WE.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return QE(t).$t({index:CT.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},WE.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return QE(t).Nt(CT.userMutationsIndex,n).next((function(t){return t.map((function(t){return SE(e.R,t)}))}))},WE.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=xT.prefixForPath(this.userId,e.path),i=(r=IDBKeyRange.lowerBound(r),[]);return YE(t).$t({range:r},(function(r,o,a){var s=r[0],u=r[1];if(r=r[2],u=ET(u),s===n.userId&&e.path.isEqual(u))return QE(t).get(r).next((function(t){if(!t)throw Cm();xm(t.userId===n.userId),i.push(SE(n.R,t))}));a.done()})).next((function(){return i}))},WE.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new I_(Nm),i=[];return e.forEach((function(e){var o=xT.prefixForPath(n.userId,e.path);o=IDBKeyRange.lowerBound(o),o=YE(t).$t({range:o},(function(t,i,o){var a=t[0],s=t[1];t=t[2],s=ET(s),a===n.userId&&e.path.isEqual(s)?r=r.add(t):o.done()})),i.push(o)})),HT.waitFor(i).next((function(){return n.Wt(t,r)}))},WE.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=(e=xT.prefixForPath(this.userId,r),e=IDBKeyRange.lowerBound(e),new I_(Nm));return YE(t).$t({range:e},(function(t,e,a){var s=t[0],u=t[1];t=t[2],u=ET(u),s===n.userId&&r.isPrefixOf(u)?u.length===i&&(o=o.add(t)):a.done()})).next((function(){return n.Wt(t,o)}))},WE.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(QE(t).get(e).next((function(t){if(null===t)throw Cm();xm(t.userId===n.userId),r.push(SE(n.R,t))})))})),HT.waitFor(i).next((function(){return r}))},WE.prototype.removeMutationBatch=function(t,e){var n=this;return zE(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),HT.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},WE.prototype.Gt=function(t){delete this.Qt[t]},WE.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return HT.resolve();n=IDBKeyRange.lowerBound(xT.prefixForUser(e.userId));var r=[];return YE(t).$t({range:n},(function(t,n,i){t[0]===e.userId?(t=ET(t[1]),r.push(t)):i.done()})).next((function(){xm(0===r.length)}))}))},WE.prototype.containsKey=function(t,e){return GE(t,this.userId,e)},WE.prototype.zt=function(t){var e=this;return XE(t).get(this.userId).next((function(t){return t||new kT(e.userId,-1,"")}))},WE);function WE(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}function GE(t,e,n){var r=(n=xT.prefixForPath(e,n.path))[1],i=(n=IDBKeyRange.lowerBound(n),!1);return YE(t).$t({range:n,kt:!0},(function(t,n,o){var a=t[0],s=t[1];t[2],a===e&&s===r&&(i=!0),o.done()})).next((function(){return i}))}function QE(t){return hE(t,CT.store)}function YE(t){return hE(t,xT.store)}function XE(t){return hE(t,kT.store)}var $E=(tI.prototype.next=function(){return this.Ht+=2,this.Ht},tI.Jt=function(){return new tI(0)},tI.Yt=function(){return new tI(-1)},tI),JE=(ZE.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new $E(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},ZE.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Lm.fromTimestamp(new Dm(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},ZE.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},ZE.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},ZE.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},ZE.prototype.updateTargetData=function(t,e){return this.te(t,e)},ZE.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return eI(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return xm(0<e.targetCount),--e.targetCount,n.Zt(t,e)}))},ZE.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return eI(t).$t((function(a,s){(s=kE(s)).sequenceNumber<=e&&null===n.get(s.targetId)&&(i++,o.push(r.removeTargetData(t,s)))})).next((function(){return HT.waitFor(o)})).next((function(){return i}))},ZE.prototype.forEachTarget=function(t,e){return eI(t).$t((function(t,n){n=kE(n),e(n)}))},ZE.prototype.Xt=function(t){return nI(t).get(MT.key).next((function(t){return xm(null!==t),t}))},ZE.prototype.Zt=function(t,e){return nI(t).put(MT.key,e)},ZE.prototype.te=function(t,e){return eI(t).put(CE(this.R,e))},ZE.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},ZE.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},ZE.prototype.getTargetData=function(t,e){var n=Ab(e),r=(n=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),null);return eI(t).$t({range:n,index:DT.queryTargetsIndexName},(function(t,n,i){n=kE(n),Ob(e,n.target)&&(r=n,i.done())})).next((function(){return r}))},ZE.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=rI(t);return e.forEach((function(e){var a=_T(e.path);i.push(o.put(new LT(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),HT.waitFor(i)},ZE.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=rI(t);return HT.forEach(e,(function(e){var o=_T(e.path);return HT.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},ZE.prototype.removeMatchingKeysForTargetId=function(t,e){return t=rI(t),e=IDBKeyRange.bound([e],[e+1],!1,!0),t.delete(e)},ZE.prototype.getMatchingKeysForTargetId=function(t,e){e=IDBKeyRange.bound([e],[e+1],!1,!0),t=rI(t);var n=P_();return t.$t({range:e,kt:!0},(function(t,e,r){t=ET(t[1]),t=new ub(t),n=n.add(t)})).next((function(){return n}))},ZE.prototype.containsKey=function(t,e){e=_T(e.path),e=IDBKeyRange.bound([e],[Rm(e)],!1,!0);var n=0;return rI(t).$t({index:LT.documentTargetsIndex,kt:!0,range:e},(function(t,e,r){var i=t[0];t[1],0!==i&&(n++,r.done())})).next((function(){return 0<n}))},ZE.prototype.lt=function(t,e){return eI(t).get(e).next((function(t){return t?kE(t):null}))},ZE);function ZE(t,e){this.referenceDelegate=t,this.R=e}function tI(t){this.Ht=t}function eI(t){return hE(t,DT.store)}function nI(t){return hE(t,MT.store)}function rI(t){return hE(t,LT.store)}function iI(t){return Xi(this,void 0,void 0,(function(){return $i(this,(function(e){if(t.code!==mm.FAILED_PRECONDITION||t.message!==zT)throw t;return Em("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function oI(t,e){var n=t[0],r=t[1];return t=e[0],e=e[1],0===(t=Nm(n,t))?Nm(r,e):t}var aI=(pI.prototype.ie=function(){return++this.se},pI.prototype.re=function(t){var e=[t,this.ie()];this.buffer.size<this.ne?this.buffer=this.buffer.add(e):oI(e,t=this.buffer.last())<0&&(this.buffer=this.buffer.delete(t).add(e))},Object.defineProperty(pI.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),pI),sI=(fI.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},fI.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(fI.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),fI.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Em("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return Xi(e,void 0,void 0,(function(){var e;return $i(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return nE(e=n.sent())?(Em("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,iI(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},fI),uI=(hI.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},hI.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return HT.resolve(vm.o);var r=new aI(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},hI.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},hI.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},hI.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Em("LruGarbageCollector","Garbage collection skipped; disabled"),HT.resolve(VE)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Em("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),VE):n.fe(t,e)}))},hI.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},hI.prototype.fe=function(t,e){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return r=e>c.params.maximumSequenceNumbersToCollect?(Em("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),c.params.maximumSequenceNumbersToCollect):e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),Tm()<=ea.DEBUG&&Em("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),HT.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},hI),cI=(lI.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},lI.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},lI.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},lI.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},lI.prototype.addReference=function(t,e,n){return dI(t,n)},lI.prototype.removeReference=function(t,e,n){return dI(t,n)},lI.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},lI.prototype.markPotentiallyOrphaned=dI,lI.prototype._e=function(t,e){return r=e,i=!1,XE(n=t).Ot((function(t){return GE(n,t,r).next((function(t){return t&&(i=!0),HT.resolve(!t)}))})).next((function(){return i}));var n,r,i},lI.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){s<=e&&(s=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),rI(t).delete([0,_T(a.path)])}))})),i.push(s))})).next((function(){return HT.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},lI.prototype.removeTarget=function(t,e){return e=e.withSequenceNumber(t.currentSequenceNumber),this.db.getTargetCache().updateTargetData(t,e)},lI.prototype.updateLimboDocument=dI,lI.prototype.we=function(t,e){t=rI(t);var n,r=vm.o;return t.$t({index:LT.documentTargetsIndex},(function(t,i){var o=t[0];t[1],t=i.path,i=i.sequenceNumber,0===o?(r!==vm.o&&e(new ub(ET(n)),r),r=i,n=t):r=vm.o})).next((function(){r!==vm.o&&e(new ub(ET(n)),r)}))},lI.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},lI);function lI(t,e){this.db=t,this.garbageCollector=new uI(this,e)}function hI(t,e){this.ae=t,this.params=e}function fI(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}function pI(t){this.ne=t,this.buffer=new I_(oI),this.se=0}function dI(t,e){return rI(t).put((t=t.currentSequenceNumber,new LT(0,_T(e.path),t)))}var vI,yI=(TI.prototype.get=function(t){var e=this.mapKeyFn(t);if(void 0!==(e=this.inner[e]))for(var n=0,r=e;n<r.length;n++){var i=(o=r[n])[0],o=o[1];if(this.equalsFn(i,t))return o}},TI.prototype.has=function(t){return void 0!==this.get(t)},TI.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},TI.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},TI.prototype.forEach=function(t){Um(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=(a=i[r])[0],a=a[1];t(o,a)}}))},TI.prototype.isEmpty=function(){return Vm(this.inner)},TI),gI=(_I.prototype.getReadTime=function(t){return(t=this.changes.get(t))?t.readTime:Lm.min()},_I.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},_I.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Sb.newInvalidDocument(t),readTime:e})},_I.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?HT.resolve(n.document):this.getFromCache(t,e)},_I.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},_I.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},_I.prototype.assertNotApplied=function(){},H=_I,wI.prototype.addEntry=function(t,e,n){return II(t).put(SI(e),n)},wI.prototype.removeEntry=function(t,e){return t=II(t),e=SI(e),t.delete(e)},wI.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},wI.prototype.getEntry=function(t,e){var n=this;return II(t).get(SI(e)).next((function(t){return n.ye(e,t)}))},wI.prototype.ge=function(t,e){var n=this;return II(t).get(SI(e)).next((function(t){return{document:n.ye(e,t),size:KE(t)}}))},wI.prototype.getEntries=function(t,e){var n=this,r=k_;return this.pe(t,e,(function(t,e){e=n.ye(t,e),r=r.insert(t,e)})).next((function(){return r}))},wI.prototype.Ee=function(t,e){var n=this,r=k_,i=new g_(ub.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,KE(e))})).next((function(){return{documents:r,Te:i}}))},wI.prototype.pe=function(t,e,n){if(e.isEmpty())return HT.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return II(t).$t({range:r},(function(t,e,r){for(var a=ub.fromSegments(t);o&&ub.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},wI.prototype.getDocumentsMatchingQuery=function(t,e,n){var r,i=this,o=k_,a=e.path.length+1,s={};return n.isEqual(Lm.min())?(r=e.path.toArray(),s.range=IDBKeyRange.lowerBound(r)):(r=e.path.toArray(),n=_E(n),s.range=IDBKeyRange.lowerBound([r,n],!0),s.index=PT.collectionReadTimeIndex),II(t).$t(s,(function(t,n,r){t.length===a&&(n=bE(i.R,n),e.path.isPrefixOf(n.key.path)?Tw(e,n)&&(o=o.insert(n.key,n)):r.done())})).next((function(){return o}))},wI.prototype.newChangeBuffer=function(t){return new mI(this,!!t&&t.trackRemovals)},wI.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},wI.prototype.getMetadata=function(t){return EI(t).get(RT.key).next((function(t){return xm(!!t),t}))},wI.prototype.me=function(t,e){return EI(t).put(RT.key,e)},wI.prototype.ye=function(t,e){return!e||(e=bE(this.R,e)).isNoDocument()&&e.version.isEqual(Lm.min())?Sb.newInvalidDocument(t):e},wI),mI=(Qi(bI,vI=H),bI.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new I_((function(t,e){return Nm(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s,u=e.Ae.get(o);a.document.isValidDocument()?(s=wE(e.Ie.R,a.document,e.getReadTime(o)),i=i.add(o.path.popLast()),a=KE(s),r+=a-u,n.push(e.Ie.addEntry(t,o,s))):(r-=u,e.trackRemovals?(u=wE(e.Ie.R,Sb.newNoDocument(o,Lm.min()),e.getReadTime(o)),n.push(e.Ie.addEntry(t,o,u))):n.push(e.Ie.removeEntry(t,o)))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),HT.waitFor(n)},bI.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},bI.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},bI);function bI(t,e){var n=this;return(n=vI.call(this)||this).Ie=t,n.trackRemovals=e,n.Ae=new yI((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),n}function wI(t,e){this.R=t,this.Ut=e}function _I(){this.changes=new yI((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}function TI(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}function EI(t){return hE(t,RT.store)}function II(t){return hE(t,PT.store)}function SI(t){return t.path.toArray()}var kI=(CI.prototype.Rt=function(t,e,n,r){var i=this;xm(n<r&&0<=n&&r<=11);var o=new WT("createOrUpgrade",e);n<1&&1<=r&&(t.createObjectStore(IT.store),(a=t).createObjectStore(kT.store,{keyPath:kT.keyPath}),a.createObjectStore(CT.store,{keyPath:CT.keyPath,autoIncrement:!0}).createIndex(CT.userMutationsIndex,CT.userMutationsKeyPath,{unique:!0}),a.createObjectStore(xT.store),xI(t),t.createObjectStore(PT.store));var a,s=HT.resolve();return n<3&&3<=r&&(0!==n&&((a=t).deleteObjectStore(LT.store),a.deleteObjectStore(DT.store),a.deleteObjectStore(MT.store),xI(t)),s=s.next((function(){return t=o.store(MT.store),e=new MT(0,0,Lm.min().toTimestamp(),0),t.put(MT.key,e);var t,e}))),n<4&&4<=r&&(s=(s=0!==n?s.next((function(){return e=t,(n=o).store(CT.store).Nt().next((function(t){e.deleteObjectStore(CT.store),e.createObjectStore(CT.store,{keyPath:CT.keyPath,autoIncrement:!0}).createIndex(CT.userMutationsIndex,CT.userMutationsKeyPath,{unique:!0});var r=n.store(CT.store);return t=t.map((function(t){return r.put(t)})),HT.waitFor(t)}));var e,n})):s).next((function(){t.createObjectStore(FT.store,{keyPath:FT.keyPath})}))),n<5&&5<=r&&(s=s.next((function(){return i.Re(o)}))),n<6&&6<=r&&(s=s.next((function(){return t.createObjectStore(RT.store),i.be(o)}))),n<7&&7<=r&&(s=s.next((function(){return i.ve(o)}))),n<8&&8<=r&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&9<=r&&(s=s.next((function(){var n;(n=t).objectStoreNames.contains("remoteDocumentChanges")&&n.deleteObjectStore("remoteDocumentChanges"),(n=e.objectStore(PT.store)).createIndex(PT.readTimeIndex,PT.readTimeIndexPath,{unique:!1}),n.createIndex(PT.collectionReadTimeIndex,PT.collectionReadTimeIndexPath,{unique:!1})}))),n<10&&10<=r&&(s=s.next((function(){return i.Ve(o)}))),n<11&&11<=r?s.next((function(){t.createObjectStore(UT.store,{keyPath:UT.keyPath}),t.createObjectStore(VT.store,{keyPath:VT.keyPath})})):s},CI.prototype.be=function(t){var e=0;return t.store(PT.store).$t((function(t,n){e+=KE(n)})).next((function(){var n=new RT(e);return t.store(RT.store).put(RT.key,n)}))},CI.prototype.Re=function(t){var e=this,n=t.store(kT.store),r=t.store(CT.store);return n.Nt().next((function(n){return HT.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(CT.userMutationsIndex,i).next((function(r){return HT.forEach(r,(function(r){return xm(r.userId===n.userId),r=SE(e.R,r),zE(t,n.userId,r).next((function(){}))}))}))}))}))},CI.prototype.ve=function(t){var e=t.store(LT.store),n=t.store(PT.store);return t.store(MT.store).get(MT.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new zm(n);n=[0,_T(o)],r.push(e.get(n).next((function(n){return n?HT.resolve():e.put(new LT(0,_T(o),t.highestListenSequenceNumber))})))})).next((function(){return HT.waitFor(r)}))}))},CI.prototype.Pe=function(t,e){function n(t){if(i.add(t)){var e=t.lastSegment();return t=t.popLast(),r.put({collectionId:e,parent:_T(t)})}}t.createObjectStore(jT.store,{keyPath:jT.keyPath});var r=e.store(jT.store),i=new DE;return e.store(PT.store).$t({kt:!0},(function(t,e){return n((t=new zm(t)).popLast())})).next((function(){return e.store(xT.store).$t({kt:!0},(function(t,e){t[0];var r=t[1];return n((t[2],r=ET(r)).popLast())}))}))},CI.prototype.Ve=function(t){var e=this,n=t.store(DT.store);return n.$t((function(t,r){return r=kE(r),r=CE(e.R,r),n.put(r)}))},CI);function CI(t){this.R=t}function xI(t){t.createObjectStore(LT.store,{keyPath:LT.keyPath}).createIndex(LT.documentTargetsIndex,LT.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(DT.store,{keyPath:DT.keyPath}).createIndex(DT.queryTargetsIndexName,DT.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(MT.store)}var AI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",OI=(NI.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new bm(mm.FAILED_PRECONDITION,AI);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new vm(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},NI.prototype.He=function(t){var e=this;return this.Me=function(n){return Xi(e,void 0,void 0,(function(){return $i(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},NI.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return Xi(e,void 0,void 0,(function(){return $i(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},NI.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return Xi(e,void 0,void 0,(function(){return $i(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},NI.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return RI(e).put(new FT(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(nE(e))return Em("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Em("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},NI.prototype.Je=function(t){var e=this;return PI(t).get(IT.key).next((function(t){return HT.resolve(e.tn(t))}))},NI.prototype.en=function(t){return RI(t).delete(this.clientId)},NI.prototype.nn=function(){return Xi(this,void 0,void 0,(function(){var t,e,n,r,i=this;return $i(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=hE(t,FT.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return HT.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)r=n[e],this.Ke.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},NI.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},NI.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},NI.prototype.Ye=function(t){var e=this;return this.Ce?HT.resolve(!0):PI(t).get(IT.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new bm(mm.FAILED_PRECONDITION,AI);return!1}}return!(!e.networkEnabled||!e.inForeground)||RI(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground;if(t=e.networkEnabled===t.networkEnabled,n||r&&t)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Em("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},NI.prototype.shutdown=function(){return Xi(this,void 0,void 0,(function(){var t=this;return $i(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[IT.store,FT.store],(function(e){var n=new cE(e,vm.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},NI.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},NI.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return RI(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(NI.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),NI.prototype.getMutationQueue=function(t){return HE.Kt(t,this.R,this.Ut,this.referenceDelegate)},NI.prototype.getTargetCache=function(){return this.qe},NI.prototype.getRemoteDocumentCache=function(){return this.Ue},NI.prototype.getIndexManager=function(){return this.Ut},NI.prototype.getBundleCache=function(){return this.Qe},NI.prototype.runTransaction=function(t,e,n){var r,i=this;return Em("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",BT,(function(o){return r=new cE(o,i.Ne?i.Ne.next():vm.o),"readwrite-primary"===e?i.Je(r).next((function(t){return!!t||i.Ye(r)})).next((function(e){if(!e)throw Im("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable((function(){return i.Me(!1)})),new bm(mm.FAILED_PRECONDITION,zT);return n(r)})).next((function(t){return i.Ze(r).next((function(){return t}))})):i.dn(r).next((function(){return n(r)}))})).then((function(t){return r.raiseOnCommittedEvent(),t}))},NI.prototype.dn=function(t){var e=this;return PI(t).get(IT.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new bm(mm.FAILED_PRECONDITION,AI)}))},NI.prototype.Ze=function(t){var e=new IT(this.clientId,this.allowTabSynchronization,Date.now());return PI(t).put(IT.key,e)},NI.yt=function(){return GT.yt()},NI.prototype.Xe=function(t){var e=this,n=PI(t);return n.get(IT.key).next((function(t){return e.tn(t)?(Em("IndexedDbPersistence","Releasing primary lease."),n.delete(IT.key)):HT.resolve()}))},NI.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(Im("Detected an update time that is in the future: "+t+" > "+n),1))},NI.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},NI.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},NI.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},NI.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},NI.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return Em("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Im("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},NI.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Im("Failed to set zombie client id.",t)}},NI.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},NI.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},NI);function NI(t,e,n,r,i,o,a,s,u,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Se=i,this.window=o,this.document=a,this.De=u,this.Ce=c,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!NI.yt())throw new bm(mm.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new cI(this,r),this.Le=e+"main",this.R=new vE(s),this.Be=new GT(this.Le,11,new kI(this.R)),this.qe=new JE(this.referenceDelegate,this.R),this.Ut=new LE,this.Ue=(e=this.R,s=this.Ut,new gI(e,s)),this.Qe=new AE,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===c&&Im("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}function PI(t){return hE(t,IT.store)}function RI(t){return hE(t,FT.store)}function DI(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}function LI(t,e){this.progress=t,this.wn=e}var MI=(zI.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},zI.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},zI.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},zI.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},zI.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},zI.prototype.getDocumentsMatchingQuery=function(t,e,n){return r=e,ub.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Tn(t,e.path):vw(e)?this.In(t,e,n):this.An(t,e,n);var r},zI.prototype.Tn=function(t,e){return this.mn(t,new ub(e)).next((function(t){var e=A_;return t.isFoundDocument()?e.insert(t.key,t):e}))},zI.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=A_;return this.Ut.getCollectionParents(t,i).next((function(a){return HT.forEach(a,(function(a){var s=(s=e,a=a.child(i),new uw(a,null,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},zI.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=Sb.newInvalidDocument(c),r=r.insert(c,l)),Yw(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){Tw(e,n)||(r=r.remove(t))})),r}))},zI.prototype.Rn=function(t,e,n){for(var r=P_(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof e_&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},zI),jI=(BI.Pn=function(t,e){for(var n=P_(),r=P_(),i=0,o=e.docChanges;i<o.length;i++){var a=o[i];switch(a.type){case 0:n=n.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}}return new BI(t,e.fromCache,n,r)},BI),FI=(qI.prototype.Vn=function(t){this.Sn=t},qI.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())||n.isEqual(Lm.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var a=i.Cn(e,o);return(hw(e)||fw(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):(Tm()<=ea.DEBUG&&Em("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),_w(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},qI.prototype.Cn=function(t,e){var n=new I_(Ew(t));return e.forEach((function(e,r){Tw(t,r)&&(n=n.add(r))})),n},qI.prototype.Nn=function(t,e,n,r){return n.size!==e.size||!!(e="F"===t?e.last():e.first())&&(e.hasPendingWrites||0<e.version.compareTo(r))},qI.prototype.Dn=function(t,e){return Tm()<=ea.DEBUG&&Em("QueryEngine","Using full collection scan to execute query:",_w(e)),this.Sn.getDocumentsMatchingQuery(t,e,Lm.min())},qI),UI=(VI.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},VI);function VI(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new g_(Nm),this.kn=new yI(Ab,Ob),this.$n=Lm.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new MI(this.On,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}function qI(){}function BI(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}function zI(t,e,n){this.Ue=t,this._n=e,this.Ut=n}function KI(t,e,n,r){return new UI(t,e,n,r)}function HI(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i,o;return $i(this,(function(a){switch(a.label){case 0:return r=(n=t)._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new MI(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=P_(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var y=0,g=v.mutations;y<g.length;y++){var m=g[y];a=a.add(m.key)}}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function WI(t,e){var n=t;return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r,i,o,a,s,u,c,l=e.batch.keys(),h=n.On.newChangeBuffer({trackRemovals:!0});return r=n,i=t,a=h,u=(s=(o=e).batch).keys(),c=HT.resolve(),u.forEach((function(t){c=c.next((function(){return a.getEntry(i,t)})).next((function(e){var n=o.docVersions.get(t);xm(null!==n),e.version.compareTo(n)<0&&(s.applyToRemoteDocument(e,o),e.isValidDocument()&&a.addEntry(e,o.commitVersion))}))})),c.next((function(){return r._n.removeMutationBatch(i,s)})).next((function(){return h.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,l)}))}))}function GI(t){var e=t;return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function QI(t,e){var n=t,r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];e.targetChanges.forEach((function(e,o){var s,u,c,l=i.get(o);l&&(a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}))),0<(c=e.resumeToken).approximateByteSize()&&(s=l.withResumeToken(c,r).withSequenceNumber(t.currentSequenceNumber),i=i.insert(o,s),u=l,c=e,xm(0<(l=s).resumeToken.approximateByteSize()),(0===u.resumeToken.approximateByteSize()||3e8<=l.snapshotVersion.toMicroseconds()-u.snapshotVersion.toMicroseconds()||0<c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size)&&a.push(n.qe.updateTargetData(t,s))))}));var s,u=k_;return e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(YI(t,o,e.documentUpdates,r,void 0).next((function(t){u=t}))),r.isEqual(Lm.min())||(s=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)})),a.push(s)),HT.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,u)})).next((function(){return u}))})).then((function(t){return n.Fn=i,t}))}function YI(t,e,n,r,i){var o=P_();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=k_;return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(Lm.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||0<a.version.compareTo(s.version)||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):Em("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function XI(t,e){var n=t;return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,HT.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new dE(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||0<t.snapshotVersion.compareTo(r.snapshotVersion))&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function $I(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i,o;return $i(this,(function(a){switch(a.label){case 0:i=(r=t).Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!nE(o=a.sent()))throw o;return Em("LocalStore","Failed to update sequence numbers for target "+e+": "+o),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function JI(t,e,n){var r=t,i=Lm.min(),o=P_();return r.persistence.runTransaction("Execute query","readonly",(function(t){return a=r,s=t,u=gw(e),(void 0!==(a=(c=a).kn.get(u))?HT.resolve(c.Fn.get(a)):c.qe.getTargetData(s,u)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Lm.min(),n?o:P_())})).next((function(t){return{documents:t,Bn:o}}));var a,s,u,c}))}function ZI(t,e){var n=t,r=n.qe;return(t=n.Fn.get(e))?Promise.resolve(t.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function tS(t){var e=t;return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return n=e.On,r=t,t=e.$n,i=n,o=k_,a=_E(t),t=II(r),r=IDBKeyRange.lowerBound(a,!0),t.$t({index:PT.readTimeIndex,range:r},(function(t,e){var n=bE(i.R,e);o=o.insert(n.key,n),a=e.readTime})).next((function(){return{wn:o,readTime:TE(a)}}));var n,r,i,o,a})).then((function(t){var n=t.wn;return t=t.readTime,e.$n=t,n}))}function eS(t){return Xi(this,void 0,void 0,(function(){var e;return $i(this,(function(n){return[2,(e=t).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return t=II(t),e=Lm.min(),t.$t({index:PT.readTimeIndex,reverse:!0},(function(t,n,r){n.readTime&&(e=TE(n.readTime)),r.done()})).next((function(){return e}));var e})).then((function(t){e.$n=t}))]}))}))}var nS,rS,iS=(SS.prototype.getBundleMetadata=function(t,e){return HT.resolve(this.Kn.get(e))},SS.prototype.saveBundleMetadata=function(t,e){return this.Kn.set(e.id,{id:e.id,version:e.version,createTime:J_(e.createTime)}),HT.resolve()},SS.prototype.getNamedQuery=function(t,e){return HT.resolve(this.jn.get(e))},SS.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,{name:(e=e).name,query:xE(e.bundledQuery),readTime:J_(e.readTime)}),HT.resolve()},SS),oS=(IS.prototype.isEmpty=function(){return this.Wn.isEmpty()},IS.prototype.addReference=function(t,e){e=new aS(t,e),this.Wn=this.Wn.add(e),this.zn=this.zn.add(e)},IS.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},IS.prototype.removeReference=function(t,e){this.Yn(new aS(t,e))},IS.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},IS.prototype.Zn=function(t){var e=this,n=new ub(new zm([])),r=new aS(n,t),i=(t=new aS(n,t+1),[]);return this.zn.forEachInRange([r,t],(function(t){e.Yn(t),i.push(t.key)})),i},IS.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},IS.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},IS.prototype.es=function(t){var e=new ub(new zm([])),n=new aS(e,t),r=(t=new aS(e,t+1),P_());return this.zn.forEachInRange([n,t],(function(t){r=r.add(t.key)})),r},IS.prototype.containsKey=function(t){var e=new aS(t,0);return null!==(e=this.Wn.firstAfterOrEqual(e))&&t.isEqual(e.key)},IS),aS=(ES.Gn=function(t,e){return ub.comparator(t.key,e.key)||Nm(t.ns,e.ns)},ES.Hn=function(t,e){return Nm(t.ns,e.ns)||ub.comparator(t.key,e.key)},ES),sS=(TS.prototype.checkEmpty=function(t){return HT.resolve(0===this._n.length)},TS.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,0<this._n.length&&this._n[this._n.length-1],n=new fE(i,e,n,r),this._n.push(n);for(var o=0,a=r;o<a.length;o++){var s=a[o];this.rs=this.rs.add(new aS(s.key,i)),this.Ut.addToCollectionParentIndex(t,s.key.path.popLast())}return HT.resolve(n)},TS.prototype.lookupMutationBatch=function(t,e){return HT.resolve(this.os(e))},TS.prototype.getNextMutationBatchAfterBatchId=function(t,e){return e=(e=this.cs(e+1))<0?0:e,HT.resolve(this._n.length>e?this._n[e]:null)},TS.prototype.getHighestUnacknowledgedBatchId=function(){return HT.resolve(0===this._n.length?-1:this.ss-1)},TS.prototype.getAllMutationBatches=function(t){return HT.resolve(this._n.slice())},TS.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new aS(e,0),i=(e=new aS(e,Number.POSITIVE_INFINITY),[]);return this.rs.forEachInRange([r,e],(function(t){t=n.os(t.ns),i.push(t)})),HT.resolve(i)},TS.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new I_(Nm);return e.forEach((function(t){var e=new aS(t,0);t=new aS(t,Number.POSITIVE_INFINITY),n.rs.forEachInRange([e,t],(function(t){r=r.add(t.ns)}))})),HT.resolve(this.us(r))},TS.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1;e=n,ub.isDocumentKey(e)||(e=e.child("")),e=new aS(new ub(e),0);var i=new I_(Nm);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(i=i.add(t.ns)),!0)}),e),HT.resolve(this.us(i))},TS.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){null!==(t=e.os(t))&&n.push(t)})),n},TS.prototype.removeMutationBatch=function(t,e){var n=this;xm(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return HT.forEach(e.mutations,(function(i){var o=new aS(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},TS.prototype.Gt=function(t){},TS.prototype.containsKey=function(t,e){var n=new aS(e,0);return n=this.rs.firstAfterOrEqual(n),HT.resolve(e.isEqual(n&&n.key))},TS.prototype.performConsistencyCheck=function(t){return this._n.length,HT.resolve()},TS.prototype.hs=function(t,e){return this.cs(t)},TS.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},TS.prototype.os=function(t){return(t=this.cs(t))<0||t>=this._n.length?null:this._n[t]},TS),uS=(_S.prototype.addEntry=function(t,e,n){var r=e.key,i=(o=this.docs.get(r))?o.size:0,o=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:o,readTime:n}),this.size+=o-i,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},_S.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},_S.prototype.getEntry=function(t,e){var n=this.docs.get(e);return HT.resolve(n?n.document.clone():Sb.newInvalidDocument(e))},_S.prototype.getEntries=function(t,e){var n=this,r=k_;return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Sb.newInvalidDocument(t))})),HT.resolve(r)},_S.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=k_,i=new ub(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=(s=o.getNext()).key,s=(u=s.value).document,u=u.readTime;if(!e.path.isPrefixOf(a.path))break;u.compareTo(n)<=0||Tw(e,s)&&(r=r.insert(s.key,s.clone()))}return HT.resolve(r)},_S.prototype.fs=function(t,e){return HT.forEach(this.docs,(function(t){return e(t)}))},_S.prototype.newChangeBuffer=function(t){return new cS(this)},_S.prototype.getSize=function(t){return HT.resolve(this.size)},_S),cS=(Qi(wS,rS=H),wS.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),HT.waitFor(n)},wS.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},wS.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},wS),lS=(bS.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),HT.resolve()},bS.prototype.getLastRemoteSnapshotVersion=function(t){return HT.resolve(this.lastRemoteSnapshotVersion)},bS.prototype.getHighestSequenceNumber=function(t){return HT.resolve(this.ws)},bS.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),HT.resolve(this.highestTargetId)},bS.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),HT.resolve()},bS.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new $E(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},bS.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,HT.resolve()},bS.prototype.updateTargetData=function(t,e){return this.te(e),HT.resolve()},bS.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),--this.targetCount,HT.resolve()},bS.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),HT.waitFor(o).next((function(){return i}))},bS.prototype.getTargetCount=function(t){return HT.resolve(this.targetCount)},bS.prototype.getTargetData=function(t,e){return e=this.ds.get(e)||null,HT.resolve(e)},bS.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),HT.resolve()},bS.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),HT.waitFor(i)},bS.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),HT.resolve()},bS.prototype.getMatchingKeysForTargetId=function(t,e){return e=this._s.es(e),HT.resolve(e)},bS.prototype.containsKey=function(t,e){return HT.resolve(this._s.containsKey(e))},bS),hS=(mS.prototype.start=function(){return Promise.resolve()},mS.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(mS.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),mS.prototype.setDatabaseDeletedListener=function(){},mS.prototype.setNetworkEnabled=function(){},mS.prototype.getIndexManager=function(){return this.Ut},mS.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new sS(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},mS.prototype.getTargetCache=function(){return this.qe},mS.prototype.getRemoteDocumentCache=function(){return this.Ue},mS.prototype.getBundleCache=function(){return this.Qe},mS.prototype.runTransaction=function(t,e,n){var r=this;Em("MemoryPersistence","Starting transaction:",t);var i=new fS(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},mS.prototype.Is=function(t,e){return HT.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},mS),fS=(Qi(gS,nS=kn),gS),pS=(yS.bs=function(t){return new yS(t)},Object.defineProperty(yS.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Cm()},enumerable:!1,configurable:!0}),yS.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),HT.resolve()},yS.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),HT.resolve()},yS.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),HT.resolve()},yS.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},yS.prototype.Es=function(){this.Rs=new Set},yS.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return HT.forEach(this.vs,(function(r){var i=ub.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},yS.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},yS.prototype.ps=function(t){return 0},yS.prototype.Ps=function(t,e){var n=this;return HT.or([function(){return HT.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},yS),dS=(vS.prototype.isAuthenticated=function(){return null!=this.uid},vS.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},vS.prototype.isEqual=function(t){return t.uid===this.uid},vS);function vS(t){this.uid=t}function yS(t){this.persistence=t,this.As=new oS,this.Rs=null}function gS(t){var e=this;return(e=nS.call(this)||this).currentSequenceNumber=t,e}function mS(t,e){var n=this;this.gs={},this.Ne=new vm(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new lS(this),this.Ut=new RE,this.Ue=(t=this.Ut,new uS(t,(function(t){return n.referenceDelegate.ps(t)}))),this.R=new vE(e),this.Qe=new iS(this.R)}function bS(t){this.persistence=t,this.ds=new yI(Ab,Ob),this.lastRemoteSnapshotVersion=Lm.min(),this.highestTargetId=0,this.ws=0,this._s=new oS,this.targetCount=0,this.ys=$E.Jt()}function wS(t){var e=this;return(e=rS.call(this)||this).Ie=t,e}function _S(t,e){this.Ut=t,this.ls=e,this.docs=new g_(ub.comparator),this.size=0}function TS(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new I_(aS.Gn)}function ES(t,e){this.key=t,this.ns=e}function IS(){this.Wn=new I_(aS.Gn),this.zn=new I_(aS.Hn)}function SS(t){this.R=t,this.Kn=new Map,this.jn=new Map}function kS(t,e){return"firestore_clients_"+t+"_"+e}function CS(t,e,n){return n="firestore_mutations_"+t+"_"+n,e.isAuthenticated()&&(n+="_"+e.uid),n}function xS(t,e){return"firestore_targets_"+t+"_"+e}dS.UNAUTHENTICATED=new dS(null),dS.GOOGLE_CREDENTIALS=new dS("google-credentials-uid"),dS.FIRST_PARTY=new dS("first-party-uid");var AS,OS=(ZS.Vs=function(t,e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new bm(i.error.code,i.error.message)),o?new ZS(t,e,i.state,r):(Im("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},ZS.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},ZS),NS=(JS.Vs=function(t,e){var n,r=JSON.parse(e),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(n=new bm(r.error.code,r.error.message)),i?new JS(t,r.state,n):(Im("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},JS.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},JS),PS=($S.Vs=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=R_,o=0;r&&o<n.activeTargetIds.length;++o)r=sb(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new $S(t,i):(Im("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},$S),RS=(XS.Vs=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new XS(e.clientId,e.onlineState):(Im("SharedClientState","Failed to parse online state: "+t),null)},XS),DS=(YS.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},YS.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},YS.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},YS),LS=(QS.yt=function(t){return!(!t||!t.localStorage)},QS.prototype.start=function(){return Xi(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,l=this;return $i(this,(function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(o=h.sent(),t=0,e=o;t<e.length;t++)(n=e[t])!==this.Ns&&(r=this.getItem(kS(this.persistenceKey,n)))&&(i=PS.Vs(n,r))&&(this.ks=this.ks.insert(i.clientId,i));for(this.Ks(),(o=this.storage.getItem(this.Us))&&(a=this.js(o))&&this.Ws(a),s=0,u=this.$s;s<u.length;s++)c=u[s],this.Fs(c);return this.$s=[],this.window.addEventListener("pagehide",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},QS.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},QS.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},QS.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},QS.prototype.addPendingMutation=function(t){this.zs(t,"pending")},QS.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},QS.prototype.addLocalQueryTarget=function(t){var e,n="not-current";return this.isActiveQueryTarget(t)&&(!(e=this.storage.getItem(xS(this.persistenceKey,t)))||(e=NS.Vs(t,e))&&(n=e.state)),this.Js.Ds(t),this.Ks(),n},QS.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},QS.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},QS.prototype.clearQueryState=function(t){this.removeItem(xS(this.persistenceKey,t))},QS.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},QS.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},QS.prototype.setOnlineState=function(t){this.Xs(t)},QS.prototype.notifyBundleLoaded=function(){this.Zs()},QS.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},QS.prototype.getItem=function(t){var e=this.storage.getItem(t);return Em("SharedClientState","READ",t,e),e},QS.prototype.setItem=function(t,e){Em("SharedClientState","SET",t,e),this.storage.setItem(t,e)},QS.prototype.removeItem=function(t){Em("SharedClientState","REMOVE",t),this.storage.removeItem(t)},QS.prototype.Fs=function(t){var e=this,n=t;n.storageArea===this.storage&&(Em("SharedClientState","EVENT",n.key,n.newValue),n.key!==this.Os?this.Se.enqueueRetryable((function(){return Xi(e,void 0,void 0,(function(){var t,e,r,i;return $i(this,(function(o){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(t=this.ni(n.key,n.newValue))return[2,this.ei(t.clientId,t)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(e=this.si(n.key,n.newValue)))return[2,this.ii(e)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(r=this.ri(n.key,n.newValue)))return[2,this.oi(r)]}else if(n.key===this.Us){if(null!==n.newValue&&(i=this.js(n.newValue)))return[2,this.Ws(i)]}else if(n.key===this.Ms)(i=function(t){var e=vm.o;if(null!=t)try{var n=JSON.parse(t);xm("number"==typeof n),e=n}catch(t){Im("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==vm.o&&this.sequenceNumberHandler(i);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))})):Im("Received WebStorage notification for local change. Another client might have garbage-collected our state"))},Object.defineProperty(QS.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),QS.prototype.Ks=function(){this.setItem(this.Os,this.Js.Ss())},QS.prototype.zs=function(t,e,n){n=new OS(this.currentUser,t,e,n),t=CS(this.persistenceKey,this.currentUser,t),this.setItem(t,n.Ss())},QS.prototype.Hs=function(t){t=CS(this.persistenceKey,this.currentUser,t),this.removeItem(t)},QS.prototype.Xs=function(t){t={clientId:this.Ns,onlineState:t},this.storage.setItem(this.Us,JSON.stringify(t))},QS.prototype.Ys=function(t,e,n){var r=xS(this.persistenceKey,t);n=new NS(t,e,n),this.setItem(r,n.Ss())},QS.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},QS.prototype.ti=function(t){return(t=this.Ls.exec(t))?t[1]:null},QS.prototype.ni=function(t,e){return t=this.ti(t),PS.Vs(t,e)},QS.prototype.si=function(t,e){var n=this.Bs.exec(t);return t=Number(n[1]),n=void 0!==n[2]?n[2]:null,OS.Vs(new dS(n),t,e)},QS.prototype.ri=function(t,e){return t=this.qs.exec(t),t=Number(t[1]),NS.Vs(t,e)},QS.prototype.js=function(t){return RS.Vs(t)},QS.prototype.ii=function(t){return Xi(this,void 0,void 0,(function(){return $i(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Em("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},QS.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},QS.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.ks=r}))},QS.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},QS.prototype.Gs=function(t){var e=R_;return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},QS),MS=(GS.prototype.addPendingMutation=function(t){},GS.prototype.updateMutationState=function(t,e,n){},GS.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},GS.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},GS.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},GS.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},GS.prototype.clearQueryState=function(t){delete this.fi[t]},GS.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},GS.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},GS.prototype.start=function(){return this.li=new DS,Promise.resolve()},GS.prototype.handleUserChange=function(t,e,n){},GS.prototype.setOnlineState=function(t){},GS.prototype.shutdown=function(){},GS.prototype.writeSequenceNumber=function(t){},GS.prototype.notifyBundleLoaded=function(){},GS),jS=(WS.prototype.di=function(t){},WS.prototype.shutdown=function(){},WS),FS=(HS.prototype.di=function(t){this.gi.push(t)},HS.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},HS.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},HS.prototype._i=function(){Em("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},HS.prototype.yi=function(){Em("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},HS.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},HS),US={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},VS=(KS.prototype.Ii=function(t){this.Ai=t},KS.prototype.Ri=function(t){this.bi=t},KS.prototype.onMessage=function(t){this.vi=t},KS.prototype.close=function(){this.Ti()},KS.prototype.send=function(t){this.Ei(t)},KS.prototype.Pi=function(){this.Ai()},KS.prototype.Vi=function(t){this.bi(t)},KS.prototype.Si=function(t){this.vi(t)},KS),qS=(zS.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);return Em("RestConnection","Sending: ",i,n),e={},this.Fi(e,r),this.ki(t,i,e,n).then((function(t){return Em("RestConnection","Received: ",t),t}),(function(e){throw Sm("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},zS.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},zS.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.6.3",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},zS.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+US[t]},Qi(BS,AS=zS),BS.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var a=new dm;a.listenOnce(hm.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case lm.NO_ERROR:var e=a.getResponseJson();Em("Connection","XHR received:",JSON.stringify(e)),i(e);break;case lm.TIMEOUT:Em("Connection",'RPC "'+t+'" timed out'),o(new bm(mm.DEADLINE_EXCEEDED,"Request time out"));break;case lm.HTTP_ERROR:var n,r,s=a.getStatus();Em("Connection",'RPC "'+t+'" failed with status:',s,"response text:",a.getResponseText()),0<s?(n=a.getResponseJson().error)&&n.status&&n.message?(u=n.status.toLowerCase().replace(/_/g,"-"),r=0<=Object.values(mm).indexOf(u)?u:mm.UNKNOWN,o(new bm(r,n.message))):o(new bm(mm.UNKNOWN,"Server responded with status "+a.getStatus())):o(new bm(mm.UNAVAILABLE,"Connection failed."));break;default:Cm()}}finally{Em("Connection",'RPC "'+t+'" completed.')}var u}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},BS.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new im,i=cm();t={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},this.Fi(t.initMessageHeaders,e),vo()||go()||0<=po().indexOf("Electron/")||0<=(e=po()).indexOf("MSIE ")||0<=e.indexOf("Trident/")||0<=po().indexOf("MSAppHost/")||yo()||(t.httpHeadersOverwriteParam="$httpHeaders"),Em("Connection","Creating WebChannel: "+(n=n.join("")),t);var o=r.createWebChannel(n,t),a=!1,s=!1,u=new VS({Ei:function(t){s?Em("Connection","Not sending because WebChannel is closed:",t):(a||(Em("Connection","Opening WebChannel transport."),o.open(),a=!0),Em("Connection","WebChannel sending:",t),o.send(t))},Ti:function(){return o.close()}});return(t=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))})(o,pm.EventType.OPEN,(function(){s||Em("Connection","WebChannel transport opened.")})),t(o,pm.EventType.CLOSE,(function(){s||(s=!0,Em("Connection","WebChannel transport closed"),u.Vi())})),t(o,pm.EventType.ERROR,(function(t){s||(s=!0,Sm("Connection","WebChannel transport errored:",t),u.Vi(new bm(mm.UNAVAILABLE,"The operation could not be completed")))})),t(o,pm.EventType.MESSAGE,(function(t){var e,n,r,i;s||(xm(!!(e=t.data[0])),(n=e.error||(null===(i=e[0])||void 0===i?void 0:i.error))?(Em("Connection","WebChannel received error:",n),r=n.status,t=function(){var t=u_[r];if(void 0!==t)return y_(t)}(),i=n.message,void 0===t&&(t=mm.INTERNAL,i="Unknown error status: "+r+" with message "+n.message),s=!0,u.Vi(new bm(t,i)),o.close()):(Em("Connection","WebChannel received:",e),u.Si(e)))})),t(i,fm.STAT_EVENT,(function(t){10===t.stat?Em("Connection","Detected buffering proxy"):11===t.stat&&Em("Connection","Detected no buffering proxy")})),setTimeout((function(){u.Pi()}),0),u},BS);function BS(t){var e=this;return(e=AS.call(this,t)||this).forceLongPolling=t.forceLongPolling,e.autoDetectLongPolling=t.autoDetectLongPolling,e}function zS(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}function KS(t){this.Ei=t.Ei,this.Ti=t.Ti}function HS(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}function WS(){}function GS(){this.li=new DS,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}function QS(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new g_(Nm),this.started=!1,this.$s=[],n=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),this.storage=this.window.localStorage,this.currentUser=i,this.Os=kS(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.ks=this.ks.insert(this.Ns,new DS),this.Ls=new RegExp("^firestore_clients_"+n+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+n+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+n+"_(\\d+)$"),this.Us="firestore_online_state_"+this.persistenceKey,this.Qs="firestore_bundle_loaded_"+this.persistenceKey,this.window.addEventListener("storage",this.xs)}function YS(){this.activeTargetIds=R_}function XS(t,e){this.clientId=t,this.onlineState=e}function $S(t,e){this.clientId=t,this.activeTargetIds=e}function JS(t,e,n){this.targetId=t,this.state=e,this.error=n}function ZS(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function tk(){return"undefined"!=typeof window?window:null}function ek(){return"undefined"!=typeof document?document:null}function nk(t){return new Y_(t,!0)}function rk(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return Xi(o,void 0,void 0,(function(){return $i(this,(function(t){switch(t.label){case 0:return kk(this)?(Em("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Xi(this,void 0,void 0,(function(){var e;return $i(this,(function(n){switch(n.label){case 0:return(e=t).Or.add(4),[4,bk(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,mk(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new hk(n,r)}var ik,ok,ak,sk=(gk.prototype.reset=function(){this.qi=0},gk.prototype.Ki=function(){this.qi=this.Bi},gk.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);0<i&&Em("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Qi=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},gk.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},gk.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},gk.prototype.Wi=function(){return(Math.random()-.5)*this.qi},gk),uk=(yk.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},yk.prototype.er=function(){return 2===this.state},yk.prototype.start=function(){3!==this.state?this.auth():this.nr()},yk.prototype.stop=function(){return Xi(this,void 0,void 0,(function(){return $i(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},yk.prototype.sr=function(){this.state=0,this.Zi.reset()},yk.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},yk.prototype.cr=function(t){this.ur(),this.stream.send(t)},yk.prototype.rr=function(){return Xi(this,void 0,void 0,(function(){return $i(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},yk.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},yk.prototype.close=function(t,e){return Xi(this,void 0,void 0,(function(){return $i(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===mm.RESOURCE_EXHAUSTED?(Im(e.toString()),Im("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===mm.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},yk.prototype.ar=function(){},yk.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new bm(mm.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},yk.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},yk.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return Xi(t,void 0,void 0,(function(){return $i(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},yk.prototype.dr=function(t){return Em("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},yk.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Em("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},Qi(vk,ak=H=yk),vk.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},vk.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){if("targetChange"in e){e.targetChange;var n="NO_CHANGE"===(o=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===o?1:"REMOVE"===o?2:"CURRENT"===o?3:"RESET"===o?4:Cm(),r=e.targetChange.targetIds||[],i=(a=e.targetChange.resumeToken,t.I?(xm(void 0===a||"string"==typeof a),Gm.fromBase64String(a||"")):(xm(void 0===a||a instanceof Uint8Array),Gm.fromUint8Array(a||new Uint8Array))),o=(s=e.targetChange.cause)&&(u=void 0===(c=s).code?mm.UNKNOWN:y_(c.code),new bm(u,c.message||"")),a=new F_(n,r,i,o||null)}else if("documentChange"in e){e.documentChange,(n=e.documentChange).document,n.document.name,n.document.updateTime,r=nT(t,n.document.name),i=J_(n.document.updateTime);var s=new Eb({mapValue:{fields:n.document.fields}}),u=(o=Sb.newFoundDocument(r,i,s),n.targetIds||[]),c=n.removedTargetIds||[];a=new M_(u,c,o.key,o)}else if("documentDelete"in e)e.documentDelete,(n=e.documentDelete).document,r=nT(t,n.document),i=n.readTime?J_(n.readTime):Lm.min(),s=Sb.newNoDocument(r,i),o=n.removedTargetIds||[],a=new M_([],o,s.key,s);else if("documentRemove"in e)e.documentRemove,(n=e.documentRemove).document,r=nT(t,n.document),i=n.removedTargetIds||[],a=new M_([],i,r,null);else{if(!("filter"in e))return Cm();e.filter,(e=e.filter).targetId,r=new s_(n=e.count||0),i=e.targetId,a=new j_(i,r)}return a}(this.R,t);return t=function(t){return"targetChange"in t?(t=t.targetChange).targetIds&&t.targetIds.length||!t.readTime?Lm.min():J_(t.readTime):Lm.min()}(t),this.listener._r(e,t)},vk.prototype.mr=function(t){var e,n,r,i,o={};o.database=oT(this.R),o.addTarget=(e=this.R,(r=Nb(r=(n=t).target)?{documents:hT(e,r)}:{query:fT(e,r)}).targetId=n.targetId,0<n.resumeToken.approximateByteSize()?r.resumeToken=$_(e,n.resumeToken):0<n.snapshotVersion.compareTo(Lm.min())&&(r.readTime=X_(e,n.snapshotVersion.toTimestamp())),r),this.R,i=t,(t=null==(t=function(){switch(i.purpose){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Cm()}}())?null:{"goog-listen-tags":t})&&(o.labels=t),this.cr(o)},vk.prototype.yr=function(t){var e={};e.database=oT(this.R),e.removeTarget=t,this.cr(e)},vk),ck=(Qi(dk,ok=H),Object.defineProperty(dk.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),dk.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,ok.prototype.start.call(this)},dk.prototype.ar=function(){this.gr&&this.Er([])},dk.prototype.wr=function(t){return this.Hi.Oi("Write",t)},dk.prototype.onMessage=function(t){if(xm(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=(n=t.writeResults,r=t.commitTime,n&&0<n.length?(xm(void 0!==r),n.map((function(t){return n=r,(t=(e=t).updateTime?J_(e.updateTime):J_(n)).isEqual(Lm.min())&&(t=J_(n)),new Kw(t,e.transformResults||[]);var e,n}))):[]),n=J_(t.commitTime);return this.listener.Tr(n,e)}var r;return xm(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},dk.prototype.Ar=function(){var t={};t.database=oT(this.R),this.cr(t)},dk.prototype.Er=function(t){var e=this;t={streamToken:this.lastStreamToken,writes:t.map((function(t){return cT(e.R,t)}))},this.cr(t)},dk),lk=(Qi(pk,ik=function(){}),pk.prototype.br=function(){if(this.Rr)throw new bm(mm.FAILED_PRECONDITION,"The client has already been terminated.")},pk.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===mm.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new bm(mm.UNKNOWN,t.toString())}))},pk.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===mm.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new bm(mm.UNKNOWN,t.toString())}))},pk.prototype.terminate=function(){this.Rr=!0},pk),hk=(fk.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},fk.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,1<=this.vr&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},fk.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},fk.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},fk.prototype.Cr=function(t){t="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.",this.Vr?(Im(t),this.Vr=!1):Em("OnlineStateTracker",t)},fk.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},fk);function fk(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}function pk(t,e,n){var r=this;return(r=ik.call(this)||this).credentials=t,r.Hi=e,r.R=n,r.Rr=!1,r}function dk(t,e,n,r,i){var o=this;return(o=ok.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).R=r,o.gr=!1,o}function vk(t,e,n,r,i){var o=this;return(o=ak.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).R=r,o}function yk(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new sk(t,e)}function gk(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}function mk(t){return Xi(this,void 0,void 0,(function(){var e,n;return $i(this,(function(r){switch(r.label){case 0:if(!kk(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function bk(t){return Xi(this,void 0,void 0,(function(){var e,n;return $i(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function wk(t,e){t.$r.has(e.targetId)||(t.$r.set(e.targetId,e),Sk(t)?Ik(t):Lk(t).er()&&Tk(t,e))}function _k(t,e){var n=t;t=Lk(n),n.$r.delete(e),t.er()&&Ek(n,e),0===n.$r.size&&(t.er()?t.ir():kk(n)&&n.Br.set("Unknown"))}function Tk(t,e){t.qr.U(e.targetId),Lk(t).mr(e)}function Ek(t,e){t.qr.U(e),Lk(t).yr(e)}function Ik(t){t.qr=new V_({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),Lk(t).start(),t.Br.Sr()}function Sk(t){return kk(t)&&!Lk(t).tr()&&0<t.$r.size}function kk(t){return 0===t.Or.size}function Ck(t){t.qr=void 0}function xk(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i;return $i(this,(function(o){switch(o.label){case 0:if(t.Br.set("Online"),!(e instanceof F_&&2===e.state&&e.cause))return[3,6];o.label=1;case 1:return o.trys.push([1,3,,5]),[4,function(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i,o;return $i(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.$r.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return o.sent(),[3,5];case 3:return r=o.sent(),Em("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Ak(t,r)];case 4:return o.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof M_?t.qr.X(e):e instanceof j_?t.qr.rt(e):t.qr.et(e),n.isEqual(Lm.min()))return[3,13];o.label=7;case 7:return o.trys.push([7,11,,13]),[4,GI(t.localStore)];case 8:return i=o.sent(),0<=n.compareTo(i)?[4,(s=n,(u=(a=t).qr.ut(s)).targetChanges.forEach((function(t,e){var n;0<t.resumeToken.approximateByteSize()&&(n=a.$r.get(e))&&a.$r.set(e,n.withResumeToken(t.resumeToken,s))})),u.targetMismatches.forEach((function(t){var e=a.$r.get(t);e&&(a.$r.set(t,e.withResumeToken(Gm.EMPTY_BYTE_STRING,e.snapshotVersion)),Ek(a,t),e=new dE(e.target,t,1,e.sequenceNumber),Tk(a,e))})),a.remoteSyncer.applyRemoteEvent(u))]:[3,10];case 9:o.sent(),o.label=10;case 10:return[3,13];case 11:return Em("RemoteStore","Failed to raise snapshot:",i=o.sent()),[4,Ak(t,i)];case 12:return o.sent(),[3,13];case 13:return[2]}var a,s,u}))}))}function Ak(t,e,n){return Xi(this,void 0,void 0,(function(){var r=this;return $i(this,(function(i){switch(i.label){case 0:if(!nE(e))throw e;return t.Or.add(1),[4,bk(t)];case 1:return i.sent(),t.Br.set("Offline"),n=n||function(){return GI(t.localStore)},t.asyncQueue.enqueueRetryable((function(){return Xi(r,void 0,void 0,(function(){return $i(this,(function(e){switch(e.label){case 0:return Em("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,mk(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Ok(t,e){return e().catch((function(n){return Ak(t,n,e)}))}function Nk(t){return Xi(this,void 0,void 0,(function(){var e,n,r,i;return $i(this,(function(o){switch(o.label){case 0:n=Mk(e=t),r=0<e.kr.length?e.kr[e.kr.length-1].batchId:-1,o.label=1;case 1:if(!(kk(e)&&e.kr.length<10))return[3,7];o.label=2;case 2:return o.trys.push([2,4,,6]),[4,(a=e.localStore,s=r,(u=a).persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===s&&(s=-1),u._n.getNextMutationBatchAfterBatchId(t,s)})))];case 3:return null===(i=o.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e),(t=Mk(t)).er()&&t.pr&&t.Er(e.mutations)}(e,i),[3,6]);case 4:return i=o.sent(),[4,Ak(e,i)];case 5:return o.sent(),[3,6];case 6:return[3,1];case 7:return Pk(e)&&Rk(e),[2]}var a,s,u}))}))}function Pk(t){return kk(t)&&!Mk(t).tr()&&0<t.kr.length}function Rk(t){Mk(t).start()}function Dk(t,e){return Xi(this,void 0,void 0,(function(){var n;return $i(this,(function(r){switch(r.label){case 0:return n=t,e?(n.Or.delete(2),[4,mk(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,bk(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function Lk(t){var e,n,r,i=this;return t.Ur||(t.Ur=(e=t.datastore,n=t.asyncQueue,r={Ii:function(t){return Xi(this,void 0,void 0,(function(){return $i(this,(function(e){return t.$r.forEach((function(e,n){Tk(t,e)})),[2]}))}))}.bind(null,t),Ri:function(t,e){return Xi(this,void 0,void 0,(function(){return $i(this,(function(n){return Ck(t),Sk(t)?(t.Br.Nr(e),Ik(t)):t.Br.set("Unknown"),[2]}))}))}.bind(null,t),_r:xk.bind(null,t)},e.br(),new uk(n,e.Hi,e.credentials,e.R,r)),t.Mr.push((function(e){return Xi(i,void 0,void 0,(function(){return $i(this,(function(n){switch(n.label){case 0:return e?(t.Ur.sr(),Sk(t)?Ik(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:n.sent(),Ck(t),n.label=3;case 3:return[2]}}))}))}))),t.Ur}function Mk(t){var e,n,r,i=this;return t.Qr||(t.Qr=(e=t.datastore,n=t.asyncQueue,r={Ii:function(t){return Xi(this,void 0,void 0,(function(){return $i(this,(function(e){return Mk(t).Ar(),[2]}))}))}.bind(null,t),Ri:function(t,e){return Xi(this,void 0,void 0,(function(){return $i(this,(function(n){switch(n.label){case 0:return e&&Mk(t).pr?[4,function(t,e){return Xi(this,void 0,void 0,(function(){var n,r;return $i(this,(function(i){switch(i.label){case 0:return v_(r=e.code)&&r!==mm.ABORTED?(n=t.kr.shift(),Mk(t).sr(),[4,Ok(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Nk(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Pk(t)&&Rk(t),[2]}}))}))}.bind(null,t),Ir:function(t){return Xi(this,void 0,void 0,(function(){var e,n,r,i;return $i(this,(function(o){for(e=Mk(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}.bind(null,t),Tr:function(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i;return $i(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=pE.from(r,e,n),[4,Ok(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Nk(t)];case 2:return o.sent(),[2]}}))}))}.bind(null,t)},e.br(),new ck(n,e.Hi,e.credentials,e.R,r)),t.Mr.push((function(e){return Xi(i,void 0,void 0,(function(){return $i(this,(function(n){switch(n.label){case 0:return e?(t.Qr.sr(),[4,Nk(t)]):[3,2];case 1:return n.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:n.sent(),0<t.kr.length&&(Em("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),n.label=4;case 4:return[2]}}))}))}))),t.Qr}var jk=(Fk.createAndSchedule=function(t,e,n,r,i){return(i=new Fk(t,e,Date.now()+n,r,i)).start(n),i},Fk.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},Fk.prototype.skipDelay=function(){return this.handleDelayElapsed()},Fk.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new bm(mm.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},Fk.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},Fk.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},Fk);function Fk(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new KT,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}function Uk(t,e){if(Im("AsyncQueue",e+": "+t),nE(t))return new bm(mm.UNAVAILABLE,e+": "+t);throw t}function Vk(){this.queries=new yI(ww,bw),this.onlineState="Unknown",this.Gr=new Set}var qk=(Gk.emptySet=function(t){return new Gk(t.comparator)},Gk.prototype.has=function(t){return null!=this.keyedMap.get(t)},Gk.prototype.get=function(t){return this.keyedMap.get(t)},Gk.prototype.first=function(){return this.sortedSet.minKey()},Gk.prototype.last=function(){return this.sortedSet.maxKey()},Gk.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},Gk.prototype.indexOf=function(t){return(t=this.keyedMap.get(t))?this.sortedSet.indexOf(t):-1},Object.defineProperty(Gk.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),Gk.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},Gk.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},Gk.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},Gk.prototype.isEqual=function(t){if(!(t instanceof Gk))return!1;if(this.size!==t.size)return!1;for(var e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();e.hasNext();){var r=e.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0},Gk.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},Gk.prototype.copy=function(t,e){var n=new Gk;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n},Gk),Bk=(Wk.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);!n||0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Cm()},Wk.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal((function(e,n){t.push(n)})),t},Wk),zk=(Hk.fromInitialDocuments=function(t,e,n,r){var i=[];return e.forEach((function(t){i.push({type:0,doc:t})})),new Hk(t,e,qk.emptySet(e),i,n,r,!0,!1)},Object.defineProperty(Hk.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),Hk.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&bw(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},Hk),Kk=function(){this.Wr=void 0,this.listeners=[]};function Hk(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}function Wk(){this.Kr=new g_(ub.comparator)}function Gk(t){this.comparator=t?function(e,n){return t(e,n)||ub.comparator(e.key,n.key)}:function(t,e){return ub.comparator(t.key,e.key)},this.keyedMap=A_,this.sortedSet=new g_(this.comparator)}function Qk(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i,o,a;return $i(this,(function(s){switch(s.label){case 0:if(n=t,r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new Kk),!i)return[3,4];s.label=1;case 1:return s.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=s.sent(),[3,4];case 3:return a=Uk(a=s.sent(),"Initialization of query '"+_w(e.query)+"' failed"),[2,void e.onError(a)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Xk(n),[2]}}))}))}function Yk(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i,o,a;return $i(this,(function(s){return n=t,r=e.query,i=!1,(o=n.queries.get(r))&&0<=(a=o.listeners.indexOf(e))&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function Xk(t){t.Gr.forEach((function(t){t.next()}))}var $k=(iC.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new zk(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},iC.prototype.onError=function(t){this.Jr.error(t)},iC.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},iC.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},iC.prototype.Zr=function(t){if(0<t.docChanges.length)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},iC.prototype.no=function(t){t=zk.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},iC),Jk=(rC.prototype.io=function(){return"metadata"in this.payload},rC),Zk=(nC.prototype.qn=function(t){return nT(this.R,t)},nC.prototype.Un=function(t){return t.metadata.exists?uT(this.R,t.document,!1):Sb.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},nC.prototype.Qn=J_,nC),tC=(eC.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},eC.prototype.co=function(t){for(var e=new Map,n=new Zk(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(e.get(c)||P_()).add(a);e.set(c,l)}}return e},eC.prototype.complete=function(){return Xi(this,void 0,void 0,(function(){var t,e,n,r;return $i(this,(function(i){switch(i.label){case 0:return[4,function(t,e,n,r){return Xi(this,void 0,void 0,(function(){var i,o,a,s,u,c,l,h,f,p;return $i(this,(function(d){switch(d.label){case 0:for(i=t,o=P_(),a=k_,s=O_,u=0,c=n;u<c.length;u++)l=c[u],h=e.qn(l.metadata.name),l.document&&(o=o.add(h)),a=a.insert(h,e.Un(l)),s=s.insert(h,e.Qn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,XI(i,gw(lw(zm.fromString("__bundle__/docs/"+r))))];case 1:return p=d.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return YI(t,f,a,Lm.min(),s).next((function(e){return f.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,p.targetId).next((function(){return i.qe.addMatchingKeys(t,o,p.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}(this.localStore,new Zk(this.R),this.documents,this.ro.id)];case 1:t=i.sent(),e=this.co(this.documents),n=0,r=this.queries,i.label=2;case 2:return n<r.length?(r=r[n],[4,function(t,e,n){return void 0===n&&(n=P_()),Xi(this,void 0,void 0,(function(){var r,i;return $i(this,(function(o){switch(o.label){case 0:return[4,XI(t,gw(xE(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=t).persistence.runTransaction("Save named query","readwrite",(function(t){var o=J_(e.readTime);return 0<=r.snapshotVersion.compareTo(o)?i.Qe.saveNamedQuery(t,e):(o=r.withResumeToken(Gm.EMPTY_BYTE_STRING,o),i.Fn=i.Fn.insert(o.targetId,o),i.qe.updateTargetData(t,o).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Qe.saveNamedQuery(t,e)})))}))]}}))}))}(this.localStore,r,e.get(r.name))]):[3,5];case 3:i.sent(),i.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new LI(Object.assign({},this.progress),t))]}}))}))},eC);function eC(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=oC(t)}function nC(t){this.R=t}function rC(t,e){this.payload=t,this.byteLength=e}function iC(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}function oC(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var aC=function(t){this.key=t},sC=function(t){this.key=t},uC=(Object.defineProperty(pC.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),pC.prototype._o=function(t,e){var n=this,r=e?e.mo:new Bk,i=(e||this).fo,o=(e||this).mutatedKeys,a=i,s=!1,u=hw(this.query)&&i.size===this.query.limit?i.last():null,c=fw(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=Tw(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),p=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations);e=!1,l&&h?l.data.isEqual(h.data)?f!==p&&(r.track({type:3,doc:h}),e=!0):n.yo(l,h)||(r.track({type:2,doc:h}),e=!0,(u&&0<n.lo(h,u)||c&&n.lo(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),e=!0):l&&!h&&(r.track({type:1,doc:l}),e=!0,(u||c)&&(s=!0)),e&&(o=h?(a=a.add(h),p?o.add(t):o.delete(t)):(a=a.delete(t),o.delete(t)))})),hw(this.query)||fw(this.query))for(;a.size>this.query.limit;){var l=hw(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},pC.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},pC.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return i=t.type,o=e.type,n(i)-n(o)||r.lo(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Cm()}}var i,o})),this.po(n);var a=e?this.Eo():[];return e=(n=0===this.ho.size&&this.current?1:0)!==this.ao,this.ao=n,0!==o.length||e?{snapshot:new zk(this.query,t.fo,i,o,t.mutatedKeys,0==n,e,!1),To:a}:{To:a}},pC.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Bk,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},pC.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},pC.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},pC.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=P_(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new sC(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new aC(t))})),n},pC.prototype.Ao=function(t){return this.uo=t.Bn,this.ho=P_(),t=this._o(t.documents),this.applyChanges(t,!0)},pC.prototype.Ro=function(){return zk.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},pC),cC=function(t,e,n){this.query=t,this.targetId=e,this.view=n},lC=function(t){this.key=t,this.bo=!1},hC=(Object.defineProperty(fC.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),fC);function fC(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new yI(ww,bw),this.Vo=new Map,this.So=new Set,this.Do=new g_(ub.comparator),this.Co=new Map,this.No=new oS,this.xo={},this.Fo=new Map,this.ko=$E.Yt(),this.onlineState="Unknown",this.$o=void 0}function pC(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=P_(),this.mutatedKeys=P_(),this.lo=Ew(t),this.fo=new qk(this.lo)}function dC(t,e,n,r){return Xi(this,void 0,void 0,(function(){var i,o,a;return $i(this,(function(s){switch(s.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return Xi(this,void 0,void 0,(function(){var i,o;return $i(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,JI(t.localStore,e.query,!1).then((function(t){return t=t.documents,e.view._o(t,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),o=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(IC(t,e.targetId,o.To),o.snapshot)]}}))}))}(t,e,n,r)},[4,JI(t.localStore,e,!0)];case 1:return o=s.sent(),a=new uC(e,o.Bn),i=a._o(o.documents),o=L_.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),o=a.applyChanges(i,t.isPrimaryClient,o),IC(t,n,o.To),a=new cC(e,n,a),[2,(t.Po.set(e,a),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),o.snapshot)]}}))}))}function vC(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i;return $i(this,(function(o){switch(o.label){case 0:i=RC(t),o.label=1;case 1:return o.trys.push([1,5,,6]),[4,(c=i.localStore,l=e,f=c,p=Dm.now(),d=l.reduce((function(t,e){return t.add(e.key)}),P_()),f.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return f.Mn.pn(t,d).next((function(e){h=e;for(var n=[],r=0,i=l;r<i.length;r++){var o=i[r],a=function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field);null!=(a=Cw(o.transform,a||null))&&(n=null==n?Eb.empty():n).set(o.field,a)}return n||null}(o,h.get(o.key));null!=a&&n.push(new e_(o.key,a,function t(e){var n=[];return Um(e.fields,(function(e,r){var i=new Hm([e]);if(_b(r))if(0===(r=t(r.mapValue).fields).length)n.push(i);else for(var o=0,a=r;o<a.length;o++){var s=a[o];n.push(i.child(s))}else n.push(i)})),new Wm(n)}(a.value.mapValue),Ww.exists(!0)))}return f._n.addMutationBatch(t,p,n,l)}))})).then((function(t){return t.applyToLocalDocumentSet(h),{batchId:t.batchId,changes:h}})))];case 2:return r=o.sent(),i.sharedClientState.addPendingMutation(r.batchId),a=i,s=r.batchId,u=n,c=(c=(c=a.xo[a.currentUser.toKey()])||new g_(Nm)).insert(s,u),a.xo[a.currentUser.toKey()]=c,[4,kC(i,r.changes)];case 3:return o.sent(),[4,Nk(i.remoteStore)];case 4:return o.sent(),[3,6];case 5:return i=Uk(i=o.sent(),"Failed to persist write"),n.reject(i),[3,6];case 6:return[2]}var a,s,u,c,l,h,f,p,d}))}))}function yC(t,e){return Xi(this,void 0,void 0,(function(){var n,r;return $i(this,(function(i){switch(i.label){case 0:n=t,i.label=1;case 1:return i.trys.push([1,4,,6]),[4,QI(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){(e=n.Co.get(e))&&(xm(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),0<t.addedDocuments.size?e.bo=!0:0<t.modifiedDocuments.size?xm(e.bo):0<t.removedDocuments.size&&(xm(e.bo),e.bo=!1))})),[4,kC(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,iI(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function gC(t,e,n){var r;((t=t).isPrimaryClient&&0===n||!t.isPrimaryClient&&1===n)&&(r=[],t.Po.forEach((function(t,n){(n=n.view.zr(e)).snapshot&&r.push(n.snapshot)})),function(t,e){t.onlineState=e;var n=!1;t.queries.forEach((function(t,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].zr(e)&&(n=!0)})),n&&Xk(t)}(t.eventManager,e),r.length&&t.vo._r(r),t.onlineState=e,t.isPrimaryClient&&t.sharedClientState.setOnlineState(e))}function mC(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i;return $i(this,(function(o){switch(o.label){case 0:r=t,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(a=r.localStore,s=e,(u=a).persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var e;return u._n.lookupMutationBatch(t,s).next((function(n){return xm(null!==n),e=n.keys(),u._n.removeMutationBatch(t,n)})).next((function(){return u._n.performConsistencyCheck(t)})).next((function(){return u.Mn.pn(t,e)}))})))];case 2:return i=o.sent(),_C(r,e,n),wC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,kC(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,iI(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}var a,s,u}))}))}function bC(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i;return $i(this,(function(o){switch(o.label){case 0:kk((n=t).remoteStore)||Em("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),o.label=1;case 1:return o.trys.push([1,3,,4]),[4,(a=n.localStore).persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return a._n.getHighestUnacknowledgedBatchId(t)}))];case 2:return-1===(r=o.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return i=Uk(i=o.sent(),"Initialization of waitForPendingWrites() operation failed"),e.reject(i),[3,4];case 4:return[2]}var a}))}))}function wC(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function _C(t,e,n){var r=t,i=r.xo[r.currentUser.toKey()];i&&((t=i.get(e))&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i)}function TC(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||EC(t,e)}))}function EC(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(_k(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),SC(t))}function IC(t,e,n){for(var r,i,o,a=0,s=n;a<s.length;a++){var u=s[a];u instanceof aC?(t.No.addReference(u.key,e),r=t,o=void 0,i=(o=(i=u).key).path.canonicalString(),r.Do.get(o)||r.So.has(i)||(Em("SyncEngine","New document in limbo: "+o),r.So.add(i),SC(r))):u instanceof sC?(Em("SyncEngine","Document no longer in limbo: "+u.key),t.No.removeReference(u.key,e),t.No.containsKey(u.key)||EC(t,u.key)):Cm()}}function SC(t){for(;0<t.So.size&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new ub(zm.fromString(e));e=t.ko.next(),t.Co.set(e,new lC(n)),t.Do=t.Do.insert(n,e),wk(t.remoteStore,new dE(gw(lw(n.path)),e,2,vm.o))}}function kC(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i,o,a;return $i(this,(function(s){switch(s.label){case 0:return i=[],o=[],a=[],(r=t).Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,s){a.push(r.Oo(s,e,n).then((function(t){t&&(r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,t.fromCache?"not-current":"current"),i.push(t),t=jI.Pn(s.targetId,t),o.push(t))})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return $i(this,(function(c){switch(c.label){case 0:n=t,c.label=1;case 1:return c.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return HT.forEach(e,(function(e){return HT.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return HT.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return c.sent(),[3,4];case 3:if(!nE(r=c.sent()))throw r;return Em("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)u=o[i],a=u.targetId,u.fromCache||(s=n.Fn.get(a),u=s.snapshotVersion,u=s.withLastLimboFreeSnapshotVersion(u),n.Fn=n.Fn.insert(a,u));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function CC(t,e){return Xi(this,void 0,void 0,(function(){var n,r;return $i(this,(function(i){switch(i.label){case 0:return(n=t).currentUser.isEqual(e)?[3,3]:(Em("SyncEngine","User change. New user:",e.toKey()),[4,HI(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,(o=n).Fo.forEach((function(t){t.forEach((function(t){t.reject(new bm(mm.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),o.Fo.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,kC(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}var o}))}))}function xC(t,e,n,r){return Xi(this,void 0,void 0,(function(){var i,o;return $i(this,(function(a){switch(a.label){case 0:return[4,(s=(i=t).localStore,u=e,l=(c=s)._n,c.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return l.jt(t,u).next((function(e){return e?c.Mn.pn(t,e):HT.resolve(null)}))})))];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,Nk(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(_C(i,e,r||null),wC(i,e),i.localStore._n.Gt(e)):Cm(),a.label=4;case 4:return[4,kC(i,o)];case 5:return a.sent(),[3,7];case 6:Em("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}var s,u,c,l}))}))}function AC(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return $i(this,(function(l){switch(l.label){case 0:return PC(n=t),RC(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,OC(n,r.toArray())]);case 1:return i=l.sent(),n.$o=!0,[4,Dk(n.remoteStore,!0)];case 2:for(l.sent(),o=0,a=i;o<a.length;o++)s=a[o],wk(n.remoteStore,s);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return TC(n,e),$I(n.localStore,e,!0)})),_k(n.remoteStore,e)})),[4,c]);case 4:return l.sent(),[4,OC(n,u)];case 5:return l.sent(),(h=n).Co.forEach((function(t,e){_k(h.remoteStore,e)})),h.No.ts(),h.Co=new Map,h.Do=new g_(ub.comparator),n.$o=!1,[4,Dk(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}var h}))}))}function OC(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,h,f,p;return $i(this,(function(d){switch(d.label){case 0:n=t,r=[],i=[],o=0,a=e,d.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(c=n.Vo.get(s))&&0!==c.length?[4,XI(n.localStore,gw(c[0]))]:[3,7]):[3,13];case 2:u=d.sent(),l=0,h=c,d.label=3;case 3:return l<h.length?(f=h[l],f=n.Po.get(f),[4,function(t,e){return Xi(this,void 0,void 0,(function(){var n,r;return $i(this,(function(i){switch(i.label){case 0:return[4,JI((n=t).localStore,e.query,!0)];case 1:return r=i.sent(),r=e.view.Ao(r),[2,(n.isPrimaryClient&&IC(n,e.targetId,r.To),r)]}}))}))}(n,f)]):[3,6];case 4:(f=d.sent()).snapshot&&i.push(f.snapshot),d.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,ZI(n.localStore,s)];case 8:return p=d.sent(),[4,XI(n.localStore,p)];case 9:return u=d.sent(),[4,dC(n,NC(p),s,!1)];case 10:d.sent(),d.label=11;case 11:r.push(u),d.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function NC(t){return cw(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function PC(t){return t.remoteStore.remoteSyncer.applyRemoteEvent=yC.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=function(t,e){var n=t;if((t=n.Co.get(e))&&t.bo)return P_().add(t.key);var r=P_();if(!(e=n.Vo.get(e)))return r;for(var i=0,o=e;i<o.length;i++){var a=o[i];a=n.Po.get(a),r=r.unionWith(a.view.wo)}return r}.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=function(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i,o,a;return $i(this,(function(s){switch(s.label){case 0:return(r=t).sharedClientState.updateQueryState(e,"rejected",n),a=r.Co.get(e),(i=a&&a.key)?(o=(o=new g_(ub.comparator)).insert(i,Sb.newNoDocument(i,Lm.min())),a=P_().add(i),a=new D_(Lm.min(),new Map,new I_(Nm),o,a),[4,yC(r,a)]):[3,2];case 1:return s.sent(),r.Do=r.Do.remove(i),r.Co.delete(e),SC(r),[3,4];case 2:return[4,$I(r.localStore,e,!1).then((function(){return TC(r,e,n)})).catch(iI)];case 3:s.sent(),s.label=4;case 4:return[2]}}))}))}.bind(null,t),t.vo._r=function(t,e){for(var n=t,r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query;if(s=n.queries.get(s)){for(var u=0,c=s.listeners;u<c.length;u++)c[u].Hr(a)&&(r=!0);s.Wr=a}}r&&Xk(n)}.bind(null,t.eventManager),t.vo.Mo=function(t,e,n){var r=t;if(t=r.queries.get(e))for(var i=0,o=t.listeners;i<o.length;i++)o[i].onError(n);r.queries.delete(e)}.bind(null,t.eventManager),t}function RC(t){return t.remoteStore.remoteSyncer.applySuccessfulWrite=function(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i;return $i(this,(function(o){switch(o.label){case 0:n=t,r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,WI(n.localStore,e)];case 2:return i=o.sent(),_C(n,r,null),wC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,kC(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,iI(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=mC.bind(null,t),t}function DC(t,e,n){var r=t;(function(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i,o,a,s;return $i(this,(function(u){switch(u.label){case 0:return u.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=u.sent(),[4,(h=t.localStore,p=h,d=J_((f=r).createTime),p.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return p.Qe.getBundleMetadata(t,f.id)})).then((function(t){return!!t&&0<=t.createTime.compareTo(d)})))];case 2:return u.sent()?[4,e.close()]:[3,4];case 3:return[2,(u.sent(),void n._completeWith({taskState:"Success",documentsLoaded:r.totalDocuments,bytesLoaded:r.totalBytes,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}))];case 4:return n._updateProgress(oC(r)),i=new tC(r,t.localStore,e.R),[4,e.Lo()];case 5:o=u.sent(),u.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(a=u.sent())&&n._updateProgress(a),[4,e.Lo()];case 8:o=u.sent(),u.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return s=u.sent(),[4,kC(t,s.wn,void 0)];case 12:return u.sent(),[4,(h=t.localStore,c=r,(l=h).persistence.runTransaction("Save bundle","readwrite",(function(t){return l.Qe.saveBundleMetadata(t,c)})))];case 13:return u.sent(),n._completeWith(s.progress),[3,15];case 14:return Sm("SyncEngine","Loading bundle failed with "+(s=u.sent())),n._failWith(s),[3,15];case 15:return[2]}var c,l,h,f,p,d}))}))})(r,e,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var LC,MC,jC=(KC.prototype.initialize=function(t){return Xi(this,void 0,void 0,(function(){return $i(this,(function(e){switch(e.label){case 0:return this.R=nk(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}}))}))},KC.prototype.Uo=function(t){return null},KC.prototype.Qo=function(t){return KI(this.persistence,new FI,t.initialUser,this.R)},KC.prototype.qo=function(t){return new hS(pS.bs,this.R)},KC.prototype.Bo=function(t){return new MS},KC.prototype.terminate=function(){return Xi(this,void 0,void 0,(function(){return $i(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},KC),FC=(Qi(zC,MC=jC),zC.prototype.initialize=function(t){return Xi(this,void 0,void 0,(function(){return $i(this,(function(e){switch(e.label){case 0:return[4,MC.prototype.initialize.call(this,t)];case 1:return e.sent(),[4,eS(this.localStore)];case 2:return e.sent(),[4,this.Ko.initialize(this,t)];case 3:return e.sent(),[4,RC(this.Ko.syncEngine)];case 4:return e.sent(),[4,Nk(this.Ko.remoteStore)];case 5:return e.sent(),[2]}}))}))},zC.prototype.Qo=function(t){return KI(this.persistence,new FI,t.initialUser,this.R)},zC.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new sI(e,t.asyncQueue)},zC.prototype.qo=function(t){var e=DI(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?qE.withCacheSize(this.cacheSizeBytes):qE.DEFAULT;return new OI(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,tk(),ek(),this.R,this.sharedClientState,!!this.forceOwnership)},zC.prototype.Bo=function(t){return new MS},zC),UC=(Qi(BC,LC=FC),BC.prototype.initialize=function(t){return Xi(this,void 0,void 0,(function(){var e,n=this;return $i(this,(function(r){switch(r.label){case 0:return[4,LC.prototype.initialize.call(this,t)];case 1:return r.sent(),e=this.Ko.syncEngine,this.sharedClientState instanceof LS?(this.sharedClientState.syncEngine={ui:xC.bind(null,e),ai:function(t,e,n,r){return Xi(this,void 0,void 0,(function(){var i,o,a;return $i(this,(function(s){switch(s.label){case 0:return(i=t).$o?(Em("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,tS(i.localStore)];case 3:return o=s.sent(),a=D_.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,kC(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,$I(i.localStore,e,!0)];case 6:return s.sent(),TC(i,e,r),[3,8];case 7:Cm(),s.label=8;case 8:return[2]}}))}))}.bind(null,e),hi:function(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l;return $i(this,(function(h){switch(h.label){case 0:if(!(r=PC(t)).$o)return[3,10];i=0,o=e,h.label=1;case 1:return i<o.length?(o=o[i],r.Vo.has(o)?(Em("SyncEngine","Adding an already active target "+o),[3,5]):[4,ZI(r.localStore,o)]):[3,6];case 2:return a=h.sent(),[4,XI(r.localStore,a)];case 3:return s=h.sent(),[4,dC(r,NC(a),s.targetId,!1)];case 4:h.sent(),wk(r.remoteStore,s),h.label=5;case 5:return i++,[3,1];case 6:u=function(t){return $i(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,$I(r.localStore,t,!1).then((function(){_k(r.remoteStore,t),TC(r,t)})).catch(iI)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},c=0,l=n,h.label=7;case 7:return c<l.length?(l=l[c],[5,u(l)]):[3,10];case 8:h.sent(),h.label=9;case 9:return c++,[3,7];case 10:return[2]}}))}))}.bind(null,e),fn:function(t){return t.localStore.persistence.fn()}.bind(null,e),ci:function(t){return Xi(this,void 0,void 0,(function(){var e;return $i(this,(function(n){return[2,tS((e=t).localStore).then((function(t){return kC(e,t)}))]}))}))}.bind(null,e)},[4,this.sharedClientState.start()]):[3,3];case 2:r.sent(),r.label=3;case 3:return[4,this.persistence.He((function(t){return Xi(n,void 0,void 0,(function(){return $i(this,(function(e){switch(e.label){case 0:return[4,AC(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return r.sent(),[2]}}))}))},BC.prototype.Bo=function(t){var e=tk();if(!LS.yt(e))throw new bm(mm.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=DI(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new LS(e,t.asyncQueue,n,t.clientId,t.initialUser)},BC),VC=(qC.prototype.initialize=function(t,e){return Xi(this,void 0,void 0,(function(){var n=this;return $i(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return gC(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=CC.bind(null,this.syncEngine),[4,Dk(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},qC.prototype.createEventManager=function(t){return new Vk},qC.prototype.createDatastore=function(t){var e=nk(t.databaseInfo.databaseId),n=(n=t.databaseInfo,new qS(n));return t=t.credentials,new lk(t,n,e)},qC.prototype.createRemoteStore=function(t){var e=this;return new rk(this.localStore,this.datastore,t.asyncQueue,(function(t){return gC(e.syncEngine,t,0)}),t=new(FS.yt()?FS:jS))},qC.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){return o=new hC(t,e,n,r,i,o),a&&(o.$o=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},qC.prototype.terminate=function(){return function(t){return Xi(this,void 0,void 0,(function(){var e;return $i(this,(function(n){switch(n.label){case 0:return e=t,Em("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,bk(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},qC);function qC(){}function BC(t,e){var n=this;return(n=LC.call(this,t,e,!1)||this).Ko=t,n.cacheSizeBytes=e,n.synchronizeTabs=!0,n}function zC(t,e,n){var r=this;return(r=MC.call(this)||this).Ko=t,r.cacheSizeBytes=e,r.forceOwnership=n,r.synchronizeTabs=!1,r}function KC(){this.synchronizeTabs=!1}function HC(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return Xi(this,void 0,void 0,(function(){var r;return $i(this,(function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]}))}))},cancel:function(){return Xi(this,void 0,void 0,(function(){return $i(this,(function(t){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var WC=(ex.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},ex.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},ex.prototype.Wo=function(){this.muted=!0},ex.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},ex),GC=(tx.prototype.close=function(){return this.Go.cancel()},tx.prototype.getMetadata=function(){return Xi(this,void 0,void 0,(function(){return $i(this,(function(t){return[2,this.metadata.promise]}))}))},tx.prototype.Lo=function(){return Xi(this,void 0,void 0,(function(){return $i(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},tx.prototype.Ho=function(){return Xi(this,void 0,void 0,(function(){var t,e,n;return $i(this,(function(r){switch(r.label){case 0:return[4,this.Jo()];case 1:return null===(t=r.sent())?[2,null]:(n=this.zo.decode(t),e=Number(n),isNaN(e)&&this.Yo("length string ("+n+") is not valid number"),[4,this.Xo(e)]);case 2:return n=r.sent(),[2,new Jk(JSON.parse(n),t.length+e)]}}))}))},tx.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},tx.prototype.Jo=function(){return Xi(this,void 0,void 0,(function(){var t,e;return $i(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},tx.prototype.Xo=function(t){return Xi(this,void 0,void 0,(function(){var e;return $i(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},tx.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},tx.prototype.tc=function(){return Xi(this,void 0,void 0,(function(){var t,e;return $i(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},tx),QC=(ZC.prototype.lookup=function(t){return Xi(this,void 0,void 0,(function(){var e,n=this;return $i(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),0<this.mutations.length)throw new bm(mm.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i,o,a;return $i(this,(function(s){switch(s.label){case 0:return r=oT((n=t).R)+"/documents",i={documents:e.map((function(t){return eT(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return i=s.sent(),o=new Map,i.forEach((function(t){var e;e=n.R,t="found"in(t=t)?function(t,e){xm(!!e.found),e.found.name,e.found.updateTime;var n=nT(t,e.found.name);return t=J_(e.found.updateTime),e=new Eb({mapValue:{fields:e.found.fields}}),Sb.newFoundDocument(n,t,e)}(e,t):"missing"in t?function(t,e){return xm(!!e.missing),xm(!!e.readTime),t=nT(t,e.missing),e=J_(e.readTime),Sb.newNoDocument(t,e)}(e,t):Cm(),o.set(t.key.toString(),t)})),a=[],[2,(e.forEach((function(t){xm(!!(t=o.get(t.toString()))),a.push(t)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},ZC.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},ZC.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},ZC.prototype.delete=function(t){this.write(new h_(t,this.precondition(t))),this.writtenDocs.add(t.toString())},ZC.prototype.commit=function(){return Xi(this,void 0,void 0,(function(){var t,e=this;return $i(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){n=ub.fromPath(n),e.mutations.push(new f_(n,e.precondition(n)))})),[4,function(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i;return $i(this,(function(o){switch(o.label){case 0:return r=oT((n=t).R)+"/documents",i={writes:e.map((function(t){return cT(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},ZC.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Cm();e=Lm.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new bm(mm.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},ZC.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Ww.updateTime(e):Ww.none()},ZC.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(this.writtenDocs.has(t.toString())||!e)return Ww.exists(!0);if(e.isEqual(Lm.min()))throw new bm(mm.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ww.updateTime(e)},ZC.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},ZC.prototype.ensureCommitNotCalled=function(){},ZC),YC=(JC.prototype.run=function(){this.nc()},JC.prototype.nc=function(){var t=this;this.Zi.ji((function(){return Xi(t,void 0,void 0,(function(){var t,e,n=this;return $i(this,(function(r){return t=new QC(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},JC.prototype.sc=function(t){try{var e=this.updateFunction(t);return!ob(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},JC.prototype.ic=function(t){var e=this;0<this.ec&&this.rc(t)?(--this.ec,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},JC.prototype.rc=function(t){return"FirebaseError"===t.name&&("aborted"===(t=t.code)||"failed-precondition"===t||!v_(t))},JC),XC=($C.prototype.getConfiguration=function(){return Xi(this,void 0,void 0,(function(){return $i(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},$C.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},$C.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new bm(mm.FAILED_PRECONDITION,"The client has already been terminated.")},$C.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new KT;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return Xi(t,void 0,void 0,(function(){var t;return $i(this,(function(n){switch(n.label){case 0:return n.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:n.sent(),n.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:n.sent(),n.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=Uk(t=n.sent(),"Failed to shutdown persistence"),e.reject(t),[3,6];case 6:return[2]}}))}))})),e.promise},$C);function $C(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=dS.UNAUTHENTICATED,this.clientId=Am.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return Xi(r,void 0,void 0,(function(){return $i(this,(function(e){switch(e.label){case 0:return Em("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}function JC(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new sk(this.asyncQueue,"transaction_retry")}function ZC(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}function tx(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new KT,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}function ex(t){this.observer=t,this.muted=!1}function nx(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i=this;return $i(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Em("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return Xi(i,void 0,void 0,(function(){return $i(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,HI(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function rx(t,e){return Xi(this,void 0,void 0,(function(){var n,r;return $i(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,ix(t)];case 1:return n=i.sent(),Em("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return Xi(this,void 0,void 0,(function(){var n,r;return $i(this,(function(i){switch(i.label){case 0:return(n=t).asyncQueue.verifyOperationInProgress(),Em("RemoteStore","RemoteStore received new credentials"),r=kk(n),n.Or.add(3),[4,bk(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,mk(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function ix(t){return Xi(this,void 0,void 0,(function(){return $i(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Em("FirestoreClient","Using default OfflineComponentProvider"),[4,nx(t,new jC)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function ox(t){return Xi(this,void 0,void 0,(function(){return $i(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Em("FirestoreClient","Using default OnlineComponentProvider"),[4,rx(t,new VC)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function ax(t){return ix(t).then((function(t){return t.persistence}))}function sx(t){return ix(t).then((function(t){return t.localStore}))}function ux(t){return ox(t).then((function(t){return t.remoteStore}))}function cx(t){return ox(t).then((function(t){return t.syncEngine}))}function lx(t){return Xi(this,void 0,void 0,(function(){var e,n;return $i(this,(function(r){switch(r.label){case 0:return[4,ox(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=function(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i,o,a;return $i(this,(function(s){switch(s.label){case 0:return n=PC(t),(a=n.Po.get(e))?(r=a.targetId,n.sharedClientState.addLocalQueryTarget(r),i=a.view.Ro(),[3,4]):[3,1];case 1:return[4,XI(n.localStore,gw(e))];case 2:return o=s.sent(),a=n.sharedClientState.addLocalQueryTarget(o.targetId),r=o.targetId,[4,dC(n,e,r,"current"===a)];case 3:i=s.sent(),n.isPrimaryClient&&wk(n.remoteStore,o),s.label=4;case 4:return[2,i]}}))}))}.bind(null,e.syncEngine),n.onUnlisten=function(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i;return $i(this,(function(o){switch(o.label){case 0:return r=(n=t).Po.get(e),1<(i=n.Vo.get(r.targetId)).length?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!bw(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,$I(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),_k(n.remoteStore,r.targetId),TC(n,r.targetId)})).catch(iI)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return TC(n,r.targetId),[4,$I(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}.bind(null,e.syncEngine),n)]}}))}))}function hx(t,e,n){var r=this;void 0===n&&(n={});var i=new KT;return t.asyncQueue.enqueueAndForget((function(){return Xi(r,void 0,void 0,(function(){var r;return $i(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new WC({next:function(o){e.enqueueAndForget((function(){return Yk(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new bm(mm.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new bm(mm.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new $k(lw(n.path),o,{includeMetadataChanges:!0,so:!0});return Qk(t,a)},[4,lx(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function fx(t,e,n){var r=this;void 0===n&&(n={});var i=new KT;return t.asyncQueue.enqueueAndForget((function(){return Xi(r,void 0,void 0,(function(){var r;return $i(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new WC({next:function(n){e.enqueueAndForget((function(){return Yk(t,a)})),n.fromCache&&"server"===r.source?i.reject(new bm(mm.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new $k(n,o,{includeMetadataChanges:!0,so:!0});return Qk(t,a)},[4,lx(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function px(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t}var dx=function(t,e,n,r,i,o,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a},vx=(Object.defineProperty(Cx.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),Cx.prototype.isEqual=function(t){return t instanceof Cx&&t.projectId===this.projectId&&t.database===this.database},Cx),yx=new Map,gx=(kx.prototype.getToken=function(){return Promise.resolve(null)},kx.prototype.invalidateToken=function(){},kx.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(dS.UNAUTHENTICATED)}))},kx.prototype.removeChangeListener=function(){this.changeListener=null},kx),mx=(Sx.prototype.getToken=function(){return Promise.resolve(this.token)},Sx.prototype.invalidateToken=function(){},Sx.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},Sx.prototype.removeChangeListener=function(){this.changeListener=null},Sx),bx=(Ix.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Em("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(xm("string"==typeof n.accessToken),new px(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},Ix.prototype.invalidateToken=function(){this.forceRefresh=!0},Ix.prototype.setChangeListener=function(t,e){this.uc=!0,this.asyncQueue=t,this.changeListener=e},Ix.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.ac),this.changeListener=function(){return Promise.resolve()}},Ix.prototype.hc=function(){var t=this.auth&&this.auth.getUid();return xm(null===t||"string"==typeof t),new dS(t)},Ix.prototype.lc=function(){var t=this;this.uc&&(this.uc=!1,this.asyncQueue.enqueueRetryable((function(){return Xi(t,void 0,void 0,(function(){return $i(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,this.changeListener(this.currentUser)];case 2:return t.sent(),this.uc=!0,[2]}}))}))})))},Ix),wx=(Object.defineProperty(Ex.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.dc},e=this.fc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.wc&&(t["X-Goog-Iam-Authorization-Token"]=this.wc),t},enumerable:!1,configurable:!0}),Ex),_x=(Tx.prototype.getToken=function(){return Promise.resolve(new wx(this.fc,this.dc,this.wc))},Tx.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(dS.FIRST_PARTY)}))},Tx.prototype.removeChangeListener=function(){},Tx.prototype.invalidateToken=function(){},Tx);function Tx(t,e,n){this.fc=t,this.dc=e,this.wc=n}function Ex(t,e,n){this.fc=t,this.dc=e,this.wc=n,this.type="FirstParty",this.user=dS.FIRST_PARTY}function Ix(t){var e=this;function n(t){Em("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.lc(),e.auth.addAuthTokenListener(e.ac)}this.currentUser=dS.UNAUTHENTICATED,this.oc=new KT,this.cc=0,this.changeListener=function(){return Promise.resolve()},this.uc=!1,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.ac=function(){e.cc++,e.currentUser=e.hc(),e.oc.resolve(),e.uc&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))},t.onInit(n),setTimeout((function(){var r;e.auth||((r=t.getImmediate({optional:!0}))?n(r):e.uc&&(Em("FirebaseCredentialsProvider","Auth not yet detected"),e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))))}),0)}function Sx(t){this.token=t,this.changeListener=null}function kx(){this.changeListener=null}function Cx(t,e){this.projectId=t,this.database=e||"(default)"}function xx(t,e,n){if(!n)throw new bm(mm.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Ax(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new bm(mm.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Ox(t,e,n,r){if(!0===e&&!0===r)throw new bm(mm.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Nx(t){if(!ub.isDocumentKey(t))throw new bm(mm.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Px(t){if(ub.isDocumentKey(t))throw new bm(mm.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Rx(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return 20<t.length&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"!=typeof t)return"function"==typeof t?"a function":Cm();if(t instanceof Array)return"an array";var e=function(){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&1<e.length)return e[1]}return null}();return e?"a custom "+e+" object":"an object"}function Dx(t,e){if((t="_delegate"in t?t._delegate:t)instanceof e)return t;if(e.name===t.constructor.name)throw new bm(mm.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");throw t=Rx(t),new bm(mm.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+t)}function Lx(t,e){if(e<=0)throw new bm(mm.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Mx,jx=(Wx.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},Wx),Fx=(Object.defineProperty(Hx.prototype,"app",{get:function(){if(!this._app)throw new bm(mm.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(Hx.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(Hx.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),Hx.prototype._setSettings=function(t){if(this._settingsFrozen)throw new bm(mm.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jx(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new gx;switch(t.type){case"gapi":var e=t.client;return xm(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new _x(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new bm(mm.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},Hx.prototype._getSettings=function(){return this._settings},Hx.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},Hx.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},Hx.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},Hx.prototype._terminate=function(){return(t=yx.get(this))&&(Em("ComponentProvider","Removing Datastore"),yx.delete(this),t.terminate()),Promise.resolve();var t},Hx),Ux=(Object.defineProperty(Kx.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(Kx.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(Kx.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(Kx.prototype,"parent",{get:function(){return new qx(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),Kx.prototype.withConverter=function(t){return new Kx(this.firestore,t,this._key)},Kx),Vx=(zx.prototype.withConverter=function(t){return new zx(this.firestore,t,this._query)},zx),qx=(Qi(Bx,Mx=Vx),Object.defineProperty(Bx.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(Bx.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(Bx.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Ux(this.firestore,null,new ub(t))},enumerable:!1,configurable:!0}),Bx.prototype.withConverter=function(t){return new Bx(this.firestore,t,this._path)},Bx);function Bx(t,e,n){var r=this;return(r=Mx.call(this,t,e,lw(n))||this)._path=n,r.type="collection",r}function zx(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}function Kx(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}function Hx(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jx({}),this._settingsFrozen=!1,t instanceof vx?(this._databaseId=t,this._credentials=new gx):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new bm(mm.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vx(t.options.projectId)}(t),this._credentials=new bx(e))}function Wx(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new bm(mm.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new bm(mm.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Ox("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}function Gx(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Go(t),xx("collection","path",e),t instanceof Fx)return Px(n=zm.fromString.apply(zm,to([e],r))),new qx(t,null,n);if(!(t instanceof Ux||t instanceof qx))throw new bm(mm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Px(n=zm.fromString.apply(zm,to([t.path],r)).child(zm.fromString(e))),new qx(t.firestore,null,n)}function Qx(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Go(t),xx("doc","path",e=1===arguments.length?Am.u():e),t instanceof Fx)return Nx(n=zm.fromString.apply(zm,to([e],r))),new Ux(t,null,new ub(n));if(!(t instanceof Ux||t instanceof qx))throw new bm(mm.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Nx(n=t._path.child(zm.fromString.apply(zm,to([e],r)))),new Ux(t.firestore,t instanceof qx?t.converter:null,new ub(n))}function Yx(t,e){return t=Go(t),e=Go(e),(t instanceof Ux||t instanceof qx)&&(e instanceof Ux||e instanceof qx)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Xx(t,e){return t=Go(t),e=Go(e),t instanceof Vx&&e instanceof Vx&&t.firestore===e.firestore&&bw(t._query,e._query)&&t.converter===e.converter}var $x=(Object.defineProperty(Jx.prototype,"isShuttingDown",{get:function(){return this.yc},enumerable:!1,configurable:!0}),Jx.prototype.enqueueAndForget=function(t){this.enqueue(t)},Jx.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Rc(),this.bc(t)},Jx.prototype.enterRestrictedMode=function(){var t;this.yc||(this.yc=!0,(t=ek())&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ac))},Jx.prototype.enqueue=function(t){return this.Rc(),this.yc?new Promise((function(t){})):this.bc(t)},Jx.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.mc.push(t),e.vc()}))},Jx.prototype.vc=function(){return Xi(this,void 0,void 0,(function(){var t,e=this;return $i(this,(function(n){switch(n.label){case 0:if(0===this.mc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.mc[0]()];case 2:return n.sent(),this.mc.shift(),this.Zi.reset(),[3,4];case 3:if(!nE(t=n.sent()))throw t;return Em("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:0<this.mc.length&&this.Zi.ji((function(){return e.vc()})),n.label=5;case 5:return[2]}}))}))},Jx.prototype.bc=function(t){var e=this,n=this._c.then((function(){return e.Tc=!0,t().catch((function(t){throw e.Ec=t,e.Tc=!1,Im("INTERNAL UNHANDLED ERROR: ",(r=(n=t).message||"",r=n.stack?n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack:r)),t;var n,r})).then((function(t){return e.Tc=!1,t}))}));return this._c=n},Jx.prototype.enqueueAfterDelay=function(t,e,n){var r=this;return this.Rc(),-1<this.Ic.indexOf(t)&&(e=0),n=jk.createAndSchedule(this,t,e,n,(function(t){return r.Pc(t)})),this.gc.push(n),n},Jx.prototype.Rc=function(){this.Ec&&Cm()},Jx.prototype.verifyOperationInProgress=function(){},Jx.prototype.Vc=function(){return Xi(this,void 0,void 0,(function(){var t;return $i(this,(function(e){switch(e.label){case 0:return[4,t=this._c];case 1:e.sent(),e.label=2;case 2:if(t!==this._c)return[3,0];e.label=3;case 3:return[2]}}))}))},Jx.prototype.Sc=function(t){for(var e=0,n=this.gc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},Jx.prototype.Dc=function(t){var e=this;return this.Vc().then((function(){e.gc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.gc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Vc()}))},Jx.prototype.Cc=function(t){this.Ic.push(t)},Jx.prototype.Pc=function(t){t=this.gc.indexOf(t),this.gc.splice(t,1)},Jx);function Jx(){var t=this;this._c=Promise.resolve(),this.mc=[],this.yc=!1,this.gc=[],this.Ec=null,this.Tc=!1,this.Ic=[],this.Zi=new sk(this,"async_queue_retry"),this.Ac=function(){var e=ek();e&&Em("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=ek();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ac)}function Zx(t){return function(){if("object"==typeof t&&null!==t)for(var e=t,n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return 1}}()}var tA,eA=(iA.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},iA.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},iA.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},iA.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},iA.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},iA.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},iA),nA=(Qi(rA,tA=Fx),rA.prototype._terminate=function(){return this._firestoreClient||aA(this),this._firestoreClient.terminate()},rA);function rA(t,e){var n=this;return(n=tA.call(this,t,e)||this).type="firestore",n._queue=new $x,n._persistenceKey="name"in t?t.name:"[DEFAULT]",n}function iA(){this._progressObserver={},this._taskCompletionResolver=new KT,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}function oA(t){return t._firestoreClient||aA(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function aA(t){var e,n,r,i=t._freezeSettings();e=t._databaseId,n=(null===(r=t._app)||void 0===r?void 0:r.options.appId)||"",r=t._persistenceKey,i=new dx(e,n,r,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling),t._firestoreClient=new XC(t._credentials,t._queue,i)}function sA(t,e,n){var r=this,i=new KT;return t.asyncQueue.enqueue((function(){return Xi(r,void 0,void 0,(function(){var r;return $i(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,nx(t,n)];case 1:return o.sent(),[4,rx(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!("FirebaseError"===(r=o.sent()).name?r.code===mm.FAILED_PRECONDITION||r.code===mm.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function uA(t){if(t._initialized||t._terminated)throw new bm(mm.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var cA=(wA.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},wA),lA=(bA.fromBase64String=function(t){try{return new bA(Gm.fromBase64String(t))}catch(t){throw new bm(mm.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},bA.fromUint8Array=function(t){return new bA(Gm.fromUint8Array(t))},bA.prototype.toBase64=function(){return this._byteString.toBase64()},bA.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},bA.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},bA.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},bA),hA=function(t){this._methodName=t},fA=(Object.defineProperty(mA.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(mA.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),mA.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},mA.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},mA.prototype._compareTo=function(t){return Nm(this._lat,t._lat)||Nm(this._long,t._long)},mA),pA=/^__.*__$/,dA=(gA.prototype.toMutation=function(t,e){return null!==this.fieldMask?new e_(t,this.data,this.fieldMask,e,this.fieldTransforms):new t_(t,this.data,e,this.fieldTransforms)},gA),vA=(yA.prototype.toMutation=function(t,e){return new e_(t,this.data,this.fieldMask,e,this.fieldTransforms)},yA);function yA(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}function gA(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}function mA(t,e){if(!isFinite(t)||t<-90||90<t)throw new bm(mm.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new bm(mm.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}function bA(t){this._byteString=t}function wA(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new bm(mm.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Hm(t)}function _A(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw Cm()}}var TA=(Object.defineProperty(SA.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(SA.prototype,"xc",{get:function(){return this.settings.xc},enumerable:!1,configurable:!0}),SA.prototype.Fc=function(t){return new SA(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},SA.prototype.kc=function(t){var e=null===(e=this.path)||void 0===e?void 0:e.child(t);return(e=this.Fc({path:e,$c:!1})).Oc(t),e},SA.prototype.Mc=function(t){var e;return t=null===(e=this.path)||void 0===e?void 0:e.child(t),(t=this.Fc({path:t,$c:!1})).Nc(),t},SA.prototype.Lc=function(t){return this.Fc({path:void 0,$c:!0})},SA.prototype.Bc=function(t){return tO(t,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Uc)},SA.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},SA.prototype.Nc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Oc(this.path.get(t))},SA.prototype.Oc=function(t){if(0===t.length)throw this.Bc("Document fields must not be empty");if(_A(this.xc)&&pA.test(t))throw this.Bc('Document fields cannot begin and end with "__"')},SA),EA=(IA.prototype.Qc=function(t,e,n,r){return void 0===r&&(r=!1),new TA({xc:t,methodName:e,Uc:n,path:Hm.emptyPath(),$c:!1,qc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},IA);function IA(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||nk(t)}function SA(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Nc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}function kA(t){var e=t._freezeSettings(),n=nk(t._databaseId);return new EA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function CA(t,e,n,r,i,o){var a,s,u=t.Qc((o=void 0===o?{}:o).merge||o.mergeFields?2:0,e,n,i);if(XA("Data must be an object, but it was:",u,r),r=QA(r,u),o.merge)a=new Wm(u.fieldMask),s=u.fieldTransforms;else if(o.mergeFields){for(var c=[],l=0,h=o.mergeFields;l<h.length;l++){var f=$A(e,h[l],n);if(!u.contains(f))throw new bm(mm.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");eO(c,f)||c.push(f)}a=new Wm(c),s=u.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,s=u.fieldTransforms;return new dA(new Eb(r),a,s)}var xA,AA=(Qi(OA,xA=hA),OA.prototype._toFieldTransform=function(t){if(2!==t.xc)throw 1===t.xc?t.Bc(this._methodName+"() can only appear at the top level of your update data"):t.Bc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},OA.prototype.isEqual=function(t){return t instanceof OA},OA);function OA(){return null!==xA&&xA.apply(this,arguments)||this}function NA(t,e,n){return new TA({xc:3,Uc:e.settings.Uc,methodName:t._methodName,$c:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var PA,RA,DA,LA,MA=(Qi(zA,LA=hA),zA.prototype._toFieldTransform=function(t){return new Hw(t.path,new Ow)},zA.prototype.isEqual=function(t){return t instanceof zA},zA),jA=(Qi(BA,DA=hA),BA.prototype._toFieldTransform=function(t){var e=NA(this,t,!0),n=this.Kc.map((function(t){return GA(t,e)}));return n=new Nw(n),new Hw(t.path,n)},BA.prototype.isEqual=function(t){return this===t},BA),FA=(Qi(qA,RA=hA),qA.prototype._toFieldTransform=function(t){var e=NA(this,t,!0),n=this.Kc.map((function(t){return GA(t,e)}));return n=new Mw(n),new Hw(t.path,n)},qA.prototype.isEqual=function(t){return this===t},qA),UA=(Qi(VA,PA=hA),VA.prototype._toFieldTransform=function(t){var e=new Vw(t.R,kw(t.R,this.jc));return new Hw(t.path,e)},VA.prototype.isEqual=function(t){return this===t},VA);function VA(t,e){var n=this;return(n=PA.call(this,t)||this).jc=e,n}function qA(t,e){var n=this;return(n=RA.call(this,t)||this).Kc=e,n}function BA(t,e){var n=this;return(n=DA.call(this,t)||this).Kc=e,n}function zA(){return null!==LA&&LA.apply(this,arguments)||this}function KA(t,e,n,r){var i=t.Qc(1,e,n);XA("Data must be an object, but it was:",i,r);var o=[],a=Eb.empty();return Um(r,(function(t,r){var s=ZA(e,t,n);r=Go(r),t=i.Mc(s),r instanceof AA?o.push(s):null!=(t=GA(r,t))&&(o.push(s),a.set(s,t))})),r=new Wm(o),new vA(a,r,i.fieldTransforms)}function HA(t,e,n,r,i,o){var a=t.Qc(1,e,n),s=[$A(e,r,n)],u=[i];if(o.length%2!=0)throw new bm(mm.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push($A(e,o[c])),u.push(o[c+1]);for(var l,h,f,p=[],d=Eb.empty(),v=s.length-1;0<=v;--v)eO(p,s[v])||(l=s[v],h=Go(h=u[v]),f=a.Mc(l),h instanceof AA?p.push(l):null!=(f=GA(h,f))&&(p.push(l),d.set(l,f)));return i=new Wm(p),new vA(d,i,a.fieldTransforms)}function WA(t,e,n,r){return GA(n,t.Qc((r=void 0!==r&&r)?4:3,e))}function GA(t,e){if(YA(t=Go(t)))return XA("Unsupported field value:",e,t),QA(t,e);if(t instanceof hA)return function(t,e){if(!_A(e.xc))throw e.Bc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Bc(t._methodName+"() is not currently supported inside arrays");(t=t._toFieldTransform(e))&&e.fieldTransforms.push(t)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.$c&&4!==e.xc)throw e.Bc("Nested arrays are not supported");return function(e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=GA(o[i],e.Lc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(e)}return function(e,n){if(null===(e=Go(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return kw(n.R,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var r=Dm.fromDate(e);return{timestampValue:X_(n.R,r)}}if(e instanceof Dm)return r=new Dm(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)),{timestampValue:X_(n.R,r)};if(e instanceof fA)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof lA)return{bytesValue:$_(n.R,e._byteString)};if(e instanceof Ux){r=n.databaseId;var i=e.firestore._databaseId;if(!i.isEqual(r))throw n.Bc("Document reference is for database "+i.projectId+"/"+i.database+" but should be for database "+r.projectId+"/"+r.database);return{referenceValue:Z_(e.firestore._databaseId||n.databaseId,e._key.path)}}throw n.Bc("Unsupported field value: "+Rx(e))}(0,e)}function QA(t,e){var n={};return Vm(t)?e.path&&0<e.path.length&&e.fieldMask.push(e.path):Um(t,(function(t,r){null!=(r=GA(r,e.kc(t)))&&(n[t]=r)})),{mapValue:{fields:n}}}function YA(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Dm||t instanceof fA||t instanceof lA||t instanceof Ux||t instanceof hA)}function XA(t,e,n){if(!YA(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))throw"an object"===(n=Rx(n))?e.Bc(t+" a custom object"):e.Bc(t+" "+n);var r}function $A(t,e,n){if((e=Go(e))instanceof cA)return e._internalPath;if("string"==typeof e)return ZA(t,e);throw tO("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var JA=new RegExp("[~\\*/\\[\\]]");function ZA(e,n,r){if(0<=n.search(JA))throw tO("Invalid field path ("+n+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,r);try{return(new(cA.bind.apply(cA,to([void 0],n.split(".")))))._internalPath}catch(t){throw tO("Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,r)}}function tO(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i;return e="Function "+e+"() called with invalid data",n&&(e+=" (via `toFirestore()`)"),n="",(o||a)&&(n+=" (found",o&&(n+=" in field "+r),a&&(n+=" in document "+i),n+=")"),new bm(mm.INVALID_ARGUMENT,(e+=". ")+t+n)}function eO(t,e){return t.some((function(t){return t.isEqual(e)}))}var nO,rO=(Object.defineProperty(aO.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(aO.prototype,"ref",{get:function(){return new Ux(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),aO.prototype.exists=function(){return null!==this._document},aO.prototype.data=function(){if(this._document){if(this._converter){var t=new iO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},aO.prototype.get=function(t){if(this._document&&null!==(t=this._document.data.field(sO("DocumentSnapshot.get",t))))return this._userDataWriter.convertValue(t)},aO),iO=(Qi(oO,nO=rO),oO.prototype.data=function(){return nO.prototype.data.call(this)},oO);function oO(){return null!==nO&&nO.apply(this,arguments)||this}function aO(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}function sO(t,e){return"string"==typeof e?ZA(t,e):(e instanceof cA?e:e._delegate)._internalPath}var uO,cO,lO=(gO.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},gO),hO=(Qi(yO,cO=rO),yO.prototype.exists=function(){return cO.prototype.exists.call(this)},yO.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new fO(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},yO.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document&&null!==(t=this._document.data.field(sO("DocumentSnapshot.get",t))))return this._userDataWriter.convertValue(t,e.serverTimestamps)},yO),fO=(Qi(vO,uO=hO),vO.prototype.data=function(t){return uO.prototype.data.call(this,t=void 0===t?{}:t)},vO),pO=(Object.defineProperty(dO.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(dO.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(dO.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),dO.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new fO(n._firestore,n._userDataWriter,r.key,r,new lO(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},dO.prototype.docChanges=function(t){if((t=!!(t=void 0===t?{}:t).includeMetadataChanges)&&this._snapshot.excludesMetadataChanges)throw new bm(mm.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){var r=new fO(t._firestore,t._userDataWriter,e.doc.key,e.doc,new lO(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);return e.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new fO(t._firestore,t._userDataWriter,e.doc.key,e.doc,new lO(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Cm()}}(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},dO);function dO(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new lO(r.hasPendingWrites,r.fromCache),this.query=n}function vO(){return null!==uO&&uO.apply(this,arguments)||this}function yO(t,e,n,r,i,o){var a=this;return(a=cO.call(this,t,e,n,r,o)||this)._firestore=t,a._firestoreImpl=t,a.metadata=i,a}function gO(t,e){this.hasPendingWrites=t,this.fromCache=e}function mO(t,e){return t instanceof hO&&e instanceof hO?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof pO&&e instanceof pO&&t._firestore===e._firestore&&Xx(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function bO(t){if(fw(t)&&0===t.explicitOrderBy.length)throw new bm(mm.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function wO(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++)t=i[r]._apply(t);return t}var _O,TO,EO,IO,SO,kO=(Qi(LO,SO=kn=function(){}),LO.prototype._apply=function(t){var e=kA(t.firestore);return e=function(t,e,n,r,i,o){if(r.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new bm(mm.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+i+"' queries on FieldPath.documentId().");if("in"===i||"not-in"===i){FO(o,i);for(var a=[],s=0,u=o;s<u.length;s++){var c=u[s];a.push(jO(n,t,c))}l={arrayValue:{values:a}}}else l=jO(n,t,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||FO(o,i),l=WA(e,"where",o,"in"===i||"not-in"===i);var l=Rb.create(r,i,l);return function(t,e){if(e.g()){var n=dw(t);if(null!==n&&!n.isEqual(e.field))throw new bm(mm.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");null!==(n=pw(t))&&UO(0,e.field,n)}if(null!==(t=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(0<=e.indexOf(i.op))return i.op}return null}(t,function(){switch(e.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}())))throw t===e.op?new bm(mm.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new bm(mm.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+t.toString()+"' filters.")}(t,l),l}(t._query,e,t.firestore._databaseId,this.Wc,this.Gc,this.zc),new Vx(t.firestore,t.converter,(e=(t=t._query).filters.concat([e]),new uw(t.path,t.collectionGroup,t.explicitOrderBy.slice(),e,t.limit,t.limitType,t.startAt,t.endAt)))},LO),CO=(Qi(DO,IO=kn),DO.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new bm(mm.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new bm(mm.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ow(e,n);return e=r,null!==pw(n=t)||null!==(t=dw(n))&&UO(0,t,e.field),r}(t._query,this.Wc,this.Hc);return new Vx(t.firestore,t.converter,(e=(t=t._query).explicitOrderBy.concat([e]),new uw(t.path,t.collectionGroup,e,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))},DO),xO=(Qi(RO,EO=kn),RO.prototype._apply=function(t){return new Vx(t.firestore,t.converter,mw(t._query,this.Jc,this.Yc))},RO),AO=(Qi(PO,TO=kn),PO.prototype._apply=function(t){var e=MO(t,this.type,this.Xc,this.Zc);return new Vx(t.firestore,t.converter,(t=t._query,e=e,new uw(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)))},PO),OO=(Qi(NO,_O=kn),NO.prototype._apply=function(t){var e=MO(t,this.type,this.Xc,this.Zc);return new Vx(t.firestore,t.converter,(t=t._query,e=e,new uw(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)))},NO);function NO(t,e,n){var r=this;return(r=_O.call(this)||this).type=t,r.Xc=e,r.Zc=n,r}function PO(t,e,n){var r=this;return(r=TO.call(this)||this).type=t,r.Xc=e,r.Zc=n,r}function RO(t,e,n){var r=this;return(r=EO.call(this)||this).type=t,r.Jc=e,r.Yc=n,r}function DO(t,e){var n=this;return(n=IO.call(this)||this).Wc=t,n.Hc=e,n.type="orderBy",n}function LO(t,e,n){var r=this;return(r=SO.call(this)||this).Wc=t,r.Gc=e,r.zc=n,r.type="where",r}function MO(t,e,n,r){if(n[0]=Go(n[0]),n[0]instanceof rO)return function(t,n,r,i){if(!r)throw new bm(mm.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");for(var o=[],a=0,s=yw(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(yb(n,r.key));else{var c=r.data.field(u.field);if(rb(c))throw new bm(mm.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c)throw u=u.field.canonicalString(),new bm(mm.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.");o.push(c)}}return new Zb(o,i)}(t._query,t.firestore._databaseId,n[0]._document,r);var i=kA(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new bm(mm.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new bm(mm.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!vw(t)&&-1!==c.indexOf("/"))throw new bm(mm.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(zm.fromString(c));if(!ub.isDocumentKey(l))throw new bm(mm.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");l=new ub(l),s.push(yb(e,l))}else c=WA(n,r,c),s.push(c)}return new Zb(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function jO(t,e,n){if("string"==typeof(n=Go(n))){if(""===n)throw new bm(mm.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!vw(e)&&-1!==n.indexOf("/"))throw new bm(mm.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");if(e=e.path.child(zm.fromString(n)),!ub.isDocumentKey(e))throw new bm(mm.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return yb(t,new ub(e))}if(n instanceof Ux)return yb(t,n._key);throw new bm(mm.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Rx(n)+".")}function FO(t,e){if(!Array.isArray(t)||0===t.length)throw new bm(mm.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new bm(mm.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function UO(t,e,n){if(!n.isEqual(e))throw new bm(mm.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function VO(){}function qO(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}VO.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),lb(t)){case 0:return null;case 1:return t.booleanValue;case 2:return eb(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(nb(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Cm()}},VO.prototype.convertObject=function(t,e){var n=this,r={};return Um(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},VO.prototype.convertGeoPoint=function(t){return new fA(eb(t.latitude),eb(t.longitude))},VO.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},VO.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=function t(e){return rb(e=e.mapValue.fields.__previous_value__)?t(e):e}(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(ib(t));default:return null}},VO.prototype.convertTimestamp=function(t){return t=tb(t),new Dm(t.seconds,t.nanos)},VO.prototype.convertDocumentKey=function(t,e){var n=zm.fromString(t);return xm(wT(n)),t=new vx(n.get(1),n.get(3)),n=new ub(n.popFirst(5)),t.isEqual(e)||Im("Document "+n+" contains a document reference within a different database ("+t.projectId+"/"+t.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),n};var BO,zO=(Qi(WO,BO=H=VO),WO.prototype.convertBytes=function(t){return new lA(t)},WO.prototype.convertReference=function(t){return t=this.convertDocumentKey(t,this.firestore._databaseId),new Ux(this.firestore,null,t)},WO),KO=(HO.prototype.set=function(t,e,n){return this._verifyNotCommitted(),e=qO((t=GO(t,this._firestore)).converter,e,n),n=CA(this._dataReader,"WriteBatch.set",t._key,e,null!==t.converter,n),this._mutations.push(n.toMutation(t._key,Ww.none())),this},HO.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return this._verifyNotCommitted(),t=GO(t,this._firestore),e="string"==typeof(e=Go(e))||e instanceof cA?HA(this._dataReader,"WriteBatch.update",t._key,e,n,r):KA(this._dataReader,"WriteBatch.update",t._key,e),this._mutations.push(e.toMutation(t._key,Ww.exists(!0))),this},HO.prototype.delete=function(t){return this._verifyNotCommitted(),t=GO(t,this._firestore),this._mutations=this._mutations.concat(new h_(t._key,Ww.none())),this},HO.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,0<this._mutations.length?this._commitHandler(this._mutations):Promise.resolve()},HO.prototype._verifyNotCommitted=function(){if(this._committed)throw new bm(mm.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},HO);function HO(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=kA(t)}function WO(t){var e=this;return(e=BO.call(this)||this).firestore=t,e}function GO(t,e){if((t=Go(t)).firestore!==e)throw new bm(mm.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var QO,YO=(Qi(XO,QO=H),XO.prototype.convertBytes=function(t){return new lA(t)},XO.prototype.convertReference=function(t){return t=this.convertDocumentKey(t,this.firestore._databaseId),new Ux(this.firestore,null,t)},XO);function XO(t){var e=this;return(e=QO.call(this)||this).firestore=t,e}function $O(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Dx(t,Ux);var o=Dx(t.firestore,nA),a=kA(o);return ZO(o,[("string"==typeof(e=Go(e))||e instanceof cA?HA(a,"updateDoc",t._key,e,n,r):KA(a,"updateDoc",t._key,e)).toMutation(t._key,Ww.exists(!0))])}function JO(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t=Go(t);var r={includeMetadataChanges:!1},i=0;"object"!=typeof e[i]||Zx(e[i])||(r=e[i],i++);var o,a,s,u,c,l,h={includeMetadataChanges:r.includeMetadataChanges};return Zx(e[i])&&(o=e[i],e[i]=null===(r=o.next)||void 0===r?void 0:r.bind(o),e[i+1]=null===(r=o.error)||void 0===r?void 0:r.bind(o),e[i+2]=null===(r=o.complete)||void 0===r?void 0:r.bind(o)),t instanceof Ux?(s=Dx(t.firestore,nA),u=lw(t._key.path),l={next:function(n){e[i]&&e[i](tN(s,t,n))},error:e[i+1],complete:e[i+2]}):(a=Dx(t,Vx),s=Dx(a.firestore,nA),u=a._query,c=new YO(s),l={next:function(t){e[i]&&e[i](new pO(s,c,a,t))},error:e[i+1],complete:e[i+2]},bO(t._query)),function(t,e,n){var r=this,i=new WC(l),o=new $k(e,i,n);return t.asyncQueue.enqueueAndForget((function(){return Xi(r,void 0,void 0,(function(){var e;return $i(this,(function(n){switch(n.label){case 0:return e=Qk,[4,lx(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}}))}))})),function(){i.Wo(),t.asyncQueue.enqueueAndForget((function(){return Xi(r,void 0,void 0,(function(){var e;return $i(this,(function(n){switch(n.label){case 0:return e=Yk,[4,lx(t)];case 1:return[2,e.apply(void 0,[n.sent(),o])]}}))}))}))}}(oA(s),u,h)}function ZO(t,e){return function(t,e){var n=this,r=new KT;return t.asyncQueue.enqueueAndForget((function(){return Xi(n,void 0,void 0,(function(){var n;return $i(this,(function(i){switch(i.label){case 0:return n=vC,[4,cx(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(oA(t),e)}function tN(t,e,n){var r=n.docs.get(e._key),i=new YO(t);return new hO(t,i,e._key,r,new lO(n.hasPendingWrites,n.fromCache),e.converter)}var eN,nN=(iN.prototype.get=function(t){var e=this,n=GO(t,this._firestore),r=new zO(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Cm();if((t=t[0]).isFoundDocument())return new rO(e._firestore,r,t.key,t,n.converter);if(t.isNoDocument())return new rO(e._firestore,r,n._key,null,n.converter);throw Cm()}))},iN.prototype.set=function(t,e,n){return e=qO((t=GO(t,this._firestore)).converter,e,n),n=CA(this._dataReader,"Transaction.set",t._key,e,null!==t.converter,n),this._transaction.set(t._key,n),this},iN.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];return t=GO(t,this._firestore),e="string"==typeof(e=Go(e))||e instanceof cA?HA(this._dataReader,"Transaction.update",t._key,e,n,r):KA(this._dataReader,"Transaction.update",t._key,e),this._transaction.update(t._key,e),this},iN.prototype.delete=function(t){return t=GO(t,this._firestore),this._transaction.delete(t._key),this},Qi(rN,eN=iN),rN.prototype.get=function(t){var e=this,n=GO(t,this._firestore),r=new YO(this._firestore);return eN.prototype.get.call(this,t).then((function(t){return new hO(e._firestore,r,n._key,t._document,new lO(!1,!1),n.converter)}))},rN);function rN(t,e){var n=this;return(n=eN.call(this,t,e)||this)._firestore=t,n}function iN(t,e){this._firestore=t,this._transaction=e,this._dataReader=kA(t)}function oN(){if("undefined"==typeof Uint8Array)throw new bm(mm.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function aN(){if("undefined"==typeof atob)throw new bm(mm.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var sN,uN=(vN.fromBase64String=function(t){return aN(),new vN(lA.fromBase64String(t))},vN.fromUint8Array=function(t){return oN(),new vN(lA.fromUint8Array(t))},vN.prototype.toBase64=function(){return aN(),this._delegate.toBase64()},vN.prototype.toUint8Array=function(){return oN(),this._delegate.toUint8Array()},vN.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},vN.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},vN),cN=(dN.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){uA(t=Dx(t,nA));var n=oA(t),r=t._freezeSettings();return sA(n,t=new VC,new FC(t,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},dN.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){uA(t=Dx(t,nA));var e=oA(t),n=t._freezeSettings();return sA(e,t=new VC,new UC(t,n.cacheSizeBytes))}(t._delegate)},dN.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new bm(mm.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new KT;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return Xi(e,void 0,void 0,(function(){var e;return $i(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Xi(this,void 0,void 0,(function(){var e;return $i(this,(function(n){switch(n.label){case 0:return GT.yt()?(e=t+"main",[4,GT.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(DI(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},dN),lN=(Object.defineProperty(pN.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),pN.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Sm("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},pN.prototype.useEmulator=function(t,e,n){!function(t,e,n,r){void 0===r&&(r={});var i=(t=Dx(t,Fx))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Sm("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){if(n=fo(r.mockUserToken),!(r=r.mockUserToken.sub||r.mockUserToken.user_id))throw new bm(mm.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new mx(new px(n,new dS(r)))}}(this._delegate,t,e,n=void 0===n?{}:n)},pN.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Xi(e,void 0,void 0,(function(){var e,n;return $i(this,(function(r){switch(r.label){case 0:return[4,ax(t)];case 1:return e=r.sent(),[4,ux(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),(i=n).Or.delete(0),mk(i))]}var i}))}))}))}(oA(Dx(this._delegate,nA)))},pN.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Xi(e,void 0,void 0,(function(){var e,n;return $i(this,(function(r){switch(r.label){case 0:return[4,ax(t)];case 1:return e=r.sent(),[4,ux(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Xi(this,void 0,void 0,(function(){var e;return $i(this,(function(n){switch(n.label){case 0:return(e=t).Or.add(0),[4,bk(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(oA(Dx(this._delegate,nA)))},pN.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Ox("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.tu.enableMultiTabIndexedDbPersistence(this):this.tu.enableIndexedDbPersistence(this,n)},pN.prototype.clearPersistence=function(){return this.tu.clearIndexedDbPersistence(this)},pN.prototype.terminate=function(){return this.eu&&(this.eu._removeServiceInstance("firestore"),this.eu._removeServiceInstance("firestore-exp")),this._delegate._delete()},pN.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new KT;return t.asyncQueue.enqueueAndForget((function(){return Xi(e,void 0,void 0,(function(){var e;return $i(this,(function(r){switch(r.label){case 0:return e=bC,[4,cx(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(oA(Dx(this._delegate,nA)))},pN.prototype.onSnapshotsInSync=function(t){return t=t,function(t,e){var n=this,r=new WC(e);return t.asyncQueue.enqueueAndForget((function(){return Xi(n,void 0,void 0,(function(){var e;return $i(this,(function(n){switch(n.label){case 0:return e=function(t,e){t.Gr.add(e),e.next()},[4,lx(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return Xi(n,void 0,void 0,(function(){var e;return $i(this,(function(n){switch(n.label){case 0:return e=function(t,e){t.Gr.delete(e)},[4,lx(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(oA(Dx(this._delegate,nA)),Zx(t)?t:{next:t})},Object.defineProperty(pN.prototype,"app",{get:function(){if(!this.eu)throw new bm(mm.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.eu},enumerable:!1,configurable:!0}),pN.prototype.collection=function(t){try{return new DN(this,Gx(this._delegate,t))}catch(t){throw IN(t,"collection()","Firestore.collection()")}},pN.prototype.doc=function(t){try{return new TN(this,Qx(this._delegate,t))}catch(t){throw IN(t,"doc()","Firestore.doc()")}},pN.prototype.collectionGroup=function(t){try{return new NN(this,function(t,e){if(t=Dx(t,Fx),xx("collectionGroup","collection id",e),0<=e.indexOf("/"))throw new bm(mm.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Vx(t,null,(e=e,new uw(zm.emptyPath(),e)))}(this._delegate,t))}catch(t){throw IN(t,"collectionGroup()","Firestore.collectionGroup()")}},pN.prototype.runTransaction=function(t){var e,n=this;return function(t,e){var n=this,r=new KT;return t.asyncQueue.enqueueAndForget((function(){return Xi(n,void 0,void 0,(function(){var n;return $i(this,(function(i){switch(i.label){case 0:return[4,ox(t).then((function(t){return t.datastore}))];case 1:return n=i.sent(),new YC(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(oA(e=this._delegate),(function(r){return r=new nN(e,r),t(new yN(n,r))}))},pN.prototype.batch=function(){var t=this;return oA(this._delegate),new gN(new KO(this._delegate,(function(e){return ZO(t._delegate,e)})))},pN.prototype.loadBundle=function(t){throw new bm(mm.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},pN.prototype.namedQuery=function(t){throw new bm(mm.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},pN),hN=(Qi(fN,sN=H),fN.prototype.convertBytes=function(t){return new uN(new lA(t))},fN.prototype.convertReference=function(t){return t=this.convertDocumentKey(t,this.firestore._databaseId),TN.nu(t,this.firestore,null)},fN);function fN(t){var e=this;return(e=sN.call(this)||this).firestore=t,e}function pN(t,e,n){var r=this;this._delegate=e,this.tu=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof vx||(this.eu=t)}function dN(){}function vN(t){this._delegate=t}var yN=(_N.prototype.get=function(t){var e=this,n=qN(t);return this._delegate.get(n).then((function(t){return new AN(e._firestore,new hO(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},_N.prototype.set=function(t,e,n){return t=qN(t),n?(Ax("Transaction.set",n),this._delegate.set(t,e,n)):this._delegate.set(t,e),this},_N.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=qN(t);return 2===arguments.length?this._delegate.update(o,e):(t=this._delegate).update.apply(t,to([o,e,n],r)),this},_N.prototype.delete=function(t){return t=qN(t),this._delegate.delete(t),this},_N),gN=(wN.prototype.set=function(t,e,n){return t=qN(t),n?(Ax("WriteBatch.set",n),this._delegate.set(t,e,n)):this._delegate.set(t,e),this},wN.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=qN(t);return 2===arguments.length?this._delegate.update(o,e):(t=this._delegate).update.apply(t,to([o,e,n],r)),this},wN.prototype.delete=function(t){return t=qN(t),this._delegate.delete(t),this},wN.prototype.commit=function(){return this._delegate.commit()},wN),mN=(bN.prototype.fromFirestore=function(t,e){return t=new fO(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null),this._delegate.fromFirestore(new ON(this._firestore,t),null!=e?e:{})},bN.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},bN.su=function(t,e){var n=bN.iu,r=n.get(t);return r||(r=new WeakMap,n.set(t,r)),(n=r.get(e))||(n=new bN(t,new hN(t),e),r.set(e,n)),n},bN);function bN(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}function wN(t){this._delegate=t}function _N(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new hN(t)}mN.iu=new WeakMap;var TN=(EN.ru=function(t,e,n){if(t.length%2!=0)throw new bm(mm.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new EN(e,new Ux(e._delegate,n,new ub(t)))},EN.nu=function(t,e,n){return new EN(e,new Ux(e._delegate,n,t))},Object.defineProperty(EN.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(EN.prototype,"parent",{get:function(){return new DN(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(EN.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),EN.prototype.collection=function(t){try{return new DN(this.firestore,Gx(this._delegate,t))}catch(t){throw IN(t,"collection()","DocumentReference.collection()")}},EN.prototype.isEqual=function(t){return(t=Go(t))instanceof Ux&&Yx(this._delegate,t)},EN.prototype.set=function(t,e){e=Ax("DocumentReference.set",e);try{return function(t,e,n){t=Dx(t,Ux);var r=Dx(t.firestore,nA);return e=qO(t.converter,e,n),ZO(r,[CA(kA(r),"setDoc",t._key,e,null!==t.converter,n).toMutation(t._key,Ww.none())])}(this._delegate,t,e)}catch(t){throw IN(t,"setDoc()","DocumentReference.set()")}},EN.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?$O(this._delegate,t):$O.apply(void 0,to([this._delegate,t,e],n))}catch(t){throw IN(t,"updateDoc()","DocumentReference.update()")}},EN.prototype.delete=function(){return ZO(Dx((t=this._delegate).firestore,nA),[new h_(t._key,Ww.none())]);var t},EN.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=SN(e),i=kN(e,(function(e){return new AN(t.firestore,new hO(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return JO(this._delegate,r,i)},EN.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Dx(t,Ux);var e=Dx(t.firestore,nA),n=oA(e),r=new YO(e);return function(t,e){var n=this,r=new KT;return t.asyncQueue.enqueueAndForget((function(){return Xi(n,void 0,void 0,(function(){var n;return $i(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i;return $i(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(a=e,(s=t).persistence.runTransaction("read document","readonly",(function(t){return s.Mn.mn(t,a)})))];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new bm(mm.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Uk(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}var a,s}))}))},[4,sx(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new hO(e,r,t._key,n,new lO(null!==n&&n.hasLocalMutations,!0),t.converter)}))}:"server"===(null==t?void 0:t.source)?function(t){t=Dx(t,Ux);var e=Dx(t.firestore,nA);return hx(oA(e),t._key,{source:"server"}).then((function(n){return tN(e,t,n)}))}:function(t){t=Dx(t,Ux);var e=Dx(t.firestore,nA);return hx(oA(e),t._key).then((function(n){return tN(e,t,n)}))})(this._delegate).then((function(t){return new AN(e.firestore,new hO(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},EN.prototype.withConverter=function(t){return new EN(this.firestore,t?this._delegate.withConverter(mN.su(this.firestore,t)):this._delegate.withConverter(null))},EN);function EN(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new hN(t)}function IN(t,e,n){return t.message=t.message.replace(e,n),t}function SN(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Zx(r))return r}return{}}function kN(t,e){var n;return{next:function(t){n.next&&n.next(e(t))},error:null===(t=(n=Zx(t[0])?t[0]:Zx(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===t?void 0:t.bind(n),complete:null===(t=n.complete)||void 0===t?void 0:t.bind(n)}}var CN,xN,AN=(Object.defineProperty(VN.prototype,"ref",{get:function(){return new TN(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(VN.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(VN.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(VN.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),VN.prototype.data=function(t){return this._delegate.data(t)},VN.prototype.get=function(t,e){return this._delegate.get(t,e)},VN.prototype.isEqual=function(t){return mO(this._delegate,t._delegate)},VN),ON=(Qi(UN,xN=AN),UN.prototype.data=function(t){return this._delegate.data(t)},UN),NN=(FN.prototype.where=function(t,e,n){try{return new FN(this.firestore,wO(this._delegate,(r=n,i=e,o=sO("where",t),new kO(o,i,r))))}catch(t){throw IN(t,/(orderBy|where)\(\)/,"Query.$1()")}var r,i,o},FN.prototype.orderBy=function(t,e){try{return new FN(this.firestore,wO(this._delegate,(n=void 0===e?"asc":e,r=sO("orderBy",t),new CO(r,n))))}catch(t){throw IN(t,/(orderBy|where)\(\)/,"Query.$1()")}var n,r},FN.prototype.limit=function(t){try{return new FN(this.firestore,wO(this._delegate,(Lx("limit",e=t),new xO("limit",e,"F"))))}catch(t){throw IN(t,"limit()","Query.limit()")}var e},FN.prototype.limitToLast=function(t){try{return new FN(this.firestore,wO(this._delegate,(Lx("limitToLast",e=t),new xO("limitToLast",e,"L"))))}catch(t){throw IN(t,"limitToLast()","Query.limitToLast()")}var e},FN.prototype.startAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new FN(this.firestore,wO(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new AO("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw IN(t,"startAt()","Query.startAt()")}},FN.prototype.startAfter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new FN(this.firestore,wO(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new AO("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw IN(t,"startAfter()","Query.startAfter()")}},FN.prototype.endBefore=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new FN(this.firestore,wO(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new OO("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw IN(t,"endBefore()","Query.endBefore()")}},FN.prototype.endAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new FN(this.firestore,wO(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new OO("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw IN(t,"endAt()","Query.endAt()")}},FN.prototype.isEqual=function(t){return Xx(this._delegate,t._delegate)},FN.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Dx(t,Vx);var e=Dx(t.firestore,nA),n=oA(e),r=new YO(e);return function(t,e){var n=this,r=new KT;return t.asyncQueue.enqueueAndForget((function(){return Xi(n,void 0,void 0,(function(){var n;return $i(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i,o;return $i(this,(function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,JI(t,e,!0)];case 1:return o=a.sent(),r=new uC(e,o.Bn),i=r._o(o.documents),i=r.applyChanges(i,!1),n.resolve(i.snapshot),[3,3];case 2:return i=a.sent(),o=Uk(i,"Failed to execute query '"+e+" against cache"),n.reject(o),[3,3];case 3:return[2]}}))}))},[4,sx(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new pO(e,r,t,n)}))}:"server"===(null==t?void 0:t.source)?function(t){t=Dx(t,Vx);var e=Dx(t.firestore,nA),n=oA(e),r=new YO(e);return fx(n,t._query,{source:"server"}).then((function(n){return new pO(e,r,t,n)}))}:function(t){t=Dx(t,Vx);var e=Dx(t.firestore,nA),n=oA(e),r=new YO(e);return bO(t._query),fx(n,t._query).then((function(n){return new pO(e,r,t,n)}))})(this._delegate).then((function(t){return new RN(e.firestore,new pO(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},FN.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=SN(e),i=kN(e,(function(e){return new RN(t.firestore,new pO(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return JO(this._delegate,r,i)},FN.prototype.withConverter=function(t){return new FN(this.firestore,t?this._delegate.withConverter(mN.su(this.firestore,t)):this._delegate.withConverter(null))},FN),PN=(Object.defineProperty(jN.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(jN.prototype,"doc",{get:function(){return new ON(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(jN.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(jN.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),jN),RN=(Object.defineProperty(MN.prototype,"query",{get:function(){return new NN(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(MN.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(MN.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(MN.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(MN.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new ON(t._firestore,e)}))},enumerable:!1,configurable:!0}),MN.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new PN(e._firestore,t)}))},MN.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new ON(n._firestore,r))}))},MN.prototype.isEqual=function(t){return mO(this._delegate,t._delegate)},MN),DN=(Qi(LN,CN=NN),Object.defineProperty(LN.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(LN.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(LN.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new TN(this.firestore,t):null},enumerable:!1,configurable:!0}),LN.prototype.doc=function(t){try{return new TN(this.firestore,void 0===t?Qx(this._delegate):Qx(this._delegate,t))}catch(t){throw IN(t,"doc()","CollectionReference.doc()")}},LN.prototype.add=function(t){var e,n,r,i=this;return n=t,t=Dx((e=this._delegate).firestore,nA),r=Qx(e),n=qO(e.converter,n),ZO(t,[CA(kA(e.firestore),"addDoc",r._key,n,null!==e.converter,{}).toMutation(r._key,Ww.exists(!1))]).then((function(){return r})).then((function(t){return new TN(i.firestore,t)}))},LN.prototype.isEqual=function(t){return Yx(this._delegate,t._delegate)},LN.prototype.withConverter=function(t){return new LN(this.firestore,t?this._delegate.withConverter(mN.su(this.firestore,t)):this._delegate.withConverter(null))},LN);function LN(t,e){var n=this;return(n=CN.call(this,t,e)||this).firestore=t,n._delegate=e,n}function MN(t,e){this._firestore=t,this._delegate=e}function jN(t,e){this._firestore=t,this._delegate=e}function FN(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new hN(t)}function UN(){return null!==xN&&xN.apply(this,arguments)||this}function VN(t,e){this._firestore=t,this._delegate=e}function qN(t){return Dx(t,Ux)}function BN(t){this._delegate=t}function zN(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(cA.bind.apply(cA,to([void 0],t)))}zN.documentId=function(){return new zN(Hm.keyField().canonicalString())},zN.prototype.isEqual=function(t){return(t=Go(t))instanceof cA&&this._delegate._internalPath.isEqual(t._internalPath)},kn=zN,BN.serverTimestamp=function(){var t=new MA("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new BN(t)},BN.delete=function(){var t=new AA("deleteField");return t._methodName="FieldValue.delete",new BN(t)},BN.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new jA("arrayUnion",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayUnion",new BN(n)},BN.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new FA("arrayRemove",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayRemove",new BN(n)},BN.increment=function(t){return(t=new UA("increment",t))._methodName="FieldValue.increment",new BN(t)},BN.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)};var KN,HN,WN={Firestore:lN,GeoPoint:fA,Timestamp:Dm,Blob:uN,Transaction:yN,WriteBatch:gN,DocumentReference:TN,DocumentSnapshot:AN,Query:NN,QueryDocumentSnapshot:ON,QuerySnapshot:RN,CollectionReference:DN,FieldPath:kn,FieldValue:H=BN,setLogLevel:function(t){wm.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(KN=Ta).INTERNAL.registerComponent(new Qo("firestore",(function(t){var e=t.getProvider("app").getImmediate();return e=e,t=t.getProvider("auth-internal"),new lN(e,new nA(e,t),new cN)}),"PUBLIC").setServiceProps(Object.assign({},WN))),KN.registerVersion("@firebase/firestore","2.3.2"),(HN=lN).prototype.loadBundle=function(t){return e=this._delegate,n=t,r=oA(e=Dx(e,nA)),t=new eA,function(t,e,r){var i,o=this,a=(i=n,e=nk(e),i=function(t){if(t instanceof Uint8Array)return HC(t,void 0);if(t instanceof ArrayBuffer)return HC(new Uint8Array(t),void 0);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof i?(new TextEncoder).encode(i):i),new GC(i,e));t.asyncQueue.enqueueAndForget((function(){return Xi(o,void 0,void 0,(function(){var e;return $i(this,(function(n){switch(n.label){case 0:return e=DC,[4,cx(t)];case 1:return e.apply(void 0,[n.sent(),a,r]),[2]}}))}))}))}(r,e._databaseId,t),t;var e,n,r},HN.prototype.namedQuery=function(t){var e=this,n=this._delegate;return t=t,function(t,e){var n=this;return t.asyncQueue.enqueue((function(){return Xi(n,void 0,void 0,(function(){var n;return $i(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=t;return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.Qe.getNamedQuery(t,e)}))},[4,sx(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(oA(n=Dx(n,nA)),t).then((function(t){return t?new Vx(n,null,t.query):null})).then((function(t){return t?new NN(e,t):null}))};var GN,QN={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},YN=(Qi(XN,GN=Error),XN);function XN(t,e,n){return e=GN.call(this,e)||this,Object.setPrototypeOf(e,XN.prototype),e.code=t,e.details=n,e}var $N=(JN.prototype.getAuthToken=function(){return Xi(this,void 0,void 0,(function(){var t;return $i(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},JN.prototype.getInstanceIdToken=function(){return Xi(this,void 0,void 0,(function(){return $i(this,(function(t){switch(t.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},JN.prototype.getContext=function(){return Xi(this,void 0,void 0,(function(){var t,e;return $i(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},JN);function JN(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}function ZN(t,e){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}var tP=(eP.prototype.encode=function(t){var e=this;if(null==t)return null;if("number"==typeof(t=t instanceof Number?t.valueOf():t)&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"==typeof t||"object"==typeof t)return ZN(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},eP.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?ZN(t,(function(t){return e.decode(t)})):t},eP);function eP(){}var nP,rP,iP,oP=(Object.defineProperty(aP.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),aP.prototype._url=function(t){var e=this.app_.options.projectId;return null===this.emulatorOrigin?null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t},aP.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},aP.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},aP.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},aP.prototype.postJSON=function(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i,o;return $i(this,(function(a){switch(a.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=a.sent())&&(n["X-Firebase-AppCheck"]=r),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 3:return i=a.sent(),[3,5];case 4:return a.sent(),[2,{status:0,json:null}];case 5:o=null,a.label=6;case 6:return a.trys.push([6,8,,9]),[4,i.json()];case 7:return o=a.sent(),[3,9];case 8:return a.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}}))}))},aP.prototype.getAppCheckToken=function(){return Xi(this,void 0,void 0,(function(){var t;return $i(this,(function(e){switch(e.label){case 0:return(t=this.appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},aP.prototype.call=function(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i,o,a,s;return $i(this,(function(u){switch(u.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(a=u.sent()).authToken&&(o.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=a.instanceIdToken),s=n.timeout||7e4,c=s,h=new Promise((function(t,e){l=setTimeout((function(){e(new YN("deadline-exceeded","deadline-exceeded"))}),c)})),s=(a={timer:l,promise:h}).timer,a=a.promise,[4,Promise.race([sP(s,this.postJSON(r,i,o)),a,sP(s,this.cancelAllRequests)])];case 2:if(!(a=u.sent()))throw new YN("cancelled","Firebase Functions instance was deleted.");if(s=function(t,e,n){var r=function(t){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r;t=void 0;try{var o=e&&e.error;if(o){var a=o.status;if("string"==typeof a){if(!QN[a])return new YN("internal","internal");r=QN[a],i=a}var s=o.message;"string"==typeof s&&(i=s),void 0!==(t=o.details)&&(t=n.decode(t))}}catch(t){}return"ok"===r?null:new YN(r,i,t)}(a.status,a.json,this.serializer))throw s;if(!a.json)throw new YN("internal","Response is not valid JSON object.");if(void 0===(s=void 0===(s=a.json.data)?a.json.result:s))throw new YN("internal","Response is missing data field.");return[2,{data:this.serializer.decode(s)}]}var c,l,h}))}))},aP);function aP(t,e,n,r,i,o){var a=this;void 0===i&&(i="us-central1"),this.app_=t,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new tP,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new $N(e,n),this.cancelAllRequests=new Promise((function(t){a.deleteService=function(){return t()}}));try{var s=new URL(i);this.customDomain=s.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=i}}function sP(t,e){return Xi(this,void 0,void 0,(function(){var n;return $i(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}function uP(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function cP(t,e,n){var r,i=new Promise((function(i,o){uP(r=t[e].apply(t,n)).then(i,o)}));return i.request=r,i}function lP(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function hP(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return cP(this[e],r,arguments)})}))}function fP(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function pP(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return t=this[e],(n=cP(t,r,arguments)).then((function(t){if(t)return new vP(t,n.request)}));var t,n})}))}function dP(t){this._index=t}function vP(t,e){this._cursor=t,this._request=e}function yP(t){this._store=t}function gP(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function mP(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new gP(n)}function bP(t){this._db=t}function wP(t,e,n){var r=(e=cP(indexedDB,"open",[t,e])).request;return r&&(r.onupgradeneeded=function(t){n&&n(new mP(r.result,t.oldVersion,r.transaction))}),e.then((function(t){return new bP(t)}))}function _P(t){return cP(indexedDB,"deleteDatabase",[t])}nP=Ta,rP=fetch.bind(self),iP={Functions:oP},nP.INTERNAL.registerComponent(new Qo("functions",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal");return e=t.getProvider("app-check-internal"),t=t.getProvider("messaging"),new oP(r,i,t,e,n,rP)}),"PUBLIC").setServiceProps(iP).setMultipleInstances(!0)),Ta.registerVersion("@firebase/functions","0.6.9"),lP(dP,"_index",["name","keyPath","multiEntry","unique"]),hP(dP,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),pP(dP,"_index",IDBIndex,["openCursor","openKeyCursor"]),lP(vP,"_cursor",["direction","key","primaryKey","value"]),hP(vP,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(vP.prototype[t]=function(){var e=this,n=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,n),uP(e._request).then((function(t){if(t)return new vP(t,e._request)}))}))})})),yP.prototype.createIndex=function(){return new dP(this._store.createIndex.apply(this._store,arguments))},yP.prototype.index=function(){return new dP(this._store.index.apply(this._store,arguments))},lP(yP,"_store",["name","keyPath","indexNames","autoIncrement"]),hP(yP,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),pP(yP,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),fP(yP,"_store",IDBObjectStore,["deleteIndex"]),gP.prototype.objectStore=function(){return new yP(this._tx.objectStore.apply(this._tx,arguments))},lP(gP,"_tx",["objectStoreNames","mode"]),fP(gP,"_tx",IDBTransaction,["abort"]),mP.prototype.createObjectStore=function(){return new yP(this._db.createObjectStore.apply(this._db,arguments))},lP(mP,"_db",["name","version","objectStoreNames"]),fP(mP,"_db",IDBDatabase,["deleteObjectStore","close"]),bP.prototype.transaction=function(){return new gP(this._db.transaction.apply(this._db,arguments))},lP(bP,"_db",["name","version","objectStoreNames"]),fP(bP,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[yP,dP].forEach((function(e){t in e.prototype&&(e.prototype[t.replace("open","iterate")]=function(){var e=(r=arguments,Array.prototype.slice.call(r)),n=e[e.length-1],r=this._store||this._index,i=r[t].apply(r,e.slice(0,-1));i.onsuccess=function(){n(i.result)}})}))})),[dP,yP].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})}));var TP="w:0.4.26",EP=((kn={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',kn["not-registered"]="Firebase Installation is not registered.",kn["installation-not-found"]="Firebase Installation not found.",kn["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',kn["app-offline"]="Could not process request. Application offline.",kn["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",new So("installations","Installations",H=kn));function IP(t){return t instanceof Eo&&t.code.includes("request-failed")}function SP(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+(t=t.projectId)+"/installations"}function kP(t){return{token:t.token,requestStatus:2,expiresIn:(t=t.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()}}function CP(t,e){return Xi(this,void 0,void 0,(function(){var n;return $i(this,(function(r){switch(r.label){case 0:return[4,e.json()];case 1:return n=(n=r.sent()).error,[2,EP.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})]}}))}))}function xP(t){return t=t.apiKey,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function AP(t,e){return e=e.refreshToken,(t=xP(t)).append("Authorization","FIS_v2 "+e),t}function OP(t){return Xi(this,void 0,void 0,(function(){var e;return $i(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return 500<=(e=n.sent()).status&&e.status<600?[2,t()]:[2,e]}}))}))}function NP(t){return new Promise((function(e){setTimeout(e,t)}))}var PP=/^[cdef][\w-]{21}$/;function RP(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return btoa(String.fromCharCode.apply(String,to([],Zi(t)))).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22);return PP.test(e)?e:""}catch(t){return""}}function DP(t){return t.appName+"!"+t.appId}var LP=new Map;function MP(t,e){jP(t=DP(t),e),function(t,e){var n=UP();n&&n.postMessage({key:t,fid:e}),VP()}(t,e)}function jP(t,e){var n,r;if(t=LP.get(t))try{for(var i=Ji(t),o=i.next();!o.done;o=i.next())(0,o.value)(e)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}var FP=null;function UP(){return!FP&&"BroadcastChannel"in self&&((FP=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){jP(t.data.key,t.data.fid)}),FP}function VP(){0===LP.size&&FP&&(FP.close(),FP=null)}var qP,BP="firebase-installations-store",zP=null;function KP(){return zP=zP||wP("firebase-installations-database",1,(function(t){0===t.oldVersion&&t.createObjectStore(BP)}))}function HP(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i,o;return $i(this,(function(a){switch(a.label){case 0:return n=DP(t),[4,KP()];case 1:return i=a.sent(),r=i.transaction(BP,"readwrite"),[4,(i=r.objectStore(BP)).get(n)];case 2:return o=a.sent(),[4,i.put(e,n)];case 3:return a.sent(),[4,r.complete];case 4:return a.sent(),o&&o.fid===e.fid||MP(t,e.fid),[2,e]}}))}))}function WP(t){return Xi(this,void 0,void 0,(function(){var e,n;return $i(this,(function(r){switch(r.label){case 0:return e=DP(t),[4,KP()];case 1:return[4,(n=(n=r.sent()).transaction(BP,"readwrite")).objectStore(BP).delete(e)];case 2:return r.sent(),[4,n.complete];case 3:return r.sent(),[2]}}))}))}function GP(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i,o,a;return $i(this,(function(s){switch(s.label){case 0:return n=DP(t),[4,KP()];case 1:return i=s.sent(),r=i.transaction(BP,"readwrite"),[4,(i=r.objectStore(BP)).get(n)];case 2:return o=s.sent(),void 0!==(a=e(o))?[3,4]:[4,i.delete(n)];case 3:return s.sent(),[3,6];case 4:return[4,i.put(a,n)];case 5:s.sent(),s.label=6;case 6:return[4,r.complete];case 7:return s.sent(),!a||o&&o.fid===a.fid||MP(t,a.fid),[2,a]}}))}))}function QP(t){return Xi(this,void 0,void 0,(function(){var e,n,r;return $i(this,(function(i){switch(i.label){case 0:return[4,GP(t,(function(n){return n=XP(n||{fid:RP(),registrationStatus:0}),n=function(t,e){return 0!==e.registrationStatus?1===e.registrationStatus?{installationEntry:e,registrationPromise:function(t){return Xi(this,void 0,void 0,(function(){var e,n,r;return $i(this,(function(i){switch(i.label){case 0:return[4,YP(t)];case 1:e=i.sent(),i.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,NP(100)];case 3:return i.sent(),[4,YP(t)];case 4:return e=i.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,QP(t)];case 6:return r=i.sent(),n=r.installationEntry,(r=r.registrationPromise)?[2,r]:[2,n];case 7:return[2,e]}}))}))}(t)}:{installationEntry:e}:navigator.onLine?(t=function(t,e){return Xi(this,void 0,void 0,(function(){var n,r;return $i(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,function(t,e){var n=e.fid;return Xi(this,void 0,void 0,(function(){var e,r,i,o,a;return $i(this,(function(s){switch(s.label){case 0:return e=SP(t),r=xP(t),a={fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:TP},i={method:"POST",headers:r,body:JSON.stringify(a)},[4,OP((function(){return fetch(e,i)}))];case 1:return(o=s.sent()).ok?[4,o.json()]:[3,3];case 2:return[2,{fid:(a=s.sent()).fid||n,registrationStatus:2,refreshToken:a.refreshToken,authToken:kP(a.authToken)}];case 3:return[4,CP("Create Installation",o)];case 4:throw s.sent()}}))}))}(t,e)];case 1:return n=i.sent(),[2,HP(t,n)];case 2:return IP(r=i.sent())&&409===r.customData.serverCode?[4,WP(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,HP(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,e={fid:e.fid,registrationStatus:1,registrationTime:Date.now()}),{installationEntry:e,registrationPromise:t}):{installationEntry:e,registrationPromise:Promise.reject(EP.create("app-offline"))}}(t,n),e=n.registrationPromise,n.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function YP(t){return GP(t,(function(t){if(!t)throw EP.create("installation-not-found");return XP(t)}))}function XP(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function $P(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return Xi(this,void 0,void 0,(function(){var t,i,o,a,s;return $i(this,(function(u){switch(u.label){case 0:return t=function(t,e){return e=e.fid,SP(t)+"/"+e+"/authTokens:generate"}(n,e),i=AP(n,e),(s=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",s.getPlatformInfoString()),s={installation:{sdkVersion:TP}},o={method:"POST",headers:i,body:JSON.stringify(s)},[4,OP((function(){return fetch(t,o)}))];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return[2,kP(s=u.sent())];case 3:return[4,CP("Generate Auth Token",a)];case 4:throw u.sent()}}))}))}function JP(t,e){return void 0===e&&(e=!1),Xi(this,void 0,void 0,(function(){var n,r,i;return $i(this,(function(o){switch(o.label){case 0:return[4,GP(t.appConfig,(function(r){if(!tR(r))throw EP.create("not-registered");var i,o=r.authToken;if(e||2!==(i=o).requestStatus||function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(i)){if(1===o.requestStatus)return n=function(t,e){return Xi(this,void 0,void 0,(function(){var n;return $i(this,(function(r){switch(r.label){case 0:return[4,ZP(t.appConfig)];case 1:n=r.sent(),r.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,NP(100)];case 3:return r.sent(),[4,ZP(t.appConfig)];case 4:return n=r.sent(),[3,2];case 5:return 0===(n=n.authToken).requestStatus?[2,JP(t,e)]:[2,n]}}))}))}(t,e),r;if(!navigator.onLine)throw EP.create("app-offline");return i=r,o={requestStatus:1,requestTime:Date.now()},o=Yi(Yi({},i),{authToken:o}),n=function(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i;return $i(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,$P(t,e)];case 1:return n=o.sent(),i=Yi(Yi({},e),{authToken:n}),[4,HP(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!IP(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,WP(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=Yi(Yi({},e),{authToken:{requestStatus:0}}),[4,HP(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,o),o}return r}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function ZP(t){return GP(t,(function(t){if(!tR(t))throw EP.create("not-registered");var e=t.authToken;return 1===(e=e).requestStatus&&e.requestTime+1e4<Date.now()?Yi(Yi({},t),{authToken:{requestStatus:0}}):t}))}function tR(t){return void 0!==t&&2===t.registrationStatus}function eR(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i;return $i(this,(function(o){switch(o.label){case 0:return n=function(t,e){return e=e.fid,SP(t)+"/"+e}(t,e),i=AP(t,e),r={method:"DELETE",headers:i},[4,OP((function(){return fetch(n,r)}))];case 1:return(i=o.sent()).ok?[3,3]:[4,CP("Delete Installation",i)];case 2:throw o.sent();case 3:return[2]}}))}))}function nR(t){return EP.create("missing-app-config-values",{valueName:t})}(qP=Ta).INTERNAL.registerComponent(new Qo("installations",(function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw nR("App Configuration");if(!t.name)throw nR("App Name");try{for(var r=Ji(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw nR(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(t){return Xi(this,void 0,void 0,(function(){var e,n;return $i(this,(function(r){switch(r.label){case 0:return[4,QP(t.appConfig)];case 1:return e=r.sent(),n=e.installationEntry,(e.registrationPromise||JP(t)).catch(console.error),[2,n.fid]}}))}))}(n)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),Xi(this,void 0,void 0,(function(){return $i(this,(function(n){switch(n.label){case 0:return[4,function(t){return Xi(this,void 0,void 0,(function(){var e;return $i(this,(function(n){switch(n.label){case 0:return[4,QP(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}(t.appConfig)];case 1:return n.sent(),[4,JP(t,e)];case 2:return[2,n.sent().token]}}))}))}(n,t)},delete:function(){return function(t){return Xi(this,void 0,void 0,(function(){var e,n;return $i(this,(function(r){switch(r.label){case 0:return[4,GP(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw EP.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw EP.create("app-offline");case 3:return[4,eR(e,n)];case 4:return r.sent(),[4,WP(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(n)},onIdChange:function(t){return function(t,e){var n=t.appConfig;return function(t,e){UP();var n=DP(t);(t=LP.get(n))||(t=new Set,LP.set(n,t)),t.add(e)}(n,e),function(){var t,r,i;r=e,i=DP(t=n),(t=LP.get(i))&&(t.delete(r),0===t.size&&LP.delete(i),VP())}}(n,t)}}}),"PUBLIC")),qP.registerVersion("@firebase/installations","0.4.26"),(kn={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',kn["only-available-in-window"]="This method is available in a Window context.",kn["only-available-in-sw"]="This method is available in a service worker context.",kn["permission-default"]="The notification permission was not granted and dismissed instead.",kn["permission-blocked"]="The notification permission was not granted and blocked instead.",kn["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",kn["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",kn["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",kn["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",kn["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",kn["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",kn["token-update-no-token"]="FCM returned no token when updating the user to push.",kn["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",kn["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",kn["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",kn["invalid-vapid-key"]="The public VAPID key must be a string.",kn["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.";var rR,iR=new So("messaging","Messaging",H=kn),oR="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",aR="FCM_MSG",sR="google.c.a.c_id";function uR(t){return t=new Uint8Array(t),btoa(String.fromCharCode.apply(String,to([],Zi(t)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(kn=rR=rR||{}).PUSH_RECEIVED="push-received",kn.NOTIFICATION_CLICKED="notification-clicked";var cR="fcm_token_details_db",lR="fcm_token_object_Store";function hR(t){return Xi(this,void 0,void 0,(function(){var e,n=this;return $i(this,(function(r){switch(r.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(!r.sent().map((function(t){return t.name})).includes(cR))return[2,null];r.label=2;case 2:return e=null,[4,wP(cR,5,(function(r){return Xi(n,void 0,void 0,(function(){var n,i,o;return $i(this,(function(a){switch(a.label){case 0:return r.oldVersion<2?[2]:r.objectStoreNames.contains(lR)?[4,(o=r.transaction.objectStore(lR)).index("fcmSenderId").get(t)]:[2];case 1:return n=a.sent(),[4,o.clear()];case 2:if(a.sent(),!n)return[2];if(2===r.oldVersion){if(!(i=n).auth||!i.p256dh||!i.endpoint)return[2];e={token:i.fcmToken,createTime:null!==(o=i.createTime)&&void 0!==o?o:Date.now(),subscriptionOptions:{auth:i.auth,p256dh:i.p256dh,endpoint:i.endpoint,swScope:i.swScope,vapidKey:"string"==typeof i.vapidKey?i.vapidKey:uR(i.vapidKey)}}}else(3===r.oldVersion||4===r.oldVersion)&&(e={token:(i=n).fcmToken,createTime:i.createTime,subscriptionOptions:{auth:uR(i.auth),p256dh:uR(i.p256dh),endpoint:i.endpoint,swScope:i.swScope,vapidKey:uR(i.vapidKey)}});return[2]}}))}))}))];case 3:return r.sent().close(),[4,_P(cR)];case 4:return r.sent(),[4,_P("fcm_vapid_details_db")];case 5:return r.sent(),[4,_P("undefined")];case 6:return r.sent(),[2,function(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&0<t.createTime&&"string"==typeof t.token&&0<t.token.length&&"string"==typeof e.auth&&0<e.auth.length&&"string"==typeof e.p256dh&&0<e.p256dh.length&&"string"==typeof e.endpoint&&0<e.endpoint.length&&"string"==typeof e.swScope&&0<e.swScope.length&&"string"==typeof e.vapidKey&&0<e.vapidKey.length}(e)?e:null]}}))}))}var fR="firebase-messaging-store",pR=null;function dR(){return pR=pR||wP("firebase-messaging-database",1,(function(t){0===t.oldVersion&&t.createObjectStore(fR)}))}function vR(t){return Xi(this,void 0,void 0,(function(){var e,n;return $i(this,(function(r){switch(r.label){case 0:return e=gR(t),[4,dR()];case 1:return[4,r.sent().transaction(fR).objectStore(fR).get(e)];case 2:return(e=r.sent())?[2,e]:[3,3];case 3:return[4,hR(t.appConfig.senderId)];case 4:return(n=r.sent())?[4,yR(t,n)]:[3,6];case 5:return r.sent(),[2,n];case 6:return[2]}}))}))}function yR(t,e){return Xi(this,void 0,void 0,(function(){var n,r;return $i(this,(function(i){switch(i.label){case 0:return n=gR(t),[4,dR()];case 1:return[4,(r=(r=i.sent()).transaction(fR,"readwrite")).objectStore(fR).put(e,n)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2,e]}}))}))}function gR(t){return t.appConfig.appId}function mR(t,e){return Xi(this,void 0,void 0,(function(){var n,r;return $i(this,(function(i){switch(i.label){case 0:return[4,wR(t)];case 1:n={method:"DELETE",headers:n=i.sent()},i.label=2;case 2:return i.trys.push([2,5,,6]),[4,fetch(bR(t.appConfig)+"/"+e,n)];case 3:return[4,i.sent().json()];case 4:if((n=i.sent()).error)throw r=n.error.message,iR.create("token-unsubscribe-failed",{errorInfo:r});return[3,6];case 5:throw r=i.sent(),iR.create("token-unsubscribe-failed",{errorInfo:r});case 6:return[2]}}))}))}function bR(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+(t=t.projectId)+"/registrations"}function wR(t){var e=t.appConfig,n=t.installations;return Xi(this,void 0,void 0,(function(){var t;return $i(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function _R(t){var e=t.p256dh,n=t.auth;return e={web:{endpoint:t.endpoint,auth:n,p256dh:e}},(t=t.vapidKey)!==oR&&(e.web.applicationPubKey=t),e}function TR(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i,o;return $i(this,(function(a){switch(a.label){case 0:if("granted"!==Notification.permission)throw iR.create("permission-blocked");return[4,function(t,e){return Xi(this,void 0,void 0,(function(){var n;return $i(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(t){t=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/");for(var e=atob(t),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}(e)})]}}))}))}(e,n)];case 1:return o=a.sent(),[4,vR(t)];case 2:return r=a.sent(),i={vapidKey:n,swScope:e.scope,endpoint:o.endpoint,auth:uR(o.getKey("auth")),p256dh:uR(o.getKey("p256dh"))},r?[3,3]:[2,IR(t,i)];case 3:if(s=r.subscriptionOptions,u=i.vapidKey===s.vapidKey,c=i.endpoint===s.endpoint,l=i.auth===s.auth,s=i.p256dh===s.p256dh,u&&c&&l&&s)return[3,8];a.label=4;case 4:return a.trys.push([4,6,,7]),[4,mR(t,r.token)];case 5:return a.sent(),[3,7];case 6:return o=a.sent(),console.warn(o),[3,7];case 7:return[2,IR(t,i)];case 8:return Date.now()>=r.createTime+6048e5?[2,function(t,e,n){return Xi(this,void 0,void 0,(function(){var r,i,o;return $i(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,function(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i,o;return $i(this,(function(a){switch(a.label){case 0:return[4,wR(t)];case 1:n=a.sent(),r=_R(e.subscriptionOptions),r={method:"PATCH",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(bR(t.appConfig)+"/"+e.token,r)];case 3:return[4,a.sent().json()];case 4:return i=a.sent(),[3,6];case 5:throw o=a.sent(),iR.create("token-update-failed",{errorInfo:o});case 6:if(i.error)throw o=i.error.message,iR.create("token-update-failed",{errorInfo:o});if(!i.token)throw iR.create("token-update-no-token");return[2,i.token]}}))}))}(e,t)];case 1:return r=a.sent(),i=Yi(Yi({},t),{token:r,createTime:Date.now()}),[4,yR(e,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,ER(e,n)];case 4:throw a.sent(),o;case 5:return[2]}}))}))}({token:r.token,createTime:Date.now(),subscriptionOptions:i},t,e)]:[2,r.token];case 9:return[2]}var s,u,c,l}))}))}function ER(t,e){return Xi(this,void 0,void 0,(function(){var n;return $i(this,(function(r){switch(r.label){case 0:return[4,vR(t)];case 1:return(n=r.sent())?[4,mR(t,n.token)]:[3,4];case 2:return r.sent(),[4,function(t){return Xi(this,void 0,void 0,(function(){var e,n;return $i(this,(function(r){switch(r.label){case 0:return e=gR(t),[4,dR()];case 1:return[4,(n=(n=r.sent()).transaction(fR,"readwrite")).objectStore(fR).delete(e)];case 2:return r.sent(),[4,n.complete];case 3:return r.sent(),[2]}}))}))}(t)];case 3:r.sent(),r.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(n=r.sent())?[2,n.unsubscribe()]:[2,!0]}}))}))}function IR(t,e){return Xi(this,void 0,void 0,(function(){var n;return $i(this,(function(r){switch(r.label){case 0:return[4,function(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i,o;return $i(this,(function(a){switch(a.label){case 0:return[4,wR(t)];case 1:n=a.sent(),r=_R(e),r={method:"POST",headers:n,body:JSON.stringify(r)},a.label=2;case 2:return a.trys.push([2,5,,6]),[4,fetch(bR(t.appConfig),r)];case 3:return[4,a.sent().json()];case 4:return i=a.sent(),[3,6];case 5:throw o=a.sent(),iR.create("token-subscribe-failed",{errorInfo:o});case 6:if(i.error)throw o=i.error.message,iR.create("token-subscribe-failed",{errorInfo:o});if(!i.token)throw iR.create("token-subscribe-no-token");return[2,i.token]}}))}))}(t,e)];case 1:return n={token:n=r.sent(),createTime:Date.now(),subscriptionOptions:e},[4,yR(t,n)];case 2:return r.sent(),[2,n.token]}}))}))}function SR(t){return"object"==typeof t&&t&&sR in t}function kR(t){return new Promise((function(e){setTimeout(e,t)}))}var CR=(Object.defineProperty(xR.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),xR.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw iR.create("invalid-bg-handler");this.bgMessageHandler=t},xR.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},xR.prototype.getToken=function(){var t;return Xi(this,void 0,void 0,(function(){var e;return $i(this,(function(n){switch(n.label){case 0:return this.vapidKey?[3,2]:[4,vR(this.firebaseDependencies)];case 1:e=n.sent(),this.vapidKey=null!==(t=null===(t=null==e?void 0:e.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==t?t:oR,n.label=2;case 2:return[2,TR(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},xR.prototype.deleteToken=function(){return ER(this.firebaseDependencies,self.registration)},xR.prototype.requestPermission=function(){throw iR.create("only-available-in-window")},xR.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw iR.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw iR.create("invalid-vapid-key");this.vapidKey=t},xR.prototype.useServiceWorker=function(){throw iR.create("only-available-in-window")},xR.prototype.onMessage=function(){throw iR.create("only-available-in-window")},xR.prototype.onTokenRefresh=function(){throw iR.create("only-available-in-window")},xR.prototype.onPush=function(t){return Xi(this,void 0,void 0,(function(){var e,n,r;return $i(this,(function(i){switch(i.label){case 0:return(r=function(t){if(!(t=t.data))return null;try{return t.json()}catch(t){return null}}(t))?[4,AR()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return(e=i.sent()).some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))?[2,function(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=rR.PUSH_RECEIVED;try{for(var i=Ji(t),o=i.next();!o.done;o=i.next())o.value.postMessage(e)}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(e,r)]:(n=!1,r.notification?[4,function(t){var e=t.actions,n=Notification.maxActions;return e&&n&&e.length>n&&console.warn("This browser only supports "+n+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(n=t.title)&&void 0!==n?n:"",t)}(((c=Yi({},(s=r).notification)).data=((u={})[aR]=s,u),c))]:[3,3]);case 2:i.sent(),n=!0,i.label=3;case 3:return!0===n&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(s=a={from:(o=r).from,collapseKey:o.collapse_key},(u=o).notification&&(s.notification={},(c=u.notification.title)&&(s.notification.title=c),(c=u.notification.body)&&(s.notification.body=c),(u=u.notification.image)&&(s.notification.image=u)),s=a,(u=o).data&&(s.data=u.data),s=a,(u=o).fcmOptions&&(s.fcmOptions={},(o=u.fcmOptions.link)&&(s.fcmOptions.link=o),(u=u.fcmOptions.analytics_label)&&(s.fcmOptions.analyticsLabel=u)),r=a,"function"==typeof this.bgMessageHandler?this.bgMessageHandler(r):this.bgMessageHandler.next(r)),[4,kR(1e3)]);case 4:return i.sent(),[2]}var o,a,s,u,c}))}))},xR.prototype.onSubChange=function(t){var e;return Xi(this,void 0,void 0,(function(){var n;return $i(this,(function(r){switch(r.label){case 0:return t.newSubscription?[3,2]:[4,ER(this.firebaseDependencies,self.registration)];case 1:return r.sent(),[2];case 2:return[4,vR(this.firebaseDependencies)];case 3:return n=r.sent(),[4,ER(this.firebaseDependencies,self.registration)];case 4:return r.sent(),[4,TR(this.firebaseDependencies,self.registration,null!==(e=null===(e=null==n?void 0:n.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==e?e:oR)];case 5:return r.sent(),[2]}}))}))},xR.prototype.onNotificationClick=function(t){var e;return Xi(this,void 0,void 0,(function(){var n,r,i,o,a;return $i(this,(function(s){switch(s.label){case 0:return(n=null===(e=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===e?void 0:e[aR])?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),(r=function(t){var e,n=null!==(e=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==e?e:null===(n=t.notification)||void 0===n?void 0:n.click_action;return n||(SR(t.data)?self.location.origin:null)}(n))?(i=new URL(r,self.location.href),o=new URL(self.location.origin),i.host!==o.host?[2]:[4,function(t){return Xi(this,void 0,void 0,(function(){var e,n,r,i,o,a,s;return $i(this,(function(u){switch(u.label){case 0:return[4,AR()];case 1:e=u.sent();try{for(n=Ji(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(u){a={error:u}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}}))}))}(i)]):[2]):[2];case 1:return(a=s.sent())?[3,4]:[4,self.clients.openWindow(r)];case 2:return a=s.sent(),[4,kR(3e3)];case 3:return s.sent(),[3,6];case 4:return[4,a.focus()];case 5:a=s.sent(),s.label=6;case 6:return a?(n.messageType=rR.NOTIFICATION_CLICKED,n.isFirebaseMessaging=!0,[2,a.postMessage(n)]):[2]}}))}))},xR);function xR(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}function AR(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}var OR=(Object.defineProperty(NR.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),NR.prototype.messageEventListener=function(t){return Xi(this,void 0,void 0,(function(){var e,n;return $i(this,(function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===rR.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback((delete(i=Object.assign({},e)).messageType,delete i.isFirebaseMessaging,i)):this.onMessageCallback.next(Object.assign({},e))),SR(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}var i}))}))},NR.prototype.getVapidKey=function(){return this.vapidKey},NR.prototype.getSwReg=function(){return this.swRegistration},NR.prototype.getToken=function(t){return Xi(this,void 0,void 0,(function(){return $i(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw iR.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,TR(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},NR.prototype.updateVapidKey=function(t){return Xi(this,void 0,void 0,(function(){return $i(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=oR),[2]}))}))},NR.prototype.updateSwReg=function(t){return Xi(this,void 0,void 0,(function(){return $i(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw iR.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},NR.prototype.registerDefaultSw=function(){return Xi(this,void 0,void 0,(function(){var t;return $i(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=e.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw t=e.sent(),iR.create("failed-service-worker-registration",{browserErrorMessage:t.message});case 3:return[2]}}))}))},NR.prototype.deleteToken=function(){return Xi(this,void 0,void 0,(function(){return $i(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,ER(this.firebaseDependencies,this.swRegistration)]}}))}))},NR.prototype.requestPermission=function(){return Xi(this,void 0,void 0,(function(){var t;return $i(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?iR.create("permission-blocked"):iR.create("permission-default")}}))}))},NR.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw iR.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw iR.create("invalid-vapid-key");this.vapidKey=t},NR.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw iR.create("invalid-sw-registration");if(this.swRegistration)throw iR.create("use-sw-after-get-token");this.swRegistration=t},NR.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},NR.prototype.setBackgroundMessageHandler=function(){throw iR.create("only-available-in-sw")},NR.prototype.onBackgroundMessage=function(){throw iR.create("only-available-in-sw")},NR.prototype.onTokenRefresh=function(){return function(){}},NR.prototype.logEvent=function(t,e){return Xi(this,void 0,void 0,(function(){var n;return $i(this,(function(r){switch(r.label){case 0:return n=function(t){switch(t){case rR.NOTIFICATION_CLICKED:return"notification_open";case rR.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e[sR],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},NR);function NR(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}function PR(t){return iR.create("missing-app-config-values",{valueName:t})}function RR(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}H={isSupported:RR},Ta.INTERNAL.registerComponent(new Qo("messaging",(function(t){var e=t.getProvider("app").getImmediate();if(t={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw PR("App Configuration Object");if(!t.name)throw PR("App Name");var r=t.options;try{for(var i=Ji(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!r[a])throw PR(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")},!RR())throw iR.create("unsupported-browser");return new(self&&"ServiceWorkerGlobalScope"in self?CR:OR)(t)}),"PUBLIC").setServiceProps(H));var DR,LR="firebasestorage.googleapis.com",MR="storageBucket",jR=(Qi(FR,DR=Eo),FR.prototype._codeEquals=function(t){return UR(t)===this.code},Object.defineProperty(FR.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),FR);function FR(t,e){return(t=DR.call(this,UR(t),"Firebase Storage: "+e+" ("+UR(t)+")")||this).customData={serverResponse:null},t._baseMessage=t.message,Object.setPrototypeOf(t,FR.prototype),t}function UR(t){return"storage/"+t}function VR(){return new jR("unknown","An unknown error occurred, please check the error payload for server response.")}function qR(){return new jR("canceled","User canceled the upload/download.")}function BR(){return new jR("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function zR(t){return new jR("invalid-argument",t)}function KR(){return new jR("app-deleted","The Firebase app was deleted.")}function HR(t){return new jR("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function WR(t,e){return new jR("invalid-format","String does not match format '"+t+"': "+e)}function GR(t){throw new jR("internal-error","Internal error: "+t)}var QR={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},YR=function(t,e){this.data=t,this.contentType=e||null};function XR(t,e){switch(t){case QR.RAW:return new YR($R(e));case QR.BASE64:case QR.BASE64URL:return new YR(JR(t,e));case QR.DATA_URL:return new YR(function(t){return(t=new tD(t)).base64?JR(QR.BASE64,t.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw WR(QR.DATA_URL,"Malformed data URL.")}return $R(e)}(t.rest)}(e),new tD(e).contentType)}throw VR()}function $R(t){for(var e=[],n=0;n<t.length;n++){var r,i,o=t.charCodeAt(n);o<=127?e.push(o):o<=2047?e.push(192|o>>6,128|63&o):55296==(64512&o)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=o,i=t.charCodeAt(++n),e.push(240|(o=65536|(1023&r)<<10|1023&i)>>18,128|o>>12&63,128|o>>6&63,128|63&o)):e.push(239,191,189):56320==(64512&o)?e.push(239,191,189):e.push(224|o>>12,128|o>>6&63,128|63&o)}return new Uint8Array(e)}function JR(t,e){switch(t){case QR.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw WR(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case QR.BASE64URL:if(r=-1!==e.indexOf("+"),n=-1!==e.indexOf("/"),r||n)throw WR(t,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var i;try{i=atob(e)}catch(e){throw WR(t,"Invalid character found")}for(var o=new Uint8Array(i.length),a=0;a<i.length;a++)o[a]=i.charCodeAt(a);return o}var ZR,tD=function(t){var e;if(this.base64=!1,(this.contentType=null)===(e=t.match(/^data:([^,]+)?,/)))throw WR(QR.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=";base64",(e=r).length>=n.length&&e.substring(e.length-n.length)===n),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)},eD={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function nD(t){switch(t){case"running":case"pausing":case"canceling":return eD.RUNNING;case"paused":return eD.PAUSED;case"success":return eD.SUCCESS;case"canceled":return eD.CANCELED;case"error":default:return eD.ERROR}}(kn=ZR=ZR||{})[kn.NO_ERROR=0]="NO_ERROR",kn[kn.NETWORK_ERROR=1]="NETWORK_ERROR",kn[kn.ABORT=2]="ABORT";var rD=(iD.prototype.send=function(t,e,n,r){if(this.sent_)throw GR("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},iD.prototype.getErrorCode=function(){if(!this.sent_)throw GR("cannot .getErrorCode() before sending");return this.errorCode_},iD.prototype.getStatus=function(){if(!this.sent_)throw GR("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},iD.prototype.getResponseText=function(){if(!this.sent_)throw GR("cannot .getResponseText() before sending");return this.xhr_.responseText},iD.prototype.abort=function(){this.xhr_.abort()},iD.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},iD.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},iD.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},iD);function iD(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=ZR.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=ZR.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=ZR.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}var oD=(aD.prototype.createXhrIo=function(){return new rD},aD);function aD(){}var sD=(Object.defineProperty(uD.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(uD.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),uD.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},uD.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},uD.makeFromBucketSpec=function(t,e){var n;try{n=uD.makeFromUrl(t,e)}catch(e){return new uD(t,"")}if(""===n.path)return n;throw new jR("invalid-default-bucket","Invalid default bucket '"+t+"'.")},uD.makeFromUrl=function(t,e){var n=null,r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var a=e.replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://"+(e===LR?"(?:storage.googleapis.com|storage.cloud.google.com)":e)+"/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<s.length;u++){var c=s[u],l=c.regex.exec(t);if(l){n=new uD(l[c.indices.bucket],l[c.indices.path]||""),c.postModify(n);break}}if(null==n)throw new jR("invalid-url","Invalid URL '"+t+"'.");return n},uD);function uD(t,e){this.bucket=t,this.path_=e}var cD=(lD.prototype.getPromise=function(){return this.promise_},lD.prototype.cancel=function(t){},lD);function lD(t){this.promise_=Promise.reject(t)}function hD(t){return"string"==typeof t||t instanceof String}function fD(t){return pD()&&t instanceof Blob}function pD(){return"undefined"!=typeof Blob}function dD(t,e,n,r){if(r<e)throw zR("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(n<r)throw zR("Invalid value for '"+t+"'. Expected "+n+" or less.")}function vD(t,e){var n=e.match(/^(\w+):\/\/.+/);return(null==(null==n?void 0:n[1])?"https://"+e:e)+"/v0"+t}function yD(t){var e,n=encodeURIComponent,r="?";for(e in t)t.hasOwnProperty(e)&&(r=r+(n(e)+"=")+n(t[e])+"&");return r.slice(0,-1)}var gD=(mD.prototype.start_=function(){var t,e,n,r,i,o,a,s,u,c=this;function l(t,e){var n,r=c.resolve_,i=c.reject_,o=e.xhr;if(e.wasSuccessCode)try{var a=c.callback_(o,o.getResponseText());void 0!==a?r(a):r()}catch(t){i(t)}else null!==o?((n=VR()).serverResponse=o.getResponseText(),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):e.canceled?i(n=(c.appDelete_?KR:qR)()):i(n=new jR("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}function h(){return 2===a}function f(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];s||(s=!0,e.apply(null,t))}function p(e){i=setTimeout((function(){i=null,t(d,h())}),e)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];s||(t||h()||o?f.call.apply(f,to([null,t],e)):(r<64&&(r*=2),p(1===a?(a=2,0):1e3*(r+Math.random()))))}function v(t){u||(u=!0,s||(null!==i?(t||(a=2),clearTimeout(i),p(0)):t||(a=1)))}this.canceled_?l(0,new bD(!1,null,!0)):this.backoffId_=(t=function(t,e){function n(t){var e=t.loaded;t=t.lengthComputable?t.total:-1,null!==c.progressCallback_&&c.progressCallback_(e,t)}e?t(!1,new bD(!1,null,!0)):(e=c.pool_.createXhrIo(),c.pendingXhr_=e,null!==c.progressCallback_&&e.addUploadProgressListener(n),e.send(c.url_,c.method_,c.body_,c.headers_).then((function(e){null!==c.progressCallback_&&e.removeUploadProgressListener(n),c.pendingXhr_=null;var r=e.getErrorCode()===ZR.NO_ERROR,i=e.getStatus();r&&!c.isRetryStatusCode_(i)?(i=-1!==c.successCodes_.indexOf(i),t(!0,new bD(i,e))):(e=e.getErrorCode()===ZR.ABORT,t(!1,new bD(!1,null,e)))})))},e=l,n=this.timeout_,i=null,u=s=o=!(r=1),p(a=0),setTimeout((function(){o=!0,v(!0)}),n),v)},mD.prototype.getPromise=function(){return this.promise_},mD.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},mD.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t);return t=-1!==this.additionalRetryCodes_.indexOf(t),e||n||t},mD);function mD(t,e,n,r,i,o,a,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}var bD=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function wD(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(pD())return new Blob(t);throw new jR("unsupported-environment","This browser doesn't seem to support creating Blobs")}var _D=(TD.prototype.size=function(){return this.size_},TD.prototype.type=function(){return this.type_},TD.prototype.slice=function(t,e){if(fD(this.data_)){var n=this.data_;return null===(r=t,i=e,i=(n=n).webkitSlice?n.webkitSlice(r,i):n.mozSlice?n.mozSlice(r,i):n.slice?n.slice(r,i):null)?null:new TD(i)}var r,i;return new TD(new Uint8Array(this.data_.buffer,t,e-t),!0)},TD.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(pD()){var n=t.map((function(t){return t instanceof TD?t.data_:t}));return new TD(wD.apply(null,n))}n=t.map((function(t){return hD(t)?XR(QR.RAW,t).data:t.data_}));var r=0;n.forEach((function(t){r+=t.byteLength}));var i=new Uint8Array(r),o=0;return n.forEach((function(t){for(var e=0;e<t.length;e++)i[o++]=t[e]})),new TD(i,!0)},TD.prototype.uploadData=function(){return this.data_},TD);function TD(t,e){var n=0,r="";fD(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}function ED(t){var e;try{e=JSON.parse(t)}catch(t){return null}return"object"!=typeof(t=e)||Array.isArray(t)?null:e}function ID(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function SD(t,e){return e}var kD=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||SD},CD=null;function xD(){if(CD)return CD;var t=[];t.push(new kD("bucket")),t.push(new kD("generation")),t.push(new kD("metageneration")),t.push(new kD("name","fullPath",!0));var e=new kD("name");return e.xform=function(t,e){return!hD(e=e)||e.length<2?e:ID(e)},t.push(e),(e=new kD("size")).xform=function(t,e){return void 0!==e?Number(e):e},t.push(e),t.push(new kD("timeCreated")),t.push(new kD("updated")),t.push(new kD("md5Hash",null,!0)),t.push(new kD("cacheControl",null,!0)),t.push(new kD("contentDisposition",null,!0)),t.push(new kD("contentEncoding",null,!0)),t.push(new kD("contentLanguage",null,!0)),t.push(new kD("contentType",null,!0)),t.push(new kD("metadata","customMetadata",!0)),CD=t}function AD(t,e,n){return null===(e=ED(e))?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath;return r=new sD(n,r),e._makeStorageReference(r)}})}(r,t),r}(t,e,n)}function OD(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var ND="prefixes",PD=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function RD(t){if(!t)throw VR()}function DD(t,e){return function(n,r){return RD(null!==(r=AD(t,r,e))),r}}function LD(t,e){return function(n,r){return RD(null!==(r=function(t,e,n){return null===(n=ED(n))?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[ND])for(var i=0,o=n[ND];i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t._makeStorageReference(new sD(e,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var l=c[u];s=t._makeStorageReference(new sD(e,l.name)),r.items.push(s)}return r}(t,e,n)}(t,e,r))),r}}function MD(t){return function(e,n){var r,i=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?new jR("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new jR("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(r=t.bucket,new jR("quota-exceeded","Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,new jR("unauthorized","User does not have permission to access '"+i+"'.")):n;return i.serverResponse=n.serverResponse,i}}function jD(t){var e=MD(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(n=t.path,i=new jR("object-not-found","Object '"+n+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function FD(t,e,n){var r=vD(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime;return(i=new PD(r,"GET",DD(t,n),i)).errorHandler=jD(e),i}function UD(t,e,n){return(n=Object.assign({},n)).fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=(t=e,(e=null)&&e.contentType||t&&t.type()||"application/octet-stream")),n}var VD=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function qD(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){RD(!1)}return RD(!!n&&-1!==(e||["active"]).indexOf(n)),n}var BD=function(t,e,n){"function"==typeof t||null!=e||null!=n?(this.next=t,this.error=e,this.complete=n):(this.next=(t=t).next,this.error=t.error,this.complete=t.complete)};function zD(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var KD=(HD.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},HD.prototype._shouldDoResumable=function(t){return 262144<t.size()},HD.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},HD.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},HD.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=UD(e,r,i);return i={name:a.fullPath},o=vD(o,t.host),r={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},n=OD(a,n),t=t.maxUploadRetryTime,(t=new PD(o,"POST",(function(t){var e;qD(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){RD(!1)}return RD(hD(e)),e}),t)).urlParams=i,t.headers=r,t.body=n,t.errorHandler=MD(e),t}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata);n=t._ref.storage._makeRequest(r,e,n),(t._request=n).getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},HD.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var i=function(t,e,n,r){return t=t.maxUploadRetryTime,(t=new PD(n,"POST",(function(t){var e=qD(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){RD(!1)}return n||RD(!1),n=Number(n),RD(!isNaN(n)),new VD(n,r.size(),"final"===e)}),t)).headers={"X-Goog-Upload-Command":"query"},t.errorHandler=MD(e),t}(t._ref.storage,t._ref._location,e,t._blob);r=t._ref.storage._makeRequest(i,n,r),(t._request=r).getPromise().then((function(e){t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},HD.prototype._continueUpload=function(){var t=this,e=262144*this._chunkMultiplier,n=new VD(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=function(t,e,n,r,i,o,a,s){var u=new VD(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new jR("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;if(0<i&&(l=Math.min(l,i)),a=u.current,i={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},null===(c=r.slice(a,a+l)))throw BR();return a=e.maxUploadRetryTime,(a=new PD(n,"POST",(function(t,n){var i=qD(t,["active","final"]),a=u.current+l,s=r.size();return n="final"===i?DD(e,o)(t,n):null,new VD(a,s,"final"===i,n)}),a)).headers=i,a.body=c.uploadData(),a.progressCallback=s||null,a.errorHandler=MD(t),a}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(i){return t._error=i,void t._transition("error")}o=t._ref.storage._makeRequest(a,i,o),(t._request=o).getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},HD.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},HD.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=FD(t._ref.storage,t._ref._location,t._mappings);n=t._ref.storage._makeRequest(r,e,n),(t._request=n).getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},HD.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=UD(e,r,i);if(i="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+OD(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",null===(r=_D.getBlob(i,r,"\r\n--"+s+"--")))throw BR();return s={name:u.fullPath},u=vD(o,t.host),o=t.maxUploadRetryTime,(o=new PD(u,"POST",DD(t,n),o)).urlParams=s,o.headers=a,o.body=r.uploadData(),o.errorHandler=MD(e),o}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata);n=t._ref.storage._makeRequest(r,e,n),(t._request=n).getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},HD.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},HD.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=qR(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},HD.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(HD.prototype,"snapshot",{get:function(){var t=nD(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),HD.prototype.on=function(t,e,n,r){var i=this,o=new BD(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},HD.prototype.then=function(t,e){return this._promise.then(t,e)},HD.prototype.catch=function(t){return this.then(null,t)},HD.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},HD.prototype._removeObserver=function(t){-1!==(t=this._observers.indexOf(t))&&this._observers.splice(t,1)},HD.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},HD.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(nD(this._state)){case eD.SUCCESS:zD(this._resolve.bind(null,this.snapshot))();break;case eD.CANCELED:case eD.ERROR:zD(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},HD.prototype._notifyObserver=function(t){switch(nD(this._state)){case eD.RUNNING:case eD.PAUSED:t.next&&zD(t.next.bind(t,this.snapshot))();break;case eD.SUCCESS:t.complete&&zD(t.complete.bind(t))();break;case eD.CANCELED:case eD.ERROR:t.error&&zD(t.error.bind(t,this._error))();break;default:t.error&&zD(t.error.bind(t,this._error))()}},HD.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},HD.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},HD.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},HD);function HD(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=xD(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}var WD=(GD.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},GD.prototype._newRef=function(t,e){return new GD(t,e)},Object.defineProperty(GD.prototype,"root",{get:function(){var t=new sD(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(GD.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(GD.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(GD.prototype,"name",{get:function(){return ID(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(GD.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(GD.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);return null===t?null:(t=new sD(this._location.bucket,t),new GD(this._service,t))},enumerable:!1,configurable:!0}),GD.prototype._throwIfRoot=function(t){if(""===this._location.path)throw HR(t)},GD);function GD(t,e){this._service=t,this._location=e instanceof sD?e:sD.makeFromUrl(e,t.host)}function QD(t,e){return Xi(this,void 0,void 0,(function(){var n;return $i(this,(function(r){switch(r.label){case 0:return null!=e&&"number"==typeof e.maxResults&&dD("options.maxResults",1,1e3,e.maxResults),n=e||{},i=t.storage,o=t._location,a=n.pageToken,s=n.maxResults,u={},o.isRoot?u.prefix="":u.prefix=o.path+"/",0<"/".length&&(u.delimiter="/"),a&&(u.pageToken=a),s&&(u.maxResults=s),a=vD(o.bucketOnlyServerUrl(),i.host),s=i.maxOperationRetryTime,(s=new PD(a,"GET",LD(i,o.bucket),s)).urlParams=u,s.errorHandler=MD(o),[4,t.storage.makeRequestWithTokens(s)];case 1:return[2,r.sent().getPromise()]}var i,o,a,s,u}))}))}function YD(t){return Xi(this,void 0,void 0,(function(){return $i(this,(function(e){switch(e.label){case 0:return t._throwIfRoot("getDownloadURL"),n=t.storage,r=t._location,i=xD(),o=vD(r.fullServerUrl(),n.host),a=n.maxOperationRetryTime,(a=new PD(o,"GET",function(t,e){return function(n,r){var i=AD(t,r,e);return RD(null!==i),function(t,e,n){if(null===(e=ED(e)))return null;if(!hD(e.downloadTokens))return null;if(0===(e=e.downloadTokens).length)return null;var r=encodeURIComponent;return e.split(",").map((function(e){var i=t.bucket,o=t.fullPath;return vD("/b/"+r(i)+"/o/"+r(o),n)+yD({alt:"media",token:e})}))[0]}(i,r,t.host)}}(n,i),a)).errorHandler=jD(r),[4,t.storage.makeRequestWithTokens(a)];case 1:return[2,e.sent().getPromise().then((function(t){if(null===t)throw new jR("no-download-url","The given file does not have any download URLs.");return t}))]}var n,r,i,o,a}))}))}function XD(t,e){var n;return n=t._location.path,e=(e=e).split("/").filter((function(t){return 0<t.length})).join("/"),e=0===n.length?e:n+"/"+e,e=new sD(t._location.bucket,e),new WD(t.storage,e)}function $D(t){return/^[A-Za-z]+:\/\//.test(t)}function JD(t,e){if(e&&$D(e)){if(t instanceof tL)return new WD(t,e);throw zR("To use ref(service, url), the first argument must be a Storage instance.")}return function t(e,n){if(e instanceof tL){var r=e;if(null==r._bucket)throw new jR("no-default-bucket","No default bucket found. Did you set the '"+MR+"' property when initializing the app?");return r=new WD(r,r._bucket),null!=n?t(r,n):r}if(void 0===n)return e;if(n.includes(".."))throw zR('`path` param cannot contain ".."');return XD(e,n)}(t,e)}function ZD(t,e){return null==(e=null==e?void 0:e[MR])?null:sD.makeFromBucketSpec(e,t)}var tL=(Object.defineProperty(eL.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=sD.makeFromBucketSpec(this._url,t):this._bucket=ZD(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(eL.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){dD("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(eL.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){dD("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),eL.prototype._getAuthToken=function(){return Xi(this,void 0,void 0,(function(){var t;return $i(this,(function(e){switch(e.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(t=e.sent()))return[2,t.accessToken];e.label=2;case 2:return[2,null]}}))}))},eL.prototype._getAppCheckToken=function(){return Xi(this,void 0,void 0,(function(){var t;return $i(this,(function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},eL.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},eL.prototype._makeStorageReference=function(t){return new WD(this,t)},eL.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new cD(KR());var i,o,a,s,u,c,l=(i=t,o=this._appId,a=e,s=n,u=this._pool,c=this._firebaseVersion,t=yD(i.urlParams),e=i.url+t,t=n=Object.assign({},i.headers),(o=o)&&(t["X-Firebase-GMPID"]=o),o=n,null!==(a=a)&&0<a.length&&(o.Authorization="Firebase "+a),c=c,n["X-Firebase-Storage-Version"]="webjs/"+(null!=c?c:"AppManager"),c=n,null!==(s=s)&&(c["X-Firebase-AppCheck"]=s),new gD(e,i.method,n,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,u));return this._requests.add(l),l.getPromise().then((function(){return r._requests.delete(l)}),(function(){return r._requests.delete(l)})),l},eL.prototype.makeRequestWithTokens=function(t){return Xi(this,void 0,void 0,(function(){var e,n;return $i(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return n=r.sent(),e=n[0],n=n[1],[2,this._makeRequest(t,e,n)]}}))}))},eL);function eL(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=LR,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?sD.makeFromBucketSpec(i,this._host):ZD(this._host,this.app.options)}function nL(t,e){return JD(t=Go(t),e)}var rL=(Object.defineProperty(iL.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(iL.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(iL.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(iL.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),iL);function iL(t,e,n){this._delegate=t,this.task=e,this.ref=n}var oL=(Object.defineProperty(aL.prototype,"snapshot",{get:function(){return new rL(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),aL.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new rL(e,n,n._ref))}),e)},aL.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new rL(t,i,i._ref))}:{next:e.next?function(t){return e.next(new rL(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},aL);function aL(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}var sL=(Object.defineProperty(uL.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new cL(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(uL.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new cL(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(uL.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),uL);function uL(t,e){this._delegate=t,this._service=e}var cL=(Object.defineProperty(lL.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(lL.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(lL.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),lL.prototype.toString=function(){return this._delegate.toString()},lL.prototype.child=function(t){return new lL(XD(this._delegate,t),this.storage)},Object.defineProperty(lL.prototype,"root",{get:function(){return new lL(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(lL.prototype,"parent",{get:function(){var t=this._delegate.parent;return null==t?null:new lL(t,this.storage)},enumerable:!1,configurable:!0}),lL.prototype.put=function(t,e){return this._throwIfRoot("put"),new oL(function(t,e,n){return e=e,n=n,(t=t=Go(t))._throwIfRoot("uploadBytesResumable"),new KD(t,new _D(e),n)}(this._delegate,t,e),this)},lL.prototype.putString=function(t,e,n){return void 0===e&&(e=QR.RAW),this._throwIfRoot("putString"),t=XR(e,t),null==(n=Yi({},n)).contentType&&null!=t.contentType&&(n.contentType=t.contentType),new oL(new KD(this._delegate,new _D(t.data,!0),n),this)},lL.prototype.listAll=function(){var t=this;return function(t){var e={prefixes:[],items:[]};return function t(e,n,r){return Xi(this,void 0,void 0,(function(){var i,o;return $i(this,(function(a){switch(a.label){case 0:return[4,QD(e,{pageToken:r})];case 1:return i=a.sent(),(o=n.prefixes).push.apply(o,i.prefixes),(o=n.items).push.apply(o,i.items),null==i.nextPageToken?[3,3]:[4,t(e,n,i.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}(t,e).then((function(){return e}))}(Go(this._delegate)).then((function(e){return new sL(e,t.storage)}))},lL.prototype.list=function(t){var e=this;return t=t||void 0,QD(Go(this._delegate),t).then((function(t){return new sL(t,e.storage)}))},lL.prototype.getMetadata=function(){return function(t){return function(t){return Xi(this,void 0,void 0,(function(){var e;return $i(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=FD(t.storage,t._location,xD()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=Go(t))}(this._delegate)},lL.prototype.updateMetadata=function(t){return function(t,e){return Xi(this,void 0,void 0,(function(){return $i(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("updateMetadata"),r=t.storage,i=t._location,o=e,a=xD(),s=vD(i.fullServerUrl(),r.host),u=OD(o,a),o=r.maxOperationRetryTime,(o=new PD(s,"PATCH",DD(r,a),o)).headers={"Content-Type":"application/json; charset=utf-8"},o.body=u,o.errorHandler=jD(i),[4,t.storage.makeRequestWithTokens(o)];case 1:return[2,n.sent().getPromise()]}var r,i,o,a,s,u}))}))}(Go(this._delegate),t)},lL.prototype.getDownloadURL=function(){return YD(Go(this._delegate))},lL.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return Xi(this,void 0,void 0,(function(){return $i(this,(function(e){switch(e.label){case 0:return t._throwIfRoot("deleteObject"),n=t.storage,i=vD((r=t._location).fullServerUrl(),n.host),n=n.maxOperationRetryTime,(n=new PD(i,"DELETE",(function(t,e){}),n)).successCodes=[200,204],n.errorHandler=jD(r),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,e.sent().getPromise()]}var n,r,i}))}))}(Go(this._delegate))},lL.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw HR(t)},lL);function lL(t,e){this._delegate=t,this.storage=e}var hL,fL,pL=(Object.defineProperty(dL.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(dL.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),dL.prototype.ref=function(t){if($D(t))throw zR("ref() expected a child path but got a URL, use refFromURL instead.");return new cL(nL(this._delegate,t),this)},dL.prototype.refFromURL=function(t){if(!$D(t))throw zR("refFromURL() expected a full URL but got a child path, use ref() instead.");try{sD.makeFromUrl(t,this._delegate.host)}catch(t){throw zR("refFromUrl() expected a valid full URL but got an invalid one.")}return new cL(nL(this._delegate,t),this)},dL.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},dL.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},dL.prototype.useEmulator=function(t,e){this._delegate.host="http://"+t+":"+e},dL);function dL(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}fL={TaskState:eD,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:QR,Storage:tL,Reference:cL},(hL=Ta).INTERNAL.registerComponent(new Qo("storage",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate();return e=t.getProvider("auth-internal"),t=t.getProvider("app-check-internal"),new pL(r,new tL(r,e,t,new oD,n,Ta.SDK_VERSION))}),"PUBLIC").setServiceProps(fL).setMultipleInstances(!0)),hL.registerVersion("@firebase/storage","0.5.2");var vL,yL,gL="FB-PERF-TRACE-MEASURE",mL="@firebase/performance/config",bL="@firebase/performance/configexpire",wL=(H="Performance",(kn={})["trace started"]="Trace {$traceName} was started before.",kn["trace stopped"]="Trace {$traceName} is not running.",kn["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",kn["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",kn["no window"]="Window is not available.",kn["no app id"]="App id is not available.",kn["no project id"]="Project id is not available.",kn["no api key"]="Api key is not available.",kn["invalid cc log"]="Attempted to queue invalid cc event",kn["FB not default"]="Performance can only start when Firebase app instance is the default one.",kn["RC response not ok"]="RC response is not ok",kn["invalid attribute name"]="Attribute name {$attributeName} is invalid.",kn["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",kn["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",kn["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",new So("performance",H,kn=kn)),_L=new sa(H);_L.logLevel=ea.INFO;var TL,EL=(IL.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},IL.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},IL.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},IL.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},IL.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},IL.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},IL.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!bo()||(_L.info("IndexedDB is not supported by current browswer"),!1):(_L.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},IL.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}})).observe({entryTypes:[t]})},IL.getInstance=function(){return vL=void 0===vL?new IL(yL):vL},IL);function IL(t){if(!(this.window=t))throw wL.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}function SL(t,e){var n=t.length-e.length;if(n<0||1<n)throw wL.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var kL,CL,xL=(AL.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw wL.create("no app id");return t},AL.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw wL.create("no project id");return t},AL.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw wL.create("no api key");return t},AL.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},AL.getInstance=function(){return TL=void 0===TL?new AL:TL},AL);function AL(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=SL("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=SL("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(H=CL=CL||{})[H.UNKNOWN=0]="UNKNOWN",H[H.VISIBLE=1]="VISIBLE",H[H.HIDDEN=2]="HIDDEN";var OL=["firebase_","google_","ga_"],NL=new RegExp("^[a-zA-Z]\\w*$");function PL(){switch(EL.getInstance().document.visibilityState){case"visible":return CL.VISIBLE;case"hidden":return CL.HIDDEN;default:return CL.UNKNOWN}}var RL=!0;function DL(t){var e,n=function(){var t=EL.getInstance().localStorage;if(t){var e=t.getItem(bL);if(e&&function(t){return Number(t)>Date.now()}(e)&&(t=t.getItem(mL)))try{return JSON.parse(t)}catch(t){return}}}();return n?(ML(n),Promise.resolve()):(e=t,function(){var t=xL.getInstance().installationsService.getToken();return t.then((function(t){})),t}().then((function(t){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+xL.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+xL.getInstance().getApiKey();return t=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+t},body:JSON.stringify({app_instance_id:e,app_instance_id_token:t,app_id:xL.getInstance().getAppId(),app_version:"0.4.12",sdk_version:"0.0.1"})}),fetch(t).then((function(t){if(t.ok)return t.json();throw wL.create("RC response not ok")}))})).catch((function(){_L.info(LL)})).then(ML).then((function(t){var e;e=t,t=EL.getInstance().localStorage,e&&t&&(t.setItem(mL,JSON.stringify(e)),t.setItem(bL,String(Date.now()+60*xL.getInstance().configTimeToLive*60*1e3)))}),(function(){})))}var LL="Could not fetch config, will use default configs";function ML(t){if(!t)return t;var e=xL.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=RL,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=jL(e.tracesSamplingRate),e.logNetworkAfterSampling=jL(e.networkRequestsSamplingRate),t}function jL(t){return Math.random()<=t}var FL,UL=1;function VL(){return UL=2,FL=FL||function(){var t=EL.getInstance().document;return new Promise((function(e){var n;t&&"complete"!==t.readyState?(n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())},t.addEventListener("readystatechange",n)):e()}))}().then((function(){return(t=xL.getInstance().installationsService.getId()).then((function(t){kL=t})),t;var t})).then(DL).then(qL,qL)}function qL(){UL=3}var BL,zL=3,KL=[],HL=!1;function WL(t,e){(BL=BL||function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!function(t){if(!t.eventTime||!t.message)throw wL.create("invalid cc log");KL=to(to([],KL),[t])}({message:t.apply(void 0,e),eventTime:Date.now()})}}(YL))(t,e)}function GL(t){var e=xL.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&EL.getInstance().requiredApisAvailable()&&(t.isAuto&&PL()!==CL.VISIBLE||(3===UL?QL(t):VL().then((function(){return QL(t)}),(function(){return QL(t)}))))}function QL(t){var e;!kL||(e=xL.getInstance()).loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return WL(t,1)}),0)}function YL(t,e){return(0===e?function(t){return t={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},t={application_info:XL(),network_request_metric:t},JSON.stringify(t)}:function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};return 0!==Object.keys(t.counters).length&&(e.counters=t.counters),t=t.getAttributes(),0!==Object.keys(t).length&&(e.custom_attributes=t),e={application_info:XL(),trace_metric:e},JSON.stringify(e)})(t)}function XL(){return{google_app_id:xL.getInstance().getAppId(),app_instance_id:kL,web_app_info:{sdk_version:"0.4.12",page_url:EL.getInstance().getUrl(),service_worker_status:"serviceWorker"in(t=EL.getInstance().navigator)?t.serviceWorker.controller?2:3:1,visibility_state:PL(),effective_connection_type:function(){var t=EL.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var $L=["_fp","_fcp","_fid"],JL=(ZL.prototype.start=function(){if(1!==this.state)throw wL.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},ZL.prototype.stop=function(){if(2!==this.state)throw wL.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),GL(this)},ZL.prototype.record=function(t,e,n){if(t<=0)throw wL.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw wL.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Yi({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}GL(this)},ZL.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},ZL.prototype.putMetric=function(t,e){if(n=t,r=this.name,0===n.length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<$L.indexOf(n))&&n.startsWith("_"))throw wL.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=(t=e,(e=Math.floor(t))<t&&_L.info("Metric value should be an Integer, setting the value as : "+e+"."),e)},ZL.prototype.getMetric=function(t){return this.counters[t]||0},ZL.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||40<n.length)&&!OL.some((function(t){return n.startsWith(t)}))&&!!n.match(NL),i=0!==(i=e).length&&i.length<=100;if(r&&i)this.customAttributes[t]=e;else{if(!r)throw wL.create("invalid attribute name",{attributeName:t});if(!i)throw wL.create("invalid attribute value",{attributeValue:e})}},ZL.prototype.getAttribute=function(t){return this.customAttributes[t]},ZL.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},ZL.prototype.getAttributes=function(){return Yi({},this.customAttributes)},ZL.prototype.setStartTime=function(t){this.startTimeUs=t},ZL.prototype.setDuration=function(t){this.durationUs=t},ZL.prototype.calculateTraceMetrics=function(){var t;(t=(t=this.api.getEntriesByName(this.traceMeasure))&&t[0])&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},ZL.createOobTrace=function(t,e,n){var r,i=EL.getInstance().getUrl();i&&(r=new ZL("_wt_"+i,!0),i=Math.floor(1e3*EL.getInstance().getTimeOrigin()),r.setStartTime(i),t&&t[0]&&(r.setDuration(Math.floor(1e3*t[0].duration)),r.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),r.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),r.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e&&((t=e.find((function(t){return"first-paint"===t.name})))&&t.startTime&&r.putMetric("_fp",Math.floor(1e3*t.startTime)),(e=e.find((function(t){return"first-contentful-paint"===t.name})))&&e.startTime&&r.putMetric("_fcp",Math.floor(1e3*e.startTime)),n&&r.putMetric("_fid",Math.floor(1e3*n))),GL(r))},ZL.createUserTimingTrace=function(t){GL(new ZL(t,!1,t))},ZL);function ZL(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=EL.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||gL+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function tM(t){var e,n,r,i=t;i&&void 0!==i.responseStart&&(n=EL.getInstance().getTimeOrigin(),r=Math.floor(1e3*(i.startTime+n)),t=i.responseStart?Math.floor(1e3*(i.responseStart-i.startTime)):void 0,n=Math.floor(1e3*(i.responseEnd-i.startTime)),i={url:i.name&&i.name.split("?")[0],responsePayloadBytes:i.transferSize,startTimeUs:r,timeToResponseInitiatedUs:t,timeToResponseCompletedUs:n},e=i,(r=xL.getInstance()).instrumentationEnabled&&(t=e.url,n=r.logEndPointUrl.split("?")[0],i=r.flTransportEndpointUrl.split("?")[0],t!==n&&t!==i&&r.loggingEnabled&&r.logNetworkAfterSampling&&setTimeout((function(){return WL(e,0)}),0)))}function eM(){kL&&(setTimeout((function(){var t,e=EL.getInstance(),n=e.getEntriesByType("navigation"),r=e.getEntriesByType("paint");e.onFirstInputDelay?(t=setTimeout((function(){JL.createOobTrace(n,r),t=void 0}),5e3),e.onFirstInputDelay((function(e){t&&(clearTimeout(t),JL.createOobTrace(n,r,e))}))):JL.createOobTrace(n,r)}),0),setTimeout((function(){for(var t=EL.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)tM(n[e]);t.setupObserver("resource",tM)}),0),setTimeout((function(){for(var t=EL.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)nM(n[e]);t.setupObserver("measure",nM)}),0))}function nM(t){(t=t.name).substring(0,gL.length)!==gL&&JL.createUserTimingTrace(t)}var rM,iM=(oM.prototype.trace=function(t){return new JL(t)},Object.defineProperty(oM.prototype,"instrumentationEnabled",{get:function(){return xL.getInstance().instrumentationEnabled},set:function(t){xL.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(oM.prototype,"dataCollectionEnabled",{get:function(){return xL.getInstance().dataCollectionEnabled},set:function(t){xL.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),oM);function oM(t){this.app=t,EL.getInstance().requiredApisAvailable()&&wo().then((function(t){t&&(HL||(function t(e){setTimeout((function(){var e,n;if(0!==zL)return KL.length?(n=(e=KL.splice(0,1e3)).map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),void function(e,n){return function(t){var e=xL.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(e).then((function(t){return t.ok||_L.info("Call to Firebase backend failed."),t.json()})).then((function(e){var r=Number(e.nextRequestWaitMillis),i=1e4;isNaN(r)||(i=Math.max(r,i)),e=e.logResponseDetails,Array.isArray(e)&&0<e.length&&"RETRY_REQUEST_LATER"===e[0].responseAction&&(KL=to(to([],n),KL),_L.info("Retry transport request later.")),zL=3,t(i)}))}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:xL.getInstance().logSource,log_event:n},e).catch((function(){KL=to(to([],e),KL),zL--,_L.info("Tries left: "+zL+"."),t(1e4)}))):t(1e4)}),e)}(5500),HL=!0),VL().then(eM,eM))})).catch((function(t){_L.info("Environment doesn't support IndexedDB: "+t)}))}(rM=Ta).INTERNAL.registerComponent(new Qo("performance",(function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw wL.create("FB not default");if("undefined"==typeof window)throw wL.create("no window");return yL=window,xL.getInstance().firebaseAppInstance=t,xL.getInstance().installationsService=e,new iM(t)}(t.getProvider("app").getImmediate(),t=t.getProvider("installations").getImmediate())}),"PUBLIC")),rM.registerVersion("@firebase/performance","0.4.12");var aM,sM,uM="https://www.googletagmanager.com/gtag/js";(H=aM=aM||{}).EVENT="event",H.SET="set",H.CONFIG="config",(H=sM=sM||{}).ADD_SHIPPING_INFO="add_shipping_info",H.ADD_PAYMENT_INFO="add_payment_info",H.ADD_TO_CART="add_to_cart",H.ADD_TO_WISHLIST="add_to_wishlist",H.BEGIN_CHECKOUT="begin_checkout",H.CHECKOUT_PROGRESS="checkout_progress",H.EXCEPTION="exception",H.GENERATE_LEAD="generate_lead",H.LOGIN="login",H.PAGE_VIEW="page_view",H.PURCHASE="purchase",H.REFUND="refund",H.REMOVE_FROM_CART="remove_from_cart",H.SCREEN_VIEW="screen_view",H.SEARCH="search",H.SELECT_CONTENT="select_content",H.SELECT_ITEM="select_item",H.SELECT_PROMOTION="select_promotion",H.SET_CHECKOUT_OPTION="set_checkout_option",H.SHARE="share",H.SIGN_UP="sign_up",H.TIMING_COMPLETE="timing_complete",H.VIEW_CART="view_cart",H.VIEW_ITEM="view_item",H.VIEW_ITEM_LIST="view_item_list",H.VIEW_PROMOTION="view_promotion",H.VIEW_SEARCH_RESULTS="view_search_results";var cM=new sa("@firebase/analytics");(H={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",H["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",H["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",H["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",H["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",H["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",H["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",H["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',H["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.';var lM=new So("analytics","Analytics",H=H);function hM(t,e){void 0===e&&(e=1e3),this.throttleMetadata=t=void 0===t?{}:t,this.intervalMillis=e}var fM=new(hM.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},hM.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},hM.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},hM);function pM(t){var e;return Xi(this,void 0,void 0,(function(){var n,r,i,o;return $i(this,(function(a){switch(a.label){case 0:return n=t.appId,o=t.apiKey,o={method:"GET",headers:new Headers({Accept:"application/json","x-goog-api-key":o})},n="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(n,o)];case 1:if(200===(r=a.sent()).status||304===r.status)return[3,6];i="",a.label=2;case 2:return a.trys.push([2,4,,5]),[4,r.json()];case 3:return o=a.sent(),null!==(e=o.error)&&void 0!==e&&e.message&&(i=o.error.message),[3,5];case 4:return a.sent(),[3,5];case 5:throw lM.create("config-fetch-failed",{httpStatus:r.status,responseMessage:i});case 6:return[2,r.json()]}}))}))}function dM(t,e,n){return void 0===e&&(e=fM),Xi(this,void 0,void 0,(function(){var r,i,o,a,s,u=this;return $i(this,(function(c){if(a=t.options,r=a.appId,i=a.apiKey,o=a.measurementId,!r)throw lM.create("no-app-id");if(i)return a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new yM,setTimeout((function(){return Xi(u,void 0,void 0,(function(){return $i(this,(function(t){return s.abort(),[2]}))}))}),void 0!==n?n:6e4),[2,function t(e,n,r,i){var o=n.throttleEndTimeMillis,a=n.backoffCount;return void 0===i&&(i=fM),Xi(this,void 0,void 0,(function(){var n,s,u,c,l;return $i(this,(function(h){switch(h.label){case 0:n=e.appId,s=e.measurementId,h.label=1;case 1:return h.trys.push([1,3,,4]),[4,vM(r,o)];case 2:return h.sent(),[3,4];case 3:if(c=h.sent(),s)return cM.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:n,measurementId:s}];throw c;case 4:return h.trys.push([4,6,,7]),[4,pM(e)];case 5:return l=h.sent(),i.deleteThrottleMetadata(n),[2,l];case 6:if(function(t){if(t instanceof Eo&&t.customData)return 429===(t=Number(t.customData.httpStatus))||500===t||503===t||504===t}(u=h.sent()))return c=503===Number(u.customData.httpStatus)?Wo(a,i.intervalMillis,30):Wo(a,i.intervalMillis),l={throttleEndTimeMillis:Date.now()+c,backoffCount:a+1},i.setThrottleMetadata(n,l),cM.debug("Calling attemptFetch again in "+c+" millis"),[2,t(e,l,r,i)];if(i.deleteThrottleMetadata(n),s)return cM.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+s+' provided in the "measurementId" field in the local Firebase config. ['+u.message+"]"),[2,{appId:n,measurementId:s}];throw u;case 7:return[2]}}))}))}({appId:r,apiKey:i,measurementId:o},a,s,e)];if(o)return[2,{measurementId:o,appId:r}];throw lM.create("no-api-key")}))}))}function vM(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(lM.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var yM=(gM.prototype.addEventListener=function(t){this.listeners.push(t)},gM.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},gM);function gM(){this.listeners=[]}var mM,bM,wM={},_M=[],TM={},EM="dataLayer",IM="gtag",SM=!1;function kM(t,e){i=[],yo()&&i.push("This is a browser extension environment."),_o()||i.push("Cookies are not available."),0<i.length&&(i=i.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),i=lM.create("invalid-analytics-context",{errorInfo:i}),cM.warn(i.message));var n,r,i,o=t.options.appId;if(!o)throw lM.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw lM.create("no-api-key");cM.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=wM[o])throw lM.create("already-exists",{id:o});return SM||(r=EM,i=[],Array.isArray(window[r])?i=window[r]:window[r]=i,n=EM,r=IM,i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[n].push(arguments)},window[r]&&"function"==typeof window[r]&&(i=window[r]),window[r]=function(t,e,n,r){return function(i,o,a){return Xi(this,void 0,void 0,(function(){var s;return $i(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==aM.EVENT?[3,2]:[4,function(t,e,n,r,i){return Xi(this,void 0,void 0,(function(){var o,a,s,u,c,l,h;return $i(this,(function(f){switch(f.label){case 0:return f.trys.push([0,4,,5]),o=[],i&&i.send_to?(h=i.send_to,Array.isArray(h)||(h=[h]),[4,Promise.all(n)]):[3,2];case 1:for(a=f.sent(),s=function(t){var n;if(!(n=(n=a.find((function(e){return e.measurementId===t})))&&e[n.appId]))return o=[],"break";o.push(n)},u=0,c=h;u<c.length&&(l=c[u],"break"!==s(l));u++);f.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return f.sent(),t(aM.EVENT,r,i||{}),[3,5];case 4:return h=f.sent(),cM.error(h),[3,5];case 5:return[2]}}))}))}(t,e,n,o,a)];case 1:return u.sent(),[3,5];case 2:return i!==aM.CONFIG?[3,4]:[4,function(t,e,n,r,i,o){return Xi(this,void 0,void 0,(function(){var a,s;return $i(this,(function(u){switch(u.label){case 0:a=r[i],u.label=1;case 1:return u.trys.push([1,7,,8]),a?[4,e[a]]:[3,3];case 2:return u.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return(s=(s=u.sent()).find((function(t){return t.measurementId===i})))?[4,e[s.appId]]:[3,6];case 5:u.sent(),u.label=6;case 6:return[3,8];case 7:return s=u.sent(),cM.error(s),[3,8];case 8:return t(aM.CONFIG,i,o),[2]}}))}))}(t,e,n,r,o,a)];case 3:return u.sent(),[3,5];case 4:t(aM.SET,o),u.label=5;case 5:return[3,7];case 6:return s=u.sent(),cM.error(s),[3,7];case 7:return[2]}}))}))}}(i,wM,_M,TM),r={gtagCore:i,wrappedGtag:window[r]},bM=r.wrappedGtag,mM=r.gtagCore,SM=!0),wM[o]=function(t,e,n,r,i,o){return Xi(this,void 0,void 0,(function(){var a,s,u;return $i(this,(function(c){switch(c.label){case 0:return(a=dM(t)).then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&cM.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return cM.error(t)})),e.push(a),s=function(){return Xi(this,void 0,void 0,(function(){var t;return $i(this,(function(e){switch(e.label){case 0:return bo()?[3,1]:(cM.warn(lM.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,wo()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),cM.warn(lM.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){if(t)return r.getId()})),[4,Promise.all([a,s])];case 1:return u=c.sent(),a=u[0],s=u[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(uM))return r}}()||(l=o,h=a.measurementId,(f=document.createElement("script")).src=uM+"?l="+l+"&id="+h,f.async=!0,document.head.appendChild(f)),i("js",new Date),(u={}).origin="firebase",u.update=!0,u=u,null!=s&&(u.firebase_id=s),i(aM.CONFIG,a.measurementId,u),[2,a.measurementId]}var l,h,f}))}))}(t,_M,TM,e,mM,EM),{app:t,logEvent:function(t,e,n){(function(t,e,n,r,i){return Xi(this,void 0,void 0,(function(){var o;return $i(this,(function(a){switch(a.label){case 0:return i&&i.global?(t(aM.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=a.sent(),o=Yi(Yi({},r),{send_to:o}),t(aM.EVENT,n,o),a.label=3;case 3:return[2]}}))}))})(bM,wM[o],t,e,n).catch((function(t){return cM.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,r){return Xi(this,void 0,void 0,(function(){var i;return $i(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(aM.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(aM.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(bM,wM[o],t,e).catch((function(t){return cM.error(t)}))},setUserId:function(t,e){(function(t,e,n,r){return Xi(this,void 0,void 0,(function(){var i;return $i(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(aM.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(aM.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(bM,wM[o],t,e).catch((function(t){return cM.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,r){return Xi(this,void 0,void 0,(function(){var i,o,a,s,u;return $i(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,a=Object.keys(n);o<a.length;o++)s=a[o],i["user_properties."+s]=n[s];return t(aM.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(aM.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})(bM,wM[o],t,e).catch((function(t){return cM.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return Xi(this,void 0,void 0,(function(){var n;return $i(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(wM[o],t).catch((function(t){return cM.error(t)}))},INTERNAL:{delete:function(){return delete wM[o],Promise.resolve()}}}}var CM,xM="analytics";(CM=Ta).INTERNAL.registerComponent(new Qo(xM,(function(t){return kM(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:function(t){if(SM)throw lM.create("already-initialized");t.dataLayerName&&(EM=t.dataLayerName),t.gtagName&&(IM=t.gtagName)},EventName:sM,isSupported:function(){return Xi(this,void 0,void 0,(function(){return $i(this,(function(t){switch(t.label){case 0:if(yo())return[2,!1];if(!_o())return[2,!1];if(!bo())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,wo()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}})),CM.INTERNAL.registerComponent(new Qo("analytics-internal",(function(t){try{return{logEvent:t.getProvider(xM).getImmediate().logEvent}}catch(t){throw lM.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),CM.registerVersion("@firebase/analytics","0.6.10");var AM=(OM.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e;return e=n<=t,this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+e+"."),e},OM.prototype.fetch=function(t){return Xi(this,void 0,void 0,(function(){var e,n,r;return $i(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return r=i.sent(),e=r[0],(r=r[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,e)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return n=i.sent(),r=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===n.status&&r.push(this.storage.setLastSuccessfulFetchResponse(n)),[4,Promise.all(r)];case 3:return i.sent(),[2,n]}}))}))},OM);function OM(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}(H={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",H["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",H["registration-api-key"]="Undefined API key. Check Firebase app initialization.",H["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",H["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",H["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",H["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",H["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",H["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",H["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',H["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',H["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",H["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.";var NM=new So("remoteconfig","Remote Config",H=H),PM=(RM.prototype.fetch=function(t){return Xi(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,l;return $i(this,(function(h){switch(h.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:i=h.sent(),e=i[0],r=i[1],n=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",i=n+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,n={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},r={sdk_version:this.sdkVersion,app_instance_id:e,app_instance_id_token:r,app_id:this.appId,language_code:(f=void 0===f?navigator:f).languages&&f.languages[0]||f.language},r={method:"POST",headers:n,body:JSON.stringify(r)},i=fetch(i,r),r=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),h.label=2;case 2:return h.trys.push([2,5,,6]),[4,Promise.race([i,r])];case 3:return h.sent(),[4,i];case 4:return l=h.sent(),[3,6];case 5:throw r=h.sent(),i="fetch-client-network","AbortError"===r.name&&(i="fetch-timeout"),NM.create(i,{originalErrorMessage:r.message});case 6:if(o=l.status,a=l.headers.get("ETag")||void 0,200!==l.status)return[3,11];c=void 0,h.label=7;case 7:return h.trys.push([7,9,,10]),[4,l.json()];case 8:return c=h.sent(),[3,10];case 9:throw l=h.sent(),NM.create("fetch-client-parse",{originalErrorMessage:l.message});case 10:s=c.entries,u=c.state,h.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===u?o=500:"NO_CHANGE"===u?o=304:"NO_TEMPLATE"!==u&&"EMPTY_CONFIG"!==u||(s={}),304!==o&&200!==o)throw NM.create("fetch-status",{httpStatus:o});return[2,{status:o,eTag:a,config:s}]}var f}))}))},RM);function RM(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var DM=(LM.prototype.addEventListener=function(t){this.listeners.push(t)},LM.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},LM);function LM(){this.listeners=[]}var MM=["1","true","t","yes","y","on"],jM=(FM.prototype.asString=function(){return this._value},FM.prototype.asBoolean=function(){return"static"!==this._source&&0<=MM.indexOf(this._value.toLowerCase())},FM.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)?0:t},FM.prototype.getSource=function(){return this._source},FM);function FM(t,e){void 0===e&&(e=""),this._source=t,this._value=e}var UM=(VM.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=ea.DEBUG;break;case"silent":this._logger.logLevel=ea.SILENT;break;default:this._logger.logLevel=ea.ERROR}},Object.defineProperty(VM.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(VM.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),VM.prototype.activate=function(){return Xi(this,void 0,void 0,(function(){var t,e;return $i(this,(function(n){switch(n.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=n.sent(),t=e[0],e=e[1],t&&t.config&&t.eTag&&t.eTag!==e?[4,Promise.all([this._storageCache.setActiveConfig(t.config),this._storage.setActiveConfigEtag(t.eTag)])]:[2,!1];case 2:return n.sent(),[2,!0]}}))}))},VM.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},VM.prototype.fetch=function(){return Xi(this,void 0,void 0,(function(){var t,e,n,r=this;return $i(this,(function(i){switch(i.label){case 0:t=new DM,setTimeout((function(){return Xi(r,void 0,void 0,(function(){return $i(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=(o=e)instanceof Eo&&-1!==o.code.indexOf("fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}var o}))}))},VM.prototype.fetchAndActivate=function(){return Xi(this,void 0,void 0,(function(){return $i(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},VM.prototype.getAll=function(){var t=this;return function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(Yi(Yi({},t),e))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(e,n){return e[n]=t.getValue(n),e}),{})},VM.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},VM.prototype.getNumber=function(t){return this.getValue(t).asNumber()},VM.prototype.getString=function(t){return this.getValue(t).asString()},VM.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new jM("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new jM("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new jM("static"))},VM);function VM(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function qM(t,e){return t=t.target.error||void 0,NM.create(e,{originalErrorMessage:t&&t.message})}var BM="app_namespace_store",zM=(KM.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},KM.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},KM.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},KM.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},KM.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},KM.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},KM.prototype.getActiveConfig=function(){return this.get("active_config")},KM.prototype.setActiveConfig=function(t){return this.set("active_config",t)},KM.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},KM.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},KM.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},KM.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},KM.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},KM.prototype.get=function(t){return Xi(this,void 0,void 0,(function(){var e,n=this;return $i(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([BM],"readonly").objectStore(BM),a=n.createCompositeKey(t);try{var s=o.get(a);s.onerror=function(t){i(qM(t,"storage-get"))},s.onsuccess=function(t){t=t.target.result,r(t?t.value:void 0)}}catch(o){i(NM.create("storage-get",{originalErrorMessage:o&&o.message}))}}))]}}))}))},KM.prototype.set=function(t,e){return Xi(this,void 0,void 0,(function(){var n,r=this;return $i(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction([BM],"readwrite").objectStore(BM),s=r.createCompositeKey(t);try{var u=a.put({compositeKey:s,value:e});u.onerror=function(t){o(qM(t,"storage-set"))},u.onsuccess=function(){i()}}catch(i){o(NM.create("storage-set",{originalErrorMessage:i&&i.message}))}}))]}}))}))},KM.prototype.delete=function(t){return Xi(this,void 0,void 0,(function(){var e,n=this;return $i(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction([BM],"readwrite").objectStore(BM),a=n.createCompositeKey(t);try{var s=o.delete(a);s.onerror=function(t){i(qM(t,"storage-delete"))},s.onsuccess=function(){r()}}catch(r){i(NM.create("storage-delete",{originalErrorMessage:r&&r.message}))}}))]}}))}))},KM.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},KM);function KM(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(qM(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;0===t.oldVersion&&e.createObjectStore(BM,{keyPath:"compositeKey"})}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var HM=(WM.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},WM.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},WM.prototype.getActiveConfig=function(){return this.activeConfig},WM.prototype.loadFromStorage=function(){return Xi(this,void 0,void 0,(function(){var t,e,n;return $i(this,(function(r){switch(r.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(t=r.sent())&&(this.lastFetchStatus=t),[4,e];case 2:return(e=r.sent())&&(this.lastSuccessfulFetchTimestampMillis=e),[4,n];case 3:return(n=r.sent())&&(this.activeConfig=n),[2]}}))}))},WM.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},WM.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},WM.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},WM);function WM(t){this.storage=t}var GM=(QM.prototype.fetch=function(t){return Xi(this,void 0,void 0,(function(){var e;return $i(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},QM.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return Xi(this,void 0,void 0,(function(){var e,i;return $i(this,(function(o){switch(o.label){case 0:return[4,(a=t.signal,s=n,new Promise((function(t,e){var n=Math.max(s-Date.now(),0),r=setTimeout(t,n);a.addEventListener((function(){clearTimeout(r),e(NM.create("fetch-throttle",{throttleEndTimeMillis:s}))}))})))];case 1:o.sent(),o.label=2;case 2:return o.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=o.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return o.sent(),[2,e];case 5:if(!function(t){if(t instanceof Eo&&t.customData)return 429===(t=Number(t.customData.httpStatus))||500===t||503===t||504===t}(i=o.sent()))throw i;return i={throttleEndTimeMillis:Date.now()+Wo(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(i)];case 6:return o.sent(),[2,this.attemptFetch(t,i)];case 7:return[2]}var a,s}))}))},QM);function QM(t,e){this.client=t,this.storage=e}var YM,XM="@firebase/remote-config";(YM=Ta).INTERNAL.registerComponent(new Qo("remoteConfig",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw NM.create("registration-window");var o=r.options,a=o.projectId,s=o.apiKey,u=o.appId;if(!a)throw NM.create("registration-project-id");if(!s)throw NM.create("registration-api-key");if(!u)throw NM.create("registration-app-id");return n=n||"firebase",e=new zM(u,r.name,n),t=new HM(e),(o=new sa(XM)).logLevel=ea.ERROR,u=new PM(i,YM.SDK_VERSION,n,a,s,u),u=new GM(u,e),u=new AM(u,e,t,o),(o=new UM(r,u,t,e,o)).ensureInitialized(),o}),"PUBLIC").setMultipleInstances(!0)),YM.registerVersion(XM,"0.1.37"),(H={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",H["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",H["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",H["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",H["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",H["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",H["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",H["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",H["recaptcha-error"]="ReCAPTCHA error.";var $M=new So("appCheck","AppCheck",H=H),JM=new Map,ZM={activated:!1,tokenListeners:[]},tj={enabled:!1};function ej(t){return JM.get(t)||ZM}function nj(t,e){JM.set(t,e)}function rj(){return self.grecaptcha}function ij(t){if(!ej(t).activated)throw $M.create("use-before-activation",{appName:t.name})}function oj(t,e,n,r){r=n.render(r,{sitekey:e,size:"invisible"}),e=ej(t),nj(t,Yi(Yi({},e),{reCAPTCHAState:Yi(Yi({},e.reCAPTCHAState),{widgetId:r})}))}var aj="https://content-firebaseappcheck.googleapis.com/v1beta",sj=3e4,uj=96e4,cj=(lj.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((function(){}))},lj.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},lj.prototype.isRunning=function(){return!!this.pending},lj.prototype.process=function(t){return Xi(this,void 0,void 0,(function(){var e;return $i(this,(function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new lo,[4,(r=this.getNextRun(t),new Promise((function(t){setTimeout(t,r)})))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new lo,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch((function(){})),[3,7];case 6:return e=n.sent(),this.retryPolicy(e)?this.process(!1).catch((function(){})):this.stop(),[3,7];case 7:return[2]}var r}))}))},lj.prototype.getNextRun=function(t){return t?(this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration()):(t=this.nextErrorWaitInterval,this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t)},lj);function lj(t,e,n,r,i){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,i<(this.nextErrorWaitInterval=r))throw new Error("Proactive refresh lower bound greater than upper bound!")}function hj(t,e){var n=t.url,r=t.body;return Xi(this,void 0,void 0,(function(){var t,i,o,a,s;return $i(this,(function(u){switch(u.label){case 0:i={"Content-Type":"application/json"},(t=e.getImmediate({optional:!0}))&&(i["X-Firebase-Client"]=t.getPlatformInfoString()),i={method:"POST",body:JSON.stringify(r),headers:i},u.label=1;case 1:return u.trys.push([1,3,,4]),[4,fetch(n,i)];case 2:return s=u.sent(),[3,4];case 3:throw i=u.sent(),$M.create("fetch-network-error",{originalErrorMessage:i.message});case 4:if(200!==s.status)throw $M.create("fetch-status-error",{httpStatus:s.status});u.label=5;case 5:return u.trys.push([5,7,,8]),[4,s.json()];case 6:return o=u.sent(),[3,8];case 7:throw a=u.sent(),$M.create("fetch-parse-error",{originalErrorMessage:a.message});case 8:if(!(s=o.ttl.match(/^([\d.]+)(s)$/))||!s[2]||isNaN(Number(s[1])))throw $M.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+o.ttl});return a=1e3*Number(s[1]),s=Date.now(),[2,{token:o.attestationToken,expireTimeMillis:s+a,issuedAtTimeMillis:s}]}}))}))}function fj(t,e){var n=(r=t.options).projectId,r=(t=r.appId,r.apiKey);return{url:aj+"/projects/"+n+"/apps/"+t+":exchangeDebugToken?key="+r,body:{debug_token:e}}}var pj="firebase-app-check-store",dj="debug-token",vj=null;function yj(){return vj=vj||new Promise((function(t,e){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(e){t(e.target.result)},n.onerror=function(t){e($M.create("storage-open",{originalErrorMessage:null===(t=t.target.error)||void 0===t?void 0:t.message}))},n.onupgradeneeded=function(t){var e=t.target.result;0===t.oldVersion&&e.createObjectStore(pj,{keyPath:"compositeKey"})}}catch(n){e($M.create("storage-open",{originalErrorMessage:n.message}))}}))}function gj(t,e){return Xi(this,void 0,void 0,(function(){var n,r,i;return $i(this,(function(o){switch(o.label){case 0:return[4,yj()];case 1:return r=o.sent(),n=r.transaction(pj,"readwrite"),r=n.objectStore(pj),i=r.put({compositeKey:t,value:e}),[2,new Promise((function(t,e){i.onsuccess=function(e){t()},n.onerror=function(t){e($M.create("storage-set",{originalErrorMessage:null===(t=t.target.error)||void 0===t?void 0:t.message}))}}))]}}))}))}function mj(t){return Xi(this,void 0,void 0,(function(){var e,n,r;return $i(this,(function(i){switch(i.label){case 0:return[4,yj()];case 1:return n=i.sent(),e=n.transaction(pj,"readonly"),n=e.objectStore(pj),r=n.get(t),[2,new Promise((function(t,n){r.onsuccess=function(e){e=e.target.result,t(e?e.value:void 0)},e.onerror=function(t){n($M.create("storage-get",{originalErrorMessage:null===(t=t.target.error)||void 0===t?void 0:t.message}))}}))]}}))}))}function bj(t){return t.options.appId+"-"+t.name}var wj=new sa("@firebase/app-check");function _j(t){return Xi(this,void 0,void 0,(function(){var e,n;return $i(this,(function(r){switch(r.label){case 0:if(!bo())return[3,5];e=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,mj(bj(t))];case 2:return e=r.sent(),[3,4];case 3:return n=r.sent(),wj.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,e];case 5:return[2,void 0]}}))}))}function Tj(t,e){return bo()?gj(bj(t),e).catch((function(t){wj.warn("Failed to write token to indexeddb. Error: "+t)})):Promise.resolve()}function Ej(){return tj.enabled}var Ij={error:"UNKNOWN_ERROR"};function Sj(t,e,n){return void 0===n&&(n=!1),Xi(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h;return $i(this,(function(f){switch(f.label){case 0:return ij(t),Ej()?(r=hj,i=fj,u=[t],[4,function(){return Xi(this,void 0,void 0,(function(){var t;return $i(this,(function(e){if((t=tj).enabled&&t.token)return[2,t.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")}))}))}()]):[3,3];case 1:return[4,r.apply(void 0,[i.apply(void 0,u.concat([f.sent()])),e])];case 2:return[2,{token:f.sent().token}];case 3:return o=ej(t),a=o.token,s=void 0,a?[3,5]:[4,_j(t)];case 4:(c=f.sent())&&Cj(c)&&(a=c,nj(t,Yi(Yi({},o),{token:a})),kj(t,{token:a.token})),f.label=5;case 5:if(!n&&a&&Cj(a))return[2,{token:a.token}];f.label=6;case 6:return f.trys.push([6,12,,13]),o.customProvider?[4,o.customProvider.getToken()]:[3,8];case 7:return u=f.sent(),c=null!==(c=function(t){return"object"==typeof(t=Oo(t).claims)&&t.hasOwnProperty("iat")?t.iat:null}(u.token))&&c<Date.now()&&0<c?1e3*c:Date.now(),a=Yi(Yi({},u),{issuedAtTimeMillis:c}),[3,11];case 8:return[4,function(t){return Xi(this,void 0,void 0,(function(){var e;return $i(this,(function(n){switch(n.label){case 0:return ij(t),[4,ej(t).reCAPTCHAState.initialized.promise];case 1:return e=n.sent(),[2,new Promise((function(n,r){var i=ej(t).reCAPTCHAState;e.ready((function(){n(e.execute(i.widgetId,{action:"fire_app_check"}))}))}))]}}))}))}(t).catch((function(t){throw $M.create("recaptcha-error")}))];case 9:return l=f.sent(),[4,hj((d=(v=t.options).projectId,p=v.appId,v=v.apiKey,{url:aj+"/projects/"+d+"/apps/"+p+":exchangeRecaptchaToken?key="+v,body:{recaptcha_token:l}}),e)];case 10:a=f.sent(),f.label=11;case 11:return[3,13];case 12:return l=f.sent(),wj.error(l),s=l,[3,13];case 13:return a?[3,14]:(v=s,h={token:function(t){return so.encodeString(JSON.stringify(t),!1)}(Ij),error:v},[3,16]);case 14:return h={token:a.token},nj(t,Yi(Yi({},o),{token:a})),[4,Tj(t,a)];case 15:f.sent(),f.label=16;case 16:return kj(t,h),[2,h]}var p,d,v}))}))}function kj(t,e){for(var n=0,r=ej(t).tokenListeners;n<r.length;n++){var i=r[n];try{i(e)}catch(t){}}}function Cj(t){return 0<t.expireTimeMillis-Date.now()}function xj(t){return{activate:function(e,n){return function(t,e,n){var r=ej(t);if(r.activated)throw $M.create("already-activated",{appName:t.name});r=Yi(Yi({},r),{activated:!0}),"string"==typeof e?r.siteKey=e:r.customProvider=e,r.isTokenAutoRefreshEnabled=void 0===n?t.automaticDataCollectionEnabled:n,nj(t,r),r.siteKey&&function(t,e){var n=ej(t),r=new lo;nj(t,Yi(Yi({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+t.name,o=document.createElement("div");o.id=i,o.style.display="none",document.body.appendChild(o);var a=rj();return a?a.ready((function(){oj(t,e,a,i),r.resolve(a)})):(n=function(){var n=rj();if(!n)throw new Error("no recaptcha");n.ready((function(){oj(t,e,n,i),r.resolve(n)}))},(o=document.createElement("script")).src="https://www.google.com/recaptcha/api.js",o.onload=n,document.head.appendChild(o)),r.promise}(t,r.siteKey).catch((function(){}))}(t,e,n)},setTokenAutoRefreshEnabled:function(e){return r=e,(e=ej(n=t)).tokenRefresher&&(!0===r?e.tokenRefresher.start():e.tokenRefresher.stop()),void nj(n,Yi(Yi({},e),{isTokenAutoRefreshEnabled:r}));var n,r}}}function Aj(t,e){return{getToken:function(n){return Sj(t,e,n)},addTokenListener:function(n){return function(t,e,n){var r,i=ej(t),o=Yi(Yi({},i),{tokenListeners:to(to([],i.tokenListeners),[n])});Ej()?tj.enabled&&tj.token&&tj.token.promise.then((function(t){return n({token:t})})).catch((function(){})):(o.tokenRefresher||(e=function(t,e){var n=this;return new cj((function(){return Xi(n,void 0,void 0,(function(){var n;return $i(this,(function(r){switch(r.label){case 0:return ej(t).token?[3,2]:[4,Sj(t,e)];case 1:return n=r.sent(),[3,4];case 2:return[4,Sj(t,e,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}}))}))}),(function(){return!0}),(function(){if((n=ej(t)).token){var e=n.token.issuedAtTimeMillis+.5*(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)+3e5,n=n.token.expireTimeMillis-3e5;return e=Math.min(e,n),Math.max(0,e-Date.now())}return 0}),sj,uj)}(t,e),o.tokenRefresher=e),o.tokenRefresher.isRunning()||!0!==i.isTokenAutoRefreshEnabled||o.tokenRefresher.start(),i.token&&Cj(i.token)&&(r=i.token,Promise.resolve().then((function(){return n({token:r.token})})).catch((function(){})))),nj(t,o)}(t,e,n)},removeTokenListener:function(e){return r=e,0===(e=(i=ej(n=t)).tokenListeners.filter((function(t){return t!==r}))).length&&i.tokenRefresher&&i.tokenRefresher.isRunning()&&i.tokenRefresher.stop(),void nj(n,Yi(Yi({},i),{tokenListeners:e}));var n,r,i}}}var Oj,Nj,Pj,Rj,Dj="app-check-internal";return(Oj=Ta).INTERNAL.registerComponent(new Qo("appCheck",(function(t){return xj(t.getProvider("app").getImmediate())}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(t,e,n){t.getProvider(Dj).initialize()}))),Oj.INTERNAL.registerComponent(new Qo(Dj,(function(t){return Aj(t.getProvider("app").getImmediate(),t.getProvider("platform-logger"))}),"PUBLIC").setInstantiationMode("EXPLICIT")),Oj.registerVersion("@firebase/app-check","0.1.1"),"string"!=typeof(Rj=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof e)return e;throw new Error("Unable to locate global object.")}()).FIREBASE_APPCHECK_DEBUG_TOKEN&&!0!==Rj.FIREBASE_APPCHECK_DEBUG_TOKEN||((Nj=tj).enabled=!0,Pj=new lo,Nj.token=Pj,"string"==typeof Rj.FIREBASE_APPCHECK_DEBUG_TOKEN?Pj.resolve(Rj.FIREBASE_APPCHECK_DEBUG_TOKEN):Pj.resolve(function(){return Xi(this,void 0,void 0,(function(){var t;return $i(this,(function(e){switch(e.label){case 0:t=void 0,e.label=1;case 1:return e.trys.push([1,3,,4]),[4,mj(dj)];case 2:return t=e.sent(),[3,4];case 3:return e.sent(),[3,4];case 4:return t||(t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),gj(dj,t).catch((function(t){return wj.warn("Failed to persist debug token to indexeddb. Error: "+t)})),console.log("AppCheck debug token: "+t+". You will need to whitelist it in the Firebase console for it to work")),[2,t]}}))}))}())),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),Ta.registerVersion("firebase","8.6.3","cdn"),Ta}()}).call(this,n(12),n(18))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(r){"object"===typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return o}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.create;Object.create},function(t,e,n){t.exports=n(27)},function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){r(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n.d(e,"a",(function(){return o}))},,function(t,e,n){"use strict";var r=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(t,e){for(var n,s,u=a(t),c=1;c<arguments.length;c++){for(var l in n=Object(arguments[c]))i.call(n,l)&&(u[l]=n[l]);if(r){s=r(n);for(var h=0;h<s.length;h++)o.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"===typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&p())}function p(){if(!l){var t=s(f);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||l||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE){0;try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}}(),t.exports=n(23)},function(t,e,n){"use strict";function r(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(r,i)}function i(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var a=t.apply(e,n);function s(t){r(a,i,o,s,u,"next",t)}function u(t){r(a,i,o,s,u,"throw",t)}s(void 0)}))}}n.d(e,"a",(function(){return i}))},,function(t,e,n){"use strict";var r=n(17),i="function"===typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,l=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,d=i?Symbol.for("react.memo"):60115,v=i?Symbol.for("react.lazy"):60116,y="function"===typeof Symbol&&Symbol.iterator;function g(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function w(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||m}function _(){}function T(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||m}w.prototype.isReactComponent={},w.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(g(85));this.updater.enqueueSetState(this,t,e,"setState")},w.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},_.prototype=w.prototype;var E=T.prototype=new _;E.constructor=T,r(E,w.prototype),E.isPureReactComponent=!0;var I={current:null},S=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function C(t,e,n){var r,i={},a=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)S.call(e,r)&&!k.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var c=Array(u),l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:t,key:a,ref:s,props:i,_owner:I.current}}function x(t){return"object"===typeof t&&null!==t&&t.$$typeof===o}var A=/\/+/g,O=[];function N(t,e,n,r){if(O.length){var i=O.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function P(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>O.length&&O.push(t)}function R(t,e,n){return null==t?0:function t(e,n,r,i){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var u=!1;if(null===e)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case o:case a:u=!0}}if(u)return r(i,e,""===n?"."+D(e,0):n),1;if(u=0,n=""===n?".":n+":",Array.isArray(e))for(var c=0;c<e.length;c++){var l=n+D(s=e[c],c);u+=t(s,l,r,i)}else if(null===e||"object"!==typeof e?l=null:l="function"===typeof(l=y&&e[y]||e["@@iterator"])?l:null,"function"===typeof l)for(e=l.call(e),c=0;!(s=e.next()).done;)u+=t(s=s.value,l=n+D(s,c++),r,i);else if("object"===s)throw r=""+e,Error(g(31,"[object Object]"===r?"object with keys {"+Object.keys(e).join(", ")+"}":r,""));return u}(t,"",e,n)}function D(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function L(t,e){t.func.call(t.context,e,t.count++)}function M(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?j(t,r,n,(function(t){return t})):null!=t&&(x(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(A,"$&/")+"/")+n)),r.push(t))}function j(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(A,"$&/")+"/"),R(t,M,e=N(e,o,r,i)),P(e)}var F={current:null};function U(){var t=F.current;if(null===t)throw Error(g(321));return t}var V={ReactCurrentDispatcher:F,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:I,IsSomeRendererActing:{current:!1},assign:r};e.Children={map:function(t,e,n){if(null==t)return t;var r=[];return j(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;R(t,L,e=N(null,null,e,n)),P(e)},count:function(t){return R(t,(function(){return null}),null)},toArray:function(t){var e=[];return j(t,e,null,(function(t){return t})),e},only:function(t){if(!x(t))throw Error(g(143));return t}},e.Component=w,e.Fragment=s,e.Profiler=c,e.PureComponent=T,e.StrictMode=u,e.Suspense=p,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error(g(267,t));var i=r({},t.props),a=t.key,s=t.ref,u=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,u=I.current),void 0!==e.key&&(a=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(l in e)S.call(e,l)&&!k.hasOwnProperty(l)&&(i[l]=void 0===e[l]&&void 0!==c?c[l]:e[l])}var l=arguments.length-2;if(1===l)i.children=n;else if(1<l){c=Array(l);for(var h=0;h<l;h++)c[h]=arguments[h+2];i.children=c}return{$$typeof:o,type:t.type,key:a,ref:s,props:i,_owner:u}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:h,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:t},t.Consumer=t},e.createElement=C,e.createFactory=function(t){var e=C.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:f,render:t}},e.isValidElement=x,e.lazy=function(t){return{$$typeof:v,_ctor:t,_status:-1,_result:null}},e.memo=function(t,e){return{$$typeof:d,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return U().useCallback(t,e)},e.useContext=function(t,e){return U().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return U().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return U().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return U().useLayoutEffect(t,e)},e.useMemo=function(t,e){return U().useMemo(t,e)},e.useReducer=function(t,e,n){return U().useReducer(t,e,n)},e.useRef=function(t){return U().useRef(t)},e.useState=function(t){return U().useState(t)},e.version="16.13.1"},function(t,e,n){"use strict";var r=n(1),i=n(17),o=n(24);function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));function s(t,e,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(l){this.onError(l)}}var u=!1,c=null,l=!1,h=null,f={onError:function(t){u=!0,c=t}};function p(t,e,n,r,i,o,a,l,h){u=!1,c=null,s.apply(f,arguments)}var d=null,v=null,y=null;function g(t,e,n){var r=t.type||"unknown-event";t.currentTarget=y(n),function(t,e,n,r,i,o,s,f,d){if(p.apply(this,arguments),u){if(!u)throw Error(a(198));var v=c;u=!1,c=null,l||(l=!0,h=v)}}(r,e,void 0,t),t.currentTarget=null}var m=null,b={};function w(){if(m)for(var t in b){var e=b[t],n=m.indexOf(t);if(!(-1<n))throw Error(a(96,t));if(!T[n]){if(!e.extractEvents)throw Error(a(97,t));for(var r in T[n]=e,n=e.eventTypes){var i=void 0,o=n[r],s=e,u=r;if(E.hasOwnProperty(u))throw Error(a(99,u));E[u]=o;var c=o.phasedRegistrationNames;if(c){for(i in c)c.hasOwnProperty(i)&&_(c[i],s,u);i=!0}else o.registrationName?(_(o.registrationName,s,u),i=!0):i=!1;if(!i)throw Error(a(98,r,t))}}}}function _(t,e,n){if(I[t])throw Error(a(100,t));I[t]=e,S[t]=e.eventTypes[n].dependencies}var T=[],E={},I={},S={};function k(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];if(!b.hasOwnProperty(e)||b[e]!==r){if(b[e])throw Error(a(102,e));b[e]=r,n=!0}}n&&w()}var C=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),x=null,A=null,O=null;function N(t){if(t=v(t)){if("function"!==typeof x)throw Error(a(280));var e=t.stateNode;e&&(e=d(e),x(t.stateNode,t.type,e))}}function P(t){A?O?O.push(t):O=[t]:A=t}function R(){if(A){var t=A,e=O;if(O=A=null,N(t),e)for(t=0;t<e.length;t++)N(e[t])}}function D(t,e){return t(e)}function L(t,e,n,r,i){return t(e,n,r,i)}function M(){}var j=D,F=!1,U=!1;function V(){null===A&&null===O||(M(),R())}function q(t,e,n){if(U)return t(e,n);U=!0;try{return j(t,e,n)}finally{U=!1,V()}}var B=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,z=Object.prototype.hasOwnProperty,K={},H={};function W(t,e,n,r,i,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o}var G={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){G[t]=new W(t,0,!1,t,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];G[e]=new W(e,1,!1,t[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){G[t]=new W(t,2,!1,t.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){G[t]=new W(t,2,!1,t,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){G[t]=new W(t,3,!1,t.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(t){G[t]=new W(t,3,!0,t,null,!1)})),["capture","download"].forEach((function(t){G[t]=new W(t,4,!1,t,null,!1)})),["cols","rows","size","span"].forEach((function(t){G[t]=new W(t,6,!1,t,null,!1)})),["rowSpan","start"].forEach((function(t){G[t]=new W(t,5,!1,t.toLowerCase(),null,!1)}));var Q=/[\-:]([a-z])/g;function Y(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(Q,Y);G[e]=new W(e,1,!1,t,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(Q,Y);G[e]=new W(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(Q,Y);G[e]=new W(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(t){G[t]=new W(t,1,!1,t.toLowerCase(),null,!1)})),G.xlinkHref=new W("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(t){G[t]=new W(t,1,!1,t.toLowerCase(),null,!0)}));var X=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function $(t,e,n,r){var i=G.hasOwnProperty(e)?G[e]:null;(null!==i?0===i.type:!r&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!z.call(H,t)||!z.call(K,t)&&(B.test(t)?H[t]=!0:(K[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}X.hasOwnProperty("ReactCurrentDispatcher")||(X.ReactCurrentDispatcher={current:null}),X.hasOwnProperty("ReactCurrentBatchConfig")||(X.ReactCurrentBatchConfig={suspense:null});var J=/^(.*)[\\\/]/,Z="function"===typeof Symbol&&Symbol.for,tt=Z?Symbol.for("react.element"):60103,et=Z?Symbol.for("react.portal"):60106,nt=Z?Symbol.for("react.fragment"):60107,rt=Z?Symbol.for("react.strict_mode"):60108,it=Z?Symbol.for("react.profiler"):60114,ot=Z?Symbol.for("react.provider"):60109,at=Z?Symbol.for("react.context"):60110,st=Z?Symbol.for("react.concurrent_mode"):60111,ut=Z?Symbol.for("react.forward_ref"):60112,ct=Z?Symbol.for("react.suspense"):60113,lt=Z?Symbol.for("react.suspense_list"):60120,ht=Z?Symbol.for("react.memo"):60115,ft=Z?Symbol.for("react.lazy"):60116,pt=Z?Symbol.for("react.block"):60121,dt="function"===typeof Symbol&&Symbol.iterator;function vt(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=dt&&t[dt]||t["@@iterator"])?t:null}function yt(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case nt:return"Fragment";case et:return"Portal";case it:return"Profiler";case rt:return"StrictMode";case ct:return"Suspense";case lt:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case at:return"Context.Consumer";case ot:return"Context.Provider";case ut:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case ht:return yt(t.type);case pt:return yt(t.render);case ft:if(t=1===t._status?t._result:null)return yt(t)}return null}function gt(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break t;default:var r=t._debugOwner,i=t._debugSource,o=yt(t.type);n=null,r&&(n=yt(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(J,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}e+=n,t=t.return}while(t);return e}function mt(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function bt(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function wt(t){t._valueTracker||(t._valueTracker=function(t){var e=bt(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function _t(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=bt(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function Tt(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Et(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=mt(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function It(t,e){null!=(e=e.checked)&&$(t,"checked",e,!1)}function St(t,e){It(t,e);var n=mt(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?Ct(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ct(t,e.type,mt(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function kt(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function Ct(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function xt(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function At(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+mt(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function Ot(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(a(91));return i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Nt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:mt(n)}}function Pt(t,e){var n=mt(e.value),r=mt(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function Rt(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var Dt="http://www.w3.org/1999/xhtml",Lt="http://www.w3.org/2000/svg";function Mt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?Mt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var Ft,Ut=function(t){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction((function(){return t(e,n)}))}:t}((function(t,e){if(t.namespaceURI!==Lt||"innerHTML"in t)t.innerHTML=e;else{for((Ft=Ft||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ft.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}}));function Vt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}function qt(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bt={animationend:qt("Animation","AnimationEnd"),animationiteration:qt("Animation","AnimationIteration"),animationstart:qt("Animation","AnimationStart"),transitionend:qt("Transition","TransitionEnd")},zt={},Kt={};function Ht(t){if(zt[t])return zt[t];if(!Bt[t])return t;var e,n=Bt[t];for(e in n)if(n.hasOwnProperty(e)&&e in Kt)return zt[t]=n[e];return t}C&&(Kt=document.createElement("div").style,"AnimationEvent"in window||(delete Bt.animationend.animation,delete Bt.animationiteration.animation,delete Bt.animationstart.animation),"TransitionEvent"in window||delete Bt.transitionend.transition);var Wt=Ht("animationend"),Gt=Ht("animationiteration"),Qt=Ht("animationstart"),Yt=Ht("transitionend"),Xt="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$t=new("function"===typeof WeakMap?WeakMap:Map);function Jt(t){var e=$t.get(t);return void 0===e&&(e=new Map,$t.set(t,e)),e}function Zt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(1026&(e=t).effectTag)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function te(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function ee(t){if(Zt(t)!==t)throw Error(a(188))}function ne(t){if(!(t=function(t){var e=t.alternate;if(!e){if(null===(e=Zt(t)))throw Error(a(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return ee(i),t;if(o===r)return ee(i),e;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function re(t,e){if(null==e)throw Error(a(30));return null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function ie(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var oe=null;function ae(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var r=0;r<e.length&&!t.isPropagationStopped();r++)g(t,e[r],n[r]);else e&&g(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function se(t){if(null!==t&&(oe=re(oe,t)),t=oe,oe=null,t){if(ie(t,ae),oe)throw Error(a(95));if(l)throw t=h,l=!1,h=null,t}}function ue(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function ce(t){if(!C)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"===typeof e[t]),e}var le=[];function he(t){t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>le.length&&le.push(t)}function fe(t,e,n,r){if(le.length){var i=le.pop();return i.topLevelType=t,i.eventSystemFlags=r,i.nativeEvent=e,i.targetInst=n,i}return{topLevelType:t,eventSystemFlags:r,nativeEvent:e,targetInst:n,ancestors:[]}}function pe(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(e=n.tag)&&6!==e||t.ancestors.push(n),n=Cn(r)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var i=ue(t.nativeEvent);r=t.topLevelType;var o=t.nativeEvent,a=t.eventSystemFlags;0===n&&(a|=64);for(var s=null,u=0;u<T.length;u++){var c=T[u];c&&(c=c.extractEvents(r,e,o,i,a))&&(s=re(s,c))}se(s)}}function de(t,e,n){if(!n.has(t)){switch(t){case"scroll":Qe(e,"scroll",!0);break;case"focus":case"blur":Qe(e,"focus",!0),Qe(e,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":ce(t)&&Qe(e,t,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Xt.indexOf(t)&&Ge(t,e)}n.set(t,null)}}var ve,ye,ge,me=!1,be=[],we=null,_e=null,Te=null,Ee=new Map,Ie=new Map,Se=[],ke="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Ce="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function xe(t,e,n,r,i){return{blockedOn:t,topLevelType:e,eventSystemFlags:32|n,nativeEvent:i,container:r}}function Ae(t,e){switch(t){case"focus":case"blur":we=null;break;case"dragenter":case"dragleave":_e=null;break;case"mouseover":case"mouseout":Te=null;break;case"pointerover":case"pointerout":Ee.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ie.delete(e.pointerId)}}function Oe(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t=xe(e,n,r,i,o),null!==e&&(null!==(e=xn(e))&&ye(e)),t):(t.eventSystemFlags|=r,t)}function Ne(t){var e=Cn(t.target);if(null!==e){var n=Zt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=te(n)))return t.blockedOn=e,void o.unstable_runWithPriority(t.priority,(function(){ge(n)}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Pe(t){if(null!==t.blockedOn)return!1;var e=Je(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);if(null!==e){var n=xn(e);return null!==n&&ye(n),t.blockedOn=e,!1}return!0}function Re(t,e,n){Pe(t)&&n.delete(e)}function De(){for(me=!1;0<be.length;){var t=be[0];if(null!==t.blockedOn){null!==(t=xn(t.blockedOn))&&ve(t);break}var e=Je(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);null!==e?t.blockedOn=e:be.shift()}null!==we&&Pe(we)&&(we=null),null!==_e&&Pe(_e)&&(_e=null),null!==Te&&Pe(Te)&&(Te=null),Ee.forEach(Re),Ie.forEach(Re)}function Le(t,e){t.blockedOn===e&&(t.blockedOn=null,me||(me=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,De)))}function Me(t){function e(e){return Le(e,t)}if(0<be.length){Le(be[0],t);for(var n=1;n<be.length;n++){var r=be[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==we&&Le(we,t),null!==_e&&Le(_e,t),null!==Te&&Le(Te,t),Ee.forEach(e),Ie.forEach(e),n=0;n<Se.length;n++)(r=Se[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Se.length&&null===(n=Se[0]).blockedOn;)Ne(n),null===n.blockedOn&&Se.shift()}var je={},Fe=new Map,Ue=new Map,Ve=["abort","abort",Wt,"animationEnd",Gt,"animationIteration",Qt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Yt,"transitionEnd","waiting","waiting"];function qe(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:e},Ue.set(r,e),Fe.set(r,o),je[i]=o}}qe("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),qe("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),qe(Ve,2);for(var Be="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),ze=0;ze<Be.length;ze++)Ue.set(Be[ze],0);var Ke=o.unstable_UserBlockingPriority,He=o.unstable_runWithPriority,We=!0;function Ge(t,e){Qe(e,t,!1)}function Qe(t,e,n){var r=Ue.get(e);switch(void 0===r?2:r){case 0:r=Ye.bind(null,e,1,t);break;case 1:r=Xe.bind(null,e,1,t);break;default:r=$e.bind(null,e,1,t)}n?t.addEventListener(e,r,!0):t.addEventListener(e,r,!1)}function Ye(t,e,n,r){F||M();var i=$e,o=F;F=!0;try{L(i,t,e,n,r)}finally{(F=o)||V()}}function Xe(t,e,n,r){He(Ke,$e.bind(null,t,e,n,r))}function $e(t,e,n,r){if(We)if(0<be.length&&-1<ke.indexOf(t))t=xe(null,t,e,n,r),be.push(t);else{var i=Je(t,e,n,r);if(null===i)Ae(t,r);else if(-1<ke.indexOf(t))t=xe(i,t,e,n,r),be.push(t);else if(!function(t,e,n,r,i){switch(e){case"focus":return we=Oe(we,t,e,n,r,i),!0;case"dragenter":return _e=Oe(_e,t,e,n,r,i),!0;case"mouseover":return Te=Oe(Te,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Ee.set(o,Oe(Ee.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ie.set(o,Oe(Ie.get(o)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r)){Ae(t,r),t=fe(t,r,null,e);try{q(pe,t)}finally{he(t)}}}}function Je(t,e,n,r){if(null!==(n=Cn(n=ue(r)))){var i=Zt(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(null!==(n=te(i)))return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}t=fe(t,r,n,e);try{q(pe,t)}finally{he(t)}return null}var Ze={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tn=["Webkit","ms","Moz","O"];function en(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||Ze.hasOwnProperty(t)&&Ze[t]?(""+e).trim():e+"px"}function nn(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=en(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(Ze).forEach((function(t){tn.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ze[e]=Ze[t]}))}));var rn=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function on(t,e){if(e){if(rn[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(a(137,t,""));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(a(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(a(62,""))}}function an(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var sn=Dt;function un(t,e){var n=Jt(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=S[e];for(var r=0;r<e.length;r++)de(e[r],t,n)}function cn(){}function ln(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function hn(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function fn(t,e){var n,r=hn(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=hn(r)}}function pn(){for(var t=window,e=ln();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=ln((t=e.contentWindow).document)}return e}function dn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var vn=null,yn=null;function gn(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function mn(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var bn="function"===typeof setTimeout?setTimeout:void 0,wn="function"===typeof clearTimeout?clearTimeout:void 0;function _n(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function Tn(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var En=Math.random().toString(36).slice(2),In="__reactInternalInstance$"+En,Sn="__reactEventHandlers$"+En,kn="__reactContainere$"+En;function Cn(t){var e=t[In];if(e)return e;for(var n=t.parentNode;n;){if(e=n[kn]||n[In]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=Tn(t);null!==t;){if(n=t[In])return n;t=Tn(t)}return e}n=(t=n).parentNode}return null}function xn(t){return!(t=t[In]||t[kn])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function An(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(a(33))}function On(t){return t[Sn]||null}function Nn(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function Pn(t,e){var n=t.stateNode;if(!n)return null;var r=d(n);if(!r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(a(231,e,typeof n));return n}function Rn(t,e,n){(e=Pn(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=re(n._dispatchListeners,e),n._dispatchInstances=re(n._dispatchInstances,t))}function Dn(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=Nn(e);for(e=n.length;0<e--;)Rn(n[e],"captured",t);for(e=0;e<n.length;e++)Rn(n[e],"bubbled",t)}}function Ln(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=Pn(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=re(n._dispatchListeners,e),n._dispatchInstances=re(n._dispatchInstances,t))}function Mn(t){t&&t.dispatchConfig.registrationName&&Ln(t._targetInst,null,t)}function jn(t){ie(t,Dn)}var Fn=null,Un=null,Vn=null;function qn(){if(Vn)return Vn;var t,e,n=Un,r=n.length,i="value"in Fn?Fn.value:Fn.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return Vn=i.slice(t,1<e?1-e:void 0)}function Bn(){return!0}function zn(){return!1}function Kn(t,e,n,r){for(var i in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Bn:zn,this.isPropagationStopped=zn,this}function Hn(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function Wn(t){if(!(t instanceof this))throw Error(a(279));t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function Gn(t){t.eventPool=[],t.getPooled=Hn,t.release=Wn}i(Kn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=Bn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=Bn)},persist:function(){this.isPersistent=Bn},isPersistent:zn,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=zn,this._dispatchInstances=this._dispatchListeners=null}}),Kn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Kn.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var o=new e;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,t),n.extend=r.extend,Gn(n),n},Gn(Kn);var Qn=Kn.extend({data:null}),Yn=Kn.extend({data:null}),Xn=[9,13,27,32],$n=C&&"CompositionEvent"in window,Jn=null;C&&"documentMode"in document&&(Jn=document.documentMode);var Zn=C&&"TextEvent"in window&&!Jn,tr=C&&(!$n||Jn&&8<Jn&&11>=Jn),er=String.fromCharCode(32),nr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},rr=!1;function ir(t,e){switch(t){case"keyup":return-1!==Xn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function or(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var ar=!1;var sr={eventTypes:nr,extractEvents:function(t,e,n,r){var i;if($n)t:{switch(t){case"compositionstart":var o=nr.compositionStart;break t;case"compositionend":o=nr.compositionEnd;break t;case"compositionupdate":o=nr.compositionUpdate;break t}o=void 0}else ar?ir(t,n)&&(o=nr.compositionEnd):"keydown"===t&&229===n.keyCode&&(o=nr.compositionStart);return o?(tr&&"ko"!==n.locale&&(ar||o!==nr.compositionStart?o===nr.compositionEnd&&ar&&(i=qn()):(Un="value"in(Fn=r)?Fn.value:Fn.textContent,ar=!0)),o=Qn.getPooled(o,e,n,r),i?o.data=i:null!==(i=or(n))&&(o.data=i),jn(o),i=o):i=null,(t=Zn?function(t,e){switch(t){case"compositionend":return or(e);case"keypress":return 32!==e.which?null:(rr=!0,er);case"textInput":return(t=e.data)===er&&rr?null:t;default:return null}}(t,n):function(t,e){if(ar)return"compositionend"===t||!$n&&ir(t,e)?(t=qn(),Vn=Un=Fn=null,ar=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tr&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))?((e=Yn.getPooled(nr.beforeInput,e,n,r)).data=t,jn(e)):e=null,null===i?e:null===e?i:[i,e]}},ur={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!ur[t.type]:"textarea"===e}var lr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function hr(t,e,n){return(t=Kn.getPooled(lr.change,t,e,n)).type="change",P(n),jn(t),t}var fr=null,pr=null;function dr(t){se(t)}function vr(t){if(_t(An(t)))return t}function yr(t,e){if("change"===t)return e}var gr=!1;function mr(){fr&&(fr.detachEvent("onpropertychange",br),pr=fr=null)}function br(t){if("value"===t.propertyName&&vr(pr))if(t=hr(pr,t,ue(t)),F)se(t);else{F=!0;try{D(dr,t)}finally{F=!1,V()}}}function wr(t,e,n){"focus"===t?(mr(),pr=n,(fr=e).attachEvent("onpropertychange",br)):"blur"===t&&mr()}function _r(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return vr(pr)}function Tr(t,e){if("click"===t)return vr(e)}function Er(t,e){if("input"===t||"change"===t)return vr(e)}C&&(gr=ce("input")&&(!document.documentMode||9<document.documentMode));var Ir={eventTypes:lr,_isInputEventSupported:gr,extractEvents:function(t,e,n,r){var i=e?An(e):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=yr;else if(cr(i))if(gr)a=Er;else{a=_r;var s=wr}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=Tr);if(a&&(a=a(t,e)))return hr(a,n,r);s&&s(t,i,e),"blur"===t&&(t=i._wrapperState)&&t.controlled&&"number"===i.type&&Ct(i,"number",i.value)}},Sr=Kn.extend({view:null,detail:null}),kr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cr(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=kr[t])&&!!e[t]}function xr(){return Cr}var Ar=0,Or=0,Nr=!1,Pr=!1,Rr=Sr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:xr,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=Ar;return Ar=t.screenX,Nr?"mousemove"===t.type?t.screenX-e:0:(Nr=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=Or;return Or=t.screenY,Pr?"mousemove"===t.type?t.screenY-e:0:(Pr=!0,0)}}),Dr=Rr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Lr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Mr={eventTypes:Lr,extractEvents:function(t,e,n,r,i){var o="mouseover"===t||"pointerover"===t,a="mouseout"===t||"pointerout"===t;if(o&&0===(32&i)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,a)?(a=e,null!==(e=(e=n.relatedTarget||n.toElement)?Cn(e):null)&&(e!==Zt(e)||5!==e.tag&&6!==e.tag)&&(e=null)):a=null;if(a===e)return null;if("mouseout"===t||"mouseover"===t)var s=Rr,u=Lr.mouseLeave,c=Lr.mouseEnter,l="mouse";else"pointerout"!==t&&"pointerover"!==t||(s=Dr,u=Lr.pointerLeave,c=Lr.pointerEnter,l="pointer");if(t=null==a?o:An(a),o=null==e?o:An(e),(u=s.getPooled(u,a,n,r)).type=l+"leave",u.target=t,u.relatedTarget=o,(n=s.getPooled(c,e,n,r)).type=l+"enter",n.target=o,n.relatedTarget=t,l=e,(r=a)&&l)t:{for(c=l,a=0,t=s=r;t;t=Nn(t))a++;for(t=0,e=c;e;e=Nn(e))t++;for(;0<a-t;)s=Nn(s),a--;for(;0<t-a;)c=Nn(c),t--;for(;a--;){if(s===c||s===c.alternate)break t;s=Nn(s),c=Nn(c)}s=null}else s=null;for(c=s,s=[];r&&r!==c&&(null===(a=r.alternate)||a!==c);)s.push(r),r=Nn(r);for(r=[];l&&l!==c&&(null===(a=l.alternate)||a!==c);)r.push(l),l=Nn(l);for(l=0;l<s.length;l++)Ln(s[l],"bubbled",u);for(l=r.length;0<l--;)Ln(r[l],"captured",n);return 0===(64&i)?[u]:[u,n]}};var jr="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},Fr=Object.prototype.hasOwnProperty;function Ur(t,e){if(jr(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Fr.call(e,n[r])||!jr(t[n[r]],e[n[r]]))return!1;return!0}var Vr=C&&"documentMode"in document&&11>=document.documentMode,qr={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Br=null,zr=null,Kr=null,Hr=!1;function Wr(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return Hr||null==Br||Br!==ln(n)?null:("selectionStart"in(n=Br)&&dn(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Kr&&Ur(Kr,n)?null:(Kr=n,(t=Kn.getPooled(qr.select,zr,t,e)).type="select",t.target=Br,jn(t),t))}var Gr={eventTypes:qr,extractEvents:function(t,e,n,r,i,o){if(!(o=!(i=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){t:{i=Jt(i),o=S.onSelect;for(var a=0;a<o.length;a++)if(!i.has(o[a])){i=!1;break t}i=!0}o=!i}if(o)return null;switch(i=e?An(e):window,t){case"focus":(cr(i)||"true"===i.contentEditable)&&(Br=i,zr=e,Kr=null);break;case"blur":Kr=zr=Br=null;break;case"mousedown":Hr=!0;break;case"contextmenu":case"mouseup":case"dragend":return Hr=!1,Wr(n,r);case"selectionchange":if(Vr)break;case"keydown":case"keyup":return Wr(n,r)}return null}},Qr=Kn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Yr=Kn.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Xr=Sr.extend({relatedTarget:null});function $r(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var Jr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Zr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ti=Sr.extend({key:function(t){if(t.key){var e=Jr[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=$r(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Zr[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:xr,charCode:function(t){return"keypress"===t.type?$r(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?$r(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),ei=Rr.extend({dataTransfer:null}),ni=Sr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:xr}),ri=Kn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ii=Rr.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),oi={eventTypes:je,extractEvents:function(t,e,n,r){var i=Fe.get(t);if(!i)return null;switch(t){case"keypress":if(0===$r(n))return null;case"keydown":case"keyup":t=ti;break;case"blur":case"focus":t=Xr;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=Rr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=ei;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=ni;break;case Wt:case Gt:case Qt:t=Qr;break;case Yt:t=ri;break;case"scroll":t=Sr;break;case"wheel":t=ii;break;case"copy":case"cut":case"paste":t=Yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=Dr;break;default:t=Kn}return jn(e=t.getPooled(i,e,n,r)),e}};if(m)throw Error(a(101));m=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),w(),d=On,v=xn,y=An,k({SimpleEventPlugin:oi,EnterLeaveEventPlugin:Mr,ChangeEventPlugin:Ir,SelectEventPlugin:Gr,BeforeInputEventPlugin:sr});var ai=[],si=-1;function ui(t){0>si||(t.current=ai[si],ai[si]=null,si--)}function ci(t,e){si++,ai[si]=t.current,t.current=e}var li={},hi={current:li},fi={current:!1},pi=li;function di(t,e){var n=t.type.contextTypes;if(!n)return li;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function vi(t){return null!==(t=t.childContextTypes)&&void 0!==t}function yi(){ui(fi),ui(hi)}function gi(t,e,n){if(hi.current!==li)throw Error(a(168));ci(hi,e),ci(fi,n)}function mi(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(a(108,yt(e)||"Unknown",o));return i({},n,{},r)}function bi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||li,pi=hi.current,ci(hi,t),ci(fi,fi.current),!0}function wi(t,e,n){var r=t.stateNode;if(!r)throw Error(a(169));n?(t=mi(t,e,pi),r.__reactInternalMemoizedMergedChildContext=t,ui(fi),ui(hi),ci(hi,t)):ui(fi),ci(fi,n)}var _i=o.unstable_runWithPriority,Ti=o.unstable_scheduleCallback,Ei=o.unstable_cancelCallback,Ii=o.unstable_requestPaint,Si=o.unstable_now,ki=o.unstable_getCurrentPriorityLevel,Ci=o.unstable_ImmediatePriority,xi=o.unstable_UserBlockingPriority,Ai=o.unstable_NormalPriority,Oi=o.unstable_LowPriority,Ni=o.unstable_IdlePriority,Pi={},Ri=o.unstable_shouldYield,Di=void 0!==Ii?Ii:function(){},Li=null,Mi=null,ji=!1,Fi=Si(),Ui=1e4>Fi?Si:function(){return Si()-Fi};function Vi(){switch(ki()){case Ci:return 99;case xi:return 98;case Ai:return 97;case Oi:return 96;case Ni:return 95;default:throw Error(a(332))}}function qi(t){switch(t){case 99:return Ci;case 98:return xi;case 97:return Ai;case 96:return Oi;case 95:return Ni;default:throw Error(a(332))}}function Bi(t,e){return t=qi(t),_i(t,e)}function zi(t,e,n){return t=qi(t),Ti(t,e,n)}function Ki(t){return null===Li?(Li=[t],Mi=Ti(Ci,Wi)):Li.push(t),Pi}function Hi(){if(null!==Mi){var t=Mi;Mi=null,Ei(t)}Wi()}function Wi(){if(!ji&&null!==Li){ji=!0;var t=0;try{var e=Li;Bi(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),Li=null}catch(n){throw null!==Li&&(Li=Li.slice(t+1)),Ti(Ci,Hi),n}finally{ji=!1}}}function Gi(t,e,n){return 1073741821-(1+((1073741821-t+e/10)/(n/=10)|0))*n}function Qi(t,e){if(t&&t.defaultProps)for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}var Yi={current:null},Xi=null,$i=null,Ji=null;function Zi(){Ji=$i=Xi=null}function to(t){var e=Yi.current;ui(Yi),t.type._context._currentValue=e}function eo(t,e){for(;null!==t;){var n=t.alternate;if(t.childExpirationTime<e)t.childExpirationTime=e,null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e);else{if(!(null!==n&&n.childExpirationTime<e))break;n.childExpirationTime=e}t=t.return}}function no(t,e){Xi=t,Ji=$i=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(t.expirationTime>=e&&(Oa=!0),t.firstContext=null)}function ro(t,e){if(Ji!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||(Ji=t,e=1073741823),e={context:t,observedBits:e,next:null},null===$i){if(null===Xi)throw Error(a(308));$i=e,Xi.dependencies={expirationTime:0,firstContext:e,responders:null}}else $i=$i.next=e;return t._currentValue}var io=!1;function oo(t){t.updateQueue={baseState:t.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function ao(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,baseQueue:t.baseQueue,shared:t.shared,effects:t.effects})}function so(t,e){return(t={expirationTime:t,suspenseConfig:e,tag:0,payload:null,callback:null,next:null}).next=t}function uo(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function co(t,e){var n=t.alternate;null!==n&&ao(n,t),null===(n=(t=t.updateQueue).baseQueue)?(t.baseQueue=e.next=e,e.next=e):(e.next=n.next,n.next=e)}function lo(t,e,n,r){var o=t.updateQueue;io=!1;var a=o.baseQueue,s=o.shared.pending;if(null!==s){if(null!==a){var u=a.next;a.next=s.next,s.next=u}a=s,o.shared.pending=null,null!==(u=t.alternate)&&(null!==(u=u.updateQueue)&&(u.baseQueue=s))}if(null!==a){u=a.next;var c=o.baseState,l=0,h=null,f=null,p=null;if(null!==u)for(var d=u;;){if((s=d.expirationTime)<r){var v={expirationTime:d.expirationTime,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null};null===p?(f=p=v,h=c):p=p.next=v,s>l&&(l=s)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null}),ou(s,d.suspenseConfig);t:{var y=t,g=d;switch(s=e,v=n,g.tag){case 1:if("function"===typeof(y=g.payload)){c=y.call(v,c,s);break t}c=y;break t;case 3:y.effectTag=-4097&y.effectTag|64;case 0:if(null===(s="function"===typeof(y=g.payload)?y.call(v,c,s):y)||void 0===s)break t;c=i({},c,s);break t;case 2:io=!0}}null!==d.callback&&(t.effectTag|=32,null===(s=o.effects)?o.effects=[d]:s.push(d))}if(null===(d=d.next)||d===u){if(null===(s=o.shared.pending))break;d=a.next=s.next,s.next=u,o.baseQueue=a=s,o.shared.pending=null}}null===p?h=c:p.next=f,o.baseState=h,o.baseQueue=p,au(l),t.expirationTime=l,t.memoizedState=c}}function ho(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!==typeof r)throw Error(a(191,r));r.call(i)}}}var fo=X.ReactCurrentBatchConfig,po=(new r.Component).refs;function vo(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:i({},e,n),t.memoizedState=n,0===t.expirationTime&&(t.updateQueue.baseState=n)}var yo={isMounted:function(t){return!!(t=t._reactInternalFiber)&&Zt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var r=Ws(),i=fo.suspense;(i=so(r=Gs(r,t,i),i)).payload=e,void 0!==n&&null!==n&&(i.callback=n),uo(t,i),Qs(t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var r=Ws(),i=fo.suspense;(i=so(r=Gs(r,t,i),i)).tag=1,i.payload=e,void 0!==n&&null!==n&&(i.callback=n),uo(t,i),Qs(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=Ws(),r=fo.suspense;(r=so(n=Gs(n,t,r),r)).tag=2,void 0!==e&&null!==e&&(r.callback=e),uo(t,r),Qs(t,n)}};function go(t,e,n,r,i,o,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!Ur(n,r)||!Ur(i,o))}function mo(t,e,n){var r=!1,i=li,o=e.contextType;return"object"===typeof o&&null!==o?o=ro(o):(i=vi(e)?pi:hi.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?di(t,i):li),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=yo,t.stateNode=e,e._reactInternalFiber=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function bo(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&yo.enqueueReplaceState(e,e.state,null)}function wo(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=po,oo(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=ro(o):(o=vi(e)?pi:hi.current,i.context=di(t,o)),lo(t,n,i,r),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(vo(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&yo.enqueueReplaceState(i,i.state,null),lo(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.effectTag|=4)}var _o=Array.isArray;function To(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===po&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}if("string"!==typeof t)throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function Eo(t,e){if("textarea"!==t.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,""))}function Io(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=ku(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.effectTag=2,n):r:(e.effectTag=2,n):n}function s(e){return t&&null===e.alternate&&(e.effectTag=2),e}function u(t,e,n,r){return null===e||6!==e.tag?((e=Au(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function c(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=To(t,e,n),r.return=t,r):((r=Cu(n.type,n.key,n.props,null,t.mode,r)).ref=To(t,e,n),r.return=t,r)}function l(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Ou(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,o){return null===e||7!==e.tag?((e=xu(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function f(t,e,n){if("string"===typeof e||"number"===typeof e)return(e=Au(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case tt:return(n=Cu(e.type,e.key,e.props,null,t.mode,n)).ref=To(t,null,e),n.return=t,n;case et:return(e=Ou(e,t.mode,n)).return=t,e}if(_o(e)||vt(e))return(e=xu(e,t.mode,n,null)).return=t,e;Eo(t,e)}return null}function p(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:u(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case tt:return n.key===i?n.type===nt?h(t,e,n.props.children,r,i):c(t,e,n,r):null;case et:return n.key===i?l(t,e,n,r):null}if(_o(n)||vt(n))return null!==i?null:h(t,e,n,r,null);Eo(t,n)}return null}function d(t,e,n,r,i){if("string"===typeof r||"number"===typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case tt:return t=t.get(null===r.key?n:r.key)||null,r.type===nt?h(e,t,r.props.children,i,r.key):c(e,t,r,i);case et:return l(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(_o(r)||vt(r))return h(e,t=t.get(n)||null,r,i,null);Eo(e,r)}return null}function v(i,a,s,u){for(var c=null,l=null,h=a,v=a=0,y=null;null!==h&&v<s.length;v++){h.index>v?(y=h,h=null):y=h.sibling;var g=p(i,h,s[v],u);if(null===g){null===h&&(h=y);break}t&&h&&null===g.alternate&&e(i,h),a=o(g,a,v),null===l?c=g:l.sibling=g,l=g,h=y}if(v===s.length)return n(i,h),c;if(null===h){for(;v<s.length;v++)null!==(h=f(i,s[v],u))&&(a=o(h,a,v),null===l?c=h:l.sibling=h,l=h);return c}for(h=r(i,h);v<s.length;v++)null!==(y=d(h,i,v,s[v],u))&&(t&&null!==y.alternate&&h.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return t&&h.forEach((function(t){return e(i,t)})),c}function y(i,s,u,c){var l=vt(u);if("function"!==typeof l)throw Error(a(150));if(null==(u=l.call(u)))throw Error(a(151));for(var h=l=null,v=s,y=s=0,g=null,m=u.next();null!==v&&!m.done;y++,m=u.next()){v.index>y?(g=v,v=null):g=v.sibling;var b=p(i,v,m.value,c);if(null===b){null===v&&(v=g);break}t&&v&&null===b.alternate&&e(i,v),s=o(b,s,y),null===h?l=b:h.sibling=b,h=b,v=g}if(m.done)return n(i,v),l;if(null===v){for(;!m.done;y++,m=u.next())null!==(m=f(i,m.value,c))&&(s=o(m,s,y),null===h?l=m:h.sibling=m,h=m);return l}for(v=r(i,v);!m.done;y++,m=u.next())null!==(m=d(v,i,y,m.value,c))&&(t&&null!==m.alternate&&v.delete(null===m.key?y:m.key),s=o(m,s,y),null===h?l=m:h.sibling=m,h=m);return t&&v.forEach((function(t){return e(i,t)})),l}return function(t,r,o,u){var c="object"===typeof o&&null!==o&&o.type===nt&&null===o.key;c&&(o=o.props.children);var l="object"===typeof o&&null!==o;if(l)switch(o.$$typeof){case tt:t:{for(l=o.key,c=r;null!==c;){if(c.key===l){switch(c.tag){case 7:if(o.type===nt){n(t,c.sibling),(r=i(c,o.props.children)).return=t,t=r;break t}break;default:if(c.elementType===o.type){n(t,c.sibling),(r=i(c,o.props)).ref=To(t,c,o),r.return=t,t=r;break t}}n(t,c);break}e(t,c),c=c.sibling}o.type===nt?((r=xu(o.props.children,t.mode,u,o.key)).return=t,t=r):((u=Cu(o.type,o.key,o.props,null,t.mode,u)).ref=To(t,r,o),u.return=t,t=u)}return s(t);case et:t:{for(c=o.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(t,r.sibling),(r=i(r,o.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=Ou(o,t.mode,u)).return=t,t=r}return s(t)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,o)).return=t,t=r):(n(t,r),(r=Au(o,t.mode,u)).return=t,t=r),s(t);if(_o(o))return v(t,r,o,u);if(vt(o))return y(t,r,o,u);if(l&&Eo(t,o),"undefined"===typeof o&&!c)switch(t.tag){case 1:case 0:throw t=t.type,Error(a(152,t.displayName||t.name||"Component"))}return n(t,r)}}var So=Io(!0),ko=Io(!1),Co={},xo={current:Co},Ao={current:Co},Oo={current:Co};function No(t){if(t===Co)throw Error(a(174));return t}function Po(t,e){switch(ci(Oo,e),ci(Ao,t),ci(xo,Co),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:jt(null,"");break;default:e=jt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}ui(xo),ci(xo,e)}function Ro(){ui(xo),ui(Ao),ui(Oo)}function Do(t){No(Oo.current);var e=No(xo.current),n=jt(e,t.type);e!==n&&(ci(Ao,t),ci(xo,n))}function Lo(t){Ao.current===t&&(ui(xo),ui(Ao))}var Mo={current:0};function jo(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.effectTag))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function Fo(t,e){return{responder:t,props:e}}var Uo=X.ReactCurrentDispatcher,Vo=X.ReactCurrentBatchConfig,qo=0,Bo=null,zo=null,Ko=null,Ho=!1;function Wo(){throw Error(a(321))}function Go(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!jr(t[n],e[n]))return!1;return!0}function Qo(t,e,n,r,i,o){if(qo=o,Bo=e,e.memoizedState=null,e.updateQueue=null,e.expirationTime=0,Uo.current=null===t||null===t.memoizedState?ga:ma,t=n(r,i),e.expirationTime===qo){o=0;do{if(e.expirationTime=0,!(25>o))throw Error(a(301));o+=1,Ko=zo=null,e.updateQueue=null,Uo.current=ba,t=n(r,i)}while(e.expirationTime===qo)}if(Uo.current=ya,e=null!==zo&&null!==zo.next,qo=0,Ko=zo=Bo=null,Ho=!1,e)throw Error(a(300));return t}function Yo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ko?Bo.memoizedState=Ko=t:Ko=Ko.next=t,Ko}function Xo(){if(null===zo){var t=Bo.alternate;t=null!==t?t.memoizedState:null}else t=zo.next;var e=null===Ko?Bo.memoizedState:Ko.next;if(null!==e)Ko=e,zo=t;else{if(null===t)throw Error(a(310));t={memoizedState:(zo=t).memoizedState,baseState:zo.baseState,baseQueue:zo.baseQueue,queue:zo.queue,next:null},null===Ko?Bo.memoizedState=Ko=t:Ko=Ko.next=t}return Ko}function $o(t,e){return"function"===typeof e?e(t):e}function Jo(t){var e=Xo(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=zo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=o=null,c=i;do{var l=c.expirationTime;if(l<qo){var h={expirationTime:c.expirationTime,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null};null===u?(s=u=h,o=r):u=u.next=h,l>Bo.expirationTime&&(Bo.expirationTime=l,au(l))}else null!==u&&(u=u.next={expirationTime:1073741823,suspenseConfig:c.suspenseConfig,action:c.action,eagerReducer:c.eagerReducer,eagerState:c.eagerState,next:null}),ou(l,c.suspenseConfig),r=c.eagerReducer===t?c.eagerState:t(r,c.action);c=c.next}while(null!==c&&c!==i);null===u?o=r:u.next=s,jr(r,e.memoizedState)||(Oa=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function Zo(t){var e=Xo(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=t(o,s.action),s=s.next}while(s!==i);jr(o,e.memoizedState)||(Oa=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function ta(t){var e=Yo();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:$o,lastRenderedState:t}).dispatch=va.bind(null,Bo,t),[e.memoizedState,t]}function ea(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=Bo.updateQueue)?(e={lastEffect:null},Bo.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function na(){return Xo().memoizedState}function ra(t,e,n,r){var i=Yo();Bo.effectTag|=t,i.memoizedState=ea(1|e,n,void 0,void 0===r?null:r)}function ia(t,e,n,r){var i=Xo();r=void 0===r?null:r;var o=void 0;if(null!==zo){var a=zo.memoizedState;if(o=a.destroy,null!==r&&Go(r,a.deps))return void ea(e,n,o,r)}Bo.effectTag|=t,i.memoizedState=ea(1|e,n,o,r)}function oa(t,e){return ra(516,4,t,e)}function aa(t,e){return ia(516,4,t,e)}function sa(t,e){return ia(4,2,t,e)}function ua(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function ca(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,ia(4,2,ua.bind(null,e,t),n)}function la(){}function ha(t,e){return Yo().memoizedState=[t,void 0===e?null:e],t}function fa(t,e){var n=Xo();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Go(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function pa(t,e){var n=Xo();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Go(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function da(t,e,n){var r=Vi();Bi(98>r?98:r,(function(){t(!0)})),Bi(97<r?97:r,(function(){var r=Vo.suspense;Vo.suspense=void 0===e?null:e;try{t(!1),n()}finally{Vo.suspense=r}}))}function va(t,e,n){var r=Ws(),i=fo.suspense;i={expirationTime:r=Gs(r,t,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=e.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),e.pending=i,o=t.alternate,t===Bo||null!==o&&o===Bo)Ho=!0,i.expirationTime=qo,Bo.expirationTime=qo;else{if(0===t.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=e.lastRenderedReducer))try{var a=e.lastRenderedState,s=o(a,n);if(i.eagerReducer=o,i.eagerState=s,jr(s,a))return}catch(u){}Qs(t,r)}}var ya={readContext:ro,useCallback:Wo,useContext:Wo,useEffect:Wo,useImperativeHandle:Wo,useLayoutEffect:Wo,useMemo:Wo,useReducer:Wo,useRef:Wo,useState:Wo,useDebugValue:Wo,useResponder:Wo,useDeferredValue:Wo,useTransition:Wo},ga={readContext:ro,useCallback:ha,useContext:ro,useEffect:oa,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,ra(4,2,ua.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ra(4,2,t,e)},useMemo:function(t,e){var n=Yo();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Yo();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=va.bind(null,Bo,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Yo().memoizedState=t},useState:ta,useDebugValue:la,useResponder:Fo,useDeferredValue:function(t,e){var n=ta(t),r=n[0],i=n[1];return oa((function(){var n=Vo.suspense;Vo.suspense=void 0===e?null:e;try{i(t)}finally{Vo.suspense=n}}),[t,e]),r},useTransition:function(t){var e=ta(!1),n=e[0];return e=e[1],[ha(da.bind(null,e,t),[e,t]),n]}},ma={readContext:ro,useCallback:fa,useContext:ro,useEffect:aa,useImperativeHandle:ca,useLayoutEffect:sa,useMemo:pa,useReducer:Jo,useRef:na,useState:function(){return Jo($o)},useDebugValue:la,useResponder:Fo,useDeferredValue:function(t,e){var n=Jo($o),r=n[0],i=n[1];return aa((function(){var n=Vo.suspense;Vo.suspense=void 0===e?null:e;try{i(t)}finally{Vo.suspense=n}}),[t,e]),r},useTransition:function(t){var e=Jo($o),n=e[0];return e=e[1],[fa(da.bind(null,e,t),[e,t]),n]}},ba={readContext:ro,useCallback:fa,useContext:ro,useEffect:aa,useImperativeHandle:ca,useLayoutEffect:sa,useMemo:pa,useReducer:Zo,useRef:na,useState:function(){return Zo($o)},useDebugValue:la,useResponder:Fo,useDeferredValue:function(t,e){var n=Zo($o),r=n[0],i=n[1];return aa((function(){var n=Vo.suspense;Vo.suspense=void 0===e?null:e;try{i(t)}finally{Vo.suspense=n}}),[t,e]),r},useTransition:function(t){var e=Zo($o),n=e[0];return e=e[1],[fa(da.bind(null,e,t),[e,t]),n]}},wa=null,_a=null,Ta=!1;function Ea(t,e){var n=Iu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function Ia(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function Sa(t){if(Ta){var e=_a;if(e){var n=e;if(!Ia(t,e)){if(!(e=_n(n.nextSibling))||!Ia(t,e))return t.effectTag=-1025&t.effectTag|2,Ta=!1,void(wa=t);Ea(wa,n)}wa=t,_a=_n(e.firstChild)}else t.effectTag=-1025&t.effectTag|2,Ta=!1,wa=t}}function ka(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;wa=t}function Ca(t){if(t!==wa)return!1;if(!Ta)return ka(t),Ta=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!mn(e,t.memoizedProps))for(e=_a;e;)Ea(t,e),e=_n(e.nextSibling);if(ka(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(a(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){_a=_n(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}_a=null}}else _a=wa?_n(t.stateNode.nextSibling):null;return!0}function xa(){_a=wa=null,Ta=!1}var Aa=X.ReactCurrentOwner,Oa=!1;function Na(t,e,n,r){e.child=null===t?ko(e,null,n,r):So(e,t.child,n,r)}function Pa(t,e,n,r,i){n=n.render;var o=e.ref;return no(e,i),r=Qo(t,e,n,r,o,i),null===t||Oa?(e.effectTag|=1,Na(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),Qa(t,e,i))}function Ra(t,e,n,r,i,o){if(null===t){var a=n.type;return"function"!==typeof a||Su(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Cu(n.type,null,r,null,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,Da(t,e,a,r,i,o))}return a=t.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:Ur)(i,r)&&t.ref===e.ref)?Qa(t,e,o):(e.effectTag|=1,(t=ku(a,r)).ref=e.ref,t.return=e,e.child=t)}function Da(t,e,n,r,i,o){return null!==t&&Ur(t.memoizedProps,r)&&t.ref===e.ref&&(Oa=!1,i<o)?(e.expirationTime=t.expirationTime,Qa(t,e,o)):Ma(t,e,n,r,o)}function La(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function Ma(t,e,n,r,i){var o=vi(n)?pi:hi.current;return o=di(e,o),no(e,i),n=Qo(t,e,n,r,o,i),null===t||Oa?(e.effectTag|=1,Na(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),Qa(t,e,i))}function ja(t,e,n,r,i){if(vi(n)){var o=!0;bi(e)}else o=!1;if(no(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),mo(e,n,r),wo(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=ro(c):c=di(e,c=vi(n)?pi:hi.current);var l=n.getDerivedStateFromProps,h="function"===typeof l||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&bo(e,a,r,c),io=!1;var f=e.memoizedState;a.state=f,lo(e,r,a,i),u=e.memoizedState,s!==r||f!==u||fi.current||io?("function"===typeof l&&(vo(e,n,l,r),u=e.memoizedState),(s=io||go(e,n,s,r,f,u,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.effectTag|=4)):("function"===typeof a.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=c,r=s):("function"===typeof a.componentDidMount&&(e.effectTag|=4),r=!1)}else a=e.stateNode,ao(t,e),s=e.memoizedProps,a.props=e.type===e.elementType?s:Qi(e.type,s),u=a.context,"object"===typeof(c=n.contextType)&&null!==c?c=ro(c):c=di(e,c=vi(n)?pi:hi.current),(h="function"===typeof(l=n.getDerivedStateFromProps)||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||u!==c)&&bo(e,a,r,c),io=!1,u=e.memoizedState,a.state=u,lo(e,r,a,i),f=e.memoizedState,s!==r||u!==f||fi.current||io?("function"===typeof l&&(vo(e,n,l,r),f=e.memoizedState),(l=io||go(e,n,s,r,u,f,c))?(h||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,c),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,c)),"function"===typeof a.componentDidUpdate&&(e.effectTag|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=f),a.props=r,a.state=f,a.context=c,r=l):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),r=!1);return Fa(t,e,n,r,o,i)}function Fa(t,e,n,r,i,o){La(t,e);var a=0!==(64&e.effectTag);if(!r&&!a)return i&&wi(e,n,!1),Qa(t,e,o);r=e.stateNode,Aa.current=e;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.effectTag|=1,null!==t&&a?(e.child=So(e,t.child,null,o),e.child=So(e,null,s,o)):Na(t,e,s,o),e.memoizedState=r.state,i&&wi(e,n,!0),e.child}function Ua(t){var e=t.stateNode;e.pendingContext?gi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&gi(0,e.context,!1),Po(t,e.containerInfo)}var Va,qa,Ba,za={dehydrated:null,retryTime:0};function Ka(t,e,n){var r,i=e.mode,o=e.pendingProps,a=Mo.current,s=!1;if((r=0!==(64&e.effectTag))||(r=0!==(2&a)&&(null===t||null!==t.memoizedState)),r?(s=!0,e.effectTag&=-65):null!==t&&null===t.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),ci(Mo,1&a),null===t){if(void 0!==o.fallback&&Sa(e),s){if(s=o.fallback,(o=xu(null,i,0,null)).return=e,0===(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=xu(s,i,n,null)).return=e,o.sibling=n,e.memoizedState=za,e.child=o,n}return i=o.children,e.memoizedState=null,e.child=ko(e,null,i,n)}if(null!==t.memoizedState){if(i=(t=t.child).sibling,s){if(o=o.fallback,(n=ku(t,t.pendingProps)).return=e,0===(2&e.mode)&&(s=null!==e.memoizedState?e.child.child:e.child)!==t.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=ku(i,o)).return=e,n.sibling=i,n.childExpirationTime=0,e.memoizedState=za,e.child=n,i}return n=So(e,t.child,o.children,n),e.memoizedState=null,e.child=n}if(t=t.child,s){if(s=o.fallback,(o=xu(null,i,0,null)).return=e,o.child=t,null!==t&&(t.return=o),0===(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=xu(s,i,n,null)).return=e,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,e.memoizedState=za,e.child=o,n}return e.memoizedState=null,e.child=So(e,t,o.children,n)}function Ha(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e),eo(t.return,e)}function Wa(t,e,n,r,i,o){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function Ga(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Na(t,e,r.children,n),0!==(2&(r=Mo.current)))r=1&r|2,e.effectTag|=64;else{if(null!==t&&0!==(64&t.effectTag))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Ha(t,n);else if(19===t.tag)Ha(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ci(Mo,r),0===(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===jo(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Wa(e,!1,i,n,o,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===jo(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Wa(e,!0,n,null,o,e.lastEffect);break;case"together":Wa(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function Qa(t,e,n){null!==t&&(e.dependencies=t.dependencies);var r=e.expirationTime;if(0!==r&&au(r),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child)throw Error(a(153));if(null!==e.child){for(n=ku(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=ku(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Ya(t,e){switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Xa(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return vi(e.type)&&yi(),null;case 3:return Ro(),ui(fi),ui(hi),(n=e.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==t&&null!==t.child||!Ca(e)||(e.effectTag|=4),null;case 5:Lo(e),n=No(Oo.current);var o=e.type;if(null!==t&&null!=e.stateNode)qa(t,e,o,r,n),t.ref!==e.ref&&(e.effectTag|=128);else{if(!r){if(null===e.stateNode)throw Error(a(166));return null}if(t=No(xo.current),Ca(e)){r=e.stateNode,o=e.type;var s=e.memoizedProps;switch(r[In]=e,r[Sn]=s,o){case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(t=0;t<Xt.length;t++)Ge(Xt[t],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"form":Ge("reset",r),Ge("submit",r);break;case"details":Ge("toggle",r);break;case"input":Et(r,s),Ge("invalid",r),un(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ge("invalid",r),un(n,"onChange");break;case"textarea":Nt(r,s),Ge("invalid",r),un(n,"onChange")}for(var u in on(o,s),t=null,s)if(s.hasOwnProperty(u)){var c=s[u];"children"===u?"string"===typeof c?r.textContent!==c&&(t=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(t=["children",""+c]):I.hasOwnProperty(u)&&null!=c&&un(n,u)}switch(o){case"input":wt(r),kt(r,s,!0);break;case"textarea":wt(r),Rt(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=cn)}n=t,e.updateQueue=n,null!==n&&(e.effectTag|=4)}else{switch(u=9===n.nodeType?n:n.ownerDocument,t===sn&&(t=Mt(o)),t===sn?"script"===o?((t=u.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=u.createElement(o,{is:r.is}):(t=u.createElement(o),"select"===o&&(u=t,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):t=u.createElementNS(t,o),t[In]=e,t[Sn]=r,Va(t,e),e.stateNode=t,u=an(o,r),o){case"iframe":case"object":case"embed":Ge("load",t),c=r;break;case"video":case"audio":for(c=0;c<Xt.length;c++)Ge(Xt[c],t);c=r;break;case"source":Ge("error",t),c=r;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),c=r;break;case"form":Ge("reset",t),Ge("submit",t),c=r;break;case"details":Ge("toggle",t),c=r;break;case"input":Et(t,r),c=Tt(t,r),Ge("invalid",t),un(n,"onChange");break;case"option":c=xt(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},c=i({},r,{value:void 0}),Ge("invalid",t),un(n,"onChange");break;case"textarea":Nt(t,r),c=Ot(t,r),Ge("invalid",t),un(n,"onChange");break;default:c=r}on(o,c);var l=c;for(s in l)if(l.hasOwnProperty(s)){var h=l[s];"style"===s?nn(t,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&Ut(t,h):"children"===s?"string"===typeof h?("textarea"!==o||""!==h)&&Vt(t,h):"number"===typeof h&&Vt(t,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(I.hasOwnProperty(s)?null!=h&&un(n,s):null!=h&&$(t,s,h,u))}switch(o){case"input":wt(t),kt(t,r,!1);break;case"textarea":wt(t),Rt(t);break;case"option":null!=r.value&&t.setAttribute("value",""+mt(r.value));break;case"select":t.multiple=!!r.multiple,null!=(n=r.value)?At(t,!!r.multiple,n,!1):null!=r.defaultValue&&At(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof c.onClick&&(t.onclick=cn)}gn(o,r)&&(e.effectTag|=4)}null!==e.ref&&(e.effectTag|=128)}return null;case 6:if(t&&null!=e.stateNode)Ba(0,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(a(166));n=No(Oo.current),No(xo.current),Ca(e)?(n=e.stateNode,r=e.memoizedProps,n[In]=e,n.nodeValue!==r&&(e.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[In]=e,e.stateNode=n)}return null;case 13:return ui(Mo),r=e.memoizedState,0!==(64&e.effectTag)?(e.expirationTime=n,e):(n=null!==r,r=!1,null===t?void 0!==e.memoizedProps.fallback&&Ca(e):(r=null!==(o=t.memoizedState),n||null===o||null!==(o=t.child.sibling)&&(null!==(s=e.firstEffect)?(e.firstEffect=o,o.nextEffect=s):(e.firstEffect=e.lastEffect=o,o.nextEffect=null),o.effectTag=8)),n&&!r&&0!==(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&Mo.current)?Cs===ws&&(Cs=_s):(Cs!==ws&&Cs!==_s||(Cs=Ts),0!==Ps&&null!==Is&&(Ru(Is,ks),Du(Is,Ps)))),(n||r)&&(e.effectTag|=4),null);case 4:return Ro(),null;case 10:return to(e),null;case 17:return vi(e.type)&&yi(),null;case 19:if(ui(Mo),null===(r=e.memoizedState))return null;if(o=0!==(64&e.effectTag),null===(s=r.rendering)){if(o)Ya(r,!1);else if(Cs!==ws||null!==t&&0!==(64&t.effectTag))for(s=e.child;null!==s;){if(null!==(t=jo(s))){for(e.effectTag|=64,Ya(r,!1),null!==(o=t.updateQueue)&&(e.updateQueue=o,e.effectTag|=4),null===r.lastEffect&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=e.child;null!==r;)s=n,(o=r).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(t=o.alternate)?(o.childExpirationTime=0,o.expirationTime=s,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=t.childExpirationTime,o.expirationTime=t.expirationTime,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,s=t.dependencies,o.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),r=r.sibling;return ci(Mo,1&Mo.current|2),e.child}s=s.sibling}}else{if(!o)if(null!==(t=jo(s))){if(e.effectTag|=64,o=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.effectTag|=4),Ya(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate)return null!==(e=e.lastEffect=r.lastEffect)&&(e.nextEffect=null),null}else 2*Ui()-r.renderingStartTime>r.tailExpiration&&1<n&&(e.effectTag|=64,o=!0,Ya(r,!1),e.expirationTime=e.childExpirationTime=n-1);r.isBackwards?(s.sibling=e.child,e.child=s):(null!==(n=r.last)?n.sibling=s:e.child=s,r.last=s)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Ui()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=Ui(),n.sibling=null,e=Mo.current,ci(Mo,o?1&e|2:1&e),n):null}throw Error(a(156,e.tag))}function $a(t){switch(t.tag){case 1:vi(t.type)&&yi();var e=t.effectTag;return 4096&e?(t.effectTag=-4097&e|64,t):null;case 3:if(Ro(),ui(fi),ui(hi),0!==(64&(e=t.effectTag)))throw Error(a(285));return t.effectTag=-4097&e|64,t;case 5:return Lo(t),null;case 13:return ui(Mo),4096&(e=t.effectTag)?(t.effectTag=-4097&e|64,t):null;case 19:return ui(Mo),null;case 4:return Ro(),null;case 10:return to(t),null;default:return null}}function Ja(t,e){return{value:t,source:e,stack:gt(e)}}Va=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},qa=function(t,e,n,r,o){var a=t.memoizedProps;if(a!==r){var s,u,c=e.stateNode;switch(No(xo.current),t=null,n){case"input":a=Tt(c,a),r=Tt(c,r),t=[];break;case"option":a=xt(c,a),r=xt(c,r),t=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),t=[];break;case"textarea":a=Ot(c,a),r=Ot(c,r),t=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(c.onclick=cn)}for(s in on(n,r),n=null,a)if(!r.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(u in c=a[s])c.hasOwnProperty(u)&&(n||(n={}),n[u]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(I.hasOwnProperty(s)?t||(t=[]):(t=t||[]).push(s,null));for(s in r){var l=r[s];if(c=null!=a?a[s]:void 0,r.hasOwnProperty(s)&&l!==c&&(null!=l||null!=c))if("style"===s)if(c){for(u in c)!c.hasOwnProperty(u)||l&&l.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in l)l.hasOwnProperty(u)&&c[u]!==l[u]&&(n||(n={}),n[u]=l[u])}else n||(t||(t=[]),t.push(s,n)),n=l;else"dangerouslySetInnerHTML"===s?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(t=t||[]).push(s,l)):"children"===s?c===l||"string"!==typeof l&&"number"!==typeof l||(t=t||[]).push(s,""+l):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(I.hasOwnProperty(s)?(null!=l&&un(o,s),t||c===l||(t=[])):(t=t||[]).push(s,l))}n&&(t=t||[]).push("style",n),o=t,(e.updateQueue=o)&&(e.effectTag|=4)}},Ba=function(t,e,n,r){n!==r&&(e.effectTag|=4)};var Za="function"===typeof WeakSet?WeakSet:Set;function ts(t,e){var n=e.source,r=e.stack;null===r&&null!==n&&(r=gt(n)),null!==n&&yt(n.type),e=e.value,null!==t&&1===t.tag&&yt(t.type);try{console.error(e)}catch(i){setTimeout((function(){throw i}))}}function es(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(n){mu(t,n)}else e.current=null}function ns(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&e.effectTag&&null!==t){var n=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:Qi(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(a(163))}function rs(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==e)}}function is(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function os(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:return void is(3,n);case 1:if(t=n.stateNode,4&n.effectTag)if(null===e)t.componentDidMount();else{var r=n.elementType===n.type?e.memoizedProps:Qi(n.type,e.memoizedProps);t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate)}return void(null!==(e=n.updateQueue)&&ho(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}ho(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.effectTag&&gn(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Me(n)))));case 19:case 17:case 20:case 21:return}throw Error(a(163))}function as(t,e,n){switch("function"===typeof Tu&&Tu(e),e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var r=t.next;Bi(97<n?97:n,(function(){var t=r;do{var n=t.destroy;if(void 0!==n){var i=e;try{n()}catch(o){mu(i,o)}}t=t.next}while(t!==r)}))}break;case 1:es(e),"function"===typeof(n=e.stateNode).componentWillUnmount&&function(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(n){mu(t,n)}}(e,n);break;case 5:es(e);break;case 4:ls(t,e,n)}}function ss(t){var e=t.alternate;t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.alternate=null,t.firstEffect=null,t.lastEffect=null,t.pendingProps=null,t.memoizedProps=null,t.stateNode=null,null!==e&&ss(e)}function us(t){return 5===t.tag||3===t.tag||4===t.tag}function cs(t){t:{for(var e=t.return;null!==e;){if(us(e)){var n=e;break t}e=e.return}throw Error(a(160))}switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.effectTag&&(Vt(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||us(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}r?function t(e,n,r){var i=e.tag,o=5===i||6===i;if(o)e=o?e.stateNode:e.stateNode.instance,n?8===r.nodeType?r.parentNode.insertBefore(e,n):r.insertBefore(e,n):(8===r.nodeType?(n=r.parentNode).insertBefore(e,r):(n=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==n.onclick||(n.onclick=cn));else if(4!==i&&null!==(e=e.child))for(t(e,n,r),e=e.sibling;null!==e;)t(e,n,r),e=e.sibling}(t,n,e):function t(e,n,r){var i=e.tag,o=5===i||6===i;if(o)e=o?e.stateNode:e.stateNode.instance,n?r.insertBefore(e,n):r.appendChild(e);else if(4!==i&&null!==(e=e.child))for(t(e,n,r),e=e.sibling;null!==e;)t(e,n,r),e=e.sibling}(t,n,e)}function ls(t,e,n){for(var r,i,o=e,s=!1;;){if(!s){s=o.return;t:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break t;case 3:case 4:r=r.containerInfo,i=!0;break t}s=s.return}s=!0}if(5===o.tag||6===o.tag){t:for(var u=t,c=o,l=n,h=c;;)if(as(u,h,l),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===c)break t;for(;null===h.sibling;){if(null===h.return||h.return===c)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(u=r,c=o.stateNode,8===u.nodeType?u.parentNode.removeChild(c):u.removeChild(c)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(as(t,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function hs(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:return void rs(3,e);case 1:return;case 5:var n=e.stateNode;if(null!=n){var r=e.memoizedProps,i=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[Sn]=r,"input"===t&&"radio"===r.type&&null!=r.name&&It(n,r),an(t,i),e=an(t,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?nn(n,u):"dangerouslySetInnerHTML"===s?Ut(n,u):"children"===s?Vt(n,u):$(n,s,u,e)}switch(t){case"input":St(n,r);break;case"textarea":Pt(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(t=r.value)?At(n,!!r.multiple,t,!1):e!==!!r.multiple&&(null!=r.defaultValue?At(n,!!r.multiple,r.defaultValue,!0):At(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(a(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((e=e.stateNode).hydrate&&(e.hydrate=!1,Me(e.containerInfo)));case 12:return;case 13:if(n=e,null===e.memoizedState?r=!1:(r=!0,n=e.child,Ds=Ui()),null!==n)t:for(t=n;;){if(5===t.tag)o=t.stateNode,r?"function"===typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=t.stateNode,i=void 0!==(i=t.memoizedProps.style)&&null!==i&&i.hasOwnProperty("display")?i.display:null,o.style.display=en("display",i));else if(6===t.tag)t.stateNode.nodeValue=r?"":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState&&null===t.memoizedState.dehydrated){(o=t.child.sibling).return=t,t=o;continue}if(null!==t.child){t.child.return=t,t=t.child;continue}}if(t===n)break;for(;null===t.sibling;){if(null===t.return||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}return void fs(e);case 19:return void fs(e);case 17:return}throw Error(a(163))}function fs(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Za),e.forEach((function(e){var r=wu.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}var ps="function"===typeof WeakMap?WeakMap:Map;function ds(t,e,n){(n=so(n,null)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ms||(Ms=!0,js=r),ts(t,e)},n}function vs(t,e,n){(n=so(n,null)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return ts(t,e),r(i)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Fs?Fs=new Set([this]):Fs.add(this),ts(t,e));var n=e.stack;this.componentDidCatch(e.value,{componentStack:null!==n?n:""})}),n}var ys,gs=Math.ceil,ms=X.ReactCurrentDispatcher,bs=X.ReactCurrentOwner,ws=0,_s=3,Ts=4,Es=0,Is=null,Ss=null,ks=0,Cs=ws,xs=null,As=1073741823,Os=1073741823,Ns=null,Ps=0,Rs=!1,Ds=0,Ls=null,Ms=!1,js=null,Fs=null,Us=!1,Vs=null,qs=90,Bs=null,zs=0,Ks=null,Hs=0;function Ws(){return 0!==(48&Es)?1073741821-(Ui()/10|0):0!==Hs?Hs:Hs=1073741821-(Ui()/10|0)}function Gs(t,e,n){if(0===(2&(e=e.mode)))return 1073741823;var r=Vi();if(0===(4&e))return 99===r?1073741823:1073741822;if(0!==(16&Es))return ks;if(null!==n)t=Gi(t,0|n.timeoutMs||5e3,250);else switch(r){case 99:t=1073741823;break;case 98:t=Gi(t,150,100);break;case 97:case 96:t=Gi(t,5e3,250);break;case 95:t=2;break;default:throw Error(a(326))}return null!==Is&&t===ks&&--t,t}function Qs(t,e){if(50<zs)throw zs=0,Ks=null,Error(a(185));if(null!==(t=Ys(t,e))){var n=Vi();1073741823===e?0!==(8&Es)&&0===(48&Es)?Zs(t):($s(t),0===Es&&Hi()):$s(t),0===(4&Es)||98!==n&&99!==n||(null===Bs?Bs=new Map([[t,e]]):(void 0===(n=Bs.get(t))||n>e)&&Bs.set(t,e))}}function Ys(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var r=t.return,i=null;if(null===r&&3===t.tag)i=t.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<e&&(r.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(Is===i&&(au(e),Cs===Ts&&Ru(i,ks)),Du(i,e)),i}function Xs(t){var e=t.lastExpiredTime;if(0!==e)return e;if(!Pu(t,e=t.firstPendingTime))return e;var n=t.lastPingedTime;return 2>=(t=n>(t=t.nextKnownPendingLevel)?n:t)&&e!==t?0:t}function $s(t){if(0!==t.lastExpiredTime)t.callbackExpirationTime=1073741823,t.callbackPriority=99,t.callbackNode=Ki(Zs.bind(null,t));else{var e=Xs(t),n=t.callbackNode;if(0===e)null!==n&&(t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90);else{var r=Ws();if(1073741823===e?r=99:1===e||2===e?r=95:r=0>=(r=10*(1073741821-e)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=t.callbackPriority;if(t.callbackExpirationTime===e&&i>=r)return;n!==Pi&&Ei(n)}t.callbackExpirationTime=e,t.callbackPriority=r,e=1073741823===e?Ki(Zs.bind(null,t)):zi(r,Js.bind(null,t),{timeout:10*(1073741821-e)-Ui()}),t.callbackNode=e}}}function Js(t,e){if(Hs=0,e)return Lu(t,e=Ws()),$s(t),null;var n=Xs(t);if(0!==n){if(e=t.callbackNode,0!==(48&Es))throw Error(a(327));if(vu(),t===Is&&n===ks||nu(t,n),null!==Ss){var r=Es;Es|=16;for(var i=iu();;)try{uu();break}catch(u){ru(t,u)}if(Zi(),Es=r,ms.current=i,1===Cs)throw e=xs,nu(t,n),Ru(t,n),$s(t),e;if(null===Ss)switch(i=t.finishedWork=t.current.alternate,t.finishedExpirationTime=n,r=Cs,Is=null,r){case ws:case 1:throw Error(a(345));case 2:Lu(t,2<n?2:n);break;case _s:if(Ru(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=hu(i)),1073741823===As&&10<(i=Ds+500-Ui())){if(Rs){var o=t.lastPingedTime;if(0===o||o>=n){t.lastPingedTime=n,nu(t,n);break}}if(0!==(o=Xs(t))&&o!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}t.timeoutHandle=bn(fu.bind(null,t),i);break}fu(t);break;case Ts:if(Ru(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=hu(i)),Rs&&(0===(i=t.lastPingedTime)||i>=n)){t.lastPingedTime=n,nu(t,n);break}if(0!==(i=Xs(t))&&i!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}if(1073741823!==Os?r=10*(1073741821-Os)-Ui():1073741823===As?r=0:(r=10*(1073741821-As)-5e3,0>(r=(i=Ui())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*gs(r/1960))-r)&&(r=n)),10<r){t.timeoutHandle=bn(fu.bind(null,t),r);break}fu(t);break;case 5:if(1073741823!==As&&null!==Ns){o=As;var s=Ns;if(0>=(r=0|s.busyMinDurationMs)?r=0:(i=0|s.busyDelayMs,r=(o=Ui()-(10*(1073741821-o)-(0|s.timeoutMs||5e3)))<=i?0:i+r-o),10<r){Ru(t,n),t.timeoutHandle=bn(fu.bind(null,t),r);break}}fu(t);break;default:throw Error(a(329))}if($s(t),t.callbackNode===e)return Js.bind(null,t)}}return null}function Zs(t){var e=t.lastExpiredTime;if(e=0!==e?e:1073741823,0!==(48&Es))throw Error(a(327));if(vu(),t===Is&&e===ks||nu(t,e),null!==Ss){var n=Es;Es|=16;for(var r=iu();;)try{su();break}catch(i){ru(t,i)}if(Zi(),Es=n,ms.current=r,1===Cs)throw n=xs,nu(t,e),Ru(t,e),$s(t),n;if(null!==Ss)throw Error(a(261));t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,Is=null,fu(t),$s(t)}return null}function tu(t,e){var n=Es;Es|=1;try{return t(e)}finally{0===(Es=n)&&Hi()}}function eu(t,e){var n=Es;Es&=-2,Es|=8;try{return t(e)}finally{0===(Es=n)&&Hi()}}function nu(t,e){t.finishedWork=null,t.finishedExpirationTime=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,wn(n)),null!==Ss)for(n=Ss.return;null!==n;){var r=n;switch(r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&yi();break;case 3:Ro(),ui(fi),ui(hi);break;case 5:Lo(r);break;case 4:Ro();break;case 13:case 19:ui(Mo);break;case 10:to(r)}n=n.return}Is=t,Ss=ku(t.current,null),ks=e,Cs=ws,xs=null,Os=As=1073741823,Ns=null,Ps=0,Rs=!1}function ru(t,e){for(;;){try{if(Zi(),Uo.current=ya,Ho)for(var n=Bo.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(qo=0,Ko=zo=Bo=null,Ho=!1,null===Ss||null===Ss.return)return Cs=1,xs=e,Ss=null;t:{var i=t,o=Ss.return,a=Ss,s=e;if(e=ks,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==s&&"object"===typeof s&&"function"===typeof s.then){var u=s;if(0===(2&a.mode)){var c=a.alternate;c?(a.updateQueue=c.updateQueue,a.memoizedState=c.memoizedState,a.expirationTime=c.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var l=0!==(1&Mo.current),h=o;do{var f;if(f=13===h.tag){var p=h.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var d=h.memoizedProps;f=void 0!==d.fallback&&(!0!==d.unstable_avoidThisFallback||!l)}}if(f){var v=h.updateQueue;if(null===v){var y=new Set;y.add(u),h.updateQueue=y}else v.add(u);if(0===(2&h.mode)){if(h.effectTag|=64,a.effectTag&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var g=so(1073741823,null);g.tag=2,uo(a,g)}a.expirationTime=1073741823;break t}s=void 0,a=e;var m=i.pingCache;if(null===m?(m=i.pingCache=new ps,s=new Set,m.set(u,s)):void 0===(s=m.get(u))&&(s=new Set,m.set(u,s)),!s.has(a)){s.add(a);var b=bu.bind(null,i,u,a);u.then(b,b)}h.effectTag|=4096,h.expirationTime=e;break t}h=h.return}while(null!==h);s=Error((yt(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+gt(a))}5!==Cs&&(Cs=2),s=Ja(s,a),h=o;do{switch(h.tag){case 3:u=s,h.effectTag|=4096,h.expirationTime=e,co(h,ds(h,u,e));break t;case 1:u=s;var w=h.type,_=h.stateNode;if(0===(64&h.effectTag)&&("function"===typeof w.getDerivedStateFromError||null!==_&&"function"===typeof _.componentDidCatch&&(null===Fs||!Fs.has(_)))){h.effectTag|=4096,h.expirationTime=e,co(h,vs(h,u,e));break t}}h=h.return}while(null!==h)}Ss=lu(Ss)}catch(T){e=T;continue}break}}function iu(){var t=ms.current;return ms.current=ya,null===t?ya:t}function ou(t,e){t<As&&2<t&&(As=t),null!==e&&t<Os&&2<t&&(Os=t,Ns=e)}function au(t){t>Ps&&(Ps=t)}function su(){for(;null!==Ss;)Ss=cu(Ss)}function uu(){for(;null!==Ss&&!Ri();)Ss=cu(Ss)}function cu(t){var e=ys(t.alternate,t,ks);return t.memoizedProps=t.pendingProps,null===e&&(e=lu(t)),bs.current=null,e}function lu(t){Ss=t;do{var e=Ss.alternate;if(t=Ss.return,0===(2048&Ss.effectTag)){if(e=Xa(e,Ss,ks),1===ks||1!==Ss.childExpirationTime){for(var n=0,r=Ss.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}Ss.childExpirationTime=n}if(null!==e)return e;null!==t&&0===(2048&t.effectTag)&&(null===t.firstEffect&&(t.firstEffect=Ss.firstEffect),null!==Ss.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=Ss.firstEffect),t.lastEffect=Ss.lastEffect),1<Ss.effectTag&&(null!==t.lastEffect?t.lastEffect.nextEffect=Ss:t.firstEffect=Ss,t.lastEffect=Ss))}else{if(null!==(e=$a(Ss)))return e.effectTag&=2047,e;null!==t&&(t.firstEffect=t.lastEffect=null,t.effectTag|=2048)}if(null!==(e=Ss.sibling))return e;Ss=t}while(null!==Ss);return Cs===ws&&(Cs=5),null}function hu(t){var e=t.expirationTime;return e>(t=t.childExpirationTime)?e:t}function fu(t){var e=Vi();return Bi(99,pu.bind(null,t,e)),null}function pu(t,e){do{vu()}while(null!==Vs);if(0!==(48&Es))throw Error(a(327));var n=t.finishedWork,r=t.finishedExpirationTime;if(null===n)return null;if(t.finishedWork=null,t.finishedExpirationTime=0,n===t.current)throw Error(a(177));t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90,t.nextKnownPendingLevel=0;var i=hu(n);if(t.firstPendingTime=i,r<=t.lastSuspendedTime?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:r<=t.firstSuspendedTime&&(t.firstSuspendedTime=r-1),r<=t.lastPingedTime&&(t.lastPingedTime=0),r<=t.lastExpiredTime&&(t.lastExpiredTime=0),t===Is&&(Ss=Is=null,ks=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Es;Es|=32,bs.current=null,vn=We;var s=pn();if(dn(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else t:{var c=(u=(u=s.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(c&&0!==c.rangeCount){u=c.anchorNode;var l=c.anchorOffset,h=c.focusNode;c=c.focusOffset;try{u.nodeType,h.nodeType}catch(k){u=null;break t}var f=0,p=-1,d=-1,v=0,y=0,g=s,m=null;e:for(;;){for(var b;g!==u||0!==l&&3!==g.nodeType||(p=f+l),g!==h||0!==c&&3!==g.nodeType||(d=f+c),3===g.nodeType&&(f+=g.nodeValue.length),null!==(b=g.firstChild);)m=g,g=b;for(;;){if(g===s)break e;if(m===u&&++v===l&&(p=f),m===h&&++y===c&&(d=f),null!==(b=g.nextSibling))break;m=(g=m).parentNode}g=b}u=-1===p||-1===d?null:{start:p,end:d}}else u=null}u=u||{start:0,end:0}}else u=null;yn={activeElementDetached:null,focusedElem:s,selectionRange:u},We=!1,Ls=i;do{try{du()}catch(k){if(null===Ls)throw Error(a(330));mu(Ls,k),Ls=Ls.nextEffect}}while(null!==Ls);Ls=i;do{try{for(s=t,u=e;null!==Ls;){var w=Ls.effectTag;if(16&w&&Vt(Ls.stateNode,""),128&w){var _=Ls.alternate;if(null!==_){var T=_.ref;null!==T&&("function"===typeof T?T(null):T.current=null)}}switch(1038&w){case 2:cs(Ls),Ls.effectTag&=-3;break;case 6:cs(Ls),Ls.effectTag&=-3,hs(Ls.alternate,Ls);break;case 1024:Ls.effectTag&=-1025;break;case 1028:Ls.effectTag&=-1025,hs(Ls.alternate,Ls);break;case 4:hs(Ls.alternate,Ls);break;case 8:ls(s,l=Ls,u),ss(l)}Ls=Ls.nextEffect}}catch(k){if(null===Ls)throw Error(a(330));mu(Ls,k),Ls=Ls.nextEffect}}while(null!==Ls);if(T=yn,_=pn(),w=T.focusedElem,u=T.selectionRange,_!==w&&w&&w.ownerDocument&&function t(e,n){return!(!e||!n)&&(e===n||(!e||3!==e.nodeType)&&(n&&3===n.nodeType?t(e,n.parentNode):"contains"in e?e.contains(n):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(n))))}(w.ownerDocument.documentElement,w)){null!==u&&dn(w)&&(_=u.start,void 0===(T=u.end)&&(T=_),"selectionStart"in w?(w.selectionStart=_,w.selectionEnd=Math.min(T,w.value.length)):(T=(_=w.ownerDocument||document)&&_.defaultView||window).getSelection&&(T=T.getSelection(),l=w.textContent.length,s=Math.min(u.start,l),u=void 0===u.end?s:Math.min(u.end,l),!T.extend&&s>u&&(l=u,u=s,s=l),l=fn(w,s),h=fn(w,u),l&&h&&(1!==T.rangeCount||T.anchorNode!==l.node||T.anchorOffset!==l.offset||T.focusNode!==h.node||T.focusOffset!==h.offset)&&((_=_.createRange()).setStart(l.node,l.offset),T.removeAllRanges(),s>u?(T.addRange(_),T.extend(h.node,h.offset)):(_.setEnd(h.node,h.offset),T.addRange(_))))),_=[];for(T=w;T=T.parentNode;)1===T.nodeType&&_.push({element:T,left:T.scrollLeft,top:T.scrollTop});for("function"===typeof w.focus&&w.focus(),w=0;w<_.length;w++)(T=_[w]).element.scrollLeft=T.left,T.element.scrollTop=T.top}We=!!vn,yn=vn=null,t.current=n,Ls=i;do{try{for(w=t;null!==Ls;){var E=Ls.effectTag;if(36&E&&os(w,Ls.alternate,Ls),128&E){_=void 0;var I=Ls.ref;if(null!==I){var S=Ls.stateNode;switch(Ls.tag){case 5:_=S;break;default:_=S}"function"===typeof I?I(_):I.current=_}}Ls=Ls.nextEffect}}catch(k){if(null===Ls)throw Error(a(330));mu(Ls,k),Ls=Ls.nextEffect}}while(null!==Ls);Ls=null,Di(),Es=o}else t.current=n;if(Us)Us=!1,Vs=t,qs=e;else for(Ls=i;null!==Ls;)e=Ls.nextEffect,Ls.nextEffect=null,Ls=e;if(0===(e=t.firstPendingTime)&&(Fs=null),1073741823===e?t===Ks?zs++:(zs=0,Ks=t):zs=0,"function"===typeof _u&&_u(n.stateNode,r),$s(t),Ms)throw Ms=!1,t=js,js=null,t;return 0!==(8&Es)||Hi(),null}function du(){for(;null!==Ls;){var t=Ls.effectTag;0!==(256&t)&&ns(Ls.alternate,Ls),0===(512&t)||Us||(Us=!0,zi(97,(function(){return vu(),null}))),Ls=Ls.nextEffect}}function vu(){if(90!==qs){var t=97<qs?97:qs;return qs=90,Bi(t,yu)}}function yu(){if(null===Vs)return!1;var t=Vs;if(Vs=null,0!==(48&Es))throw Error(a(331));var e=Es;for(Es|=32,t=t.current.firstEffect;null!==t;){try{var n=t;if(0!==(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:rs(5,n),is(5,n)}}catch(r){if(null===t)throw Error(a(330));mu(t,r)}n=t.nextEffect,t.nextEffect=null,t=n}return Es=e,Hi(),!0}function gu(t,e,n){uo(t,e=ds(t,e=Ja(n,e),1073741823)),null!==(t=Ys(t,1073741823))&&$s(t)}function mu(t,e){if(3===t.tag)gu(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){gu(n,t,e);break}if(1===n.tag){var r=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Fs||!Fs.has(r))){uo(n,t=vs(n,t=Ja(e,t),1073741823)),null!==(n=Ys(n,1073741823))&&$s(n);break}}n=n.return}}function bu(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),Is===t&&ks===n?Cs===Ts||Cs===_s&&1073741823===As&&Ui()-Ds<500?nu(t,ks):Rs=!0:Pu(t,n)&&(0!==(e=t.lastPingedTime)&&e<n||(t.lastPingedTime=n,$s(t)))}function wu(t,e){var n=t.stateNode;null!==n&&n.delete(e),0===(e=0)&&(e=Gs(e=Ws(),t,null)),null!==(t=Ys(t,e))&&$s(t)}ys=function(t,e,n){var r=e.expirationTime;if(null!==t){var i=e.pendingProps;if(t.memoizedProps!==i||fi.current)Oa=!0;else{if(r<n){switch(Oa=!1,e.tag){case 3:Ua(e),xa();break;case 5:if(Do(e),4&e.mode&&1!==n&&i.hidden)return e.expirationTime=e.childExpirationTime=1,null;break;case 1:vi(e.type)&&bi(e);break;case 4:Po(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value,i=e.type._context,ci(Yi,i._currentValue),i._currentValue=r;break;case 13:if(null!==e.memoizedState)return 0!==(r=e.child.childExpirationTime)&&r>=n?Ka(t,e,n):(ci(Mo,1&Mo.current),null!==(e=Qa(t,e,n))?e.sibling:null);ci(Mo,1&Mo.current);break;case 19:if(r=e.childExpirationTime>=n,0!==(64&t.effectTag)){if(r)return Ga(t,e,n);e.effectTag|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null),ci(Mo,Mo.current),!r)return null}return Qa(t,e,n)}Oa=!1}}else Oa=!1;switch(e.expirationTime=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,i=di(e,hi.current),no(e,n),i=Qo(null,e,r,t,i,n),e.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,vi(r)){var o=!0;bi(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,oo(e);var s=r.getDerivedStateFromProps;"function"===typeof s&&vo(e,r,s,t),i.updater=yo,e.stateNode=i,i._reactInternalFiber=e,wo(e,r,t,n),e=Fa(null,e,r,!0,o,n)}else e.tag=0,Na(null,e,i,n),e=e.child;return e;case 16:t:{if(i=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,function(t){if(-1===t._status){t._status=0;var e=t._ctor;e=e(),t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,e.type=i,o=e.tag=function(t){if("function"===typeof t)return Su(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===ut)return 11;if(t===ht)return 14}return 2}(i),t=Qi(i,t),o){case 0:e=Ma(null,e,i,t,n);break t;case 1:e=ja(null,e,i,t,n);break t;case 11:e=Pa(null,e,i,t,n);break t;case 14:e=Ra(null,e,i,Qi(i.type,t),r,n);break t}throw Error(a(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,Ma(t,e,r,i=e.elementType===r?i:Qi(r,i),n);case 1:return r=e.type,i=e.pendingProps,ja(t,e,r,i=e.elementType===r?i:Qi(r,i),n);case 3:if(Ua(e),r=e.updateQueue,null===t||null===r)throw Error(a(282));if(r=e.pendingProps,i=null!==(i=e.memoizedState)?i.element:null,ao(t,e),lo(e,r,null,n),(r=e.memoizedState.element)===i)xa(),e=Qa(t,e,n);else{if((i=e.stateNode.hydrate)&&(_a=_n(e.stateNode.containerInfo.firstChild),wa=e,i=Ta=!0),i)for(n=ko(e,null,r,n),e.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Na(t,e,r,n),xa();e=e.child}return e;case 5:return Do(e),null===t&&Sa(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,s=i.children,mn(r,i)?s=null:null!==o&&mn(r,o)&&(e.effectTag|=16),La(t,e),4&e.mode&&1!==n&&i.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(Na(t,e,s,n),e=e.child),e;case 6:return null===t&&Sa(e),null;case 13:return Ka(t,e,n);case 4:return Po(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=So(e,null,r,n):Na(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,Pa(t,e,r,i=e.elementType===r?i:Qi(r,i),n);case 7:return Na(t,e,e.pendingProps,n),e.child;case 8:case 12:return Na(t,e,e.pendingProps.children,n),e.child;case 10:t:{r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value;var u=e.type._context;if(ci(Yi,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0===(o=jr(u,o)?0:0|("function"===typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!fi.current){e=Qa(t,e,n);break t}}else for(null!==(u=e.child)&&(u.return=e);null!==u;){var c=u.dependencies;if(null!==c){s=u.child;for(var l=c.firstContext;null!==l;){if(l.context===r&&0!==(l.observedBits&o)){1===u.tag&&((l=so(n,null)).tag=2,uo(u,l)),u.expirationTime<n&&(u.expirationTime=n),null!==(l=u.alternate)&&l.expirationTime<n&&(l.expirationTime=n),eo(u.return,n),c.expirationTime<n&&(c.expirationTime=n);break}l=l.next}}else s=10===u.tag&&u.type===e.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===e){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Na(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(o=e.pendingProps).children,no(e,n),r=r(i=ro(i,o.unstable_observedBits)),e.effectTag|=1,Na(t,e,r,n),e.child;case 14:return o=Qi(i=e.type,e.pendingProps),Ra(t,e,i,o=Qi(i.type,o),r,n);case 15:return Da(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Qi(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,vi(r)?(t=!0,bi(e)):t=!1,no(e,n),mo(e,r,i),wo(e,r,i,n),Fa(null,e,r,!0,t,n);case 19:return Ga(t,e,n)}throw Error(a(156,e.tag))};var _u=null,Tu=null;function Eu(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Iu(t,e,n,r){return new Eu(t,e,n,r)}function Su(t){return!(!(t=t.prototype)||!t.isReactComponent)}function ku(t,e){var n=t.alternate;return null===n?((n=Iu(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{expirationTime:e.expirationTime,firstContext:e.firstContext,responders:e.responders},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Cu(t,e,n,r,i,o){var s=2;if(r=t,"function"===typeof t)Su(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case nt:return xu(n.children,i,o,e);case st:s=8,i|=7;break;case rt:s=8,i|=1;break;case it:return(t=Iu(12,n,e,8|i)).elementType=it,t.type=it,t.expirationTime=o,t;case ct:return(t=Iu(13,n,e,i)).type=ct,t.elementType=ct,t.expirationTime=o,t;case lt:return(t=Iu(19,n,e,i)).elementType=lt,t.expirationTime=o,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case ot:s=10;break t;case at:s=9;break t;case ut:s=11;break t;case ht:s=14;break t;case ft:s=16,r=null;break t;case pt:s=22;break t}throw Error(a(130,null==t?t:typeof t,""))}return(e=Iu(s,n,e,i)).elementType=t,e.type=r,e.expirationTime=o,e}function xu(t,e,n,r){return(t=Iu(7,t,r,e)).expirationTime=n,t}function Au(t,e,n){return(t=Iu(6,t,null,e)).expirationTime=n,t}function Ou(t,e,n){return(e=Iu(4,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Nu(t,e,n){this.tag=e,this.current=null,this.containerInfo=t,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Pu(t,e){var n=t.firstSuspendedTime;return t=t.lastSuspendedTime,0!==n&&n>=e&&t<=e}function Ru(t,e){var n=t.firstSuspendedTime,r=t.lastSuspendedTime;n<e&&(t.firstSuspendedTime=e),(r>e||0===n)&&(t.lastSuspendedTime=e),e<=t.lastPingedTime&&(t.lastPingedTime=0),e<=t.lastExpiredTime&&(t.lastExpiredTime=0)}function Du(t,e){e>t.firstPendingTime&&(t.firstPendingTime=e);var n=t.firstSuspendedTime;0!==n&&(e>=n?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:e>=t.lastSuspendedTime&&(t.lastSuspendedTime=e+1),e>t.nextKnownPendingLevel&&(t.nextKnownPendingLevel=e))}function Lu(t,e){var n=t.lastExpiredTime;(0===n||n>e)&&(t.lastExpiredTime=e)}function Mu(t,e,n,r){var i=e.current,o=Ws(),s=fo.suspense;o=Gs(o,i,s);t:if(n){e:{if(Zt(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(vi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var c=n.type;if(vi(c)){n=mi(n,c,u);break t}}n=u}else n=li;return null===e.context?e.context=n:e.pendingContext=n,(e=so(o,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),uo(i,e),Qs(i,o),o}function ju(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function Fu(t,e){null!==(t=t.memoizedState)&&null!==t.dehydrated&&t.retryTime<e&&(t.retryTime=e)}function Uu(t,e){Fu(t,e),(t=t.alternate)&&Fu(t,e)}function Vu(t,e,n){var r=new Nu(t,e,n=null!=n&&!0===n.hydrate),i=Iu(3,null,null,2===e?7:1===e?3:0);r.current=i,i.stateNode=r,oo(i),t[kn]=r.current,n&&0!==e&&function(t,e){var n=Jt(e);ke.forEach((function(t){de(t,e,n)})),Ce.forEach((function(t){de(t,e,n)}))}(0,9===t.nodeType?t:t.ownerDocument),this._internalRoot=r}function qu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Bu(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof i){var s=i;i=function(){var t=ju(a);s.call(t)}}Mu(e,a,t,i)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new Vu(t,0,e?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"===typeof i){var u=i;i=function(){var t=ju(a);u.call(t)}}eu((function(){Mu(e,a,t,i)}))}return ju(a)}function zu(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:et,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}function Ku(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!qu(e))throw Error(a(200));return zu(t,e,null,n)}Vu.prototype.render=function(t){Mu(t,this._internalRoot,null,null)},Vu.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Mu(null,t,null,(function(){e[kn]=null}))},ve=function(t){if(13===t.tag){var e=Gi(Ws(),150,100);Qs(t,e),Uu(t,e)}},ye=function(t){13===t.tag&&(Qs(t,3),Uu(t,3))},ge=function(t){if(13===t.tag){var e=Ws();Qs(t,e=Gs(e,t,null)),Uu(t,e)}},x=function(t,e,n){switch(e){case"input":if(St(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=On(r);if(!i)throw Error(a(90));_t(r),St(r,i)}}}break;case"textarea":Pt(t,n);break;case"select":null!=(e=n.value)&&At(t,!!n.multiple,e,!1)}},D=tu,L=function(t,e,n,r,i){var o=Es;Es|=4;try{return Bi(98,t.bind(null,e,n,r,i))}finally{0===(Es=o)&&Hi()}},M=function(){0===(49&Es)&&(function(){if(null!==Bs){var t=Bs;Bs=null,t.forEach((function(t,e){Lu(e,t),$s(e)})),Hi()}}(),vu())},j=function(t,e){var n=Es;Es|=2;try{return t(e)}finally{0===(Es=n)&&Hi()}};var Hu={Events:[xn,An,On,k,E,jn,function(t){ie(t,Mn)},P,R,$e,se,vu,{current:!1}]};!function(t){var e=t.findFiberByHostInstance;(function(t){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);_u=function(t){try{e.onCommitFiberRoot(n,t,void 0,64===(64&t.current.effectTag))}catch(r){}},Tu=function(t){try{e.onCommitFiberUnmount(n,t)}catch(r){}}}catch(r){}})(i({},t,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:X.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=ne(t))?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Cn,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"}),e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hu,e.createPortal=Ku,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternalFiber;if(void 0===e){if("function"===typeof t.render)throw Error(a(188));throw Error(a(268,Object.keys(t)))}return t=null===(t=ne(e))?null:t.stateNode},e.flushSync=function(t,e){if(0!==(48&Es))throw Error(a(187));var n=Es;Es|=1;try{return Bi(99,t.bind(null,e))}finally{Es=n,Hi()}},e.hydrate=function(t,e,n){if(!qu(e))throw Error(a(200));return Bu(null,t,e,!0,n)},e.render=function(t,e,n){if(!qu(e))throw Error(a(200));return Bu(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!qu(t))throw Error(a(40));return!!t._reactRootContainer&&(eu((function(){Bu(null,null,t,!1,(function(){t._reactRootContainer=null,t[kn]=null}))})),!0)},e.unstable_batchedUpdates=tu,e.unstable_createPortal=function(t,e){return Ku(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!qu(n))throw Error(a(200));if(null==t||void 0===t._reactInternalFiber)throw Error(a(38));return Bu(t,e,n,!1,r)},e.version="16.13.1"},function(t,e,n){"use strict";t.exports=n(25)},function(t,e,n){"use strict";var r,i,o,a,s;if("undefined"===typeof window||"function"!==typeof MessageChannel){var u=null,c=null,l=function t(){if(null!==u)try{var n=e.unstable_now();u(!0,n),u=null}catch(r){throw setTimeout(t,0),r}},h=Date.now();e.unstable_now=function(){return Date.now()-h},r=function(t){null!==u?setTimeout(r,0,t):(u=t,setTimeout(l,0))},i=function(t,e){c=setTimeout(t,e)},o=function(){clearTimeout(c)},a=function(){return!1},s=e.unstable_forceFrameRate=function(){}}else{var f=window.performance,p=window.Date,d=window.setTimeout,v=window.clearTimeout;if("undefined"!==typeof console){var y=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!==typeof y&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"===typeof f&&"function"===typeof f.now)e.unstable_now=function(){return f.now()};else{var g=p.now();e.unstable_now=function(){return p.now()-g}}var m=!1,b=null,w=-1,_=5,T=0;a=function(){return e.unstable_now()>=T},s=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):_=0<t?Math.floor(1e3/t):5};var E=new MessageChannel,I=E.port2;E.port1.onmessage=function(){if(null!==b){var t=e.unstable_now();T=t+_;try{b(!0,t)?I.postMessage(null):(m=!1,b=null)}catch(n){throw I.postMessage(null),n}}else m=!1},r=function(t){b=t,m||(m=!0,I.postMessage(null))},i=function(t,n){w=d((function(){t(e.unstable_now())}),n)},o=function(){v(w),w=-1}}function S(t,e){var n=t.length;t.push(e);t:for(;;){var r=n-1>>>1,i=t[r];if(!(void 0!==i&&0<x(i,e)))break t;t[r]=e,t[n]=i,n=r}}function k(t){return void 0===(t=t[0])?null:t}function C(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length;r<i;){var o=2*(r+1)-1,a=t[o],s=o+1,u=t[s];if(void 0!==a&&0>x(a,n))void 0!==u&&0>x(u,a)?(t[r]=u,t[s]=n,r=s):(t[r]=a,t[o]=n,r=o);else{if(!(void 0!==u&&0>x(u,n)))break t;t[r]=u,t[s]=n,r=s}}}return e}return null}function x(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var A=[],O=[],N=1,P=null,R=3,D=!1,L=!1,M=!1;function j(t){for(var e=k(O);null!==e;){if(null===e.callback)C(O);else{if(!(e.startTime<=t))break;C(O),e.sortIndex=e.expirationTime,S(A,e)}e=k(O)}}function F(t){if(M=!1,j(t),!L)if(null!==k(A))L=!0,r(U);else{var e=k(O);null!==e&&i(F,e.startTime-t)}}function U(t,n){L=!1,M&&(M=!1,o()),D=!0;var r=R;try{for(j(n),P=k(A);null!==P&&(!(P.expirationTime>n)||t&&!a());){var s=P.callback;if(null!==s){P.callback=null,R=P.priorityLevel;var u=s(P.expirationTime<=n);n=e.unstable_now(),"function"===typeof u?P.callback=u:P===k(A)&&C(A),j(n)}else C(A);P=k(A)}if(null!==P)var c=!0;else{var l=k(O);null!==l&&i(F,l.startTime-n),c=!1}return c}finally{P=null,R=r,D=!1}}function V(t){switch(t){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var q=s;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){L||D||(L=!0,r(U))},e.unstable_getCurrentPriorityLevel=function(){return R},e.unstable_getFirstCallbackNode=function(){return k(A)},e.unstable_next=function(t){switch(R){case 1:case 2:case 3:var e=3;break;default:e=R}var n=R;R=e;try{return t()}finally{R=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=q,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=R;R=t;try{return e()}finally{R=n}},e.unstable_scheduleCallback=function(t,n,a){var s=e.unstable_now();if("object"===typeof a&&null!==a){var u=a.delay;u="number"===typeof u&&0<u?s+u:s,a="number"===typeof a.timeout?a.timeout:V(t)}else a=V(t),u=s;return t={id:N++,callback:n,priorityLevel:t,startTime:u,expirationTime:a=u+a,sortIndex:-1},u>s?(t.sortIndex=u,S(O,t),null===k(A)&&t===k(O)&&(M?o():M=!0,i(F,u-s))):(t.sortIndex=a,S(A,t),L||D||(L=!0,r(U))),t},e.unstable_shouldYield=function(){var t=e.unstable_now();j(t);var n=k(A);return n!==P&&null!==P&&null!==n&&null!==n.callback&&n.startTime<=t&&n.expirationTime<P.expirationTime||a()},e.unstable_wrapCallback=function(t){var e=R;return function(){var n=R;R=e;try{return t.apply(this,arguments)}finally{R=n}}}},,function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function s(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(k){s=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof h?e:h,o=Object.create(i.prototype),a=new E(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return S()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===l)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=c(t,e,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(k){return{type:"throw",arg:k}}}t.wrap=u;var l={};function h(){}function f(){}function p(){}var d={};d[i]=function(){return this};var v=Object.getPrototypeOf,y=v&&v(v(I([])));y&&y!==e&&n.call(y,i)&&(d=y);var g=p.prototype=h.prototype=Object.create(d);function m(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var r;this._invoke=function(i,o){function a(){return new e((function(r,a){!function r(i,o,a,s){var u=c(t[i],t,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"===typeof h&&n.call(h,"__await")?e.resolve(h.__await).then((function(t){r("next",t,a,s)}),(function(t){r("throw",t,a,s)})):e.resolve(h).then((function(t){l.value=t,a(l)}),(function(t){return r("throw",t,a,s)}))}s(u.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function w(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var r=c(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,l;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function I(t){if(t){var e=t[i];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:S}}function S(){return{value:void 0,done:!0}}return f.prototype=g.constructor=p,p.constructor=f,f.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(b.prototype),b.prototype[o]=function(){return this},t.AsyncIterator=b,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new b(u(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(g),s(g,a,"Generator"),g[i]=function(){return this},g.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=I,E.prototype={constructor:E,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),u=n.call(o,"finallyLoc");if(s&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,l):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),T(n),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:I(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=r}catch(i){Function("r","regeneratorRuntime = r")(r)}},,function(t,e,n){"use strict";var r=n(10),i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(e){o(e)}}function s(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function s(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(s){o=[6,s],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function u(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create;var c=n(2),l=n(9),h=function(t){function e(n,r){var i=t.call(this,f(n),"Firebase Storage: "+r+" ("+f(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype._codeEquals=function(t){return f(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),e}(c.c);function f(t){return"storage/"+t}function p(){return new h("unknown","An unknown error occurred, please check the error payload for server response.")}function d(){return new h("canceled","User canceled the upload/download.")}function v(){return new h("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function y(t){return new h("invalid-argument",t)}function g(){return new h("app-deleted","The Firebase app was deleted.")}function m(t){return new h("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function b(t,e){return new h("invalid-format","String does not match format '"+t+"': "+e)}function w(t){throw new h("internal-error","Internal error: "+t)}var _={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},T=function(t,e){this.data=t,this.contentType=e||null};function E(t,e){switch(t){case _.RAW:return new T(I(e));case _.BASE64:case _.BASE64URL:return new T(S(t,e));case _.DATA_URL:return new T(function(t){var e=new k(t);return e.base64?S(_.BASE64,e.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(n){throw b(_.DATA_URL,"Malformed data URL.")}return I(e)}(e.rest)}(e),new k(e).contentType)}throw p()}function I(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<t.length-1&&56320===(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320===(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function S(t,e){switch(t){case _.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw b(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case _.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw b(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(c){throw b(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var k=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw b(_.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var r,i};var C,x={STATE_CHANGED:"state_changed"},A={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function O(t){switch(t){case"running":case"pausing":case"canceling":return A.RUNNING;case"paused":return A.PAUSED;case"success":return A.SUCCESS;case"canceled":return A.CANCELED;case"error":default:return A.ERROR}}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(C||(C={}));var N=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=C.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=C.ABORT,e(t)})),t.xhr_.addEventListener("error",(function(){t.errorCode_=C.NETWORK_ERROR,e(t)})),t.xhr_.addEventListener("load",(function(){e(t)}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw w("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw w("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw w("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw w("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),P=function(){function t(){}return t.prototype.createXhrIo=function(){return new N},t}(),R=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(i){return new t(e,"")}if(""===r.path)return r;throw new h("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null;var i=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://"+("firebasestorage.googleapis.com"===n?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/([A-Za-z0-9.\\-_]+)/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<s.length;u++){var c=s[u],l=c.regex.exec(e);if(l){var f=l[c.indices.bucket],p=l[c.indices.path];p||(p=""),r=new t(f,p),c.postModify(r);break}}if(null==r)throw function(t){return new h("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),D=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function L(t){return"string"===typeof t||t instanceof String}function M(t){return j()&&t instanceof Blob}function j(){return"undefined"!==typeof Blob}function F(t,e,n,r){if(r<e)throw y("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw y("Invalid value for '"+t+"'. Expected "+n+" or less.")}function U(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null===n||void 0===n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function V(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}var q=function(){function t(t,e,n,r,i,o,a,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.xhr;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());void 0!==s?i(s):i()}catch(u){o(u)}else null!==a?((r=p()).serverResponse=a.getResponseText(),t.errorCallback_?o(t.errorCallback_(a,r)):o(r)):n.canceled?o(r=t.appDelete_?g():d()):o(r=new h("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new B(!1,null,!0)):this.backoffId_=function(t,e,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var c=!1;function l(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];c||(c=!0,e.apply(null,t))}function h(e){i=setTimeout((function(){i=null,t(f,s())}),e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,u([null,t],e));else{var i,f=s()||o;if(f)l.call.apply(l,u([null,t],e));else r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),h(i)}}var p=!1;function d(t){p||(p=!0,c||(null!==i?(t||(a=2),clearTimeout(i),h(0)):t||(a=1)))}return h(0),setTimeout((function(){o=!0,d(!0)}),n),d}((function(e,n){if(n)e(!1,new B(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===C.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new B(a,n))}else{var s=n.getErrorCode()===C.ABORT;e(!1,new B(!1,null,s))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),B=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function z(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function K(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=z();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(j())return new Blob(t);throw new h("unsupported-environment","This browser doesn't seem to support creating Blobs")}var H=function(){function t(t,e){var n=0,r="";M(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(M(this.data_)){var r=function(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}(this.data_,e,n);return null===r?null:new t(r)}return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(j()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(K.apply(null,r))}var i=e.map((function(t){return L(t)?E(_.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();function W(t){var e,n;try{e=JSON.parse(t)}catch(r){return null}return"object"!==typeof(n=e)||Array.isArray(n)?null:e}function G(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Q(t,e){return e}var Y=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||Q},X=null;function $(){if(X)return X;var t=[];t.push(new Y("bucket")),t.push(new Y("generation")),t.push(new Y("metageneration")),t.push(new Y("name","fullPath",!0));var e=new Y("name");e.xform=function(t,e){return function(t){return!L(t)||t.length<2?t:G(t)}(e)},t.push(e);var n=new Y("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new Y("timeCreated")),t.push(new Y("updated")),t.push(new Y("md5Hash",null,!0)),t.push(new Y("cacheControl",null,!0)),t.push(new Y("contentDisposition",null,!0)),t.push(new Y("contentEncoding",null,!0)),t.push(new Y("contentLanguage",null,!0)),t.push(new Y("contentType",null,!0)),t.push(new Y("metadata","customMetadata",!0)),X=t}function J(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new R(n,r);return e._makeStorageReference(i)}})}(r,t),r}function Z(t,e,n){var r=W(e);return null===r?null:J(t,r,n)}function tt(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function et(t,e,n){var r=W(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t._makeStorageReference(new R(e,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var l=c[u];s=t._makeStorageReference(new R(e,l.name));r.items.push(s)}return r}(t,e,r)}var nt=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function rt(t){if(!t)throw p()}function it(t,e){return function(n,r){var i=Z(t,r,e);return rt(null!==i),i}}function ot(t,e){return function(n,r){var i=Z(t,r,e);return rt(null!==i),function(t,e,n){var r=W(e);if(null===r)return null;if(!L(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(e){var r=t.bucket,i=t.fullPath;return U("/b/"+o(r)+"/o/"+o(i),n)+V({alt:"media",token:e})}))[0]}(i,r,t.host)}}function at(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=e.getResponseText().includes("Firebase App Check token is invalid")?new h("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new h("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new h("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new h("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function st(t){var e=at(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new h("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function ut(t,e,n){var r=U(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new nt(r,"GET",it(t,n),i);return o.errorHandler=st(e),o}function ct(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=U(e.bucketOnlyServerUrl(),t.host),s=t.maxOperationRetryTime,u=new nt(a,"GET",function(t,e){return function(n,r){var i=et(t,e,r);return rt(null!==i),i}}(t,e.bucket),s);return u.urlParams=o,u.errorHandler=at(e),u}function lt(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var ht=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function ft(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(r){rt(!1)}return rt(!!n&&-1!==(e||["active"]).indexOf(n)),n}function pt(t,e,n,r,i,o,a,s){var u=new ht(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new h("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var f=u.current,p=f+l,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},y=r.slice(f,p);if(null===y)throw v();var g=e.maxUploadRetryTime,m=new nt(n,"POST",(function(t,n){var i,a=ft(t,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?it(e,o)(t,n):null,new ht(s,c,"final"===a,i)}),g);return m.headers=d,m.body=y.uploadData(),m.progressCallback=s||null,m.errorHandler=at(t),m}var dt=function(t,e,n){if("function"===typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}};function vt(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var yt=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=$(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=lt(e,r,i),s={name:a.fullPath},u=U(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=tt(a,n),h=t.maxUploadRetryTime,f=new nt(u,"POST",(function(t){var e;ft(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){rt(!1)}return rt(L(e)),e}),h);return f.urlParams=s,f.headers=c,f.body=l,f.errorHandler=at(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var i=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new nt(n,"POST",(function(t){var e=ft(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){rt(!1)}n||rt(!1);var i=Number(n);return rt(!isNaN(i)),new ht(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=at(e),o}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=262144*this._chunkMultiplier,n=new ht(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=pt(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(u){return t._error=u,void t._transition("error")}var s=t._ref.storage._makeRequest(a,i,o);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=ut(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=lt(e,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+tt(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=H.getBlob(c,r,l);if(null===h)throw v();var f={name:u.fullPath},p=U(o,t.host),d=t.maxUploadRetryTime,y=new nt(p,"POST",it(t,n),d);return y.urlParams=f,y.headers=a,y.body=h.uploadData(),y.errorHandler=at(e),y}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=d(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=O(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new dt(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(O(this._state)){case A.SUCCESS:vt(this._resolve.bind(null,this.snapshot))();break;case A.CANCELED:case A.ERROR:vt(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(O(this._state)){case A.RUNNING:case A.PAUSED:t.next&&vt(t.next.bind(t,this.snapshot))();break;case A.SUCCESS:t.complete&&vt(t.complete.bind(t))();break;case A.CANCELED:case A.ERROR:t.error&&vt(t.error.bind(t,this._error))();break;default:t.error&&vt(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),gt=function(){function t(t,e){this._service=t,this._location=e instanceof R?e:R.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new R(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return G(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new R(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw m(t)},t}();function mt(t){var e={prefixes:[],items:[]};return function t(e,n,r){return a(this,void 0,void 0,(function(){var i,o,a;return s(this,(function(s){switch(s.label){case 0:return[4,bt(e,{pageToken:r})];case 1:return i=s.sent(),(o=n.prefixes).push.apply(o,i.prefixes),(a=n.items).push.apply(a,i.items),null==i.nextPageToken?[3,3]:[4,t(e,n,i.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}(t,e).then((function(){return e}))}function bt(t,e){return a(this,void 0,void 0,(function(){var n,r;return s(this,(function(i){switch(i.label){case 0:return null!=e&&"number"===typeof e.maxResults&&F("options.maxResults",1,1e3,e.maxResults),n=e||{},r=ct(t.storage,t._location,"/",n.pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function wt(t,e){return a(this,void 0,void 0,(function(){var n;return s(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=U(e.fullServerUrl(),t.host),o=tt(n,r),a=t.maxOperationRetryTime,s=new nt(i,"PATCH",it(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=st(e),s}(t.storage,t._location,e,$()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function _t(t){return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=U(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new nt(r,"GET",ot(t,n),i);return o.errorHandler=st(e),o}(t.storage,t._location,$()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then((function(t){if(null===t)throw new h("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function Tt(t){return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=U(e.fullServerUrl(),t.host),r=t.maxOperationRetryTime,i=new nt(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=st(e),i}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}function Et(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new R(t._location.bucket,n);return new gt(t.storage,r)}function It(t){return/^[A-Za-z]+:\/\//.test(t)}function St(t,e){if(t instanceof xt){var n=t;if(null==n._bucket)throw new h("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new gt(n,n._bucket);return null!=e?St(r,e):r}if(void 0!==e){if(e.includes(".."))throw y('`path` param cannot contain ".."');return Et(t,e)}return t}function kt(t,e){if(e&&It(e)){if(t instanceof xt)return new gt(t,e);throw y("To use ref(service, url), the first argument must be a Storage instance.")}return St(t,e)}function Ct(t,e){var n=null===e||void 0===e?void 0:e.storageBucket;return null==n?null:R.makeFromBucketSpec(n,t)}var xt=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host="firebasestorage.googleapis.com",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?R.makeFromBucketSpec(i,this._host):Ct(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=R.makeFromBucketSpec(this._url,t):this._bucket=Ct(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){F("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){F("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return a(this,void 0,void 0,(function(){var t,e;return s(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._getAppCheckToken=function(){return a(this,void 0,void 0,(function(){var t;return s(this,(function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new gt(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new D(g());var i=function(t,e,n,r,i,o){var a=V(t.urlParams),s=t.url+a,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!==e&&void 0!==e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new q(s,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},t.prototype.makeRequestWithTokens=function(t){return a(this,void 0,void 0,(function(){var e,n,r;return s(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=i.sent(),n=e[0],r=e[1],[2,this._makeRequest(t,n,r)]}}))}))},t}();function At(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new yt(t,new H(e),n)}(t=Object(c.i)(t),e,n)}function Ot(t){return function(t){return a(this,void 0,void 0,(function(){var e;return s(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=ut(t.storage,t._location,$()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=Object(c.i)(t))}function Nt(t,e){return kt(t=Object(c.i)(t),e)}var Pt=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),Rt=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new Pt(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new Pt(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"===typeof e?function(t){return e(new Pt(t,i,i._ref))}:{next:e.next?function(t){return e.next(new Pt(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),Dt=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new Lt(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new Lt(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),Lt=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return Et(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new Rt(At(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=_.RAW),this._throwIfRoot("putString");var r=E(e,t),i=o({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Rt(new yt(this._delegate,new H(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e=this;return(t=this._delegate,mt(t=Object(c.i)(t))).then((function(t){return new Dt(t,e.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return bt(t=Object(c.i)(t),e)}(this._delegate,t||void 0).then((function(t){return new Dt(t,e.storage)}))},t.prototype.getMetadata=function(){return Ot(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return wt(t=Object(c.i)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return t=this._delegate,_t(t=Object(c.i)(t));var t},t.prototype.delete=function(){return this._throwIfRoot("delete"),t=this._delegate,Tt(t=Object(c.i)(t));var t},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw m(t)},t}(),Mt=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(It(t))throw y("ref() expected a child path but got a URL, use refFromURL instead.");return new Lt(Nt(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!It(t))throw y("refFromURL() expected a full URL but got a child path, use ref() instead.");try{R.makeFromUrl(t,this._delegate.host)}catch(e){throw y("refFromUrl() expected a valid full URL but got an invalid one.")}return new Lt(Nt(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();function jt(t,e){var n=e.instanceIdentifier,i=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),a=t.getProvider("app-check-internal");return new Mt(i,new xt(i,o,a,new P,n,r.a.SDK_VERSION))}!function(t){var e={TaskState:A,TaskEvent:x,StringFormat:_,Storage:xt,Reference:Lt};t.INTERNAL.registerComponent(new l.a("storage",jt,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.5.2")}(r.a)},function(t,e,n){"use strict";var r,i=n(10),o=(n(2),n(6),n(4),n(3)),a=n(9),s={Firestore:o.b,GeoPoint:o.g,Timestamp:o.a,Blob:o.l,Transaction:o.f,WriteBatch:o.d,DocumentReference:o.i,DocumentSnapshot:o.c,Query:o.j,QueryDocumentSnapshot:o.k,QuerySnapshot:o.r,CollectionReference:o.m,FieldPath:o.q,FieldValue:o.o,setLogLevel:o.h,CACHE_SIZE_UNLIMITED:o.n};(function(t,e){t.INTERNAL.registerComponent(new a.a("firestore",(function(t){return function(t,e){return new o.b(t,new o.p(t,e),new o.e)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},s)))})(r=i.a),r.registerVersion("@firebase/firestore","2.3.2")},function(t,e,n){"use strict";n.r(e);var r=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|inert|itemProp|itemScope|itemType|itemID|itemRef|on|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,i=function(t){var e={};return function(n){return void 0===e[n]&&(e[n]=t(n)),e[n]}}((function(t){return r.test(t)||111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)<91}));e.default=i},function(t,e,n){"use strict";n.d(e,"a",(function(){return ra}));var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}Object.create;function s(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(s){i={error:s}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function u(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}Object.create;var c=n(1),l=n.n(c),h=function(t){return{isEnabled:function(e){return t.some((function(t){return!!e[t]}))}}},f={measureLayout:h(["layout","layoutId","drag","_layoutResetTransform"]),animation:h(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag"]),exit:h(["exit"]),drag:h(["drag","dragControls"]),focus:h(["whileFocus"]),hover:h(["whileHover","onHoverStart","onHoverEnd"]),tap:h(["whileTap","onTap","onTapStart","onTapCancel"]),pan:h(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),layoutAnimation:h(["layout","layoutId"])};var p=Object(c.createContext)({strict:!1}),d=Object.keys(f),v=d.length;var y=Object(c.createContext)({transformPagePoint:function(t){return t},isStatic:!1}),g=Object(c.createContext)({});var m=Object(c.createContext)(null);function b(t){var e=Object(c.useRef)(null);return null===e.current&&(e.current=t()),e.current}function w(){var t=Object(c.useContext)(m);if(null===t)return[!0,null];var e=t.isPresent,n=t.onExitComplete,r=t.register,i=I();Object(c.useEffect)((function(){return r(i)}),[]);return!e&&n?[!1,function(){return null===n||void 0===n?void 0:n(i)}]:[!0]}function _(t){return null===t||t.isPresent}var T=0,E=function(){return T++},I=function(){return b(E)},S=Object(c.createContext)(null),k="undefined"!==typeof window,C=k?c.useLayoutEffect:c.useEffect;function x(t,e,n,r){var i=Object(c.useContext)(y),a=Object(c.useContext)(p),s=Object(c.useContext)(g).visualElement,u=Object(c.useContext)(m),l=function(t){var e=t.layoutId,n=Object(c.useContext)(S);return n&&void 0!==e?n+"-"+e:e}(n),h=Object(c.useRef)(void 0);r||(r=a.renderer),!h.current&&r&&(h.current=r(t,{visualState:e,parent:s,props:o(o({},n),{layoutId:l}),presenceId:null===u||void 0===u?void 0:u.id,blockInitialAnimation:!1===(null===u||void 0===u?void 0:u.initial)}));var f=h.current;return C((function(){f&&(f.setProps(o(o(o({},i),n),{layoutId:l})),f.isPresent=_(u),f.isPresenceRoot=!s||s.presenceId!==(null===u||void 0===u?void 0:u.id),f.syncRender())})),Object(c.useEffect)((function(){var t;f&&(null===(t=f.animationState)||void 0===t||t.animateChanges())})),C((function(){return function(){return null===f||void 0===f?void 0:f.notifyUnmount()}}),[]),f}function A(t){return"object"===typeof t&&Object.prototype.hasOwnProperty.call(t,"current")}function O(t){return Array.isArray(t)}function N(t){return"string"===typeof t||O(t)}function P(t,e,n,r,i){var o;return void 0===r&&(r={}),void 0===i&&(i={}),"string"===typeof e&&(e=null===(o=t.variants)||void 0===o?void 0:o[e]),"function"===typeof e?e(null!==n&&void 0!==n?n:t.custom,r,i):e}function R(t,e,n){var r=t.getProps();return P(r,e,null!==n&&void 0!==n?n:r.custom,function(t){var e={};return t.forEachValue((function(t,n){return e[n]=t.get()})),e}(t),function(t){var e={};return t.forEachValue((function(t,n){return e[n]=t.getVelocity()})),e}(t))}function D(t){var e;return"function"===typeof(null===(e=t.animate)||void 0===e?void 0:e.start)||N(t.initial)||N(t.animate)||N(t.whileHover)||N(t.whileDrag)||N(t.whileTap)||N(t.whileFocus)||N(t.exit)}function L(t){return Boolean(D(t)||t.variants)}function M(t,e){var n=function(t,e){if(D(t)){var n=t.initial,r=t.animate;return{initial:!1===n||N(n)?n:void 0,animate:N(r)?r:void 0}}return!1!==t.inherit?e:{}}(t,Object(c.useContext)(g)),r=n.initial,i=n.animate;return Object(c.useMemo)((function(){return{initial:r,animate:i}}),e?[j(r),j(i)]:[])}function j(t){return Array.isArray(t)?t.join(" "):t}function F(t){var e=t.preloadedFeatures,n=t.createVisualElement,r=t.useRender,i=t.useVisualState,a=t.Component;return e&&function(t){for(var e in t){var n=t[e];null!==n&&(f[e].Component=n)}}(e),Object(c.forwardRef)((function(t,e){var s=Object(c.useContext)(y).isStatic,u=null,l=M(t,s),h=i(t,s);return!s&&k&&(l.visualElement=x(a,h,t,n),u=function(t,e,n){var r=[];if(Object(c.useContext)(p),!e)return null;for(var i=0;i<v;i++){var a=d[i],s=f[a],u=s.isEnabled,l=s.Component;u(t)&&l&&r.push(c.createElement(l,o({key:a},t,{visualElement:e})))}return r}(t,l.visualElement)),c.createElement(c.Fragment,null,c.createElement(g.Provider,{value:l},r(a,t,function(t,e,n){return Object(c.useCallback)((function(r){var i;r&&(null===(i=t.mount)||void 0===i||i.call(t,r)),e&&(r?e.mount(r):e.unmount()),n&&("function"===typeof n?n(r):A(n)&&(n.current=r))}),[e])}(h,l.visualElement,e),h,s)),u)}))}function U(t){function e(e,n){return void 0===n&&(n={}),F(t(e,n))}var n=new Map;return new Proxy(e,{get:function(t,r){return n.has(r)||n.set(r,e(r)),n.get(r)}})}var V=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view"];function q(t){return"string"===typeof t&&!t.includes("-")&&!!(V.indexOf(t)>-1||/[A-Z]/.test(t))}var B={};var z=["","X","Y","Z"],K=["transformPerspective","x","y","z"];function H(t,e){return K.indexOf(t)-K.indexOf(e)}["translate","scale","rotate","skew"].forEach((function(t){return z.forEach((function(e){return K.push(t+e)}))}));var W=new Set(K);function G(t){return W.has(t)}var Q=new Set(["originX","originY","originZ"]);function Y(t){return Q.has(t)}function X(t,e){var n=e.layout,r=e.layoutId;return G(t)||Y(t)||(n||void 0!==r)&&(!!B[t]||"opacity"===t)}var $=function(t){return null!==t&&"object"===typeof t&&t.getVelocity},J={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"};function Z(t){return t.startsWith("--")}var tt=function(t,e){return e&&"number"===typeof t?e.transform(t):t};var et=function(){return(et=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.create;Object.create;var nt=function(t,e){return function(n){return Math.max(Math.min(n,e),t)}},rt=function(t){return t%1?Number(t.toFixed(5)):t},it=/(-)?([\d]*\.?[\d])+/g,ot=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,at=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i;function st(t){return"string"===typeof t}var ut=function(t){return{test:function(e){return st(e)&&e.endsWith(t)&&1===e.split(" ").length},parse:parseFloat,transform:function(e){return""+e+t}}},ct=ut("deg"),lt=ut("%"),ht=ut("px"),ft=ut("vh"),pt=ut("vw"),dt=et(et({},lt),{parse:function(t){return lt.parse(t)/100},transform:function(t){return lt.transform(100*t)}}),vt={test:function(t){return"number"===typeof t},parse:parseFloat,transform:function(t){return t}},yt=et(et({},vt),{transform:nt(0,1)}),gt=et(et({},vt),{default:1}),mt=o(o({},vt),{transform:Math.round}),bt={borderWidth:ht,borderTopWidth:ht,borderRightWidth:ht,borderBottomWidth:ht,borderLeftWidth:ht,borderRadius:ht,radius:ht,borderTopLeftRadius:ht,borderTopRightRadius:ht,borderBottomRightRadius:ht,borderBottomLeftRadius:ht,width:ht,maxWidth:ht,height:ht,maxHeight:ht,size:ht,top:ht,right:ht,bottom:ht,left:ht,padding:ht,paddingTop:ht,paddingRight:ht,paddingBottom:ht,paddingLeft:ht,margin:ht,marginTop:ht,marginRight:ht,marginBottom:ht,marginLeft:ht,rotate:ct,rotateX:ct,rotateY:ct,rotateZ:ct,scale:gt,scaleX:gt,scaleY:gt,scaleZ:gt,skew:ct,skewX:ct,skewY:ct,distance:ht,translateX:ht,translateY:ht,translateZ:ht,x:ht,y:ht,z:ht,perspective:ht,transformPerspective:ht,opacity:yt,originX:dt,originY:dt,originZ:ht,zIndex:mt,fillOpacity:yt,strokeOpacity:yt,numOctaves:mt};function wt(t,e,n,r,i,o,a,s){var u,c=t.style,l=t.vars,h=t.transform,f=t.transformKeys,p=t.transformOrigin;f.length=0;var d=!1,v=!1,y=!0;for(var g in e){var m=e[g];if(Z(g))l[g]=m;else{var b=bt[g],w=tt(m,b);if(G(g)){if(d=!0,h[g]=w,f.push(g),!y)continue;m!==(null!==(u=b.default)&&void 0!==u?u:0)&&(y=!1)}else if(Y(g))p[g]=w,v=!0;else if((null===n||void 0===n?void 0:n.isHydrated)&&(null===r||void 0===r?void 0:r.isHydrated)&&B[g]){var _=B[g].process(m,r,n),T=B[g].applyTo;if(T)for(var E=T.length,I=0;I<E;I++)c[T[I]]=_;else c[g]=_}else c[g]=w}}r&&n&&a&&s?(c.transform=a(r.deltaFinal,r.treeScale,d?h:void 0),o&&(c.transform=o(h,c.transform)),c.transformOrigin=s(r)):(d&&(c.transform=function(t,e,n,r){var i=t.transform,o=t.transformKeys,a=e.enableHardwareAcceleration,s=void 0===a||a,u=e.allowTransformNone,c=void 0===u||u,l="";o.sort(H);for(var h=!1,f=o.length,p=0;p<f;p++){var d=o[p];l+=(J[d]||d)+"("+i[d]+") ","z"===d&&(h=!0)}return!h&&s?l+="translateZ(0)":l=l.trim(),r?l=r(i,n?"":l):c&&n&&(l="none"),l}(t,i,y,o)),v&&(c.transformOrigin=function(t){var e=t.originX,n=void 0===e?"50%":e,r=t.originY,i=void 0===r?"50%":r,o=t.originZ;return n+" "+i+" "+(void 0===o?0:o)}(p)))}var _t=function(){return{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}};function Tt(t,e,n){for(var r in e)$(e[r])||X(r,n)||(t[r]=e[r])}function Et(t,e,n){var r={};return Tt(r,t.style||{},t),Object.assign(r,function(t,e,n){var r=t.transformTemplate;return Object(c.useMemo)((function(){var t={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}};wt(t,e,void 0,void 0,{enableHardwareAcceleration:!n},r);var i=t.style;return o(o({},t.vars),i)}),[e])}(t,e,n)),t.transformValues&&(r=t.transformValues(r)),r}function It(t,e,n){var r={},i=Et(t,e,n);return Boolean(t.drag)&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===t.drag?"none":"pan-"+("x"===t.drag?"y":"x")),r.style=i,r}var St=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","_layoutResetTransform","onLayoutAnimationComplete","onViewportBoxUpdate","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","whileDrag","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","onHoverStart","onHoverEnd","whileFocus","whileTap","whileHover"]);function kt(t){return St.has(t)}var Ct=function(t){return!kt(t)};try{var xt=n(31).default;Ct=function(t){return t.startsWith("on")?!kt(t):xt(t)}}catch(ia){}function At(t,e,n){return"string"===typeof t?t:ht.transform(e+n*t)}var Ot=function(t,e){return ht.transform(t*e)},Nt={offset:"stroke-dashoffset",array:"stroke-dasharray"},Pt={offset:"strokeDashoffset",array:"strokeDasharray"};function Rt(t,e,n,r,i,o,s,u){var c=e.attrX,l=e.attrY,h=e.originX,f=e.originY,p=e.pathLength,d=e.pathSpacing,v=void 0===d?1:d,y=e.pathOffset,g=void 0===y?0:y;wt(t,a(e,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),n,r,i,o,s,u),t.attrs=t.style,t.style={};var m=t.attrs,b=t.style,w=t.dimensions,_=t.totalPathLength;m.transform&&(w&&(b.transform=m.transform),delete m.transform),w&&(void 0!==h||void 0!==f||b.transform)&&(b.transformOrigin=function(t,e,n){return At(e,t.x,t.width)+" "+At(n,t.y,t.height)}(w,void 0!==h?h:.5,void 0!==f?f:.5)),void 0!==c&&(m.x=c),void 0!==l&&(m.y=l),void 0!==_&&void 0!==p&&function(t,e,n,r,i,o){void 0===r&&(r=1),void 0===i&&(i=0),void 0===o&&(o=!0);var a=o?Nt:Pt;t[a.offset]=Ot(-i,e);var s=Ot(n,e),u=Ot(r,e);t[a.array]=s+" "+u}(m,_,p,v,g,!1)}var Dt=function(){return o(o({},{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}),{attrs:{}})};function Lt(t,e){var n=Object(c.useMemo)((function(){var n=Dt();return Rt(n,e,void 0,void 0,{enableHardwareAcceleration:!1},t.transformTemplate),o(o({},n.attrs),{style:o({},n.style)})}),[e]);if(t.style){var r={};Tt(r,t.style,t),n.style=o(o({},r),n.style)}return n}function Mt(t){void 0===t&&(t=!1);return function(e,n,r,i,a){var s=i.latestValues,u=(q(e)?Lt:It)(n,s,a),l=function(t,e,n){var r={};for(var i in t)(Ct(i)||!0===n&&kt(i)||!e&&!kt(i))&&(r[i]=t[i]);return r}(n,"string"===typeof e,t),h=o(o(o({},l),u),{ref:r});return Object(c.createElement)(e,h)}}var jt=/([a-z])([A-Z])/g,Ft=function(t){return t.replace(jt,"$1-$2").toLowerCase()};function Ut(t,e){var n=e.style,r=e.vars;for(var i in Object.assign(t.style,n),r)t.style.setProperty(i,r[i])}var Vt=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform"]);function qt(t,e){for(var n in Ut(t,e),e.attrs)t.setAttribute(Vt.has(n)?n:Ft(n),e.attrs[n])}function Bt(t){var e=t.style,n={};for(var r in e)($(e[r])||X(r,t))&&(n[r]=e[r]);return n}function zt(t){var e=Bt(t);for(var n in t){if($(t[n]))e["x"===n||"y"===n?"attr"+n.toUpperCase():n]=t[n]}return e}function Kt(t){return"object"===typeof t&&"function"===typeof t.start}var Ht=function(t){return Array.isArray(t)};function Wt(t){var e,n=$(t)?t.get():t;return e=n,Boolean(e&&"object"===typeof e&&e.mix&&e.toValue)?n.toValue():n}function Gt(t,e,n,r){var i=t.scrapeMotionValuesFromProps,o=t.createRenderState,a=t.onMount,s={latestValues:Yt(e,n,r,i),renderState:o()};return a&&(s.mount=function(t){return a(e,t,s)}),s}var Qt=function(t){return function(e,n){var r=Object(c.useContext)(g),i=Object(c.useContext)(m);return n?Gt(t,e,r,i):b((function(){return Gt(t,e,r,i)}))}};function Yt(t,e,n,r){var i={},o=!1===(null===n||void 0===n?void 0:n.initial),s=r(t);for(var u in s)i[u]=Wt(s[u]);var c=t.initial,l=t.animate,h=D(t),f=L(t);e&&f&&!h&&!1!==t.inherit&&(null!==c&&void 0!==c||(c=e.initial),null!==l&&void 0!==l||(l=e.animate));var p=o||!1===c?l:c;p&&"boolean"!==typeof p&&!Kt(p)&&(Array.isArray(p)?p:[p]).forEach((function(e){var n=P(t,e);if(n){var r=n.transitionEnd;n.transition;var o=a(n,["transitionEnd","transition"]);for(var s in o)i[s]=o[s];for(var s in r)i[s]=r[s]}}));return i}var Xt={useVisualState:Qt({scrapeMotionValuesFromProps:zt,createRenderState:Dt,onMount:function(t,e,n){var r=n.renderState,i=n.latestValues;try{r.dimensions="function"===typeof e.getBBox?e.getBBox():e.getBoundingClientRect()}catch(o){r.dimensions={x:0,y:0,width:0,height:0}}"path"===e.tagName&&(r.totalPathLength=e.getTotalLength()),Rt(r,i,void 0,void 0,{enableHardwareAcceleration:!1},t.transformTemplate),qt(e,r)}})};var $t,Jt={useVisualState:Qt({scrapeMotionValuesFromProps:Bt,createRenderState:_t})};function Zt(t,e,n,r){var i=e.forwardMotionProps,a=void 0!==i&&i,s=q(t)?Xt:Jt;return o(o({},s),{preloadedFeatures:n,useRender:Mt(a),createVisualElement:r,Component:t})}function te(t,e,n,r){return t.addEventListener(e,n,r),function(){return t.removeEventListener(e,n,r)}}function ee(t,e,n,r){Object(c.useEffect)((function(){var i=t.current;if(n&&i)return te(i,e,n,r)}),[t,e,n,r])}function ne(t){return"undefined"!==typeof PointerEvent&&t instanceof PointerEvent?!("mouse"!==t.pointerType):t instanceof MouseEvent}function re(t){return!!t.touches}!function(t){t.Animate="animate",t.Hover="whileHover",t.Tap="whileTap",t.Drag="whileDrag",t.Focus="whileFocus",t.Exit="exit"}($t||($t={}));var ie={pageX:0,pageY:0};function oe(t,e){void 0===e&&(e="page");var n=t.touches[0]||t.changedTouches[0]||ie;return{x:n[e+"X"],y:n[e+"Y"]}}function ae(t,e){return void 0===e&&(e="page"),{x:t[e+"X"],y:t[e+"Y"]}}function se(t,e){return void 0===e&&(e="page"),{point:re(t)?oe(t,e):ae(t,e)}}var ue=function(t,e){void 0===e&&(e=!1);var n,r=function(e){return t(e,se(e))};return e?(n=r,function(t){var e=t instanceof MouseEvent;(!e||e&&0===t.button)&&n(t)}):r},ce={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},le={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function he(t){return k&&null===window.onpointerdown?t:k&&null===window.ontouchstart?le[t]:k&&null===window.onmousedown?ce[t]:t}function fe(t,e,n,r){return te(t,he(e),ue(n,"pointerdown"===e),r)}function pe(t,e,n,r){return ee(t,he(e),n&&ue(n,"pointerdown"===e),r)}function de(t){var e=null;return function(){return null===e&&(e=t,function(){e=null})}}var ve=de("dragHorizontal"),ye=de("dragVertical");function ge(t){var e=!1;if("y"===t)e=ye();else if("x"===t)e=ve();else{var n=ve(),r=ye();n&&r?e=function(){n(),r()}:(n&&n(),r&&r())}return e}function me(){var t=ge(!0);return!t||(t(),!1)}function be(t,e,n){return function(r,i){var o;ne(r)&&!me()&&(null===n||void 0===n||n(r,i),null===(o=t.animationState)||void 0===o||o.setActive($t.Hover,e))}}function we(t){return Object(c.useEffect)((function(){return function(){return t()}}),[])}var _e=function(t,e){return function(n){return e(t(n))}},Te=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.reduce(_e)};var Ee=function(t){return function(e){return t(e),null}},Ie={tap:Ee((function(t){var e=t.onTap,n=t.onTapStart,r=t.onTapCancel,i=t.whileTap,o=t.visualElement,a=e||n||r||i,s=Object(c.useRef)(!1),u=Object(c.useRef)(null);function l(){var t;null===(t=u.current)||void 0===t||t.call(u),u.current=null}function h(){var t;return l(),s.current=!1,null===(t=o.animationState)||void 0===t||t.setActive($t.Tap,!1),!me()}function f(t,n){h()&&(!function t(e,n){return!!n&&(e===n||t(e,n.parentElement))}(o.getInstance(),t.target)?null===r||void 0===r||r(t,n):null===e||void 0===e||e(t,n))}function p(t,e){h()&&(null===r||void 0===r||r(t,e))}pe(o,"pointerdown",a?function(t,e){var r;l(),s.current||(s.current=!0,u.current=Te(fe(window,"pointerup",f),fe(window,"pointercancel",p)),null===n||void 0===n||n(t,e),null===(r=o.animationState)||void 0===r||r.setActive($t.Tap,!0))}:void 0),we(l)})),focus:Ee((function(t){var e=t.whileFocus,n=t.visualElement;ee(n,"focus",e?function(){var t;null===(t=n.animationState)||void 0===t||t.setActive($t.Focus,!0)}:void 0),ee(n,"blur",e?function(){var t;null===(t=n.animationState)||void 0===t||t.setActive($t.Focus,!1)}:void 0)})),hover:Ee((function(t){var e=t.onHoverStart,n=t.onHoverEnd,r=t.whileHover,i=t.visualElement;pe(i,"pointerenter",e||r?be(i,!0,e):void 0),pe(i,"pointerleave",n||r?be(i,!1,n):void 0)}))};function Se(t,e){if(!Array.isArray(e))return!1;var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}var ke=function(){return(ke=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Ce(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}Object.create;Object.create;var xe=function(t,e,n){return Math.min(Math.max(n,t),e)};function Ae(t){var e,n,r=t.duration,i=void 0===r?800:r,o=t.bounce,a=void 0===o?.25:o,s=t.velocity,u=void 0===s?0:s,c=t.mass,l=void 0===c?1:c,h=1-a;h=xe(.05,1,h),i=xe(.01,10,i/1e3),h<1?(e=function(t){var e=t*h,n=e*i;return.001-(e-u)/Oe(t,h)*Math.exp(-n)},n=function(t){var n=t*h*i,r=n*u+u,o=Math.pow(h,2)*Math.pow(t,2)*i,a=Math.exp(-n),s=Oe(Math.pow(t,2),h);return(.001-e(t)>0?-1:1)*((r-o)*a)/s}):(e=function(t){return Math.exp(-t*i)*((t-u)*i+1)-.001},n=function(t){return Math.exp(-t*i)*(i*i*(u-t))});var f=function(t,e,n){for(var r=n,i=1;i<12;i++)r-=t(r)/e(r);return r}(e,n,5/i);if(i*=1e3,isNaN(f))return{stiffness:100,damping:10,duration:i};var p=Math.pow(f,2)*l;return{stiffness:p,damping:2*h*Math.sqrt(l*p),duration:i}}function Oe(t,e){return t*Math.sqrt(1-e*e)}var Ne=["duration","bounce"],Pe=["stiffness","damping","mass"];function Re(t,e){return e.some((function(e){return void 0!==t[e]}))}function De(t){var e=t.from,n=void 0===e?0:e,r=t.to,i=void 0===r?1:r,o=t.restSpeed,a=void 0===o?2:o,s=t.restDelta,u=Ce(t,["from","to","restSpeed","restDelta"]),c={done:!1,value:n},l=function(t){var e=ke({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},t);if(!Re(t,Pe)&&Re(t,Ne)){var n=Ae(t);(e=ke(ke(ke({},e),n),{velocity:0,mass:1})).isResolvedFromDuration=!0}return e}(u),h=l.stiffness,f=l.damping,p=l.mass,d=l.velocity,v=l.duration,y=l.isResolvedFromDuration,g=Le,m=Le;function b(){var t=d?-d/1e3:0,e=i-n,r=f/(2*Math.sqrt(h*p)),o=Math.sqrt(h/p)/1e3;if(null!==s&&void 0!==s||(s=Math.abs(i-n)<=1?.01:.4),r<1){var a=Oe(o,r);g=function(n){var s=Math.exp(-r*o*n);return i-s*((t+r*o*e)/a*Math.sin(a*n)+e*Math.cos(a*n))},m=function(n){var i=Math.exp(-r*o*n);return r*o*i*(Math.sin(a*n)*(t+r*o*e)/a+e*Math.cos(a*n))-i*(Math.cos(a*n)*(t+r*o*e)-a*e*Math.sin(a*n))}}else if(1===r)g=function(n){return i-Math.exp(-o*n)*(e+(t+o*e)*n)};else{var u=o*Math.sqrt(r*r-1);g=function(n){var a=Math.exp(-r*o*n),s=Math.min(u*n,300);return i-a*((t+r*o*e)*Math.sinh(s)+u*e*Math.cosh(s))/u}}}return b(),{next:function(t){var e=g(t);if(y)c.done=t>=v;else{var n=1e3*m(t),r=Math.abs(n)<=a,o=Math.abs(i-e)<=s;c.done=r&&o}return c.value=c.done?i:e,c},flipTarget:function(){var t;d=-d,n=(t=[i,n])[0],i=t[1],b()}}}De.needsInterpolation=function(t,e){return"string"===typeof t||"string"===typeof e};var Le=function(t){return 0},Me=function(t,e,n){var r=e-t;return 0===r?1:(n-t)/r},je=function(t,e,n){return-n*t+n*e+t},Fe=function(t,e){return function(n){return Boolean(st(n)&&at.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e))}},Ue=function(t,e,n){return function(r){var i;if(!st(r))return r;var o=r.match(it),a=o[0],s=o[1],u=o[2],c=o[3];return(i={})[t]=parseFloat(a),i[e]=parseFloat(s),i[n]=parseFloat(u),i.alpha=void 0!==c?parseFloat(c):1,i}},Ve=nt(0,255),qe=et(et({},vt),{transform:function(t){return Math.round(Ve(t))}}),Be={test:Fe("rgb","red"),parse:Ue("red","green","blue"),transform:function(t){var e=t.red,n=t.green,r=t.blue,i=t.alpha,o=void 0===i?1:i;return"rgba("+qe.transform(e)+", "+qe.transform(n)+", "+qe.transform(r)+", "+rt(yt.transform(o))+")"}};var ze={test:Fe("#"),parse:function(t){var e="",n="",r="",i="";return t.length>5?(e=t.substr(1,2),n=t.substr(3,2),r=t.substr(5,2),i=t.substr(7,2)):(e=t.substr(1,1),n=t.substr(2,1),r=t.substr(3,1),i=t.substr(4,1),e+=e,n+=n,r+=r,i+=i),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:Be.transform},Ke={test:Fe("hsl","hue"),parse:Ue("hue","saturation","lightness"),transform:function(t){var e=t.hue,n=t.saturation,r=t.lightness,i=t.alpha,o=void 0===i?1:i;return"hsla("+Math.round(e)+", "+lt.transform(rt(n))+", "+lt.transform(rt(r))+", "+rt(yt.transform(o))+")"}},He=function(t,e,n){var r=t*t,i=e*e;return Math.sqrt(Math.max(0,n*(i-r)+r))},We=[ze,Be,Ke],Ge=function(t){return We.find((function(e){return e.test(t)}))},Qe=function(t){return"'"+t+"' is not an animatable color. Use the equivalent color code instead."},Ye=function(t,e){var n=Ge(t),r=Ge(e);Qe(t),Qe(e),n.transform,r.transform;var i=n.parse(t),o=r.parse(e),a=ke({},i),s=n===Ke?je:He;return function(t){for(var e in a)"alpha"!==e&&(a[e]=s(i[e],o[e],t));return a.alpha=je(i.alpha,o.alpha,t),n.transform(a)}},Xe={test:function(t){return Be.test(t)||ze.test(t)||Ke.test(t)},parse:function(t){return Be.test(t)?Be.parse(t):Ke.test(t)?Ke.parse(t):ze.parse(t)},transform:function(t){return st(t)?t:t.hasOwnProperty("red")?Be.transform(t):Ke.transform(t)}};function $e(t){var e=[],n=0,r=t.match(ot);r&&(n=r.length,t=t.replace(ot,"${c}"),e.push.apply(e,r.map(Xe.parse)));var i=t.match(it);return i&&(t=t.replace(it,"${n}"),e.push.apply(e,i.map(vt.parse))),{values:e,numColors:n,tokenised:t}}function Je(t){return $e(t).values}function Ze(t){var e=$e(t),n=e.values,r=e.numColors,i=e.tokenised,o=n.length;return function(t){for(var e=i,n=0;n<o;n++)e=e.replace(n<r?"${c}":"${n}",n<r?Xe.transform(t[n]):rt(t[n]));return e}}var tn=function(t){return"number"===typeof t?0:t};var en={test:function(t){var e,n,r,i;return isNaN(t)&&st(t)&&(null!==(n=null===(e=t.match(it))||void 0===e?void 0:e.length)&&void 0!==n?n:0)+(null!==(i=null===(r=t.match(ot))||void 0===r?void 0:r.length)&&void 0!==i?i:0)>0},parse:Je,createTransformer:Ze,getAnimatableNone:function(t){var e=Je(t);return Ze(t)(e.map(tn))}},nn=function(t){return"number"===typeof t};function rn(t,e){return nn(t)?function(n){return je(t,e,n)}:Xe.test(t)?Ye(t,e):un(t,e)}var on=function(t,e){var n=function(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}([],t),r=n.length,i=t.map((function(t,n){return rn(t,e[n])}));return function(t){for(var e=0;e<r;e++)n[e]=i[e](t);return n}},an=function(t,e){var n=ke(ke({},t),e),r={};for(var i in n)void 0!==t[i]&&void 0!==e[i]&&(r[i]=rn(t[i],e[i]));return function(t){for(var e in r)n[e]=r[e](t);return n}};function sn(t){for(var e=en.parse(t),n=e.length,r=0,i=0,o=0,a=0;a<n;a++)r||"number"===typeof e[a]?r++:void 0!==e[a].hue?o++:i++;return{parsed:e,numNumbers:r,numRGB:i,numHSL:o}}var un=function(t,e){var n=en.createTransformer(e),r=sn(t),i=sn(e);return r.numHSL===i.numHSL&&r.numRGB===i.numRGB&&(r.numNumbers,i.numNumbers),Te(on(r.parsed,i.parsed),n)},cn=function(t,e){return function(n){return je(t,e,n)}};function ln(t,e,n){for(var r,i=[],o=n||("number"===typeof(r=t[0])?cn:"string"===typeof r?Xe.test(r)?Ye:un:Array.isArray(r)?on:"object"===typeof r?an:void 0),a=t.length-1,s=0;s<a;s++){var u=o(t[s],t[s+1]);if(e){var c=Array.isArray(e)?e[s]:e;u=Te(c,u)}i.push(u)}return i}function hn(t,e,n){var r=void 0===n?{}:n,i=r.clamp,o=void 0===i||i,a=r.ease,s=r.mixer,u=t.length;e.length,!a||!Array.isArray(a)||a.length,t[0]>t[u-1]&&(t=[].concat(t),e=[].concat(e),t.reverse(),e.reverse());var c=ln(e,a,s),l=2===u?function(t,e){var n=t[0],r=t[1],i=e[0];return function(t){return i(Me(n,r,t))}}(t,c):function(t,e){var n=t.length,r=n-1;return function(i){var o=0,a=!1;if(i<=t[0]?a=!0:i>=t[r]&&(o=r-1,a=!0),!a){for(var s=1;s<n&&!(t[s]>i||s===r);s++);o=s-1}var u=Me(t[o],t[o+1],i);return e[o](u)}}(t,c);return o?function(e){return l(xe(t[0],t[u-1],e))}:l}var fn,pn=function(t){return function(e){return 1-t(1-e)}},dn=function(t){return function(e){return e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2}},vn=function(t){return function(e){return e*e*((t+1)*e-t)}},yn=function(t){return t},gn=(fn=2,function(t){return Math.pow(t,fn)}),mn=pn(gn),bn=dn(gn),wn=function(t){return 1-Math.sin(Math.acos(t))},_n=pn(wn),Tn=dn(_n),En=vn(1.525),In=pn(En),Sn=dn(En),kn=function(t){var e=vn(t);return function(t){return(t*=2)<1?.5*e(t):.5*(2-Math.pow(2,-10*(t-1)))}}(1.525),Cn=function(t){if(1===t||0===t)return t;var e=t*t;return t<4/11?7.5625*e:t<8/11?9.075*e-9.9*t+3.4:t<.9?4356/361*e-35442/1805*t+16061/1805:10.8*t*t-20.52*t+10.72},xn=pn(Cn);function An(t,e){return t.map((function(){return e||bn})).splice(0,t.length-1)}function On(t){var e=t.from,n=void 0===e?0:e,r=t.to,i=void 0===r?1:r,o=t.ease,a=t.offset,s=t.duration,u=void 0===s?300:s,c={done:!1,value:n},l=Array.isArray(i)?i:[n,i],h=function(t,e){return t.map((function(t){return t*e}))}(a&&a.length===l.length?a:function(t){var e=t.length;return t.map((function(t,n){return 0!==n?n/(e-1):0}))}(l),u);function f(){return hn(h,l,{ease:Array.isArray(o)?o:An(l,o)})}var p=f();return{next:function(t){return c.value=p(t),c.done=t>=u,c},flipTarget:function(){l.reverse(),p=f()}}}var Nn={keyframes:On,spring:De,decay:function(t){var e=t.velocity,n=void 0===e?0:e,r=t.from,i=void 0===r?0:r,o=t.power,a=void 0===o?.8:o,s=t.timeConstant,u=void 0===s?350:s,c=t.restDelta,l=void 0===c?.5:c,h=t.modifyTarget,f={done:!1,value:i},p=a*n,d=i+p,v=void 0===h?d:h(d);return v!==d&&(p=v-i),{next:function(t){var e=-p*Math.exp(-t/u);return f.done=!(e>l||e<-l),f.value=f.done?v:v+e,f},flipTarget:function(){}}}};var Pn="undefined"!==typeof performance?function(){return performance.now()}:function(){return Date.now()},Rn="undefined"!==typeof window?function(t){return window.requestAnimationFrame(t)}:function(t){return setTimeout((function(){return t(Pn())}),1/60*1e3)};var Dn=!0,Ln=!1,Mn=!1,jn={delta:0,timestamp:0},Fn=["read","update","preRender","render","postRender"],Un=Fn.reduce((function(t,e){return t[e]=function(t){var e=[],n=[],r=0,i=!1,o=new WeakSet,a={schedule:function(t,a,s){void 0===a&&(a=!1),void 0===s&&(s=!1);var u=s&&i,c=u?e:n;return a&&o.add(t),-1===c.indexOf(t)&&(c.push(t),u&&i&&(r=e.length)),t},cancel:function(t){var e=n.indexOf(t);-1!==e&&n.splice(e,1),o.delete(t)},process:function(s){var u;if(i=!0,e=(u=[n,e])[0],(n=u[1]).length=0,r=e.length)for(var c=0;c<r;c++){var l=e[c];l(s),o.has(l)&&(a.schedule(l),t())}i=!1}};return a}((function(){return Ln=!0})),t}),{}),Vn=Fn.reduce((function(t,e){var n=Un[e];return t[e]=function(t,e,r){return void 0===e&&(e=!1),void 0===r&&(r=!1),Ln||Hn(),n.schedule(t,e,r)},t}),{}),qn=Fn.reduce((function(t,e){return t[e]=Un[e].cancel,t}),{}),Bn=Fn.reduce((function(t,e){return t[e]=function(){return Un[e].process(jn)},t}),{}),zn=function(t){return Un[t].process(jn)},Kn=function t(e){Ln=!1,jn.delta=Dn?1/60*1e3:Math.max(Math.min(e-jn.timestamp,40),1),jn.timestamp=e,Mn=!0,Fn.forEach(zn),Mn=!1,Ln&&(Dn=!1,Rn(t))},Hn=function(){Ln=!0,Dn=!0,Mn||Rn(Kn)},Wn=function(){return jn},Gn=Vn;function Qn(t,e,n){return void 0===n&&(n=0),t-e-n}var Yn=function(t){var e=function(e){var n=e.delta;return t(n)};return{start:function(){return Gn.update(e,!0)},stop:function(){return qn.update(e)}}};function Xn(t){var e,n,r,i,o,a=t.from,s=t.autoplay,u=void 0===s||s,c=t.driver,l=void 0===c?Yn:c,h=t.elapsed,f=void 0===h?0:h,p=t.repeat,d=void 0===p?0:p,v=t.repeatType,y=void 0===v?"loop":v,g=t.repeatDelay,m=void 0===g?0:g,b=t.onPlay,w=t.onStop,_=t.onComplete,T=t.onRepeat,E=t.onUpdate,I=Ce(t,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]),S=I.to,k=0,C=I.duration,x=!1,A=!0,O=function(t){if(Array.isArray(t.to))return On;if(Nn[t.type])return Nn[t.type];var e=new Set(Object.keys(t));return e.has("ease")||e.has("duration")&&!e.has("dampingRatio")?On:e.has("dampingRatio")||e.has("stiffness")||e.has("mass")||e.has("damping")||e.has("restSpeed")||e.has("restDelta")?De:On}(I);(null===(n=(e=O).needsInterpolation)||void 0===n?void 0:n.call(e,a,S))&&(o=hn([0,100],[a,S],{clamp:!1}),a=0,S=100);var N=O(ke(ke({},I),{from:a,to:S}));function P(){k++,"reverse"===y?f=function(t,e,n,r){return void 0===n&&(n=0),void 0===r&&(r=!0),r?Qn(e+-t,e,n):e-(t-e)+n}(f,C,m,A=k%2===0):(f=Qn(f,C,m),"mirror"===y&&N.flipTarget()),x=!1,T&&T()}function R(t){if(A||(t=-t),f+=t,!x){var e=N.next(Math.max(0,f));i=e.value,o&&(i=o(i)),x=A?e.done:f<=0}null===E||void 0===E||E(i),x&&(0===k&&(null!==C&&void 0!==C||(C=f)),k<d?function(t,e,n,r){return r?t>=e+n:t<=-n}(f,C,m,A)&&P():(r.stop(),_&&_()))}return u&&(null===b||void 0===b||b(),(r=l(R)).start()),{stop:function(){null===w||void 0===w||w(),r.stop()}}}function $n(t,e){return e?t*(1e3/e):0}var Jn=function(t){return 1e3*t},Zn=function(t,e){return 1-3*e+3*t},tr=function(t,e){return 3*e-6*t},er=function(t){return 3*t},nr=function(t,e,n){return((Zn(e,n)*t+tr(e,n))*t+er(e))*t},rr=function(t,e,n){return 3*Zn(e,n)*t*t+2*tr(e,n)*t+er(e)};function ir(t,e,n,r){if(t===e&&n===r)return yn;for(var i=new Float32Array(11),o=0;o<11;++o)i[o]=nr(.1*o,t,n);function a(e){for(var r=0,o=1;10!==o&&i[o]<=e;++o)r+=.1;--o;var a=r+.1*((e-i[o])/(i[o+1]-i[o])),s=rr(a,t,n);return s>=.001?function(t,e,n,r){for(var i=0;i<8;++i){var o=rr(e,n,r);if(0===o)return e;e-=(nr(e,n,r)-t)/o}return e}(e,a,t,n):0===s?a:function(t,e,n,r,i){var o,a,s=0;do{(o=nr(a=e+(n-e)/2,r,i)-t)>0?n=a:e=a}while(Math.abs(o)>1e-7&&++s<10);return a}(e,r,r+.1,t,n)}return function(t){return 0===t||1===t?t:nr(a(t),e,r)}}var or={linear:yn,easeIn:gn,easeInOut:bn,easeOut:mn,circIn:wn,circInOut:Tn,circOut:_n,backIn:En,backInOut:Sn,backOut:In,anticipate:kn,bounceIn:xn,bounceInOut:function(t){return t<.5?.5*(1-Cn(1-2*t)):.5*Cn(2*t-1)+.5},bounceOut:Cn},ar=function(t){if(Array.isArray(t)){t.length;var e=s(t,4);return ir(e[0],e[1],e[2],e[3])}return"string"===typeof t?or[t]:t},sr=function(t,e){return"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!en.test(e)||e.startsWith("url(")))},ur=function(){return{type:"spring",stiffness:500,damping:25,restDelta:.5,restSpeed:10}},cr=function(t){return{type:"spring",stiffness:550,damping:0===t?2*Math.sqrt(550):30,restDelta:.01,restSpeed:10}},lr=function(){return{type:"keyframes",ease:"linear",duration:.3}},hr=function(t){return{type:"keyframes",duration:.8,values:t}},fr={x:ur,y:ur,z:ur,rotate:ur,rotateX:ur,rotateY:ur,rotateZ:ur,scaleX:cr,scaleY:cr,scale:cr,opacity:lr,backgroundColor:lr,color:lr,default:cr},pr=new Set(["brightness","contrast","saturate","opacity"]);function dr(t){var e=t.slice(0,-1).split("("),n=e[0],r=e[1];if("drop-shadow"===n)return t;var i=(r.match(it)||[])[0];if(!i)return t;var o=r.replace(i,""),a=pr.has(n)?1:0;return i!==r&&(a*=100),n+"("+a+o+")"}var vr=/([a-z-]*)\(.*?\)/g,yr=et(et({},en),{getAnimatableNone:function(t){var e=t.match(vr);return e?e.map(dr).join(" "):t}}),gr=o(o({},bt),{color:Xe,backgroundColor:Xe,outlineColor:Xe,fill:Xe,stroke:Xe,borderColor:Xe,borderTopColor:Xe,borderRightColor:Xe,borderBottomColor:Xe,borderLeftColor:Xe,filter:yr,WebkitFilter:yr}),mr=function(t){return gr[t]};function br(t,e){var n,r=mr(t);return r!==yr&&(r=en),null===(n=r.getAnimatableNone)||void 0===n?void 0:n.call(r,e)}function wr(t){var e=t.ease,n=t.times,r=t.yoyo,i=t.flip,s=t.loop,u=a(t,["ease","times","yoyo","flip","loop"]),c=o({},u);return n&&(c.offset=n),u.duration&&(c.duration=Jn(u.duration)),u.repeatDelay&&(c.repeatDelay=Jn(u.repeatDelay)),e&&(c.ease=function(t){return Array.isArray(t)&&"number"!==typeof t[0]}(e)?e.map(ar):ar(e)),"tween"===u.type&&(c.type="keyframes"),(r||s||i)&&(!0,r?c.repeatType="reverse":s?c.repeatType="loop":i&&(c.repeatType="mirror"),c.repeat=s||r||i||u.repeat),"spring"!==u.type&&(c.type="keyframes"),c}function _r(t,e,n){var r;return Array.isArray(e.to)&&(null!==(r=t.duration)&&void 0!==r||(t.duration=.8)),function(t){Array.isArray(t.to)&&null===t.to[0]&&(t.to=u([],s(t.to)),t.to[0]=t.from)}(e),function(t){t.when,t.delay,t.delayChildren,t.staggerChildren,t.staggerDirection,t.repeat,t.repeatType,t.repeatDelay,t.from;var e=a(t,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from"]);return!!Object.keys(e).length}(t)||(t=o(o({},t),function(t,e){var n;return n=Ht(e)?hr:fr[t]||fr.default,o({to:e},n(e))}(n,e.to))),o(o({},e),wr(t))}function Tr(t,e,n,r,i){var a,s=Sr(r,t),u=null!==(a=s.from)&&void 0!==a?a:e.get(),c=sr(t,n);"none"===u&&c&&"string"===typeof n?u=br(t,n):Er(u)&&"string"===typeof n?u=Ir(n):!Array.isArray(n)&&Er(n)&&"string"===typeof u&&(n=Ir(u));var l=sr(t,u);return l&&c&&!1!==s.type?function(){var r={from:u,to:n,velocity:e.getVelocity(),onComplete:i,onUpdate:function(t){return e.set(t)}};return"inertia"===s.type||"decay"===s.type?function(t){var e,n=t.from,r=void 0===n?0:n,i=t.velocity,o=void 0===i?0:i,a=t.min,s=t.max,u=t.power,c=void 0===u?.8:u,l=t.timeConstant,h=void 0===l?750:l,f=t.bounceStiffness,p=void 0===f?500:f,d=t.bounceDamping,v=void 0===d?10:d,y=t.restDelta,g=void 0===y?1:y,m=t.modifyTarget,b=t.driver,w=t.onUpdate,_=t.onComplete;function T(t){return void 0!==a&&t<a||void 0!==s&&t>s}function E(t){return void 0===a?s:void 0===s||Math.abs(a-t)<Math.abs(s-t)?a:s}function I(t){null===e||void 0===e||e.stop(),e=Xn(ke(ke({},t),{driver:b,onUpdate:function(e){var n;null===w||void 0===w||w(e),null===(n=t.onUpdate)||void 0===n||n.call(t,e)},onComplete:_}))}function S(t){I(ke({type:"spring",stiffness:p,damping:v,restDelta:g},t))}if(T(r))S({from:r,velocity:o,to:E(r)});else{var k=c*o+r;"undefined"!==typeof m&&(k=m(k));var C,x,A=E(k),O=A===a?-1:1;I({type:"decay",from:r,velocity:o,timeConstant:h,power:c,restDelta:g,modifyTarget:m,onUpdate:T(k)?function(t){C=x,x=t,o=$n(t-C,Wn().delta),(1===O&&t>A||-1===O&&t<A)&&S({from:t,to:A,velocity:o})}:void 0})}return{stop:function(){return null===e||void 0===e?void 0:e.stop()}}}(o(o({},r),s)):Xn(o(o({},_r(s,r,t)),{onUpdate:function(t){var e;r.onUpdate(t),null===(e=s.onUpdate)||void 0===e||e.call(s,t)},onComplete:function(){var t;r.onComplete(),null===(t=s.onComplete)||void 0===t||t.call(s)}}))}:function(){var t;return e.set(n),i(),null===(t=null===s||void 0===s?void 0:s.onComplete)||void 0===t||t.call(s),{stop:function(){}}}}function Er(t){return 0===t||"string"===typeof t&&0===parseFloat(t)&&-1===t.indexOf(" ")}function Ir(t){return"number"===typeof t?0:br("",t)}function Sr(t,e){return t[e]||t.default||t}function kr(t,e,n,r){return void 0===r&&(r={}),e.start((function(i){var o,a,s=Tr(t,e,n,r,i),u=function(t,e){var n;return null!==(n=(Sr(t,e)||{}).delay)&&void 0!==n?n:0}(r,t),c=function(){return a=s()};return u?o=setTimeout(c,Jn(u)):c(),function(){clearTimeout(o),null===a||void 0===a||a.stop()}}))}function Cr(t,e){-1===t.indexOf(e)&&t.push(e)}function xr(t,e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}var Ar=function(){function t(){this.subscriptions=[]}return t.prototype.add=function(t){var e=this;return Cr(this.subscriptions,t),function(){return xr(e.subscriptions,t)}},t.prototype.notify=function(t,e,n){var r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](t,e,n);else for(var i=0;i<r;i++){var o=this.subscriptions[i];o&&o(t,e,n)}},t.prototype.getSize=function(){return this.subscriptions.length},t.prototype.clear=function(){this.subscriptions.length=0},t}(),Or=function(){function t(t){var e,n=this;this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new Ar,this.velocityUpdateSubscribers=new Ar,this.renderSubscribers=new Ar,this.canTrackVelocity=!1,this.updateAndNotify=function(t,e){void 0===e&&(e=!0),n.prev=n.current,n.current=t;var r=Wn(),i=r.delta,o=r.timestamp;n.lastUpdated!==o&&(n.timeDelta=i,n.lastUpdated=o,Gn.postRender(n.scheduleVelocityCheck)),n.prev!==n.current&&n.updateSubscribers.notify(n.current),n.velocityUpdateSubscribers.getSize()&&n.velocityUpdateSubscribers.notify(n.getVelocity()),e&&n.renderSubscribers.notify(n.current)},this.scheduleVelocityCheck=function(){return Gn.postRender(n.velocityCheck)},this.velocityCheck=function(t){t.timestamp!==n.lastUpdated&&(n.prev=n.current,n.velocityUpdateSubscribers.notify(n.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=(e=this.current,!isNaN(parseFloat(e)))}return t.prototype.onChange=function(t){return this.updateSubscribers.add(t)},t.prototype.clearListeners=function(){this.updateSubscribers.clear()},t.prototype.onRenderRequest=function(t){return t(this.get()),this.renderSubscribers.add(t)},t.prototype.attach=function(t){this.passiveEffect=t},t.prototype.set=function(t,e){void 0===e&&(e=!0),e&&this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t,e)},t.prototype.get=function(){return this.current},t.prototype.getPrevious=function(){return this.prev},t.prototype.getVelocity=function(){return this.canTrackVelocity?$n(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0},t.prototype.start=function(t){var e=this;return this.stop(),new Promise((function(n){e.hasAnimated=!0,e.stopAnimation=t(n)})).then((function(){return e.clearAnimation()}))},t.prototype.stop=function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()},t.prototype.isAnimating=function(){return!!this.stopAnimation},t.prototype.clearAnimation=function(){this.stopAnimation=null},t.prototype.destroy=function(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()},t}();function Nr(t){return new Or(t)}var Pr=function(t){return function(e){return e.test(t)}},Rr=[vt,ht,lt,ct,pt,ft,{test:function(t){return"auto"===t},parse:function(t){return t}}],Dr=function(t){return Rr.find(Pr(t))},Lr=u(u([],s(Rr)),[Xe,en]),Mr=function(t){return Lr.find(Pr(t))};function jr(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Nr(n))}function Fr(t,e){var n=R(t,e),r=n?t.makeTargetAnimatable(n,!1):{},i=r.transitionEnd,s=void 0===i?{}:i;r.transition;var u,c=a(r,["transitionEnd","transition"]);for(var l in c=o(o({},c),s)){jr(t,l,(u=c[l],Ht(u)?u[u.length-1]||0:u))}}function Ur(t,e){if(e)return(e[t]||e.default||e).from}function Vr(t,e,n){var r;void 0===n&&(n={});var i=R(t,e,n.custom),a=(i||{}).transition,u=void 0===a?t.getDefaultTransition()||{}:a;n.transitionOverride&&(u=n.transitionOverride);var c=i?function(){return qr(t,i,n)}:function(){return Promise.resolve()},l=(null===(r=t.variantChildren)||void 0===r?void 0:r.size)?function(r){void 0===r&&(r=0);var i=u.delayChildren,a=void 0===i?0:i,s=u.staggerChildren,c=u.staggerDirection;return function(t,e,n,r,i,a){void 0===n&&(n=0);void 0===r&&(r=0);void 0===i&&(i=1);var s=[],u=(t.variantChildren.size-1)*r,c=1===i?function(t){return void 0===t&&(t=0),t*r}:function(t){return void 0===t&&(t=0),u-t*r};return Array.from(t.variantChildren).sort(Br).forEach((function(t,r){s.push(Vr(t,e,o(o({},a),{delay:n+c(r)})).then((function(){return t.notifyAnimationComplete(e)})))})),Promise.all(s)}(t,e,a+r,s,c,n)}:function(){return Promise.resolve()},h=u.when;if(h){var f=s("beforeChildren"===h?[c,l]:[l,c],2),p=f[0],d=f[1];return p().then(d)}return Promise.all([c(),l(n.delay)])}function qr(t,e,n){var r,i=void 0===n?{}:n,s=i.delay,u=void 0===s?0:s,c=i.transitionOverride,l=i.type,h=t.makeTargetAnimatable(e),f=h.transition,p=void 0===f?t.getDefaultTransition():f,d=h.transitionEnd,v=a(h,["transition","transitionEnd"]);c&&(p=c);var y=[],g=l&&(null===(r=t.animationState)||void 0===r?void 0:r.getState()[l]);for(var m in v){var b=t.getValue(m),w=v[m];if(!(!b||void 0===w||g&&zr(g,m))){var _=kr(m,b,w,o({delay:u},p));y.push(_)}}return Promise.all(y).then((function(){d&&Fr(t,d)}))}function Br(t,e){return t.sortNodePosition(e)}function zr(t,e){var n=t.protectedKeys,r=t.needsAnimating,i=n.hasOwnProperty(e)&&!0!==r[e];return r[e]=!1,i}var Kr=[$t.Animate,$t.Hover,$t.Tap,$t.Drag,$t.Focus,$t.Exit],Hr=u([],s(Kr)).reverse(),Wr=Kr.length;function Gr(t){return function(e){return Promise.all(e.map((function(e){var n=e.animation,r=e.options;return function(t,e,n){var r;if(void 0===n&&(n={}),t.notifyAnimationStart(),Array.isArray(e)){var i=e.map((function(e){return Vr(t,e,n)}));r=Promise.all(i)}else if("string"===typeof e)r=Vr(t,e,n);else{var o="function"===typeof e?R(t,e,n.custom):e;r=qr(t,o,n)}return r.then((function(){return t.notifyAnimationComplete(e)}))}(t,n,r)})))}}function Qr(t){var e=Gr(t),n=function(){var t;return(t={})[$t.Animate]=Yr(!0),t[$t.Hover]=Yr(),t[$t.Tap]=Yr(),t[$t.Drag]=Yr(),t[$t.Focus]=Yr(),t[$t.Exit]=Yr(),t}(),r={},i=!0,c=function(e,n){var r=R(t,n);if(r){r.transition;var i=r.transitionEnd,s=a(r,["transition","transitionEnd"]);e=o(o(o({},e),s),i)}return e};function l(a,l){for(var h,f=t.getProps(),p=t.getVariantContext(!0)||{},d=[],v=new Set,y={},g=1/0,m=function(e){var r=Hr[e],m=n[r],b=null!==(h=f[r])&&void 0!==h?h:p[r],w=N(b),_=r===l?m.isActive:null;!1===_&&(g=e);var T=b===p[r]&&b!==f[r]&&w;if(T&&i&&t.manuallyAnimateOnMount&&(T=!1),m.protectedKeys=o({},y),!m.isActive&&null===_||!b&&!m.prevProp||Kt(b)||"boolean"===typeof b)return"continue";var E=function(t,e){if("string"===typeof e)return e!==t;if(O(e))return!Se(e,t);return!1}(m.prevProp,b)||r===l&&m.isActive&&!T&&w||e>g&&w,I=Array.isArray(b)?b:[b],S=I.reduce(c,{});!1===_&&(S={});var k=m.prevResolvedValues,C=void 0===k?{}:k,x=o(o({},C),S),A=function(t){E=!0,v.delete(t),m.needsAnimating[t]=!0};for(var P in x){var R=S[P],D=C[P];y.hasOwnProperty(P)||(R!==D?Ht(R)&&Ht(D)?Se(R,D)?m.protectedKeys[P]=!0:A(P):void 0!==R?A(P):v.add(P):void 0!==R&&v.has(P)?A(P):m.protectedKeys[P]=!0)}m.prevProp=b,m.prevResolvedValues=S,m.isActive&&(y=o(o({},y),S)),i&&t.blockInitialAnimation&&(E=!1),E&&!T&&d.push.apply(d,u([],s(I.map((function(t){return{animation:t,options:o({type:r},a)}})))))},b=0;b<Wr;b++)m(b);if(r=o({},y),v.size){var w={};v.forEach((function(e){var n=t.getBaseTarget(e);void 0!==n&&(w[e]=n)})),d.push({animation:w})}var _=Boolean(d.length);return i&&!1===f.initial&&!t.manuallyAnimateOnMount&&(_=!1),i=!1,_?e(d):Promise.resolve()}return{isAnimated:function(t){return void 0!==r[t]},animateChanges:l,setActive:function(e,r,i){var o;return n[e].isActive===r?Promise.resolve():(null===(o=t.variantChildren)||void 0===o||o.forEach((function(t){var n;return null===(n=t.animationState)||void 0===n?void 0:n.setActive(e,r)})),n[e].isActive=r,l(i,e))},setAnimateFunction:function(n){e=n(t)},getState:function(){return n}}}function Yr(t){return void 0===t&&(t=!1),{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}var Xr={animation:Ee((function(t){var e=t.visualElement,n=t.animate;e.animationState||(e.animationState=Qr(e)),Kt(n)&&Object(c.useEffect)((function(){return n.subscribe(e)}),[n])})),exit:Ee((function(t){var e=t.custom,n=t.visualElement,r=s(w(),2),i=r[0],o=r[1],a=Object(c.useContext)(m);Object(c.useEffect)((function(){var t,r,s=null===(t=n.animationState)||void 0===t?void 0:t.setActive($t.Exit,!i,{custom:null!==(r=null===a||void 0===a?void 0:a.custom)&&void 0!==r?r:e});!i&&(null===s||void 0===s||s.then(o))}),[i])}))},$r=function(t){return t.hasOwnProperty("x")&&t.hasOwnProperty("y")},Jr=function(t){return $r(t)&&t.hasOwnProperty("z")},Zr=function(t,e){return Math.abs(t-e)};function ti(t,e){if(nn(t)&&nn(e))return Zr(t,e);if($r(t)&&$r(e)){var n=Zr(t.x,e.x),r=Zr(t.y,e.y),i=Jr(t)&&Jr(e)?Zr(t.z,e.z):0;return Math.sqrt(Math.pow(n,2)+Math.pow(r,2)+Math.pow(i,2))}}var ei=function(){function t(t,e,n){var r=this,i=(void 0===n?{}:n).transformPagePoint;if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(r.lastMoveEvent&&r.lastMoveEventInfo){var t=ii(r.lastMoveEventInfo,r.history),e=null!==r.startEvent,n=ti(t.offset,{x:0,y:0})>=3;if(e||n){var i=t.point,a=Wn().timestamp;r.history.push(o(o({},i),{timestamp:a}));var s=r.handlers,u=s.onStart,c=s.onMove;e||(u&&u(r.lastMoveEvent,t),r.startEvent=r.lastMoveEvent),c&&c(r.lastMoveEvent,t)}}},this.handlePointerMove=function(t,e){r.lastMoveEvent=t,r.lastMoveEventInfo=ni(e,r.transformPagePoint),ne(t)&&0===t.buttons?r.handlePointerUp(t,e):Gn.update(r.updatePoint,!0)},this.handlePointerUp=function(t,e){r.end();var n=r.handlers,i=n.onEnd,o=n.onSessionEnd,a=ii(ni(e,r.transformPagePoint),r.history);r.startEvent&&i&&i(t,a),o&&o(t,a)},!(re(t)&&t.touches.length>1)){this.handlers=e,this.transformPagePoint=i;var a=ni(se(t),this.transformPagePoint),s=a.point,u=Wn().timestamp;this.history=[o(o({},s),{timestamp:u})];var c=e.onSessionStart;c&&c(t,ii(a,this.history)),this.removeListeners=Te(fe(window,"pointermove",this.handlePointerMove),fe(window,"pointerup",this.handlePointerUp),fe(window,"pointercancel",this.handlePointerUp))}}return t.prototype.updateHandlers=function(t){this.handlers=t},t.prototype.end=function(){this.removeListeners&&this.removeListeners(),qn.update(this.updatePoint)},t}();function ni(t,e){return e?{point:e(t.point)}:t}function ri(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ii(t,e){var n=t.point;return{point:n,delta:ri(n,ai(e)),offset:ri(n,oi(e)),velocity:si(e,.1)}}function oi(t){return t[0]}function ai(t){return t[t.length-1]}function si(t,e){if(t.length<2)return{x:0,y:0};for(var n=t.length-1,r=null,i=ai(t);n>=0&&(r=t[n],!(i.timestamp-r.timestamp>Jn(e)));)n--;if(!r)return{x:0,y:0};var o=(i.timestamp-r.timestamp)/1e3;if(0===o)return{x:0,y:0};var a={x:(i.x-r.x)/o,y:(i.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function ui(t){return t}function ci(t){var e=t.top;return{x:{min:t.left,max:t.right},y:{min:e,max:t.bottom}}}var li={translate:0,scale:1,origin:0,originPoint:0};function hi(){return{x:o({},li),y:o({},li)}}function fi(t){return[t("x"),t("y")]}function pi(t,e,n){var r=e.min,i=e.max;return void 0!==r&&t<r?t=n?je(r,t,n.min):Math.max(t,r):void 0!==i&&t>i&&(t=n?je(i,t,n.max):Math.min(t,i)),t}function di(t,e,n){return{min:void 0!==e?t.min+e:void 0,max:void 0!==n?t.max+n-(t.max-t.min):void 0}}function vi(t,e){var n,r=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&(r=(n=s([i,r],2))[0],i=n[1]),{min:t.min+r,max:t.min+i}}function yi(t,e,n){return{min:gi(t,e),max:gi(t,n)}}function gi(t,e){var n;return"number"===typeof t?t:null!==(n=t[e])&&void 0!==n?n:0}function mi(t,e){return ci(function(t,e){var n=t.top,r=t.left,i=t.bottom,o=t.right;void 0===e&&(e=ui);var a=e({x:r,y:n}),s=e({x:o,y:i});return{top:a.y,left:a.x,bottom:s.y,right:s.x}}(t.getBoundingClientRect(),e))}function bi(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=.01),ti(t,e)<n}function wi(t){return t.max-t.min}function _i(t,e){var n=.5,r=wi(t),i=wi(e);return i>r?n=Me(e.min,e.max-r,t.min):r>i&&(n=Me(t.min,t.max-i,e.min)),xe(0,1,n)}function Ti(t,e,n,r){void 0===r&&(r=.5),t.origin=r,t.originPoint=je(e.min,e.max,t.origin),t.scale=wi(n)/wi(e),bi(t.scale,1,1e-4)&&(t.scale=1),t.translate=je(n.min,n.max,t.origin)-t.originPoint,bi(t.translate)&&(t.translate=0)}function Ei(t,e,n,r){Ti(t.x,e.x,n.x,Ii(r.originX)),Ti(t.y,e.y,n.y,Ii(r.originY))}function Ii(t){return"number"===typeof t?t:.5}function Si(t,e,n){t.min=n.min+e.min,t.max=t.min+wi(e)}var ki=function(t,e){return t.depth-e.depth};function Ci(t){return t.projection.isEnabled||t.shouldResetTransform()}function xi(t,e){void 0===e&&(e=[]);var n=t.parent;return n&&xi(n,e),Ci(t)&&e.push(t),e}function Ai(t){if(!t.shouldResetTransform()){var e,n=t.getLayoutState();t.notifyBeforeLayoutMeasure(n.layout),n.isHydrated=!0,n.layout=t.measureViewportBox(),n.layoutCorrected=(e=n.layout,{x:o({},e.x),y:o({},e.y)}),t.notifyLayoutMeasure(n.layout,t.prevViewportBox||n.layout),Gn.update((function(){return t.rebaseProjectionTarget()}))}}function Oi(t,e){return{min:e.min-t.min,max:e.max-t.min}}function Ni(t,e){return{x:Oi(t.x,e.x),y:Oi(t.y,e.y)}}function Pi(t,e){var n=t.getLayoutId(),r=e.getLayoutId();return n!==r||void 0===r&&t!==e}function Ri(t){var e=t.getProps(),n=e.drag,r=e._dragX;return n&&!r}function Di(t,e){t.min=e.min,t.max=e.max}function Li(t,e,n){return n+e*(t-n)}function Mi(t,e,n,r,i){return void 0!==i&&(t=Li(t,i,r)),Li(t,n,r)+e}function ji(t,e,n,r,i){void 0===e&&(e=0),void 0===n&&(n=1),t.min=Mi(t.min,e,n,r,i),t.max=Mi(t.max,e,n,r,i)}function Fi(t,e){var n=e.x,r=e.y;ji(t.x,n.translate,n.scale,n.originPoint),ji(t.y,r.translate,r.scale,r.originPoint)}function Ui(t,e,n,r){var i=s(r,3),o=i[0],a=i[1],u=i[2];t.min=e.min,t.max=e.max;var c=void 0!==n[u]?n[u]:.5,l=je(e.min,e.max,c);ji(t,n[o],n[a],l,n.scale)}var Vi=["x","scaleX","originX"],qi=["y","scaleY","originY"];function Bi(t,e,n){Ui(t.x,e.x,n,Vi),Ui(t.y,e.y,n,qi)}function zi(t,e,n,r,i){return t=Li(t-=e,1/n,r),void 0!==i&&(t=Li(t,1/i,r)),t}function Ki(t,e,n){var r=s(n,3),i=r[0],o=r[1],a=r[2];!function(t,e,n,r,i){void 0===e&&(e=0),void 0===n&&(n=1),void 0===r&&(r=.5);var o=je(t.min,t.max,r)-e;t.min=zi(t.min,e,n,o,i),t.max=zi(t.max,e,n,o,i)}(t,e[i],e[o],e[a],e.scale)}function Hi(t,e){Ki(t.x,e,Vi),Ki(t.y,e,qi)}var Wi=new Set;function Gi(t,e,n){t[n]||(t[n]=[]),t[n].push(e)}function Qi(t){return Wi.add(t),function(){return Wi.delete(t)}}function Yi(){if(Wi.size){var t=0,e=[[]],n=[],r=function(n){return Gi(e,n,t)},i=function(e){Gi(n,e,t),t++};Wi.forEach((function(e){e(r,i),t=0})),Wi.clear();for(var o=n.length,a=0;a<=o;a++)e[a]&&e[a].forEach($i),n[a]&&n[a].forEach($i)}}var Xi,$i=function(t){return t()},Ji=new WeakMap,Zi=function(){function t(t){var e=t.visualElement;this.isDragging=!1,this.currentDirection=null,this.constraints=!1,this.elastic={x:{min:0,max:1},y:{min:0,max:1}},this.props={},this.hasMutatedConstraints=!1,this.cursorProgress={x:.5,y:.5},this.originPoint={},this.openGlobalLock=null,this.panSession=null,this.visualElement=e,this.visualElement.enableLayoutProjection(),Ji.set(e,this)}return t.prototype.start=function(t,e){var n=this,r=void 0===e?{}:e,i=r.snapToCursor,o=void 0!==i&&i,a=r.cursorProgress,c=this.props.transformPagePoint;this.panSession=new ei(t,{onSessionStart:function(t){var e;n.stopMotion();var r=function(t){return se(t,"client")}(t).point;null===(e=n.cancelLayout)||void 0===e||e.call(n),n.cancelLayout=Qi((function(t,e){var i=xi(n.visualElement),c=function(t){var e=[];return t.children.forEach((function t(n){Ci(n)&&e.push(n),n.children.forEach(t)})),e.sort(ki)}(n.visualElement),l=u(u([],s(i)),s(c)),h=!1;n.isLayoutDrag()&&n.visualElement.lockProjectionTarget(),e((function(){l.forEach((function(t){return t.resetTransform()}))})),t((function(){Ai(n.visualElement),c.forEach(Ai)})),e((function(){l.forEach((function(t){return t.restoreTransform()})),o&&(h=n.snapToCursor(r))})),t((function(){Boolean(n.getAxisMotionValue("x")&&!n.isExternalDrag())||n.visualElement.rebaseProjectionTarget(!0,n.visualElement.measureViewportBox(!1)),n.visualElement.scheduleUpdateLayoutProjection();var t=n.visualElement.projection;fi((function(e){if(!h){var i=t.target[e],o=i.min,s=i.max;n.cursorProgress[e]=a?a[e]:Me(o,s,r[e])}var u=n.getAxisMotionValue(e);u&&(n.originPoint[e]=u.get())}))})),e((function(){Bn.update(),Bn.preRender(),Bn.render(),Bn.postRender()})),t((function(){return n.resolveDragConstraints()}))}))},onStart:function(t,e){var r,i,o,a=n.props,s=a.drag,u=a.dragPropagation;(!s||u||(n.openGlobalLock&&n.openGlobalLock(),n.openGlobalLock=ge(s),n.openGlobalLock))&&(Yi(),n.isDragging=!0,n.currentDirection=null,null===(i=(r=n.props).onDragStart)||void 0===i||i.call(r,t,e),null===(o=n.visualElement.animationState)||void 0===o||o.setActive($t.Drag,!0))},onMove:function(t,e){var r,i,o,a,s=n.props,u=s.dragPropagation,c=s.dragDirectionLock;if(u||n.openGlobalLock){var l=e.offset;if(c&&null===n.currentDirection)return n.currentDirection=function(t,e){void 0===e&&(e=10);var n=null;Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x");return n}(l),void(null!==n.currentDirection&&(null===(i=(r=n.props).onDirectionLock)||void 0===i||i.call(r,n.currentDirection)));n.updateAxis("x",e.point,l),n.updateAxis("y",e.point,l),null===(a=(o=n.props).onDrag)||void 0===a||a.call(o,t,e),Xi=t}},onSessionEnd:function(t,e){return n.stop(t,e)}},{transformPagePoint:c})},t.prototype.resolveDragConstraints=function(){var t=this,e=this.props,n=e.dragConstraints,r=e.dragElastic,i=this.visualElement.getLayoutState().layoutCorrected;this.constraints=!!n&&(A(n)?this.resolveRefConstraints(i,n):function(t,e){var n=e.top,r=e.left,i=e.bottom,o=e.right;return{x:di(t.x,r,o),y:di(t.y,n,i)}}(i,n)),this.elastic=function(t){return!1===t?t=0:!0===t&&(t=.35),{x:yi(t,"left","right"),y:yi(t,"top","bottom")}}(r),this.constraints&&!this.hasMutatedConstraints&&fi((function(e){t.getAxisMotionValue(e)&&(t.constraints[e]=function(t,e){var n={};return void 0!==e.min&&(n.min=e.min-t.min),void 0!==e.max&&(n.max=e.max-t.min),n}(i[e],t.constraints[e]))}))},t.prototype.resolveRefConstraints=function(t,e){var n=this.props,r=n.onMeasureDragConstraints,i=n.transformPagePoint,o=e.current;this.constraintsBox=mi(o,i);var a=function(t,e){return{x:vi(t.x,e.x),y:vi(t.y,e.y)}}(t,this.constraintsBox);if(r){var s=r(function(t){var e=t.x,n=t.y;return{top:n.min,bottom:n.max,left:e.min,right:e.max}}(a));this.hasMutatedConstraints=!!s,s&&(a=ci(s))}return a},t.prototype.cancelDrag=function(){var t,e;this.visualElement.unlockProjectionTarget(),null===(t=this.cancelLayout)||void 0===t||t.call(this),this.isDragging=!1,this.panSession&&this.panSession.end(),this.panSession=null,!this.props.dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),null===(e=this.visualElement.animationState)||void 0===e||e.setActive($t.Drag,!1)},t.prototype.stop=function(t,e){var n,r,i;null===(n=this.panSession)||void 0===n||n.end(),this.panSession=null;var o=this.isDragging;if(this.cancelDrag(),o){var a=e.velocity;this.animateDragEnd(a),null===(i=(r=this.props).onDragEnd)||void 0===i||i.call(r,t,e)}},t.prototype.snapToCursor=function(t){var e=this;return fi((function(n){if(to(n,e.props.drag,e.currentDirection)){var r=e.getAxisMotionValue(n);if(!r)return e.cursorProgress[n]=.5,!0;var i=e.visualElement.getLayoutState().layout,o=i[n].max-i[n].min,a=i[n].min+o/2,s=t[n]-a;e.originPoint[n]=t[n],r.set(s)}})).includes(!0)},t.prototype.updateAxis=function(t,e,n){if(to(t,this.props.drag,this.currentDirection))return this.getAxisMotionValue(t)?this.updateAxisMotionValue(t,n):this.updateVisualElementAxis(t,e)},t.prototype.updateAxisMotionValue=function(t,e){var n=this.getAxisMotionValue(t);if(e&&n){var r=this.originPoint[t]+e[t],i=this.constraints?pi(r,this.constraints[t],this.elastic[t]):r;n.set(i)}},t.prototype.updateVisualElementAxis=function(t,e){var n,r=this.visualElement.getLayoutState().layout[t],i=r.max-r.min,o=this.cursorProgress[t],a=function(t,e,n,r,i){var o=t-e*n;return r?pi(o,r,i):o}(e[t],i,o,null===(n=this.constraints)||void 0===n?void 0:n[t],this.elastic[t]);this.visualElement.setProjectionTargetAxis(t,a,a+i)},t.prototype.setProps=function(t){var e=t.drag,n=void 0!==e&&e,r=t.dragDirectionLock,i=void 0!==r&&r,s=t.dragPropagation,u=void 0!==s&&s,c=t.dragConstraints,l=void 0!==c&&c,h=t.dragElastic,f=void 0===h?.35:h,p=t.dragMomentum,d=void 0===p||p,v=a(t,["drag","dragDirectionLock","dragPropagation","dragConstraints","dragElastic","dragMomentum"]);this.props=o({drag:n,dragDirectionLock:i,dragPropagation:u,dragConstraints:l,dragElastic:f,dragMomentum:d},v)},t.prototype.getAxisMotionValue=function(t){var e=this.props,n=e.layout,r=e.layoutId,i="_drag"+t.toUpperCase();return this.props[i]?this.props[i]:n||void 0!==r?void 0:this.visualElement.getValue(t,0)},t.prototype.isLayoutDrag=function(){return!this.getAxisMotionValue("x")},t.prototype.isExternalDrag=function(){var t=this.props,e=t._dragX,n=t._dragY;return e||n},t.prototype.animateDragEnd=function(t){var e=this,n=this.props,r=n.drag,i=n.dragMomentum,a=n.dragElastic,s=n.dragTransition,u=function(t,e){void 0===e&&(e=!0);var n,r=t.getProjectionParent();return!!r&&(e?Hi(n=Ni(r.projection.target,t.projection.target),r.getLatestValues()):n=Ni(r.getLayoutState().layout,t.getLayoutState().layout),fi((function(e){return t.setProjectionTargetAxis(e,n[e].min,n[e].max,!0)})),!0)}(this.visualElement,this.isLayoutDrag()&&!this.isExternalDrag()),c=this.constraints||{};if(u&&Object.keys(c).length&&this.isLayoutDrag()){var l=this.visualElement.getProjectionParent();if(l){var h=Ni(l.projection.targetFinal,c);fi((function(t){var e=h[t],n=e.min,r=e.max;c[t]={min:isNaN(n)?void 0:n,max:isNaN(r)?void 0:r}}))}}var f=fi((function(n){var l;if(to(n,r,e.currentDirection)){var h=null!==(l=null===c||void 0===c?void 0:c[n])&&void 0!==l?l:{},f=a?200:1e6,p=a?40:1e7,d=o(o({type:"inertia",velocity:i?t[n]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10},s),h);return e.getAxisMotionValue(n)?e.startAxisValueAnimation(n,d):e.visualElement.startLayoutAnimation(n,d,u)}}));return Promise.all(f).then((function(){var t,n;null===(n=(t=e.props).onDragTransitionEnd)||void 0===n||n.call(t)}))},t.prototype.stopMotion=function(){var t=this;fi((function(e){var n=t.getAxisMotionValue(e);n?n.stop():t.visualElement.stopLayoutAnimation()}))},t.prototype.startAxisValueAnimation=function(t,e){var n=this.getAxisMotionValue(t);if(n){var r=n.get();return n.set(r),n.set(r),kr(t,n,0,e)}},t.prototype.scalePoint=function(){var t=this,e=this.props,n=e.drag;if(A(e.dragConstraints)&&this.constraintsBox){this.stopMotion();var r={x:0,y:0};fi((function(e){r[e]=_i(t.visualElement.projection.target[e],t.constraintsBox[e])})),this.updateConstraints((function(){fi((function(e){if(to(e,n,null)){var i=function(t,e,n){var r=t.max-t.min,i=je(e.min,e.max-r,n);return{min:i,max:i+r}}(t.visualElement.projection.target[e],t.constraintsBox[e],r[e]),o=i.min,a=i.max;t.visualElement.setProjectionTargetAxis(e,o,a)}}))})),setTimeout(Yi,1)}},t.prototype.updateConstraints=function(t){var e=this;this.cancelLayout=Qi((function(n,r){var i=xi(e.visualElement);r((function(){return i.forEach((function(t){return t.resetTransform()}))})),n((function(){return Ai(e.visualElement)})),r((function(){return i.forEach((function(t){return t.restoreTransform()}))})),n((function(){e.resolveDragConstraints()})),t&&r(t)}))},t.prototype.mount=function(t){var e=this,n=fe(t.getInstance(),"pointerdown",(function(t){var n=e.props,r=n.drag,i=n.dragListener;r&&(void 0===i||i)&&e.start(t)})),r=te(window,"resize",(function(){e.scalePoint()})),i=t.onLayoutUpdate((function(){e.isDragging&&e.resolveDragConstraints()})),o=t.prevDragCursor;return o&&this.start(Xi,{cursorProgress:o}),function(){null===n||void 0===n||n(),null===r||void 0===r||r(),null===i||void 0===i||i(),e.cancelDrag()}},t}();function to(t,e,n){return(!0===e||e===t)&&(null===n||n===t)}var eo,no,ro={pan:Ee((function(t){var e=t.onPan,n=t.onPanStart,r=t.onPanEnd,i=t.onPanSessionStart,o=t.visualElement,a=e||n||r||i,s=Object(c.useRef)(null),u=Object(c.useContext)(y).transformPagePoint,l={onSessionStart:i,onStart:n,onMove:e,onEnd:function(t,e){s.current=null,r&&r(t,e)}};Object(c.useEffect)((function(){null!==s.current&&s.current.updateHandlers(l)})),pe(o,"pointerdown",a&&function(t){s.current=new ei(t,l,{transformPagePoint:u})}),we((function(){return s.current&&s.current.end()}))})),drag:Ee((function(t){var e=t.dragControls,n=t.visualElement,r=Object(c.useContext)(y).transformPagePoint,i=b((function(){return new Zi({visualElement:n})}));i.setProps(o(o({},t),{transformPagePoint:r})),Object(c.useEffect)((function(){return e&&e.subscribe(i)}),[i]),Object(c.useEffect)((function(){return i.mount(n)}),[])}))};function io(t){return"string"===typeof t&&t.startsWith("var(--")}!function(t){t[t.Entering=0]="Entering",t[t.Present=1]="Present",t[t.Exiting=2]="Exiting"}(eo||(eo={})),function(t){t[t.Hide=0]="Hide",t[t.Show=1]="Show"}(no||(no={}));var oo=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function ao(t,e,n){void 0===n&&(n=1);var r=s(function(t){var e=oo.exec(t);if(!e)return[,];var n=s(e,3);return[n[1],n[2]]}(t),2),i=r[0],o=r[1];if(i){var a=window.getComputedStyle(e).getPropertyValue(i);return a?a.trim():io(o)?ao(o,e,n+1):o}}function so(t,e){return t/(e.max-e.min)*100}var uo={process:function(t,e,n){var r=n.target;if("string"===typeof t){if(!ht.test(t))return t;t=parseFloat(t)}return so(t,r.x)+"% "+so(t,r.y)+"%"}},co={borderRadius:o(o({},uo),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:uo,borderTopRightRadius:uo,borderBottomLeftRadius:uo,borderBottomRightRadius:uo,boxShadow:{process:function(t,e){var n=e.delta,r=e.treeScale,i=t,o=t.includes("var("),a=[];o&&(t=t.replace(oo,(function(t){return a.push(t),"_$css"})));var s=en.parse(t);if(s.length>5)return i;var u=en.createTransformer(t),c="number"!==typeof s[0]?1:0,l=n.x.scale*r.x,h=n.y.scale*r.y;s[0+c]/=l,s[1+c]/=h;var f=je(l,h,.5);"number"===typeof s[2+c]&&(s[2+c]/=f),"number"===typeof s[3+c]&&(s[3+c]/=f);var p=u(s);if(o){var d=0;p=p.replace("_$css",(function(){var t=a[d];return d++,t}))}return p}}},lo=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.frameTarget={x:{min:0,max:1},y:{min:0,max:1}},e.currentAnimationTarget={x:{min:0,max:1},y:{min:0,max:1}},e.isAnimating={x:!1,y:!1},e.stopAxisAnimation={x:void 0,y:void 0},e.isAnimatingTree=!1,e.animate=function(t,n,r){void 0===r&&(r={});var i=r.originBox,s=r.targetBox,u=r.visibilityAction,c=r.shouldStackAnimate,l=r.onComplete,h=r.prevParent,f=a(r,["originBox","targetBox","visibilityAction","shouldStackAnimate","onComplete","prevParent"]),p=e.props,d=p.visualElement,v=p.layout;if(!1===c)return e.isAnimatingTree=!1,e.safeToRemove();if(!e.isAnimatingTree||!0===c){c&&(e.isAnimatingTree=!0),n=i||n,t=s||t;var y=!1,g=d.getProjectionParent();if(g){var m=g.prevViewportBox,b=g.getLayoutState().layout;h&&(s&&(b=h.getLayoutState().layout),i&&!Pi(h,g)&&h.prevViewportBox&&(m=h.prevViewportBox)),m&&go(h,i,s)&&(y=!0,n=Ni(m,n),t=Ni(b,t))}var w=ho(n,t),_=fi((function(r){var i,a;if("position"===v){var s=t[r].max-t[r].min;n[r].max=n[r].min+s}if(!d.projection.isTargetLocked)return void 0===u?w?e.animateAxis(r,t[r],n[r],o(o({},f),{isRelative:y})):(null===(a=(i=e.stopAxisAnimation)[r])||void 0===a||a.call(i),d.setProjectionTargetAxis(r,t[r].min,t[r].max,y)):void d.setVisibility(u===no.Show)}));return d.syncRender(),Promise.all(_).then((function(){e.isAnimatingTree=!1,l&&l(),d.notifyLayoutAnimationComplete()}))}},e}return i(e,t),e.prototype.componentDidMount=function(){var t=this,e=this.props.visualElement;e.animateMotionValue=kr,e.enableLayoutProjection(),this.unsubLayoutReady=e.onLayoutUpdate(this.animate),e.layoutSafeToRemove=function(){return t.safeToRemove()},function(t){for(var e in t)B[e]=t[e]}(co)},e.prototype.componentWillUnmount=function(){var t=this;this.unsubLayoutReady(),fi((function(e){var n,r;return null===(r=(n=t.stopAxisAnimation)[e])||void 0===r?void 0:r.call(n)}))},e.prototype.animateAxis=function(t,e,n,r){var i,o,a=this,s=void 0===r?{}:r,u=s.transition,c=s.isRelative;if(!this.isAnimating[t]||!vo(e,this.currentAnimationTarget[t])){null===(o=(i=this.stopAxisAnimation)[t])||void 0===o||o.call(i),this.isAnimating[t]=!0;var l=this.props.visualElement,h=this.frameTarget[t],f=l.getProjectionAnimationProgress()[t];f.clearListeners(),f.set(0),f.set(0);var p=function(){var r=f.get()/1e3;!function(t,e,n,r){t.min=je(e.min,n.min,r),t.max=je(e.max,n.max,r)}(h,n,e,r),l.setProjectionTargetAxis(t,h.min,h.max,c)};p();var d=f.onChange(p);this.stopAxisAnimation[t]=function(){a.isAnimating[t]=!1,f.stop(),d()},this.currentAnimationTarget[t]=e;var v=u||l.getDefaultTransition()||yo;return kr("x"===t?"layoutX":"layoutY",f,1e3,v&&Sr(v,"layout")).then(this.stopAxisAnimation[t])}},e.prototype.safeToRemove=function(){var t,e;null===(e=(t=this.props).safeToRemove)||void 0===e||e.call(t)},e.prototype.render=function(){return null},e}(c.Component);function ho(t,e){return!po(t)&&!po(e)&&(!vo(t.x,e.x)||!vo(t.y,e.y))}var fo={min:0,max:0};function po(t){return vo(t.x,fo)&&vo(t.y,fo)}function vo(t,e){return t.min===e.min&&t.max===e.max}var yo={duration:.45,ease:[.4,0,.1,1]};function go(t,e,n){return t||!t&&!(e||n)}var mo={layoutReady:function(t){return t.notifyLayoutReady()}};function bo(){var t=new Set;return{add:function(e){return t.add(e)},flush:function(e){var n=void 0===e?mo:e,r=n.layoutReady,i=n.parent;Qi((function(e,n){var o=Array.from(t).sort(ki),a=i?xi(i):[];n((function(){u(u([],s(a)),s(o)).forEach((function(t){return t.resetTransform()}))})),e((function(){o.forEach(Ai)})),n((function(){a.forEach((function(t){return t.restoreTransform()})),o.forEach(r)})),e((function(){o.forEach((function(t){t.isPresent&&(t.presence=eo.Present)}))})),n((function(){Bn.preRender(),Bn.render()})),e((function(){Gn.postRender((function(){return o.forEach(wo)})),t.clear()}))})),Yi()}}}function wo(t){t.prevViewportBox=t.projection.target}var _o=Object(c.createContext)(bo()),To=Object(c.createContext)(bo());function Eo(t){return!!t.forceUpdate}var Io=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.componentDidMount=function(){var t=this.props,e=t.syncLayout,n=t.framerSyncLayout,r=t.visualElement;Eo(e)&&e.register(r),Eo(n)&&n.register(r),r.onUnmount((function(){Eo(e)&&e.remove(r),Eo(n)&&n.remove(r)}))},e.prototype.getSnapshotBeforeUpdate=function(){var t=this.props,e=t.syncLayout,n=t.visualElement;return Eo(e)?e.syncUpdate():(!function(t){t.shouldResetTransform()||(t.prevViewportBox=t.measureViewportBox(!1),t.rebaseProjectionTarget(!1,t.prevViewportBox))}(n),e.add(n)),null},e.prototype.componentDidUpdate=function(){var t=this.props.syncLayout;Eo(t)||t.flush()},e.prototype.render=function(){return null},e}(l.a.Component);var So={measureLayout:function(t){var e=Object(c.useContext)(_o),n=Object(c.useContext)(To);return l.a.createElement(Io,o({},t,{syncLayout:e,framerSyncLayout:n}))},layoutAnimation:function(t){var e=s(w(),2)[1];return c.createElement(lo,o({},t,{safeToRemove:e}))}};function ko(){return{isHydrated:!1,layout:{x:{min:0,max:1},y:{min:0,max:1}},layoutCorrected:{x:{min:0,max:1},y:{min:0,max:1}},treeScale:{x:1,y:1},delta:hi(),deltaFinal:hi(),deltaTransform:""}}var Co=ko();function xo(t,e,n){var r=t.x,i=t.y,o="translate3d("+r.translate/e.x+"px, "+i.translate/e.y+"px, 0) ";if(n){var a=n.rotate,s=n.rotateX,u=n.rotateY;a&&(o+="rotate("+a+") "),s&&(o+="rotateX("+s+") "),u&&(o+="rotateY("+u+") ")}return o+="scale("+r.scale+", "+i.scale+")",n||o!==Oo?o:""}function Ao(t){var e=t.deltaFinal;return 100*e.x.origin+"% "+100*e.y.origin+"% 0"}var Oo=xo(Co.delta,Co.treeScale,{x:1,y:1}),No=["LayoutMeasure","BeforeLayoutMeasure","LayoutUpdate","ViewportBoxUpdate","Update","Render","AnimationComplete","LayoutAnimationComplete","AnimationStart","SetAxisTarget","Unmount"];function Po(t,e,n,r){var i,o,a=t.delta,s=t.layout,u=t.layoutCorrected,c=t.treeScale,l=e.target;o=s,Di((i=u).x,o.x),Di(i.y,o.y),function(t,e,n){var r=n.length;if(r){var i,o;e.x=e.y=1;for(var a=0;a<r;a++)o=(i=n[a]).getLayoutState().delta,e.x*=o.x.scale,e.y*=o.y.scale,Fi(t,o),Ri(i)&&Bi(t,t,i.getLatestValues())}}(u,c,n),Ei(a,u,l,r)}var Ro=function(){function t(){this.children=[],this.isDirty=!1}return t.prototype.add=function(t){Cr(this.children,t),this.isDirty=!0},t.prototype.remove=function(t){xr(this.children,t),this.isDirty=!0},t.prototype.forEach=function(t){this.isDirty&&this.children.sort(ki),this.isDirty=!1,this.children.forEach(t)},t}();var Do=function(t){var e=t.treeType,n=void 0===e?"":e,r=t.build,i=t.getBaseTarget,a=t.makeTargetAnimatable,c=t.measureViewportBox,l=t.render,h=t.readValueFromInstance,f=t.resetTransform,p=t.restoreTransform,d=t.removeValueFromRenderState,v=t.sortNodePosition,y=t.scrapeMotionValuesFromProps;return function(t,e){var g=t.parent,m=t.props,b=t.presenceId,w=t.blockInitialAnimation,_=t.visualState;void 0===e&&(e={});var T,E,I,S,k,C,x=_.latestValues,A=_.renderState,O=function(){var t=No.map((function(){return new Ar})),e={},n={clearAllListeners:function(){return t.forEach((function(t){return t.clear()}))},updatePropListeners:function(t){return No.forEach((function(r){var i;null===(i=e[r])||void 0===i||i.call(e);var o="on"+r,a=t[o];a&&(e[r]=n[o](a))}))}};return t.forEach((function(t,e){n["on"+No[e]]=function(e){return t.add(e)},n["notify"+No[e]]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.notify.apply(t,u([],s(e)))}})),n}(),P={isEnabled:!1,isHydrated:!1,isTargetLocked:!1,target:{x:{min:0,max:1},y:{min:0,max:1}},targetFinal:{x:{min:0,max:1},y:{min:0,max:1}}},R=P,M=x,j=ko(),F=!1,U=new Map,V=new Map,q={},B=o({},x);function z(){T&&(Z.isProjectionReady()&&(Bi(R.targetFinal,R.target,M),Ei(j.deltaFinal,j.layoutCorrected,R.targetFinal,x)),K(),l(T,A))}function K(){var t=x;if(S&&S.isActive()){var n=S.getCrossfadeState(Z);n&&(t=n)}r(Z,A,t,R,j,e,m)}function H(){O.notifyUpdate(x)}function W(){Z.layoutTree.forEach(Mo)}var G=y(m);for(var Q in G){var Y=G[Q];void 0!==x[Q]&&$(Y)&&Y.set(x[Q],!1)}var X=D(m),J=L(m),Z=o(o({treeType:n,current:null,depth:g?g.depth+1:0,parent:g,children:new Set,path:g?u(u([],s(g.path)),[g]):[],layoutTree:g?g.layoutTree:new Ro,presenceId:b,projection:P,variantChildren:J?new Set:void 0,isVisible:void 0,manuallyAnimateOnMount:Boolean(null===g||void 0===g?void 0:g.isMounted()),blockInitialAnimation:w,isMounted:function(){return Boolean(T)},mount:function(t){T=Z.current=t,Z.pointTo(Z),J&&g&&!X&&(C=null===g||void 0===g?void 0:g.addVariantChild(Z)),null===g||void 0===g||g.children.add(Z)},unmount:function(){qn.update(H),qn.render(z),qn.preRender(Z.updateLayoutProjection),V.forEach((function(t){return t()})),Z.stopLayoutAnimation(),Z.layoutTree.remove(Z),null===C||void 0===C||C(),null===g||void 0===g||g.children.delete(Z),null===I||void 0===I||I(),O.clearAllListeners()},addVariantChild:function(t){var e,n=Z.getClosestVariantNode();if(n)return null===(e=n.variantChildren)||void 0===e||e.add(t),function(){return n.variantChildren.delete(t)}},sortNodePosition:function(t){return v&&n===t.treeType?v(Z.getInstance(),t.getInstance()):0},getClosestVariantNode:function(){return J?Z:null===g||void 0===g?void 0:g.getClosestVariantNode()},scheduleUpdateLayoutProjection:g?g.scheduleUpdateLayoutProjection:function(){return Gn.preRender(Z.updateTreeLayoutProjection,!1,!0)},getLayoutId:function(){return m.layoutId},getInstance:function(){return T},getStaticValue:function(t){return x[t]},setStaticValue:function(t,e){return x[t]=e},getLatestValues:function(){return x},setVisibility:function(t){Z.isVisible!==t&&(Z.isVisible=t,Z.scheduleRender())},makeTargetAnimatable:function(t,e){return void 0===e&&(e=!0),a(Z,t,m,e)},addValue:function(t,e){Z.hasValue(t)&&Z.removeValue(t),U.set(t,e),x[t]=e.get(),function(t,e){var n=e.onChange((function(e){x[t]=e,m.onUpdate&&Gn.update(H,!1,!0)})),r=e.onRenderRequest(Z.scheduleRender);V.set(t,(function(){n(),r()}))}(t,e)},removeValue:function(t){var e;U.delete(t),null===(e=V.get(t))||void 0===e||e(),V.delete(t),delete x[t],d(t,A)},hasValue:function(t){return U.has(t)},getValue:function(t,e){var n=U.get(t);return void 0===n&&void 0!==e&&(n=Nr(e),Z.addValue(t,n)),n},forEachValue:function(t){return U.forEach(t)},readValue:function(t){var n;return null!==(n=x[t])&&void 0!==n?n:h(T,t,e)},setBaseTarget:function(t,e){B[t]=e},getBaseTarget:function(t){if(i){var e=i(m,t);if(void 0!==e&&!$(e))return e}return B[t]}},O),{build:function(){return K(),A},scheduleRender:function(){Gn.render(z,!1,!0)},syncRender:z,setProps:function(t){m=t,O.updatePropListeners(t),q=function(t,e,n){var r;for(var i in e){var o=e[i],a=n[i];if($(o))t.addValue(i,o);else if($(a))t.addValue(i,Nr(o));else if(a!==o)if(t.hasValue(i)){var s=t.getValue(i);!s.hasAnimated&&s.set(o)}else t.addValue(i,Nr(null!==(r=t.getStaticValue(i))&&void 0!==r?r:o))}for(var i in n)void 0===e[i]&&t.removeValue(i);return e}(Z,y(m),q)},getProps:function(){return m},getVariant:function(t){var e;return null===(e=m.variants)||void 0===e?void 0:e[t]},getDefaultTransition:function(){return m.transition},getVariantContext:function(t){if(void 0===t&&(t=!1),t)return null===g||void 0===g?void 0:g.getVariantContext();if(!X){var e=(null===g||void 0===g?void 0:g.getVariantContext())||{};return void 0!==m.initial&&(e.initial=m.initial),e}for(var n={},r=0;r<Uo;r++){var i=Fo[r],o=m[i];(N(o)||!1===o)&&(n[i]=o)}return n},enableLayoutProjection:function(){P.isEnabled=!0,Z.layoutTree.add(Z)},lockProjectionTarget:function(){P.isTargetLocked=!0},unlockProjectionTarget:function(){Z.stopLayoutAnimation(),P.isTargetLocked=!1},getLayoutState:function(){return j},setCrossfader:function(t){S=t},isProjectionReady:function(){return P.isEnabled&&P.isHydrated&&j.isHydrated},startLayoutAnimation:function(t,e,n){void 0===n&&(n=!1);var r=Z.getProjectionAnimationProgress()[t],i=n?P.relativeTarget[t]:P.target[t],o=i.min,a=i.max-o;return r.clearListeners(),r.set(o),r.set(o),r.onChange((function(e){Z.setProjectionTargetAxis(t,e,e+a,n)})),Z.animateMotionValue(t,r,0,e)},stopLayoutAnimation:function(){fi((function(t){return Z.getProjectionAnimationProgress()[t].stop()}))},measureViewportBox:function(t){void 0===t&&(t=!0);var n=c(T,e);return t||Hi(n,x),n},getProjectionAnimationProgress:function(){return k||(k={x:Nr(0),y:Nr(0)}),k},setProjectionTargetAxis:function(t,e,n,r){var i;void 0===r&&(r=!1),r?(P.relativeTarget||(P.relativeTarget={x:{min:0,max:1},y:{min:0,max:1}}),i=P.relativeTarget[t]):(P.relativeTarget=void 0,i=P.target[t]),P.isHydrated=!0,i.min=e,i.max=n,F=!0,O.notifySetAxisTarget()},rebaseProjectionTarget:function(t,e){void 0===e&&(e=j.layout);var n=Z.getProjectionAnimationProgress(),r=n.x,i=n.y,o=!P.relativeTarget&&!P.isTargetLocked&&!r.isAnimating()&&!i.isAnimating();(t||o)&&fi((function(t){var n=e[t],r=n.min,i=n.max;Z.setProjectionTargetAxis(t,r,i)}))},notifyLayoutReady:function(t){!function(t){var e=t.getProjectionParent();if(e){var n=Ni(e.getLayoutState().layout,t.getLayoutState().layout);fi((function(e){t.setProjectionTargetAxis(e,n[e].min,n[e].max,!0)}))}else t.rebaseProjectionTarget()}(Z),Z.notifyLayoutUpdate(j.layout,Z.prevViewportBox||j.layout,t)},resetTransform:function(){return f(Z,T,m)},restoreTransform:function(){return p(T,A)},updateLayoutProjection:function(){if(Z.isProjectionReady()){var t=j.delta,e=j.treeScale,n=e.x,r=e.y,i=j.deltaTransform;Po(j,R,Z.path,x),F&&Z.notifyViewportBoxUpdate(R.target,t),F=!1;var o=xo(t,e);o===i&&n===e.x&&r===e.y||Z.scheduleRender(),j.deltaTransform=o}},updateTreeLayoutProjection:function(){Z.layoutTree.forEach(Lo),Gn.preRender(W,!1,!0)},getProjectionParent:function(){if(void 0===E){for(var t=!1,e=Z.path.length-1;e>=0;e--){var n=Z.path[e];if(n.projection.isEnabled){t=n;break}}E=t}return E},resolveRelativeTargetBox:function(){var t=Z.getProjectionParent();if(P.relativeTarget&&t&&(function(t,e){Si(t.target.x,t.relativeTarget.x,e.target.x),Si(t.target.y,t.relativeTarget.y,e.target.y)}(P,t.projection),Ri(t))){var e=P.target;Bi(e,e,t.getLatestValues())}},shouldResetTransform:function(){return Boolean(m._layoutResetTransform)},pointTo:function(t){R=t.projection,M=t.getLatestValues(),null===I||void 0===I||I(),I=Te(t.onSetAxisTarget(Z.scheduleUpdateLayoutProjection),t.onLayoutAnimationComplete((function(){var t;Z.isPresent?Z.presence=eo.Present:null===(t=Z.layoutSafeToRemove)||void 0===t||t.call(Z)})))},isPresent:!0,presence:eo.Entering});return Z}};function Lo(t){t.resolveRelativeTargetBox()}function Mo(t){t.updateLayoutProjection()}var jo,Fo=u(["initial"],s(Kr)),Uo=Fo.length,Vo=new Set(["width","height","top","left","right","bottom","x","y"]),qo=function(t){return Vo.has(t)},Bo=function(t,e){t.set(e,!1),t.set(e)},zo=function(t){return t===vt||t===ht};!function(t){t.width="width",t.height="height",t.left="left",t.right="right",t.top="top",t.bottom="bottom"}(jo||(jo={}));var Ko=function(t,e){return parseFloat(t.split(", ")[e])},Ho=function(t,e){return function(n,r){var i=r.transform;if("none"===i||!i)return 0;var o=i.match(/^matrix3d\((.+)\)$/);if(o)return Ko(o[1],e);var a=i.match(/^matrix\((.+)\)$/);return a?Ko(a[1],t):0}},Wo=new Set(["x","y","z"]),Go=K.filter((function(t){return!Wo.has(t)}));var Qo={width:function(t){var e=t.x;return e.max-e.min},height:function(t){var e=t.y;return e.max-e.min},top:function(t,e){var n=e.top;return parseFloat(n)},left:function(t,e){var n=e.left;return parseFloat(n)},bottom:function(t,e){var n=t.y,r=e.top;return parseFloat(r)+(n.max-n.min)},right:function(t,e){var n=t.x,r=e.left;return parseFloat(r)+(n.max-n.min)},x:Ho(4,13),y:Ho(5,14)},Yo=function(t,e,n,r){void 0===n&&(n={}),void 0===r&&(r={}),e=o({},e),r=o({},r);var i=Object.keys(e).filter(qo),a=[],u=!1,c=[];if(i.forEach((function(i){var o=t.getValue(i);if(t.hasValue(i)){var s,l=n[i],h=e[i],f=Dr(l);if(Ht(h))for(var p=h.length,d=null===h[0]?1:0;d<p;d++)s?Dr(h[d]):(s=Dr(h[d]))===f||zo(f)&&zo(s);else s=Dr(h);if(f!==s)if(zo(f)&&zo(s)){var v=o.get();"string"===typeof v&&o.set(parseFloat(v)),"string"===typeof h?e[i]=parseFloat(h):Array.isArray(h)&&s===ht&&(e[i]=h.map(parseFloat))}else(null===f||void 0===f?void 0:f.transform)&&(null===s||void 0===s?void 0:s.transform)&&(0===l||0===h)?0===l?o.set(s.transform(l)):e[i]=f.transform(h):(u||(a=function(t){var e=[];return Go.forEach((function(n){var r=t.getValue(n);void 0!==r&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),e.length&&t.syncRender(),e}(t),u=!0),c.push(i),r[i]=void 0!==r[i]?r[i]:e[i],Bo(o,h))}})),c.length){var l=function(t,e,n){var r=e.measureViewportBox(),i=e.getInstance(),o=getComputedStyle(i),a=o.display,s={top:o.top,left:o.left,bottom:o.bottom,right:o.right,transform:o.transform};"none"===a&&e.setStaticValue("display",t.display||"block"),e.syncRender();var u=e.measureViewportBox();return n.forEach((function(n){var i=e.getValue(n);Bo(i,Qo[n](r,s)),t[n]=Qo[n](u,o)})),t}(e,t,c);return a.length&&a.forEach((function(e){var n=s(e,2),r=n[0],i=n[1];t.getValue(r).set(i)})),t.syncRender(),{target:l,transitionEnd:r}}return{target:e,transitionEnd:r}};function Xo(t,e,n,r){return function(t){return Object.keys(t).some(qo)}(e)?Yo(t,e,n,r):{target:e,transitionEnd:r}}var $o=function(t,e,n,r){var i=function(t,e,n){var r,i=a(e,[]),s=t.getInstance();if(!(s instanceof HTMLElement))return{target:i,transitionEnd:n};for(var u in n&&(n=o({},n)),t.forEachValue((function(t){var e=t.get();if(io(e)){var n=ao(e,s);n&&t.set(n)}})),i){var c=i[u];if(io(c)){var l=ao(c,s);l&&(i[u]=l,n&&(null!==(r=n[u])&&void 0!==r||(n[u]=c)))}}return{target:i,transitionEnd:n}}(t,e,r);return Xo(t,e=i.target,n,r=i.transitionEnd)};var Jo={treeType:"dom",readValueFromInstance:function(t,e){if(G(e)){var n=mr(e);return n&&n.default||0}var r,i=(r=t,window.getComputedStyle(r));return(Z(e)?i.getPropertyValue(e):i[e])||0},sortNodePosition:function(t,e){return 2&t.compareDocumentPosition(e)?1:-1},getBaseTarget:function(t,e){var n;return null===(n=t.style)||void 0===n?void 0:n[e]},measureViewportBox:function(t,e){return mi(t,e.transformPagePoint)},resetTransform:function(t,e,n){var r=n.transformTemplate;e.style.transform=r?r({},""):"none",t.scheduleRender()},restoreTransform:function(t,e){t.style.transform=e.style.transform},removeValueFromRenderState:function(t,e){var n=e.vars,r=e.style;delete n[t],delete r[t]},makeTargetAnimatable:function(t,e,n,r){var i=n.transformValues;void 0===r&&(r=!0);var s=e.transition,u=e.transitionEnd,c=a(e,["transition","transitionEnd"]),l=function(t,e,n){var r,i,o={};for(var a in t)o[a]=null!==(r=Ur(a,e))&&void 0!==r?r:null===(i=n.getValue(a))||void 0===i?void 0:i.get();return o}(c,s||{},t);if(i&&(u&&(u=i(u)),c&&(c=i(c)),l&&(l=i(l))),r){!function(t,e,n){var r,i,o,a,s=Object.keys(e).filter((function(e){return!t.hasValue(e)})),u=s.length;if(u)for(var c=0;c<u;c++){var l=s[c],h=e[l],f=null;Array.isArray(h)&&(f=h[0]),null===f&&(f=null!==(i=null!==(r=n[l])&&void 0!==r?r:t.readValue(l))&&void 0!==i?i:e[l]),void 0!==f&&null!==f&&("string"===typeof f&&/^\-?\d*\.?\d+$/.test(f)?f=parseFloat(f):!Mr(f)&&en.test(h)&&(f=br(l,h)),t.addValue(l,Nr(f)),null!==(o=(a=n)[l])&&void 0!==o||(a[l]=f),t.setBaseTarget(l,f))}}(t,c,l);var h=$o(t,c,l,u);u=h.transitionEnd,c=h.target}return o({transition:s,transitionEnd:u},c)},scrapeMotionValuesFromProps:Bt,build:function(t,e,n,r,i,o,a){void 0!==t.isVisible&&(e.style.visibility=t.isVisible?"visible":"hidden");var s=r.isEnabled&&i.isHydrated;wt(e,n,r,i,o,a.transformTemplate,s?xo:void 0,s?Ao:void 0)},render:Ut},Zo=Do(Jo),ta=Do(o(o({},Jo),{getBaseTarget:function(t,e){return t[e]},readValueFromInstance:function(t,e){var n;return G(e)?(null===(n=mr(e))||void 0===n?void 0:n.default)||0:(e=Vt.has(e)?e:Ft(e),t.getAttribute(e))},scrapeMotionValuesFromProps:zt,build:function(t,e,n,r,i,o,a){var s=r.isEnabled&&i.isHydrated;Rt(e,n,r,i,o,a.transformTemplate,s?xo:void 0,s?Ao:void 0)},render:qt})),ea=function(t,e){return q(t)?ta(e,{enableHardwareAcceleration:!1}):Zo(e,{enableHardwareAcceleration:!0})},na=o(o(o(o({},Xr),Ie),ro),So),ra=U((function(t,e){return Zt(t,e,na,ea)}))}]]);
//# sourceMappingURL=2.1e22ef70.chunk.js.map